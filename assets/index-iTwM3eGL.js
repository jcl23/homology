var W5=Object.defineProperty;var j5=t=>{throw TypeError(t)};var G5=(t,e,n)=>e in t?W5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var To=(t,e,n)=>G5(t,typeof e!="symbol"?e+"":e,n);var x2=(t,e,n)=>e.has(t)?j5("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);function X5(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Y5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Us(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yL={exports:{}},cx={},vL={exports:{}},Ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jp=Symbol.for("react.element"),q5=Symbol.for("react.portal"),K5=Symbol.for("react.fragment"),Z5=Symbol.for("react.strict_mode"),J5=Symbol.for("react.profiler"),Q5=Symbol.for("react.provider"),eH=Symbol.for("react.context"),tH=Symbol.for("react.forward_ref"),nH=Symbol.for("react.suspense"),rH=Symbol.for("react.memo"),iH=Symbol.for("react.lazy"),_2=Symbol.iterator;function oH(t){return t===null||typeof t!="object"?null:(t=_2&&t[_2]||t["@@iterator"],typeof t=="function"?t:null)}var xL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_L=Object.assign,SL={};function rd(t,e,n){this.props=t,this.context=e,this.refs=SL,this.updater=n||xL}rd.prototype.isReactComponent={};rd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};rd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function wL(){}wL.prototype=rd.prototype;function VE(t,e,n){this.props=t,this.context=e,this.refs=SL,this.updater=n||xL}var $E=VE.prototype=new wL;$E.constructor=VE;_L($E,rd.prototype);$E.isPureReactComponent=!0;var S2=Array.isArray,bL=Object.prototype.hasOwnProperty,WE={current:null},EL={key:!0,ref:!0,__self:!0,__source:!0};function ML(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)bL.call(e,r)&&!EL.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Jp,type:t,key:o,ref:s,props:i,_owner:WE.current}}function sH(t,e){return{$$typeof:Jp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jE(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jp}function aH(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var w2=/\/+/g;function Y_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?aH(""+t.key):e.toString(36)}function ly(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Jp:case q5:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Y_(s,0):r,S2(i)?(n="",t!=null&&(n=t.replace(w2,"$&/")+"/"),ly(i,e,n,"",function(c){return c})):i!=null&&(jE(i)&&(i=sH(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(w2,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",S2(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+Y_(o,a);s+=ly(o,e,n,l,i)}else if(l=oH(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+Y_(o,a++),s+=ly(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Rg(t,e,n){if(t==null)return t;var r=[],i=0;return ly(t,r,"","",function(o){return e.call(n,o,i++)}),r}function lH(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ci={current:null},cy={transition:null},cH={ReactCurrentDispatcher:ci,ReactCurrentBatchConfig:cy,ReactCurrentOwner:WE};function TL(){throw Error("act(...) is not supported in production builds of React.")}Ft.Children={map:Rg,forEach:function(t,e,n){Rg(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Rg(t,function(){e++}),e},toArray:function(t){return Rg(t,function(e){return e})||[]},only:function(t){if(!jE(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ft.Component=rd;Ft.Fragment=K5;Ft.Profiler=J5;Ft.PureComponent=VE;Ft.StrictMode=Z5;Ft.Suspense=nH;Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cH;Ft.act=TL;Ft.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_L({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=WE.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)bL.call(e,l)&&!EL.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Jp,type:t.type,key:i,ref:o,props:r,_owner:s}};Ft.createContext=function(t){return t={$$typeof:eH,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Q5,_context:t},t.Consumer=t};Ft.createElement=ML;Ft.createFactory=function(t){var e=ML.bind(null,t);return e.type=t,e};Ft.createRef=function(){return{current:null}};Ft.forwardRef=function(t){return{$$typeof:tH,render:t}};Ft.isValidElement=jE;Ft.lazy=function(t){return{$$typeof:iH,_payload:{_status:-1,_result:t},_init:lH}};Ft.memo=function(t,e){return{$$typeof:rH,type:t,compare:e===void 0?null:e}};Ft.startTransition=function(t){var e=cy.transition;cy.transition={};try{t()}finally{cy.transition=e}};Ft.unstable_act=TL;Ft.useCallback=function(t,e){return ci.current.useCallback(t,e)};Ft.useContext=function(t){return ci.current.useContext(t)};Ft.useDebugValue=function(){};Ft.useDeferredValue=function(t){return ci.current.useDeferredValue(t)};Ft.useEffect=function(t,e){return ci.current.useEffect(t,e)};Ft.useId=function(){return ci.current.useId()};Ft.useImperativeHandle=function(t,e,n){return ci.current.useImperativeHandle(t,e,n)};Ft.useInsertionEffect=function(t,e){return ci.current.useInsertionEffect(t,e)};Ft.useLayoutEffect=function(t,e){return ci.current.useLayoutEffect(t,e)};Ft.useMemo=function(t,e){return ci.current.useMemo(t,e)};Ft.useReducer=function(t,e,n){return ci.current.useReducer(t,e,n)};Ft.useRef=function(t){return ci.current.useRef(t)};Ft.useState=function(t){return ci.current.useState(t)};Ft.useSyncExternalStore=function(t,e,n){return ci.current.useSyncExternalStore(t,e,n)};Ft.useTransition=function(){return ci.current.useTransition()};Ft.version="18.3.1";vL.exports=Ft;var R=vL.exports;const $=Us(R),Bw=X5({__proto__:null,default:$},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uH=R,fH=Symbol.for("react.element"),dH=Symbol.for("react.fragment"),hH=Object.prototype.hasOwnProperty,pH=uH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mH={key:!0,ref:!0,__self:!0,__source:!0};function CL(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)hH.call(e,r)&&!mH.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:fH,type:t,key:o,ref:s,props:i,_owner:pH.current}}cx.Fragment=dH;cx.jsx=CL;cx.jsxs=CL;yL.exports=cx;var k=yL.exports,AL={exports:{}},qi={},PL={exports:{}},RL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,G){var X=D.length;D.push(G);e:for(;0<X;){var ne=X-1>>>1,pe=D[ne];if(0<i(pe,G))D[ne]=G,D[X]=pe,X=ne;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var G=D[0],X=D.pop();if(X!==G){D[0]=X;e:for(var ne=0,pe=D.length,De=pe>>>1;ne<De;){var ae=2*(ne+1)-1,_e=D[ae],Re=ae+1,Ae=D[Re];if(0>i(_e,X))Re<pe&&0>i(Ae,_e)?(D[ne]=Ae,D[Re]=X,ne=Re):(D[ne]=_e,D[ae]=X,ne=ae);else if(Re<pe&&0>i(Ae,X))D[ne]=Ae,D[Re]=X,ne=Re;else break e}}return G}function i(D,G){var X=D.sortIndex-G.sortIndex;return X!==0?X:D.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,d=null,p=3,m=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=D)r(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(c)}}function M(D){if(v=!1,w(D),!g)if(n(l)!==null)g=!0,J(A);else{var G=n(c);G!==null&&Q(M,G.startTime-D)}}function A(D,G){g=!1,v&&(v=!1,y(N),N=-1),m=!0;var X=p;try{for(w(G),d=n(l);d!==null&&(!(d.expirationTime>G)||D&&!L());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,p=d.priorityLevel;var pe=ne(d.expirationTime<=G);G=t.unstable_now(),typeof pe=="function"?d.callback=pe:d===n(l)&&r(l),w(G)}else r(l);d=n(l)}if(d!==null)var De=!0;else{var ae=n(c);ae!==null&&Q(M,ae.startTime-G),De=!1}return De}finally{d=null,p=X,m=!1}}var C=!1,P=null,N=-1,O=5,E=-1;function L(){return!(t.unstable_now()-E<O)}function H(){if(P!==null){var D=t.unstable_now();E=D;var G=!0;try{G=P(!0,D)}finally{G?W():(C=!1,P=null)}}else C=!1}var W;if(typeof _=="function")W=function(){_(H)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,K=Y.port2;Y.port1.onmessage=H,W=function(){K.postMessage(null)}}else W=function(){x(H,0)};function J(D){P=D,C||(C=!0,W())}function Q(D,G){N=x(function(){D(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,J(A))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var X=p;p=G;try{return D()}finally{p=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,G){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var X=p;p=D;try{return G()}finally{p=X}},t.unstable_scheduleCallback=function(D,G,X){var ne=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ne+X:ne):X=ne,D){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=X+pe,D={id:u++,callback:G,priorityLevel:D,startTime:X,expirationTime:pe,sortIndex:-1},X>ne?(D.sortIndex=X,e(c,D),n(l)===null&&D===n(c)&&(v?(y(N),N=-1):v=!0,Q(M,X-ne))):(D.sortIndex=pe,e(l,D),g||m||(g=!0,J(A))),D},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(D){var G=p;return function(){var X=p;p=G;try{return D.apply(this,arguments)}finally{p=X}}}})(RL);PL.exports=RL;var gH=PL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yH=R,Yi=gH;function Le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var IL=new Set,ep={};function $c(t,e){Lf(t,e),Lf(t+"Capture",e)}function Lf(t,e){for(ep[t]=e,t=0;t<e.length;t++)IL.add(e[t])}var xa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hw=Object.prototype.hasOwnProperty,vH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,b2={},E2={};function xH(t){return Hw.call(E2,t)?!0:Hw.call(b2,t)?!1:vH.test(t)?E2[t]=!0:(b2[t]=!0,!1)}function _H(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function SH(t,e,n,r){if(e===null||typeof e>"u"||_H(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ui(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Rr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rr[t]=new ui(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rr[e]=new ui(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rr[t]=new ui(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rr[t]=new ui(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rr[t]=new ui(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rr[t]=new ui(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rr[t]=new ui(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rr[t]=new ui(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rr[t]=new ui(t,5,!1,t.toLowerCase(),null,!1,!1)});var GE=/[\-:]([a-z])/g;function XE(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(GE,XE);Rr[e]=new ui(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(GE,XE);Rr[e]=new ui(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(GE,XE);Rr[e]=new ui(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rr[t]=new ui(t,1,!1,t.toLowerCase(),null,!1,!1)});Rr.xlinkHref=new ui("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rr[t]=new ui(t,1,!1,t.toLowerCase(),null,!0,!0)});function YE(t,e,n,r){var i=Rr.hasOwnProperty(e)?Rr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(SH(e,n,i,r)&&(n=null),r||i===null?xH(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ia=yH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ig=Symbol.for("react.element"),ef=Symbol.for("react.portal"),tf=Symbol.for("react.fragment"),qE=Symbol.for("react.strict_mode"),Vw=Symbol.for("react.profiler"),OL=Symbol.for("react.provider"),LL=Symbol.for("react.context"),KE=Symbol.for("react.forward_ref"),$w=Symbol.for("react.suspense"),Ww=Symbol.for("react.suspense_list"),ZE=Symbol.for("react.memo"),el=Symbol.for("react.lazy"),kL=Symbol.for("react.offscreen"),M2=Symbol.iterator;function $d(t){return t===null||typeof t!="object"?null:(t=M2&&t[M2]||t["@@iterator"],typeof t=="function"?t:null)}var Dn=Object.assign,q_;function wh(t){if(q_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);q_=e&&e[1]||""}return`
`+q_+t}var K_=!1;function Z_(t,e){if(!t||K_)return"";K_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{K_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?wh(t):""}function wH(t){switch(t.tag){case 5:return wh(t.type);case 16:return wh("Lazy");case 13:return wh("Suspense");case 19:return wh("SuspenseList");case 0:case 2:case 15:return t=Z_(t.type,!1),t;case 11:return t=Z_(t.type.render,!1),t;case 1:return t=Z_(t.type,!0),t;default:return""}}function jw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case tf:return"Fragment";case ef:return"Portal";case Vw:return"Profiler";case qE:return"StrictMode";case $w:return"Suspense";case Ww:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case LL:return(t.displayName||"Context")+".Consumer";case OL:return(t._context.displayName||"Context")+".Provider";case KE:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ZE:return e=t.displayName||null,e!==null?e:jw(t.type)||"Memo";case el:e=t._payload,t=t._init;try{return jw(t(e))}catch{}}return null}function bH(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jw(e);case 8:return e===qE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function NL(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function EH(t){var e=NL(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Og(t){t._valueTracker||(t._valueTracker=EH(t))}function DL(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=NL(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ny(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gw(t,e){var n=e.checked;return Dn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function T2(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=yl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function UL(t,e){e=e.checked,e!=null&&YE(t,"checked",e,!1)}function Xw(t,e){UL(t,e);var n=yl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Yw(t,e.type,n):e.hasOwnProperty("defaultValue")&&Yw(t,e.type,yl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function C2(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Yw(t,e,n){(e!=="number"||Ny(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var bh=Array.isArray;function _f(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+yl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function qw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Le(91));return Dn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function A2(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Le(92));if(bh(n)){if(1<n.length)throw Error(Le(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:yl(n)}}function FL(t,e){var n=yl(e.value),r=yl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function P2(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function zL(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?zL(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lg,BL=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Lg=Lg||document.createElement("div"),Lg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function tp(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ih={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MH=["Webkit","ms","Moz","O"];Object.keys(Ih).forEach(function(t){MH.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ih[e]=Ih[t]})});function HL(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ih.hasOwnProperty(t)&&Ih[t]?(""+e).trim():e+"px"}function VL(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=HL(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var TH=Dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zw(t,e){if(e){if(TH[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Le(62))}}function Jw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qw=null;function JE(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var eb=null,Sf=null,wf=null;function R2(t){if(t=tm(t)){if(typeof eb!="function")throw Error(Le(280));var e=t.stateNode;e&&(e=px(e),eb(t.stateNode,t.type,e))}}function $L(t){Sf?wf?wf.push(t):wf=[t]:Sf=t}function WL(){if(Sf){var t=Sf,e=wf;if(wf=Sf=null,R2(t),e)for(t=0;t<e.length;t++)R2(e[t])}}function jL(t,e){return t(e)}function GL(){}var J_=!1;function XL(t,e,n){if(J_)return t(e,n);J_=!0;try{return jL(t,e,n)}finally{J_=!1,(Sf!==null||wf!==null)&&(GL(),WL())}}function np(t,e){var n=t.stateNode;if(n===null)return null;var r=px(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Le(231,e,typeof n));return n}var tb=!1;if(xa)try{var Wd={};Object.defineProperty(Wd,"passive",{get:function(){tb=!0}}),window.addEventListener("test",Wd,Wd),window.removeEventListener("test",Wd,Wd)}catch{tb=!1}function CH(t,e,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Oh=!1,Dy=null,Uy=!1,nb=null,AH={onError:function(t){Oh=!0,Dy=t}};function PH(t,e,n,r,i,o,s,a,l){Oh=!1,Dy=null,CH.apply(AH,arguments)}function RH(t,e,n,r,i,o,s,a,l){if(PH.apply(this,arguments),Oh){if(Oh){var c=Dy;Oh=!1,Dy=null}else throw Error(Le(198));Uy||(Uy=!0,nb=c)}}function Wc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function YL(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function I2(t){if(Wc(t)!==t)throw Error(Le(188))}function IH(t){var e=t.alternate;if(!e){if(e=Wc(t),e===null)throw Error(Le(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return I2(i),t;if(o===r)return I2(i),e;o=o.sibling}throw Error(Le(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(Le(189))}}if(n.alternate!==r)throw Error(Le(190))}if(n.tag!==3)throw Error(Le(188));return n.stateNode.current===n?t:e}function qL(t){return t=IH(t),t!==null?KL(t):null}function KL(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=KL(t);if(e!==null)return e;t=t.sibling}return null}var ZL=Yi.unstable_scheduleCallback,O2=Yi.unstable_cancelCallback,OH=Yi.unstable_shouldYield,LH=Yi.unstable_requestPaint,Xn=Yi.unstable_now,kH=Yi.unstable_getCurrentPriorityLevel,QE=Yi.unstable_ImmediatePriority,JL=Yi.unstable_UserBlockingPriority,Fy=Yi.unstable_NormalPriority,NH=Yi.unstable_LowPriority,QL=Yi.unstable_IdlePriority,ux=null,Ps=null;function DH(t){if(Ps&&typeof Ps.onCommitFiberRoot=="function")try{Ps.onCommitFiberRoot(ux,t,void 0,(t.current.flags&128)===128)}catch{}}var Bo=Math.clz32?Math.clz32:zH,UH=Math.log,FH=Math.LN2;function zH(t){return t>>>=0,t===0?32:31-(UH(t)/FH|0)|0}var kg=64,Ng=4194304;function Eh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function zy(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Eh(a):(o&=s,o!==0&&(r=Eh(o)))}else s=n&~i,s!==0?r=Eh(s):o!==0&&(r=Eh(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Bo(e),i=1<<n,r|=t[n],e&=~i;return r}function BH(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HH(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Bo(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=BH(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function rb(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ek(){var t=kg;return kg<<=1,!(kg&4194240)&&(kg=64),t}function Q_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bo(e),t[e]=n}function VH(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Bo(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function eM(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Bo(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var tn=0;function tk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var nk,tM,rk,ik,ok,ib=!1,Dg=[],ll=null,cl=null,ul=null,rp=new Map,ip=new Map,nl=[],$H="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function L2(t,e){switch(t){case"focusin":case"focusout":ll=null;break;case"dragenter":case"dragleave":cl=null;break;case"mouseover":case"mouseout":ul=null;break;case"pointerover":case"pointerout":rp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ip.delete(e.pointerId)}}function jd(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=tm(e),e!==null&&tM(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function WH(t,e,n,r,i){switch(e){case"focusin":return ll=jd(ll,t,e,n,r,i),!0;case"dragenter":return cl=jd(cl,t,e,n,r,i),!0;case"mouseover":return ul=jd(ul,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return rp.set(o,jd(rp.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ip.set(o,jd(ip.get(o)||null,t,e,n,r,i)),!0}return!1}function sk(t){var e=uc(t.target);if(e!==null){var n=Wc(e);if(n!==null){if(e=n.tag,e===13){if(e=YL(n),e!==null){t.blockedOn=e,ok(t.priority,function(){rk(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function uy(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ob(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Qw=r,n.target.dispatchEvent(r),Qw=null}else return e=tm(n),e!==null&&tM(e),t.blockedOn=n,!1;e.shift()}return!0}function k2(t,e,n){uy(t)&&n.delete(e)}function jH(){ib=!1,ll!==null&&uy(ll)&&(ll=null),cl!==null&&uy(cl)&&(cl=null),ul!==null&&uy(ul)&&(ul=null),rp.forEach(k2),ip.forEach(k2)}function Gd(t,e){t.blockedOn===e&&(t.blockedOn=null,ib||(ib=!0,Yi.unstable_scheduleCallback(Yi.unstable_NormalPriority,jH)))}function op(t){function e(i){return Gd(i,t)}if(0<Dg.length){Gd(Dg[0],t);for(var n=1;n<Dg.length;n++){var r=Dg[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ll!==null&&Gd(ll,t),cl!==null&&Gd(cl,t),ul!==null&&Gd(ul,t),rp.forEach(e),ip.forEach(e),n=0;n<nl.length;n++)r=nl[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<nl.length&&(n=nl[0],n.blockedOn===null);)sk(n),n.blockedOn===null&&nl.shift()}var bf=Ia.ReactCurrentBatchConfig,By=!0;function GH(t,e,n,r){var i=tn,o=bf.transition;bf.transition=null;try{tn=1,nM(t,e,n,r)}finally{tn=i,bf.transition=o}}function XH(t,e,n,r){var i=tn,o=bf.transition;bf.transition=null;try{tn=4,nM(t,e,n,r)}finally{tn=i,bf.transition=o}}function nM(t,e,n,r){if(By){var i=ob(t,e,n,r);if(i===null)cS(t,e,r,Hy,n),L2(t,r);else if(WH(i,t,e,n,r))r.stopPropagation();else if(L2(t,r),e&4&&-1<$H.indexOf(t)){for(;i!==null;){var o=tm(i);if(o!==null&&nk(o),o=ob(t,e,n,r),o===null&&cS(t,e,r,Hy,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else cS(t,e,r,null,n)}}var Hy=null;function ob(t,e,n,r){if(Hy=null,t=JE(r),t=uc(t),t!==null)if(e=Wc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=YL(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hy=t,null}function ak(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kH()){case QE:return 1;case JL:return 4;case Fy:case NH:return 16;case QL:return 536870912;default:return 16}default:return 16}}var sl=null,rM=null,fy=null;function lk(){if(fy)return fy;var t,e=rM,n=e.length,r,i="value"in sl?sl.value:sl.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return fy=i.slice(t,1<r?1-r:void 0)}function dy(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ug(){return!0}function N2(){return!1}function Ki(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ug:N2,this.isPropagationStopped=N2,this}return Dn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ug)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ug)},persist:function(){},isPersistent:Ug}),e}var id={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},iM=Ki(id),em=Dn({},id,{view:0,detail:0}),YH=Ki(em),eS,tS,Xd,fx=Dn({},em,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oM,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xd&&(Xd&&t.type==="mousemove"?(eS=t.screenX-Xd.screenX,tS=t.screenY-Xd.screenY):tS=eS=0,Xd=t),eS)},movementY:function(t){return"movementY"in t?t.movementY:tS}}),D2=Ki(fx),qH=Dn({},fx,{dataTransfer:0}),KH=Ki(qH),ZH=Dn({},em,{relatedTarget:0}),nS=Ki(ZH),JH=Dn({},id,{animationName:0,elapsedTime:0,pseudoElement:0}),QH=Ki(JH),e6=Dn({},id,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),t6=Ki(e6),n6=Dn({},id,{data:0}),U2=Ki(n6),r6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function s6(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=o6[t])?!!e[t]:!1}function oM(){return s6}var a6=Dn({},em,{key:function(t){if(t.key){var e=r6[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=dy(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?i6[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oM,charCode:function(t){return t.type==="keypress"?dy(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?dy(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),l6=Ki(a6),c6=Dn({},fx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),F2=Ki(c6),u6=Dn({},em,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oM}),f6=Ki(u6),d6=Dn({},id,{propertyName:0,elapsedTime:0,pseudoElement:0}),h6=Ki(d6),p6=Dn({},fx,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),m6=Ki(p6),g6=[9,13,27,32],sM=xa&&"CompositionEvent"in window,Lh=null;xa&&"documentMode"in document&&(Lh=document.documentMode);var y6=xa&&"TextEvent"in window&&!Lh,ck=xa&&(!sM||Lh&&8<Lh&&11>=Lh),z2=" ",B2=!1;function uk(t,e){switch(t){case"keyup":return g6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var nf=!1;function v6(t,e){switch(t){case"compositionend":return fk(e);case"keypress":return e.which!==32?null:(B2=!0,z2);case"textInput":return t=e.data,t===z2&&B2?null:t;default:return null}}function x6(t,e){if(nf)return t==="compositionend"||!sM&&uk(t,e)?(t=lk(),fy=rM=sl=null,nf=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ck&&e.locale!=="ko"?null:e.data;default:return null}}var _6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function H2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_6[t.type]:e==="textarea"}function dk(t,e,n,r){$L(r),e=Vy(e,"onChange"),0<e.length&&(n=new iM("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var kh=null,sp=null;function S6(t){bk(t,0)}function dx(t){var e=sf(t);if(DL(e))return t}function w6(t,e){if(t==="change")return e}var hk=!1;if(xa){var rS;if(xa){var iS="oninput"in document;if(!iS){var V2=document.createElement("div");V2.setAttribute("oninput","return;"),iS=typeof V2.oninput=="function"}rS=iS}else rS=!1;hk=rS&&(!document.documentMode||9<document.documentMode)}function $2(){kh&&(kh.detachEvent("onpropertychange",pk),sp=kh=null)}function pk(t){if(t.propertyName==="value"&&dx(sp)){var e=[];dk(e,sp,t,JE(t)),XL(S6,e)}}function b6(t,e,n){t==="focusin"?($2(),kh=e,sp=n,kh.attachEvent("onpropertychange",pk)):t==="focusout"&&$2()}function E6(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dx(sp)}function M6(t,e){if(t==="click")return dx(e)}function T6(t,e){if(t==="input"||t==="change")return dx(e)}function C6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $o=typeof Object.is=="function"?Object.is:C6;function ap(t,e){if($o(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Hw.call(e,i)||!$o(t[i],e[i]))return!1}return!0}function W2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function j2(t,e){var n=W2(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=W2(n)}}function mk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?mk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gk(){for(var t=window,e=Ny();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ny(t.document)}return e}function aM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function A6(t){var e=gk(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&mk(n.ownerDocument.documentElement,n)){if(r!==null&&aM(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=j2(n,o);var s=j2(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var P6=xa&&"documentMode"in document&&11>=document.documentMode,rf=null,sb=null,Nh=null,ab=!1;function G2(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ab||rf==null||rf!==Ny(r)||(r=rf,"selectionStart"in r&&aM(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Nh&&ap(Nh,r)||(Nh=r,r=Vy(sb,"onSelect"),0<r.length&&(e=new iM("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=rf)))}function Fg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var of={animationend:Fg("Animation","AnimationEnd"),animationiteration:Fg("Animation","AnimationIteration"),animationstart:Fg("Animation","AnimationStart"),transitionend:Fg("Transition","TransitionEnd")},oS={},yk={};xa&&(yk=document.createElement("div").style,"AnimationEvent"in window||(delete of.animationend.animation,delete of.animationiteration.animation,delete of.animationstart.animation),"TransitionEvent"in window||delete of.transitionend.transition);function hx(t){if(oS[t])return oS[t];if(!of[t])return t;var e=of[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in yk)return oS[t]=e[n];return t}var vk=hx("animationend"),xk=hx("animationiteration"),_k=hx("animationstart"),Sk=hx("transitionend"),wk=new Map,X2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Al(t,e){wk.set(t,e),$c(e,[t])}for(var sS=0;sS<X2.length;sS++){var aS=X2[sS],R6=aS.toLowerCase(),I6=aS[0].toUpperCase()+aS.slice(1);Al(R6,"on"+I6)}Al(vk,"onAnimationEnd");Al(xk,"onAnimationIteration");Al(_k,"onAnimationStart");Al("dblclick","onDoubleClick");Al("focusin","onFocus");Al("focusout","onBlur");Al(Sk,"onTransitionEnd");Lf("onMouseEnter",["mouseout","mouseover"]);Lf("onMouseLeave",["mouseout","mouseover"]);Lf("onPointerEnter",["pointerout","pointerover"]);Lf("onPointerLeave",["pointerout","pointerover"]);$c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$c("onBeforeInput",["compositionend","keypress","textInput","paste"]);$c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),O6=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mh));function Y2(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,RH(r,e,void 0,t),t.currentTarget=null}function bk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Y2(i,a,c),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Y2(i,a,c),o=l}}}if(Uy)throw t=nb,Uy=!1,nb=null,t}function xn(t,e){var n=e[db];n===void 0&&(n=e[db]=new Set);var r=t+"__bubble";n.has(r)||(Ek(e,t,2,!1),n.add(r))}function lS(t,e,n){var r=0;e&&(r|=4),Ek(n,t,r,e)}var zg="_reactListening"+Math.random().toString(36).slice(2);function lp(t){if(!t[zg]){t[zg]=!0,IL.forEach(function(n){n!=="selectionchange"&&(O6.has(n)||lS(n,!1,t),lS(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zg]||(e[zg]=!0,lS("selectionchange",!1,e))}}function Ek(t,e,n,r){switch(ak(e)){case 1:var i=GH;break;case 4:i=XH;break;default:i=nM}n=i.bind(null,e,n,t),i=void 0,!tb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function cS(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=uc(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}XL(function(){var c=o,u=JE(n),d=[];e:{var p=wk.get(t);if(p!==void 0){var m=iM,g=t;switch(t){case"keypress":if(dy(n)===0)break e;case"keydown":case"keyup":m=l6;break;case"focusin":g="focus",m=nS;break;case"focusout":g="blur",m=nS;break;case"beforeblur":case"afterblur":m=nS;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=D2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=KH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=f6;break;case vk:case xk:case _k:m=QH;break;case Sk:m=h6;break;case"scroll":m=YH;break;case"wheel":m=m6;break;case"copy":case"cut":case"paste":m=t6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=F2}var v=(e&4)!==0,x=!v&&t==="scroll",y=v?p!==null?p+"Capture":null:p;v=[];for(var _=c,w;_!==null;){w=_;var M=w.stateNode;if(w.tag===5&&M!==null&&(w=M,y!==null&&(M=np(_,y),M!=null&&v.push(cp(_,M,w)))),x)break;_=_.return}0<v.length&&(p=new m(p,g,null,n,u),d.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==Qw&&(g=n.relatedTarget||n.fromElement)&&(uc(g)||g[_a]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=c,g=g?uc(g):null,g!==null&&(x=Wc(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(v=D2,M="onMouseLeave",y="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(v=F2,M="onPointerLeave",y="onPointerEnter",_="pointer"),x=m==null?p:sf(m),w=g==null?p:sf(g),p=new v(M,_+"leave",m,n,u),p.target=x,p.relatedTarget=w,M=null,uc(u)===c&&(v=new v(y,_+"enter",g,n,u),v.target=w,v.relatedTarget=x,M=v),x=M,m&&g)t:{for(v=m,y=g,_=0,w=v;w;w=gu(w))_++;for(w=0,M=y;M;M=gu(M))w++;for(;0<_-w;)v=gu(v),_--;for(;0<w-_;)y=gu(y),w--;for(;_--;){if(v===y||y!==null&&v===y.alternate)break t;v=gu(v),y=gu(y)}v=null}else v=null;m!==null&&q2(d,p,m,v,!1),g!==null&&x!==null&&q2(d,x,g,v,!0)}}e:{if(p=c?sf(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var A=w6;else if(H2(p))if(hk)A=T6;else{A=E6;var C=b6}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(A=M6);if(A&&(A=A(t,c))){dk(d,A,n,u);break e}C&&C(t,p,c),t==="focusout"&&(C=p._wrapperState)&&C.controlled&&p.type==="number"&&Yw(p,"number",p.value)}switch(C=c?sf(c):window,t){case"focusin":(H2(C)||C.contentEditable==="true")&&(rf=C,sb=c,Nh=null);break;case"focusout":Nh=sb=rf=null;break;case"mousedown":ab=!0;break;case"contextmenu":case"mouseup":case"dragend":ab=!1,G2(d,n,u);break;case"selectionchange":if(P6)break;case"keydown":case"keyup":G2(d,n,u)}var P;if(sM)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else nf?uk(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(ck&&n.locale!=="ko"&&(nf||N!=="onCompositionStart"?N==="onCompositionEnd"&&nf&&(P=lk()):(sl=u,rM="value"in sl?sl.value:sl.textContent,nf=!0)),C=Vy(c,N),0<C.length&&(N=new U2(N,t,null,n,u),d.push({event:N,listeners:C}),P?N.data=P:(P=fk(n),P!==null&&(N.data=P)))),(P=y6?v6(t,n):x6(t,n))&&(c=Vy(c,"onBeforeInput"),0<c.length&&(u=new U2("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=P))}bk(d,e)})}function cp(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vy(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=np(t,n),o!=null&&r.unshift(cp(t,o,i)),o=np(t,e),o!=null&&r.push(cp(t,o,i))),t=t.return}return r}function gu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function q2(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=np(n,o),l!=null&&s.unshift(cp(n,l,a))):i||(l=np(n,o),l!=null&&s.push(cp(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var L6=/\r\n?/g,k6=/\u0000|\uFFFD/g;function K2(t){return(typeof t=="string"?t:""+t).replace(L6,`
`).replace(k6,"")}function Bg(t,e,n){if(e=K2(e),K2(t)!==e&&n)throw Error(Le(425))}function $y(){}var lb=null,cb=null;function ub(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var fb=typeof setTimeout=="function"?setTimeout:void 0,N6=typeof clearTimeout=="function"?clearTimeout:void 0,Z2=typeof Promise=="function"?Promise:void 0,D6=typeof queueMicrotask=="function"?queueMicrotask:typeof Z2<"u"?function(t){return Z2.resolve(null).then(t).catch(U6)}:fb;function U6(t){setTimeout(function(){throw t})}function uS(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),op(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);op(e)}function fl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function J2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var od=Math.random().toString(36).slice(2),Ss="__reactFiber$"+od,up="__reactProps$"+od,_a="__reactContainer$"+od,db="__reactEvents$"+od,F6="__reactListeners$"+od,z6="__reactHandles$"+od;function uc(t){var e=t[Ss];if(e)return e;for(var n=t.parentNode;n;){if(e=n[_a]||n[Ss]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=J2(t);t!==null;){if(n=t[Ss])return n;t=J2(t)}return e}t=n,n=t.parentNode}return null}function tm(t){return t=t[Ss]||t[_a],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sf(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Le(33))}function px(t){return t[up]||null}var hb=[],af=-1;function Pl(t){return{current:t}}function Sn(t){0>af||(t.current=hb[af],hb[af]=null,af--)}function pn(t,e){af++,hb[af]=t.current,t.current=e}var vl={},Yr=Pl(vl),Ei=Pl(!1),Pc=vl;function kf(t,e){var n=t.type.contextTypes;if(!n)return vl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Mi(t){return t=t.childContextTypes,t!=null}function Wy(){Sn(Ei),Sn(Yr)}function Q2(t,e,n){if(Yr.current!==vl)throw Error(Le(168));pn(Yr,e),pn(Ei,n)}function Mk(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Le(108,bH(t)||"Unknown",i));return Dn({},n,r)}function jy(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vl,Pc=Yr.current,pn(Yr,t),pn(Ei,Ei.current),!0}function eP(t,e,n){var r=t.stateNode;if(!r)throw Error(Le(169));n?(t=Mk(t,e,Pc),r.__reactInternalMemoizedMergedChildContext=t,Sn(Ei),Sn(Yr),pn(Yr,t)):Sn(Ei),pn(Ei,n)}var na=null,mx=!1,fS=!1;function Tk(t){na===null?na=[t]:na.push(t)}function B6(t){mx=!0,Tk(t)}function Rl(){if(!fS&&na!==null){fS=!0;var t=0,e=tn;try{var n=na;for(tn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}na=null,mx=!1}catch(i){throw na!==null&&(na=na.slice(t+1)),ZL(QE,Rl),i}finally{tn=e,fS=!1}}return null}var lf=[],cf=0,Gy=null,Xy=0,lo=[],co=0,Rc=null,ua=1,fa="";function rc(t,e){lf[cf++]=Xy,lf[cf++]=Gy,Gy=t,Xy=e}function Ck(t,e,n){lo[co++]=ua,lo[co++]=fa,lo[co++]=Rc,Rc=t;var r=ua;t=fa;var i=32-Bo(r)-1;r&=~(1<<i),n+=1;var o=32-Bo(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,ua=1<<32-Bo(e)+i|n<<i|r,fa=o+t}else ua=1<<o|n<<i|r,fa=t}function lM(t){t.return!==null&&(rc(t,1),Ck(t,1,0))}function cM(t){for(;t===Gy;)Gy=lf[--cf],lf[cf]=null,Xy=lf[--cf],lf[cf]=null;for(;t===Rc;)Rc=lo[--co],lo[co]=null,fa=lo[--co],lo[co]=null,ua=lo[--co],lo[co]=null}var $i=null,Hi=null,Mn=!1,No=null;function Ak(t,e){var n=ho(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function tP(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$i=t,Hi=fl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$i=t,Hi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Rc!==null?{id:ua,overflow:fa}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ho(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$i=t,Hi=null,!0):!1;default:return!1}}function pb(t){return(t.mode&1)!==0&&(t.flags&128)===0}function mb(t){if(Mn){var e=Hi;if(e){var n=e;if(!tP(t,e)){if(pb(t))throw Error(Le(418));e=fl(n.nextSibling);var r=$i;e&&tP(t,e)?Ak(r,n):(t.flags=t.flags&-4097|2,Mn=!1,$i=t)}}else{if(pb(t))throw Error(Le(418));t.flags=t.flags&-4097|2,Mn=!1,$i=t}}}function nP(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$i=t}function Hg(t){if(t!==$i)return!1;if(!Mn)return nP(t),Mn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ub(t.type,t.memoizedProps)),e&&(e=Hi)){if(pb(t))throw Pk(),Error(Le(418));for(;e;)Ak(t,e),e=fl(e.nextSibling)}if(nP(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Hi=fl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Hi=null}}else Hi=$i?fl(t.stateNode.nextSibling):null;return!0}function Pk(){for(var t=Hi;t;)t=fl(t.nextSibling)}function Nf(){Hi=$i=null,Mn=!1}function uM(t){No===null?No=[t]:No.push(t)}var H6=Ia.ReactCurrentBatchConfig;function Yd(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Le(309));var r=n.stateNode}if(!r)throw Error(Le(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(Le(284));if(!n._owner)throw Error(Le(290,t))}return t}function Vg(t,e){throw t=Object.prototype.toString.call(e),Error(Le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rP(t){var e=t._init;return e(t._payload)}function Rk(t){function e(y,_){if(t){var w=y.deletions;w===null?(y.deletions=[_],y.flags|=16):w.push(_)}}function n(y,_){if(!t)return null;for(;_!==null;)e(y,_),_=_.sibling;return null}function r(y,_){for(y=new Map;_!==null;)_.key!==null?y.set(_.key,_):y.set(_.index,_),_=_.sibling;return y}function i(y,_){return y=ml(y,_),y.index=0,y.sibling=null,y}function o(y,_,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<_?(y.flags|=2,_):w):(y.flags|=2,_)):(y.flags|=1048576,_)}function s(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,_,w,M){return _===null||_.tag!==6?(_=vS(w,y.mode,M),_.return=y,_):(_=i(_,w),_.return=y,_)}function l(y,_,w,M){var A=w.type;return A===tf?u(y,_,w.props.children,M,w.key):_!==null&&(_.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===el&&rP(A)===_.type)?(M=i(_,w.props),M.ref=Yd(y,_,w),M.return=y,M):(M=xy(w.type,w.key,w.props,null,y.mode,M),M.ref=Yd(y,_,w),M.return=y,M)}function c(y,_,w,M){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=xS(w,y.mode,M),_.return=y,_):(_=i(_,w.children||[]),_.return=y,_)}function u(y,_,w,M,A){return _===null||_.tag!==7?(_=_c(w,y.mode,M,A),_.return=y,_):(_=i(_,w),_.return=y,_)}function d(y,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=vS(""+_,y.mode,w),_.return=y,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ig:return w=xy(_.type,_.key,_.props,null,y.mode,w),w.ref=Yd(y,null,_),w.return=y,w;case ef:return _=xS(_,y.mode,w),_.return=y,_;case el:var M=_._init;return d(y,M(_._payload),w)}if(bh(_)||$d(_))return _=_c(_,y.mode,w,null),_.return=y,_;Vg(y,_)}return null}function p(y,_,w,M){var A=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return A!==null?null:a(y,_,""+w,M);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ig:return w.key===A?l(y,_,w,M):null;case ef:return w.key===A?c(y,_,w,M):null;case el:return A=w._init,p(y,_,A(w._payload),M)}if(bh(w)||$d(w))return A!==null?null:u(y,_,w,M,null);Vg(y,w)}return null}function m(y,_,w,M,A){if(typeof M=="string"&&M!==""||typeof M=="number")return y=y.get(w)||null,a(_,y,""+M,A);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Ig:return y=y.get(M.key===null?w:M.key)||null,l(_,y,M,A);case ef:return y=y.get(M.key===null?w:M.key)||null,c(_,y,M,A);case el:var C=M._init;return m(y,_,w,C(M._payload),A)}if(bh(M)||$d(M))return y=y.get(w)||null,u(_,y,M,A,null);Vg(_,M)}return null}function g(y,_,w,M){for(var A=null,C=null,P=_,N=_=0,O=null;P!==null&&N<w.length;N++){P.index>N?(O=P,P=null):O=P.sibling;var E=p(y,P,w[N],M);if(E===null){P===null&&(P=O);break}t&&P&&E.alternate===null&&e(y,P),_=o(E,_,N),C===null?A=E:C.sibling=E,C=E,P=O}if(N===w.length)return n(y,P),Mn&&rc(y,N),A;if(P===null){for(;N<w.length;N++)P=d(y,w[N],M),P!==null&&(_=o(P,_,N),C===null?A=P:C.sibling=P,C=P);return Mn&&rc(y,N),A}for(P=r(y,P);N<w.length;N++)O=m(P,y,N,w[N],M),O!==null&&(t&&O.alternate!==null&&P.delete(O.key===null?N:O.key),_=o(O,_,N),C===null?A=O:C.sibling=O,C=O);return t&&P.forEach(function(L){return e(y,L)}),Mn&&rc(y,N),A}function v(y,_,w,M){var A=$d(w);if(typeof A!="function")throw Error(Le(150));if(w=A.call(w),w==null)throw Error(Le(151));for(var C=A=null,P=_,N=_=0,O=null,E=w.next();P!==null&&!E.done;N++,E=w.next()){P.index>N?(O=P,P=null):O=P.sibling;var L=p(y,P,E.value,M);if(L===null){P===null&&(P=O);break}t&&P&&L.alternate===null&&e(y,P),_=o(L,_,N),C===null?A=L:C.sibling=L,C=L,P=O}if(E.done)return n(y,P),Mn&&rc(y,N),A;if(P===null){for(;!E.done;N++,E=w.next())E=d(y,E.value,M),E!==null&&(_=o(E,_,N),C===null?A=E:C.sibling=E,C=E);return Mn&&rc(y,N),A}for(P=r(y,P);!E.done;N++,E=w.next())E=m(P,y,N,E.value,M),E!==null&&(t&&E.alternate!==null&&P.delete(E.key===null?N:E.key),_=o(E,_,N),C===null?A=E:C.sibling=E,C=E);return t&&P.forEach(function(H){return e(y,H)}),Mn&&rc(y,N),A}function x(y,_,w,M){if(typeof w=="object"&&w!==null&&w.type===tf&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ig:e:{for(var A=w.key,C=_;C!==null;){if(C.key===A){if(A=w.type,A===tf){if(C.tag===7){n(y,C.sibling),_=i(C,w.props.children),_.return=y,y=_;break e}}else if(C.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===el&&rP(A)===C.type){n(y,C.sibling),_=i(C,w.props),_.ref=Yd(y,C,w),_.return=y,y=_;break e}n(y,C);break}else e(y,C);C=C.sibling}w.type===tf?(_=_c(w.props.children,y.mode,M,w.key),_.return=y,y=_):(M=xy(w.type,w.key,w.props,null,y.mode,M),M.ref=Yd(y,_,w),M.return=y,y=M)}return s(y);case ef:e:{for(C=w.key;_!==null;){if(_.key===C)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){n(y,_.sibling),_=i(_,w.children||[]),_.return=y,y=_;break e}else{n(y,_);break}else e(y,_);_=_.sibling}_=xS(w,y.mode,M),_.return=y,y=_}return s(y);case el:return C=w._init,x(y,_,C(w._payload),M)}if(bh(w))return g(y,_,w,M);if($d(w))return v(y,_,w,M);Vg(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(n(y,_.sibling),_=i(_,w),_.return=y,y=_):(n(y,_),_=vS(w,y.mode,M),_.return=y,y=_),s(y)):n(y,_)}return x}var Df=Rk(!0),Ik=Rk(!1),Yy=Pl(null),qy=null,uf=null,fM=null;function dM(){fM=uf=qy=null}function hM(t){var e=Yy.current;Sn(Yy),t._currentValue=e}function gb(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ef(t,e){qy=t,fM=uf=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_i=!0),t.firstContext=null)}function vo(t){var e=t._currentValue;if(fM!==t)if(t={context:t,memoizedValue:e,next:null},uf===null){if(qy===null)throw Error(Le(308));uf=t,qy.dependencies={lanes:0,firstContext:t}}else uf=uf.next=t;return e}var fc=null;function pM(t){fc===null?fc=[t]:fc.push(t)}function Ok(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,pM(e)):(n.next=i.next,i.next=n),e.interleaved=n,Sa(t,r)}function Sa(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var tl=!1;function mM(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function pa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function dl(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Wt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Sa(t,n)}return i=r.interleaved,i===null?(e.next=e,pM(r)):(e.next=i.next,i.next=e),r.interleaved=e,Sa(t,n)}function hy(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,eM(t,n)}}function iP(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ky(t,e,n,r){var i=t.updateQueue;tl=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;s=0,u=c=l=null,a=o;do{var p=a.lane,m=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,v=a;switch(p=e,m=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){d=g.call(m,d,p);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,p=typeof g=="function"?g.call(m,d,p):g,p==null)break e;d=Dn({},d,p);break e;case 2:tl=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=d):u=u.next=m,s|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Oc|=s,t.lanes=s,t.memoizedState=d}}function oP(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Le(191,i));i.call(r)}}}var nm={},Rs=Pl(nm),fp=Pl(nm),dp=Pl(nm);function dc(t){if(t===nm)throw Error(Le(174));return t}function gM(t,e){switch(pn(dp,e),pn(fp,t),pn(Rs,nm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Kw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Kw(e,t)}Sn(Rs),pn(Rs,e)}function Uf(){Sn(Rs),Sn(fp),Sn(dp)}function kk(t){dc(dp.current);var e=dc(Rs.current),n=Kw(e,t.type);e!==n&&(pn(fp,t),pn(Rs,n))}function yM(t){fp.current===t&&(Sn(Rs),Sn(fp))}var Rn=Pl(0);function Zy(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dS=[];function vM(){for(var t=0;t<dS.length;t++)dS[t]._workInProgressVersionPrimary=null;dS.length=0}var py=Ia.ReactCurrentDispatcher,hS=Ia.ReactCurrentBatchConfig,Ic=0,kn=null,rr=null,pr=null,Jy=!1,Dh=!1,hp=0,V6=0;function Dr(){throw Error(Le(321))}function xM(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$o(t[n],e[n]))return!1;return!0}function _M(t,e,n,r,i,o){if(Ic=o,kn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,py.current=t===null||t.memoizedState===null?G6:X6,t=n(r,i),Dh){o=0;do{if(Dh=!1,hp=0,25<=o)throw Error(Le(301));o+=1,pr=rr=null,e.updateQueue=null,py.current=Y6,t=n(r,i)}while(Dh)}if(py.current=Qy,e=rr!==null&&rr.next!==null,Ic=0,pr=rr=kn=null,Jy=!1,e)throw Error(Le(300));return t}function SM(){var t=hp!==0;return hp=0,t}function ms(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pr===null?kn.memoizedState=pr=t:pr=pr.next=t,pr}function xo(){if(rr===null){var t=kn.alternate;t=t!==null?t.memoizedState:null}else t=rr.next;var e=pr===null?kn.memoizedState:pr.next;if(e!==null)pr=e,rr=t;else{if(t===null)throw Error(Le(310));rr=t,t={memoizedState:rr.memoizedState,baseState:rr.baseState,baseQueue:rr.baseQueue,queue:rr.queue,next:null},pr===null?kn.memoizedState=pr=t:pr=pr.next=t}return pr}function pp(t,e){return typeof e=="function"?e(t):e}function pS(t){var e=xo(),n=e.queue;if(n===null)throw Error(Le(311));n.lastRenderedReducer=t;var r=rr,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,c=o;do{var u=c.lane;if((Ic&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,s=r):l=l.next=d,kn.lanes|=u,Oc|=u}c=c.next}while(c!==null&&c!==o);l===null?s=r:l.next=a,$o(r,e.memoizedState)||(_i=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,kn.lanes|=o,Oc|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function mS(t){var e=xo(),n=e.queue;if(n===null)throw Error(Le(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);$o(o,e.memoizedState)||(_i=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Nk(){}function Dk(t,e){var n=kn,r=xo(),i=e(),o=!$o(r.memoizedState,i);if(o&&(r.memoizedState=i,_i=!0),r=r.queue,wM(zk.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||pr!==null&&pr.memoizedState.tag&1){if(n.flags|=2048,mp(9,Fk.bind(null,n,r,i,e),void 0,null),yr===null)throw Error(Le(349));Ic&30||Uk(n,e,i)}return i}function Uk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=kn.updateQueue,e===null?(e={lastEffect:null,stores:null},kn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Fk(t,e,n,r){e.value=n,e.getSnapshot=r,Bk(e)&&Hk(t)}function zk(t,e,n){return n(function(){Bk(e)&&Hk(t)})}function Bk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$o(t,n)}catch{return!0}}function Hk(t){var e=Sa(t,1);e!==null&&Ho(e,t,1,-1)}function sP(t){var e=ms();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pp,lastRenderedState:t},e.queue=t,t=t.dispatch=j6.bind(null,kn,t),[e.memoizedState,t]}function mp(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=kn.updateQueue,e===null?(e={lastEffect:null,stores:null},kn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Vk(){return xo().memoizedState}function my(t,e,n,r){var i=ms();kn.flags|=t,i.memoizedState=mp(1|e,n,void 0,r===void 0?null:r)}function gx(t,e,n,r){var i=xo();r=r===void 0?null:r;var o=void 0;if(rr!==null){var s=rr.memoizedState;if(o=s.destroy,r!==null&&xM(r,s.deps)){i.memoizedState=mp(e,n,o,r);return}}kn.flags|=t,i.memoizedState=mp(1|e,n,o,r)}function aP(t,e){return my(8390656,8,t,e)}function wM(t,e){return gx(2048,8,t,e)}function $k(t,e){return gx(4,2,t,e)}function Wk(t,e){return gx(4,4,t,e)}function jk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Gk(t,e,n){return n=n!=null?n.concat([t]):null,gx(4,4,jk.bind(null,e,t),n)}function bM(){}function Xk(t,e){var n=xo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xM(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Yk(t,e){var n=xo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xM(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function qk(t,e,n){return Ic&21?($o(n,e)||(n=ek(),kn.lanes|=n,Oc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_i=!0),t.memoizedState=n)}function $6(t,e){var n=tn;tn=n!==0&&4>n?n:4,t(!0);var r=hS.transition;hS.transition={};try{t(!1),e()}finally{tn=n,hS.transition=r}}function Kk(){return xo().memoizedState}function W6(t,e,n){var r=pl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Zk(t))Jk(e,n);else if(n=Ok(t,e,n,r),n!==null){var i=ai();Ho(n,t,r,i),Qk(n,e,r)}}function j6(t,e,n){var r=pl(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zk(t))Jk(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,$o(a,s)){var l=e.interleaved;l===null?(i.next=i,pM(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Ok(t,e,i,r),n!==null&&(i=ai(),Ho(n,t,r,i),Qk(n,e,r))}}function Zk(t){var e=t.alternate;return t===kn||e!==null&&e===kn}function Jk(t,e){Dh=Jy=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Qk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,eM(t,n)}}var Qy={readContext:vo,useCallback:Dr,useContext:Dr,useEffect:Dr,useImperativeHandle:Dr,useInsertionEffect:Dr,useLayoutEffect:Dr,useMemo:Dr,useReducer:Dr,useRef:Dr,useState:Dr,useDebugValue:Dr,useDeferredValue:Dr,useTransition:Dr,useMutableSource:Dr,useSyncExternalStore:Dr,useId:Dr,unstable_isNewReconciler:!1},G6={readContext:vo,useCallback:function(t,e){return ms().memoizedState=[t,e===void 0?null:e],t},useContext:vo,useEffect:aP,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,my(4194308,4,jk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return my(4194308,4,t,e)},useInsertionEffect:function(t,e){return my(4,2,t,e)},useMemo:function(t,e){var n=ms();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ms();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=W6.bind(null,kn,t),[r.memoizedState,t]},useRef:function(t){var e=ms();return t={current:t},e.memoizedState=t},useState:sP,useDebugValue:bM,useDeferredValue:function(t){return ms().memoizedState=t},useTransition:function(){var t=sP(!1),e=t[0];return t=$6.bind(null,t[1]),ms().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=kn,i=ms();if(Mn){if(n===void 0)throw Error(Le(407));n=n()}else{if(n=e(),yr===null)throw Error(Le(349));Ic&30||Uk(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,aP(zk.bind(null,r,o,t),[t]),r.flags|=2048,mp(9,Fk.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=ms(),e=yr.identifierPrefix;if(Mn){var n=fa,r=ua;n=(r&~(1<<32-Bo(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=hp++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=V6++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},X6={readContext:vo,useCallback:Xk,useContext:vo,useEffect:wM,useImperativeHandle:Gk,useInsertionEffect:$k,useLayoutEffect:Wk,useMemo:Yk,useReducer:pS,useRef:Vk,useState:function(){return pS(pp)},useDebugValue:bM,useDeferredValue:function(t){var e=xo();return qk(e,rr.memoizedState,t)},useTransition:function(){var t=pS(pp)[0],e=xo().memoizedState;return[t,e]},useMutableSource:Nk,useSyncExternalStore:Dk,useId:Kk,unstable_isNewReconciler:!1},Y6={readContext:vo,useCallback:Xk,useContext:vo,useEffect:wM,useImperativeHandle:Gk,useInsertionEffect:$k,useLayoutEffect:Wk,useMemo:Yk,useReducer:mS,useRef:Vk,useState:function(){return mS(pp)},useDebugValue:bM,useDeferredValue:function(t){var e=xo();return rr===null?e.memoizedState=t:qk(e,rr.memoizedState,t)},useTransition:function(){var t=mS(pp)[0],e=xo().memoizedState;return[t,e]},useMutableSource:Nk,useSyncExternalStore:Dk,useId:Kk,unstable_isNewReconciler:!1};function Io(t,e){if(t&&t.defaultProps){e=Dn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function yb(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Dn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var yx={isMounted:function(t){return(t=t._reactInternals)?Wc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ai(),i=pl(t),o=pa(r,i);o.payload=e,n!=null&&(o.callback=n),e=dl(t,o,i),e!==null&&(Ho(e,t,i,r),hy(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ai(),i=pl(t),o=pa(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=dl(t,o,i),e!==null&&(Ho(e,t,i,r),hy(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ai(),r=pl(t),i=pa(n,r);i.tag=2,e!=null&&(i.callback=e),e=dl(t,i,r),e!==null&&(Ho(e,t,r,n),hy(e,t,r))}};function lP(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!ap(n,r)||!ap(i,o):!0}function eN(t,e,n){var r=!1,i=vl,o=e.contextType;return typeof o=="object"&&o!==null?o=vo(o):(i=Mi(e)?Pc:Yr.current,r=e.contextTypes,o=(r=r!=null)?kf(t,i):vl),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yx,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function cP(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yx.enqueueReplaceState(e,e.state,null)}function vb(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},mM(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=vo(o):(o=Mi(e)?Pc:Yr.current,i.context=kf(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(yb(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&yx.enqueueReplaceState(i,i.state,null),Ky(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ff(t,e){try{var n="",r=e;do n+=wH(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function gS(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function xb(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var q6=typeof WeakMap=="function"?WeakMap:Map;function tN(t,e,n){n=pa(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){tv||(tv=!0,Pb=r),xb(t,e)},n}function nN(t,e,n){n=pa(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){xb(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){xb(t,e),typeof r!="function"&&(hl===null?hl=new Set([this]):hl.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function uP(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new q6;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=c8.bind(null,t,e,n),e.then(t,t))}function fP(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function dP(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=pa(-1,1),e.tag=2,dl(n,e,1))),n.lanes|=1),t)}var K6=Ia.ReactCurrentOwner,_i=!1;function ni(t,e,n,r){e.child=t===null?Ik(e,null,n,r):Df(e,t.child,n,r)}function hP(t,e,n,r,i){n=n.render;var o=e.ref;return Ef(e,i),r=_M(t,e,n,r,o,i),n=SM(),t!==null&&!_i?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wa(t,e,i)):(Mn&&n&&lM(e),e.flags|=1,ni(t,e,r,i),e.child)}function pP(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!IM(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,rN(t,e,o,r,i)):(t=xy(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:ap,n(s,r)&&t.ref===e.ref)return wa(t,e,i)}return e.flags|=1,t=ml(o,r),t.ref=e.ref,t.return=e,e.child=t}function rN(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(ap(o,r)&&t.ref===e.ref)if(_i=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(_i=!0);else return e.lanes=t.lanes,wa(t,e,i)}return _b(t,e,n,r,i)}function iN(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pn(df,Ui),Ui|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pn(df,Ui),Ui|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,pn(df,Ui),Ui|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,pn(df,Ui),Ui|=r;return ni(t,e,i,n),e.child}function oN(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function _b(t,e,n,r,i){var o=Mi(n)?Pc:Yr.current;return o=kf(e,o),Ef(e,i),n=_M(t,e,n,r,o,i),r=SM(),t!==null&&!_i?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wa(t,e,i)):(Mn&&r&&lM(e),e.flags|=1,ni(t,e,n,i),e.child)}function mP(t,e,n,r,i){if(Mi(n)){var o=!0;jy(e)}else o=!1;if(Ef(e,i),e.stateNode===null)gy(t,e),eN(e,n,r),vb(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=vo(c):(c=Mi(n)?Pc:Yr.current,c=kf(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==c)&&cP(e,s,r,c),tl=!1;var p=e.memoizedState;s.state=p,Ky(e,r,s,i),l=e.memoizedState,a!==r||p!==l||Ei.current||tl?(typeof u=="function"&&(yb(e,n,u,r),l=e.memoizedState),(a=tl||lP(e,n,a,r,p,l,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Lk(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Io(e.type,a),s.props=c,d=e.pendingProps,p=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=vo(l):(l=Mi(n)?Pc:Yr.current,l=kf(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||p!==l)&&cP(e,s,r,l),tl=!1,p=e.memoizedState,s.state=p,Ky(e,r,s,i);var g=e.memoizedState;a!==d||p!==g||Ei.current||tl?(typeof m=="function"&&(yb(e,n,m,r),g=e.memoizedState),(c=tl||lP(e,n,c,r,p,g,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,g,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,g,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),s.props=r,s.state=g,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Sb(t,e,n,r,o,i)}function Sb(t,e,n,r,i,o){oN(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&eP(e,n,!1),wa(t,e,o);r=e.stateNode,K6.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Df(e,t.child,null,o),e.child=Df(e,null,a,o)):ni(t,e,a,o),e.memoizedState=r.state,i&&eP(e,n,!0),e.child}function sN(t){var e=t.stateNode;e.pendingContext?Q2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Q2(t,e.context,!1),gM(t,e.containerInfo)}function gP(t,e,n,r,i){return Nf(),uM(i),e.flags|=256,ni(t,e,n,r),e.child}var wb={dehydrated:null,treeContext:null,retryLane:0};function bb(t){return{baseLanes:t,cachePool:null,transitions:null}}function aN(t,e,n){var r=e.pendingProps,i=Rn.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),pn(Rn,i&1),t===null)return mb(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=_x(s,r,0,null),t=_c(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=bb(n),e.memoizedState=wb,t):EM(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Z6(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ml(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=ml(a,o):(o=_c(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?bb(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=wb,r}return o=t.child,t=o.sibling,r=ml(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function EM(t,e){return e=_x({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $g(t,e,n,r){return r!==null&&uM(r),Df(e,t.child,null,n),t=EM(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Z6(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=gS(Error(Le(422))),$g(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=_x({mode:"visible",children:r.children},i,0,null),o=_c(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Df(e,t.child,null,s),e.child.memoizedState=bb(s),e.memoizedState=wb,o);if(!(e.mode&1))return $g(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(Le(419)),r=gS(o,r,void 0),$g(t,e,s,r)}if(a=(s&t.childLanes)!==0,_i||a){if(r=yr,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Sa(t,i),Ho(r,t,i,-1))}return RM(),r=gS(Error(Le(421))),$g(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=u8.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Hi=fl(i.nextSibling),$i=e,Mn=!0,No=null,t!==null&&(lo[co++]=ua,lo[co++]=fa,lo[co++]=Rc,ua=t.id,fa=t.overflow,Rc=e),e=EM(e,r.children),e.flags|=4096,e)}function yP(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),gb(t.return,e,n)}function yS(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function lN(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(ni(t,e,r.children,n),r=Rn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yP(t,n,e);else if(t.tag===19)yP(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pn(Rn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Zy(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),yS(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Zy(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}yS(e,!0,n,null,o);break;case"together":yS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function gy(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Oc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Le(153));if(e.child!==null){for(t=e.child,n=ml(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ml(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function J6(t,e,n){switch(e.tag){case 3:sN(e),Nf();break;case 5:kk(e);break;case 1:Mi(e.type)&&jy(e);break;case 4:gM(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;pn(Yy,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pn(Rn,Rn.current&1),e.flags|=128,null):n&e.child.childLanes?aN(t,e,n):(pn(Rn,Rn.current&1),t=wa(t,e,n),t!==null?t.sibling:null);pn(Rn,Rn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return lN(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),pn(Rn,Rn.current),r)break;return null;case 22:case 23:return e.lanes=0,iN(t,e,n)}return wa(t,e,n)}var cN,Eb,uN,fN;cN=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Eb=function(){};uN=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,dc(Rs.current);var o=null;switch(n){case"input":i=Gw(t,i),r=Gw(t,r),o=[];break;case"select":i=Dn({},i,{value:void 0}),r=Dn({},r,{value:void 0}),o=[];break;case"textarea":i=qw(t,i),r=qw(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=$y)}Zw(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ep.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ep.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&xn("scroll",t),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};fN=function(t,e,n,r){n!==r&&(e.flags|=4)};function qd(t,e){if(!Mn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ur(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Q6(t,e,n){var r=e.pendingProps;switch(cM(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ur(e),null;case 1:return Mi(e.type)&&Wy(),Ur(e),null;case 3:return r=e.stateNode,Uf(),Sn(Ei),Sn(Yr),vM(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Hg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,No!==null&&(Ob(No),No=null))),Eb(t,e),Ur(e),null;case 5:yM(e);var i=dc(dp.current);if(n=e.type,t!==null&&e.stateNode!=null)uN(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Le(166));return Ur(e),null}if(t=dc(Rs.current),Hg(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Ss]=e,r[up]=o,t=(e.mode&1)!==0,n){case"dialog":xn("cancel",r),xn("close",r);break;case"iframe":case"object":case"embed":xn("load",r);break;case"video":case"audio":for(i=0;i<Mh.length;i++)xn(Mh[i],r);break;case"source":xn("error",r);break;case"img":case"image":case"link":xn("error",r),xn("load",r);break;case"details":xn("toggle",r);break;case"input":T2(r,o),xn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},xn("invalid",r);break;case"textarea":A2(r,o),xn("invalid",r)}Zw(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Bg(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Bg(r.textContent,a,t),i=["children",""+a]):ep.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&xn("scroll",r)}switch(n){case"input":Og(r),C2(r,o,!0);break;case"textarea":Og(r),P2(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=$y)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=zL(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Ss]=e,t[up]=r,cN(t,e,!1,!1),e.stateNode=t;e:{switch(s=Jw(n,r),n){case"dialog":xn("cancel",t),xn("close",t),i=r;break;case"iframe":case"object":case"embed":xn("load",t),i=r;break;case"video":case"audio":for(i=0;i<Mh.length;i++)xn(Mh[i],t);i=r;break;case"source":xn("error",t),i=r;break;case"img":case"image":case"link":xn("error",t),xn("load",t),i=r;break;case"details":xn("toggle",t),i=r;break;case"input":T2(t,r),i=Gw(t,r),xn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Dn({},r,{value:void 0}),xn("invalid",t);break;case"textarea":A2(t,r),i=qw(t,r),xn("invalid",t);break;default:i=r}Zw(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?VL(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&BL(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&tp(t,l):typeof l=="number"&&tp(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ep.hasOwnProperty(o)?l!=null&&o==="onScroll"&&xn("scroll",t):l!=null&&YE(t,o,l,s))}switch(n){case"input":Og(t),C2(t,r,!1);break;case"textarea":Og(t),P2(t);break;case"option":r.value!=null&&t.setAttribute("value",""+yl(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?_f(t,!!r.multiple,o,!1):r.defaultValue!=null&&_f(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=$y)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ur(e),null;case 6:if(t&&e.stateNode!=null)fN(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Le(166));if(n=dc(dp.current),dc(Rs.current),Hg(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ss]=e,(o=r.nodeValue!==n)&&(t=$i,t!==null))switch(t.tag){case 3:Bg(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bg(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ss]=e,e.stateNode=r}return Ur(e),null;case 13:if(Sn(Rn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Mn&&Hi!==null&&e.mode&1&&!(e.flags&128))Pk(),Nf(),e.flags|=98560,o=!1;else if(o=Hg(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(Le(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Le(317));o[Ss]=e}else Nf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ur(e),o=!1}else No!==null&&(Ob(No),No=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Rn.current&1?ir===0&&(ir=3):RM())),e.updateQueue!==null&&(e.flags|=4),Ur(e),null);case 4:return Uf(),Eb(t,e),t===null&&lp(e.stateNode.containerInfo),Ur(e),null;case 10:return hM(e.type._context),Ur(e),null;case 17:return Mi(e.type)&&Wy(),Ur(e),null;case 19:if(Sn(Rn),o=e.memoizedState,o===null)return Ur(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)qd(o,!1);else{if(ir!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Zy(t),s!==null){for(e.flags|=128,qd(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pn(Rn,Rn.current&1|2),e.child}t=t.sibling}o.tail!==null&&Xn()>zf&&(e.flags|=128,r=!0,qd(o,!1),e.lanes=4194304)}else{if(!r)if(t=Zy(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qd(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Mn)return Ur(e),null}else 2*Xn()-o.renderingStartTime>zf&&n!==1073741824&&(e.flags|=128,r=!0,qd(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Xn(),e.sibling=null,n=Rn.current,pn(Rn,r?n&1|2:n&1),e):(Ur(e),null);case 22:case 23:return PM(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ui&1073741824&&(Ur(e),e.subtreeFlags&6&&(e.flags|=8192)):Ur(e),null;case 24:return null;case 25:return null}throw Error(Le(156,e.tag))}function e8(t,e){switch(cM(e),e.tag){case 1:return Mi(e.type)&&Wy(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Uf(),Sn(Ei),Sn(Yr),vM(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return yM(e),null;case 13:if(Sn(Rn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Le(340));Nf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Sn(Rn),null;case 4:return Uf(),null;case 10:return hM(e.type._context),null;case 22:case 23:return PM(),null;case 24:return null;default:return null}}var Wg=!1,$r=!1,t8=typeof WeakSet=="function"?WeakSet:Set,nt=null;function ff(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Vn(t,e,r)}else n.current=null}function Mb(t,e,n){try{n()}catch(r){Vn(t,e,r)}}var vP=!1;function n8(t,e){if(lb=By,t=gk(),aM(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,c=0,u=0,d=t,p=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(a=s+i),d!==o||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===t)break t;if(p===n&&++c===i&&(a=s),p===o&&++u===r&&(l=s),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(cb={focusedElem:t,selectionRange:n},By=!1,nt=e;nt!==null;)if(e=nt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,nt=t;else for(;nt!==null;){e=nt;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,x=g.memoizedState,y=e.stateNode,_=y.getSnapshotBeforeUpdate(e.elementType===e.type?v:Io(e.type,v),x);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Le(163))}}catch(M){Vn(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,nt=t;break}nt=e.return}return g=vP,vP=!1,g}function Uh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Mb(e,n,o)}i=i.next}while(i!==r)}}function vx(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Tb(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function dN(t){var e=t.alternate;e!==null&&(t.alternate=null,dN(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ss],delete e[up],delete e[db],delete e[F6],delete e[z6])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function hN(t){return t.tag===5||t.tag===3||t.tag===4}function xP(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hN(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Cb(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$y));else if(r!==4&&(t=t.child,t!==null))for(Cb(t,e,n),t=t.sibling;t!==null;)Cb(t,e,n),t=t.sibling}function Ab(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ab(t,e,n),t=t.sibling;t!==null;)Ab(t,e,n),t=t.sibling}var Tr=null,ko=!1;function Wa(t,e,n){for(n=n.child;n!==null;)pN(t,e,n),n=n.sibling}function pN(t,e,n){if(Ps&&typeof Ps.onCommitFiberUnmount=="function")try{Ps.onCommitFiberUnmount(ux,n)}catch{}switch(n.tag){case 5:$r||ff(n,e);case 6:var r=Tr,i=ko;Tr=null,Wa(t,e,n),Tr=r,ko=i,Tr!==null&&(ko?(t=Tr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Tr.removeChild(n.stateNode));break;case 18:Tr!==null&&(ko?(t=Tr,n=n.stateNode,t.nodeType===8?uS(t.parentNode,n):t.nodeType===1&&uS(t,n),op(t)):uS(Tr,n.stateNode));break;case 4:r=Tr,i=ko,Tr=n.stateNode.containerInfo,ko=!0,Wa(t,e,n),Tr=r,ko=i;break;case 0:case 11:case 14:case 15:if(!$r&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Mb(n,e,s),i=i.next}while(i!==r)}Wa(t,e,n);break;case 1:if(!$r&&(ff(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Vn(n,e,a)}Wa(t,e,n);break;case 21:Wa(t,e,n);break;case 22:n.mode&1?($r=(r=$r)||n.memoizedState!==null,Wa(t,e,n),$r=r):Wa(t,e,n);break;default:Wa(t,e,n)}}function _P(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new t8),e.forEach(function(r){var i=f8.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Co(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Tr=a.stateNode,ko=!1;break e;case 3:Tr=a.stateNode.containerInfo,ko=!0;break e;case 4:Tr=a.stateNode.containerInfo,ko=!0;break e}a=a.return}if(Tr===null)throw Error(Le(160));pN(o,s,i),Tr=null,ko=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Vn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)mN(e,t),e=e.sibling}function mN(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Co(e,t),cs(t),r&4){try{Uh(3,t,t.return),vx(3,t)}catch(v){Vn(t,t.return,v)}try{Uh(5,t,t.return)}catch(v){Vn(t,t.return,v)}}break;case 1:Co(e,t),cs(t),r&512&&n!==null&&ff(n,n.return);break;case 5:if(Co(e,t),cs(t),r&512&&n!==null&&ff(n,n.return),t.flags&32){var i=t.stateNode;try{tp(i,"")}catch(v){Vn(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&UL(i,o),Jw(a,s);var c=Jw(a,o);for(s=0;s<l.length;s+=2){var u=l[s],d=l[s+1];u==="style"?VL(i,d):u==="dangerouslySetInnerHTML"?BL(i,d):u==="children"?tp(i,d):YE(i,u,d,c)}switch(a){case"input":Xw(i,o);break;case"textarea":FL(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?_f(i,!!o.multiple,m,!1):p!==!!o.multiple&&(o.defaultValue!=null?_f(i,!!o.multiple,o.defaultValue,!0):_f(i,!!o.multiple,o.multiple?[]:"",!1))}i[up]=o}catch(v){Vn(t,t.return,v)}}break;case 6:if(Co(e,t),cs(t),r&4){if(t.stateNode===null)throw Error(Le(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(v){Vn(t,t.return,v)}}break;case 3:if(Co(e,t),cs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{op(e.containerInfo)}catch(v){Vn(t,t.return,v)}break;case 4:Co(e,t),cs(t);break;case 13:Co(e,t),cs(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(CM=Xn())),r&4&&_P(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?($r=(c=$r)||u,Co(e,t),$r=c):Co(e,t),cs(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(nt=t,u=t.child;u!==null;){for(d=nt=u;nt!==null;){switch(p=nt,m=p.child,p.tag){case 0:case 11:case 14:case 15:Uh(4,p,p.return);break;case 1:ff(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){Vn(r,n,v)}}break;case 5:ff(p,p.return);break;case 22:if(p.memoizedState!==null){wP(d);continue}}m!==null?(m.return=p,nt=m):wP(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=HL("display",s))}catch(v){Vn(t,t.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Vn(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Co(e,t),cs(t),r&4&&_P(t);break;case 21:break;default:Co(e,t),cs(t)}}function cs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(hN(n)){var r=n;break e}n=n.return}throw Error(Le(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(tp(i,""),r.flags&=-33);var o=xP(t);Ab(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=xP(t);Cb(t,a,s);break;default:throw Error(Le(161))}}catch(l){Vn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function r8(t,e,n){nt=t,gN(t)}function gN(t,e,n){for(var r=(t.mode&1)!==0;nt!==null;){var i=nt,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Wg;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||$r;a=Wg;var c=$r;if(Wg=s,($r=l)&&!c)for(nt=i;nt!==null;)s=nt,l=s.child,s.tag===22&&s.memoizedState!==null?bP(i):l!==null?(l.return=s,nt=l):bP(i);for(;o!==null;)nt=o,gN(o),o=o.sibling;nt=i,Wg=a,$r=c}SP(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,nt=o):SP(t)}}function SP(t){for(;nt!==null;){var e=nt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$r||vx(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!$r)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Io(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&oP(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}oP(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&op(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Le(163))}$r||e.flags&512&&Tb(e)}catch(p){Vn(e,e.return,p)}}if(e===t){nt=null;break}if(n=e.sibling,n!==null){n.return=e.return,nt=n;break}nt=e.return}}function wP(t){for(;nt!==null;){var e=nt;if(e===t){nt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,nt=n;break}nt=e.return}}function bP(t){for(;nt!==null;){var e=nt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{vx(4,e)}catch(l){Vn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Vn(e,i,l)}}var o=e.return;try{Tb(e)}catch(l){Vn(e,o,l)}break;case 5:var s=e.return;try{Tb(e)}catch(l){Vn(e,s,l)}}}catch(l){Vn(e,e.return,l)}if(e===t){nt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,nt=a;break}nt=e.return}}var i8=Math.ceil,ev=Ia.ReactCurrentDispatcher,MM=Ia.ReactCurrentOwner,yo=Ia.ReactCurrentBatchConfig,Wt=0,yr=null,er=null,Pr=0,Ui=0,df=Pl(0),ir=0,gp=null,Oc=0,xx=0,TM=0,Fh=null,vi=null,CM=0,zf=1/0,ta=null,tv=!1,Pb=null,hl=null,jg=!1,al=null,nv=0,zh=0,Rb=null,yy=-1,vy=0;function ai(){return Wt&6?Xn():yy!==-1?yy:yy=Xn()}function pl(t){return t.mode&1?Wt&2&&Pr!==0?Pr&-Pr:H6.transition!==null?(vy===0&&(vy=ek()),vy):(t=tn,t!==0||(t=window.event,t=t===void 0?16:ak(t.type)),t):1}function Ho(t,e,n,r){if(50<zh)throw zh=0,Rb=null,Error(Le(185));Qp(t,n,r),(!(Wt&2)||t!==yr)&&(t===yr&&(!(Wt&2)&&(xx|=n),ir===4&&rl(t,Pr)),Ti(t,r),n===1&&Wt===0&&!(e.mode&1)&&(zf=Xn()+500,mx&&Rl()))}function Ti(t,e){var n=t.callbackNode;HH(t,e);var r=zy(t,t===yr?Pr:0);if(r===0)n!==null&&O2(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&O2(n),e===1)t.tag===0?B6(EP.bind(null,t)):Tk(EP.bind(null,t)),D6(function(){!(Wt&6)&&Rl()}),n=null;else{switch(tk(r)){case 1:n=QE;break;case 4:n=JL;break;case 16:n=Fy;break;case 536870912:n=QL;break;default:n=Fy}n=EN(n,yN.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function yN(t,e){if(yy=-1,vy=0,Wt&6)throw Error(Le(327));var n=t.callbackNode;if(Mf()&&t.callbackNode!==n)return null;var r=zy(t,t===yr?Pr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=rv(t,r);else{e=r;var i=Wt;Wt|=2;var o=xN();(yr!==t||Pr!==e)&&(ta=null,zf=Xn()+500,xc(t,e));do try{a8();break}catch(a){vN(t,a)}while(!0);dM(),ev.current=o,Wt=i,er!==null?e=0:(yr=null,Pr=0,e=ir)}if(e!==0){if(e===2&&(i=rb(t),i!==0&&(r=i,e=Ib(t,i))),e===1)throw n=gp,xc(t,0),rl(t,r),Ti(t,Xn()),n;if(e===6)rl(t,r);else{if(i=t.current.alternate,!(r&30)&&!o8(i)&&(e=rv(t,r),e===2&&(o=rb(t),o!==0&&(r=o,e=Ib(t,o))),e===1))throw n=gp,xc(t,0),rl(t,r),Ti(t,Xn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Le(345));case 2:ic(t,vi,ta);break;case 3:if(rl(t,r),(r&130023424)===r&&(e=CM+500-Xn(),10<e)){if(zy(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ai(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=fb(ic.bind(null,t,vi,ta),e);break}ic(t,vi,ta);break;case 4:if(rl(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Bo(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Xn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*i8(r/1960))-r,10<r){t.timeoutHandle=fb(ic.bind(null,t,vi,ta),r);break}ic(t,vi,ta);break;case 5:ic(t,vi,ta);break;default:throw Error(Le(329))}}}return Ti(t,Xn()),t.callbackNode===n?yN.bind(null,t):null}function Ib(t,e){var n=Fh;return t.current.memoizedState.isDehydrated&&(xc(t,e).flags|=256),t=rv(t,e),t!==2&&(e=vi,vi=n,e!==null&&Ob(e)),t}function Ob(t){vi===null?vi=t:vi.push.apply(vi,t)}function o8(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!$o(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function rl(t,e){for(e&=~TM,e&=~xx,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Bo(e),r=1<<n;t[n]=-1,e&=~r}}function EP(t){if(Wt&6)throw Error(Le(327));Mf();var e=zy(t,0);if(!(e&1))return Ti(t,Xn()),null;var n=rv(t,e);if(t.tag!==0&&n===2){var r=rb(t);r!==0&&(e=r,n=Ib(t,r))}if(n===1)throw n=gp,xc(t,0),rl(t,e),Ti(t,Xn()),n;if(n===6)throw Error(Le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ic(t,vi,ta),Ti(t,Xn()),null}function AM(t,e){var n=Wt;Wt|=1;try{return t(e)}finally{Wt=n,Wt===0&&(zf=Xn()+500,mx&&Rl())}}function Lc(t){al!==null&&al.tag===0&&!(Wt&6)&&Mf();var e=Wt;Wt|=1;var n=yo.transition,r=tn;try{if(yo.transition=null,tn=1,t)return t()}finally{tn=r,yo.transition=n,Wt=e,!(Wt&6)&&Rl()}}function PM(){Ui=df.current,Sn(df)}function xc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,N6(n)),er!==null)for(n=er.return;n!==null;){var r=n;switch(cM(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wy();break;case 3:Uf(),Sn(Ei),Sn(Yr),vM();break;case 5:yM(r);break;case 4:Uf();break;case 13:Sn(Rn);break;case 19:Sn(Rn);break;case 10:hM(r.type._context);break;case 22:case 23:PM()}n=n.return}if(yr=t,er=t=ml(t.current,null),Pr=Ui=e,ir=0,gp=null,TM=xx=Oc=0,vi=Fh=null,fc!==null){for(e=0;e<fc.length;e++)if(n=fc[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}fc=null}return t}function vN(t,e){do{var n=er;try{if(dM(),py.current=Qy,Jy){for(var r=kn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Jy=!1}if(Ic=0,pr=rr=kn=null,Dh=!1,hp=0,MM.current=null,n===null||n.return===null){ir=1,gp=e,er=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=Pr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=fP(s);if(m!==null){m.flags&=-257,dP(m,s,a,o,e),m.mode&1&&uP(o,c,e),e=m,l=c;var g=e.updateQueue;if(g===null){var v=new Set;v.add(l),e.updateQueue=v}else g.add(l);break e}else{if(!(e&1)){uP(o,c,e),RM();break e}l=Error(Le(426))}}else if(Mn&&a.mode&1){var x=fP(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),dP(x,s,a,o,e),uM(Ff(l,a));break e}}o=l=Ff(l,a),ir!==4&&(ir=2),Fh===null?Fh=[o]:Fh.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var y=tN(o,l,e);iP(o,y);break e;case 1:a=l;var _=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(hl===null||!hl.has(w)))){o.flags|=65536,e&=-e,o.lanes|=e;var M=nN(o,a,e);iP(o,M);break e}}o=o.return}while(o!==null)}SN(n)}catch(A){e=A,er===n&&n!==null&&(er=n=n.return);continue}break}while(!0)}function xN(){var t=ev.current;return ev.current=Qy,t===null?Qy:t}function RM(){(ir===0||ir===3||ir===2)&&(ir=4),yr===null||!(Oc&268435455)&&!(xx&268435455)||rl(yr,Pr)}function rv(t,e){var n=Wt;Wt|=2;var r=xN();(yr!==t||Pr!==e)&&(ta=null,xc(t,e));do try{s8();break}catch(i){vN(t,i)}while(!0);if(dM(),Wt=n,ev.current=r,er!==null)throw Error(Le(261));return yr=null,Pr=0,ir}function s8(){for(;er!==null;)_N(er)}function a8(){for(;er!==null&&!OH();)_N(er)}function _N(t){var e=bN(t.alternate,t,Ui);t.memoizedProps=t.pendingProps,e===null?SN(t):er=e,MM.current=null}function SN(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=e8(n,e),n!==null){n.flags&=32767,er=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ir=6,er=null;return}}else if(n=Q6(n,e,Ui),n!==null){er=n;return}if(e=e.sibling,e!==null){er=e;return}er=e=t}while(e!==null);ir===0&&(ir=5)}function ic(t,e,n){var r=tn,i=yo.transition;try{yo.transition=null,tn=1,l8(t,e,n,r)}finally{yo.transition=i,tn=r}return null}function l8(t,e,n,r){do Mf();while(al!==null);if(Wt&6)throw Error(Le(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Le(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(VH(t,o),t===yr&&(er=yr=null,Pr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||jg||(jg=!0,EN(Fy,function(){return Mf(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=yo.transition,yo.transition=null;var s=tn;tn=1;var a=Wt;Wt|=4,MM.current=null,n8(t,n),mN(n,t),A6(cb),By=!!lb,cb=lb=null,t.current=n,r8(n),LH(),Wt=a,tn=s,yo.transition=o}else t.current=n;if(jg&&(jg=!1,al=t,nv=i),o=t.pendingLanes,o===0&&(hl=null),DH(n.stateNode),Ti(t,Xn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(tv)throw tv=!1,t=Pb,Pb=null,t;return nv&1&&t.tag!==0&&Mf(),o=t.pendingLanes,o&1?t===Rb?zh++:(zh=0,Rb=t):zh=0,Rl(),null}function Mf(){if(al!==null){var t=tk(nv),e=yo.transition,n=tn;try{if(yo.transition=null,tn=16>t?16:t,al===null)var r=!1;else{if(t=al,al=null,nv=0,Wt&6)throw Error(Le(331));var i=Wt;for(Wt|=4,nt=t.current;nt!==null;){var o=nt,s=o.child;if(nt.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(nt=c;nt!==null;){var u=nt;switch(u.tag){case 0:case 11:case 15:Uh(8,u,o)}var d=u.child;if(d!==null)d.return=u,nt=d;else for(;nt!==null;){u=nt;var p=u.sibling,m=u.return;if(dN(u),u===c){nt=null;break}if(p!==null){p.return=m,nt=p;break}nt=m}}}var g=o.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}nt=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,nt=s;else e:for(;nt!==null;){if(o=nt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Uh(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,nt=y;break e}nt=o.return}}var _=t.current;for(nt=_;nt!==null;){s=nt;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,nt=w;else e:for(s=_;nt!==null;){if(a=nt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:vx(9,a)}}catch(A){Vn(a,a.return,A)}if(a===s){nt=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,nt=M;break e}nt=a.return}}if(Wt=i,Rl(),Ps&&typeof Ps.onPostCommitFiberRoot=="function")try{Ps.onPostCommitFiberRoot(ux,t)}catch{}r=!0}return r}finally{tn=n,yo.transition=e}}return!1}function MP(t,e,n){e=Ff(n,e),e=tN(t,e,1),t=dl(t,e,1),e=ai(),t!==null&&(Qp(t,1,e),Ti(t,e))}function Vn(t,e,n){if(t.tag===3)MP(t,t,n);else for(;e!==null;){if(e.tag===3){MP(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hl===null||!hl.has(r))){t=Ff(n,t),t=nN(e,t,1),e=dl(e,t,1),t=ai(),e!==null&&(Qp(e,1,t),Ti(e,t));break}}e=e.return}}function c8(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ai(),t.pingedLanes|=t.suspendedLanes&n,yr===t&&(Pr&n)===n&&(ir===4||ir===3&&(Pr&130023424)===Pr&&500>Xn()-CM?xc(t,0):TM|=n),Ti(t,e)}function wN(t,e){e===0&&(t.mode&1?(e=Ng,Ng<<=1,!(Ng&130023424)&&(Ng=4194304)):e=1);var n=ai();t=Sa(t,e),t!==null&&(Qp(t,e,n),Ti(t,n))}function u8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),wN(t,n)}function f8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Le(314))}r!==null&&r.delete(e),wN(t,n)}var bN;bN=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ei.current)_i=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _i=!1,J6(t,e,n);_i=!!(t.flags&131072)}else _i=!1,Mn&&e.flags&1048576&&Ck(e,Xy,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;gy(t,e),t=e.pendingProps;var i=kf(e,Yr.current);Ef(e,n),i=_M(null,e,r,t,i,n);var o=SM();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mi(r)?(o=!0,jy(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,mM(e),i.updater=yx,e.stateNode=i,i._reactInternals=e,vb(e,r,t,n),e=Sb(null,e,r,!0,o,n)):(e.tag=0,Mn&&o&&lM(e),ni(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(gy(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=h8(r),t=Io(r,t),i){case 0:e=_b(null,e,r,t,n);break e;case 1:e=mP(null,e,r,t,n);break e;case 11:e=hP(null,e,r,t,n);break e;case 14:e=pP(null,e,r,Io(r.type,t),n);break e}throw Error(Le(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Io(r,i),_b(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Io(r,i),mP(t,e,r,i,n);case 3:e:{if(sN(e),t===null)throw Error(Le(387));r=e.pendingProps,o=e.memoizedState,i=o.element,Lk(t,e),Ky(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Ff(Error(Le(423)),e),e=gP(t,e,r,n,i);break e}else if(r!==i){i=Ff(Error(Le(424)),e),e=gP(t,e,r,n,i);break e}else for(Hi=fl(e.stateNode.containerInfo.firstChild),$i=e,Mn=!0,No=null,n=Ik(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Nf(),r===i){e=wa(t,e,n);break e}ni(t,e,r,n)}e=e.child}return e;case 5:return kk(e),t===null&&mb(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,ub(r,i)?s=null:o!==null&&ub(r,o)&&(e.flags|=32),oN(t,e),ni(t,e,s,n),e.child;case 6:return t===null&&mb(e),null;case 13:return aN(t,e,n);case 4:return gM(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Df(e,null,r,n):ni(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Io(r,i),hP(t,e,r,i,n);case 7:return ni(t,e,e.pendingProps,n),e.child;case 8:return ni(t,e,e.pendingProps.children,n),e.child;case 12:return ni(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,pn(Yy,r._currentValue),r._currentValue=s,o!==null)if($o(o.value,s)){if(o.children===i.children&&!Ei.current){e=wa(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=pa(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),gb(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(Le(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),gb(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}ni(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ef(e,n),i=vo(i),r=r(i),e.flags|=1,ni(t,e,r,n),e.child;case 14:return r=e.type,i=Io(r,e.pendingProps),i=Io(r.type,i),pP(t,e,r,i,n);case 15:return rN(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Io(r,i),gy(t,e),e.tag=1,Mi(r)?(t=!0,jy(e)):t=!1,Ef(e,n),eN(e,r,i),vb(e,r,i,n),Sb(null,e,r,!0,t,n);case 19:return lN(t,e,n);case 22:return iN(t,e,n)}throw Error(Le(156,e.tag))};function EN(t,e){return ZL(t,e)}function d8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ho(t,e,n,r){return new d8(t,e,n,r)}function IM(t){return t=t.prototype,!(!t||!t.isReactComponent)}function h8(t){if(typeof t=="function")return IM(t)?1:0;if(t!=null){if(t=t.$$typeof,t===KE)return 11;if(t===ZE)return 14}return 2}function ml(t,e){var n=t.alternate;return n===null?(n=ho(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xy(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")IM(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case tf:return _c(n.children,i,o,e);case qE:s=8,i|=8;break;case Vw:return t=ho(12,n,e,i|2),t.elementType=Vw,t.lanes=o,t;case $w:return t=ho(13,n,e,i),t.elementType=$w,t.lanes=o,t;case Ww:return t=ho(19,n,e,i),t.elementType=Ww,t.lanes=o,t;case kL:return _x(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case OL:s=10;break e;case LL:s=9;break e;case KE:s=11;break e;case ZE:s=14;break e;case el:s=16,r=null;break e}throw Error(Le(130,t==null?t:typeof t,""))}return e=ho(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function _c(t,e,n,r){return t=ho(7,t,r,e),t.lanes=n,t}function _x(t,e,n,r){return t=ho(22,t,r,e),t.elementType=kL,t.lanes=n,t.stateNode={isHidden:!1},t}function vS(t,e,n){return t=ho(6,t,null,e),t.lanes=n,t}function xS(t,e,n){return e=ho(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function p8(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Q_(0),this.expirationTimes=Q_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Q_(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function OM(t,e,n,r,i,o,s,a,l){return t=new p8(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=ho(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mM(o),t}function m8(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ef,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function MN(t){if(!t)return vl;t=t._reactInternals;e:{if(Wc(t)!==t||t.tag!==1)throw Error(Le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Le(171))}if(t.tag===1){var n=t.type;if(Mi(n))return Mk(t,n,e)}return e}function TN(t,e,n,r,i,o,s,a,l){return t=OM(n,r,!0,t,i,o,s,a,l),t.context=MN(null),n=t.current,r=ai(),i=pl(n),o=pa(r,i),o.callback=e??null,dl(n,o,i),t.current.lanes=i,Qp(t,i,r),Ti(t,r),t}function Sx(t,e,n,r){var i=e.current,o=ai(),s=pl(i);return n=MN(n),e.context===null?e.context=n:e.pendingContext=n,e=pa(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=dl(i,e,s),t!==null&&(Ho(t,i,s,o),hy(t,i,s)),s}function iv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function TP(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function LM(t,e){TP(t,e),(t=t.alternate)&&TP(t,e)}function g8(){return null}var CN=typeof reportError=="function"?reportError:function(t){console.error(t)};function kM(t){this._internalRoot=t}wx.prototype.render=kM.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Le(409));Sx(t,e,null,null)};wx.prototype.unmount=kM.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Lc(function(){Sx(null,t,null,null)}),e[_a]=null}};function wx(t){this._internalRoot=t}wx.prototype.unstable_scheduleHydration=function(t){if(t){var e=ik();t={blockedOn:null,target:t,priority:e};for(var n=0;n<nl.length&&e!==0&&e<nl[n].priority;n++);nl.splice(n,0,t),n===0&&sk(t)}};function NM(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function bx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function CP(){}function y8(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=iv(s);o.call(c)}}var s=TN(e,r,t,0,null,!1,!1,"",CP);return t._reactRootContainer=s,t[_a]=s.current,lp(t.nodeType===8?t.parentNode:t),Lc(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=iv(l);a.call(c)}}var l=OM(t,0,!1,null,null,!1,!1,"",CP);return t._reactRootContainer=l,t[_a]=l.current,lp(t.nodeType===8?t.parentNode:t),Lc(function(){Sx(e,l,n,r)}),l}function Ex(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=iv(s);a.call(l)}}Sx(e,s,t,i)}else s=y8(n,e,t,i,r);return iv(s)}nk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Eh(e.pendingLanes);n!==0&&(eM(e,n|1),Ti(e,Xn()),!(Wt&6)&&(zf=Xn()+500,Rl()))}break;case 13:Lc(function(){var r=Sa(t,1);if(r!==null){var i=ai();Ho(r,t,1,i)}}),LM(t,1)}};tM=function(t){if(t.tag===13){var e=Sa(t,134217728);if(e!==null){var n=ai();Ho(e,t,134217728,n)}LM(t,134217728)}};rk=function(t){if(t.tag===13){var e=pl(t),n=Sa(t,e);if(n!==null){var r=ai();Ho(n,t,e,r)}LM(t,e)}};ik=function(){return tn};ok=function(t,e){var n=tn;try{return tn=t,e()}finally{tn=n}};eb=function(t,e,n){switch(e){case"input":if(Xw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=px(r);if(!i)throw Error(Le(90));DL(r),Xw(r,i)}}}break;case"textarea":FL(t,n);break;case"select":e=n.value,e!=null&&_f(t,!!n.multiple,e,!1)}};jL=AM;GL=Lc;var v8={usingClientEntryPoint:!1,Events:[tm,sf,px,$L,WL,AM]},Kd={findFiberByHostInstance:uc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},x8={bundleType:Kd.bundleType,version:Kd.version,rendererPackageName:Kd.rendererPackageName,rendererConfig:Kd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ia.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qL(t),t===null?null:t.stateNode},findFiberByHostInstance:Kd.findFiberByHostInstance||g8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gg.isDisabled&&Gg.supportsFiber)try{ux=Gg.inject(x8),Ps=Gg}catch{}}qi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v8;qi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!NM(e))throw Error(Le(200));return m8(t,e,null,n)};qi.createRoot=function(t,e){if(!NM(t))throw Error(Le(299));var n=!1,r="",i=CN;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=OM(t,1,!1,null,null,n,!1,r,i),t[_a]=e.current,lp(t.nodeType===8?t.parentNode:t),new kM(e)};qi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Le(188)):(t=Object.keys(t).join(","),Error(Le(268,t)));return t=qL(e),t=t===null?null:t.stateNode,t};qi.flushSync=function(t){return Lc(t)};qi.hydrate=function(t,e,n){if(!bx(e))throw Error(Le(200));return Ex(null,t,e,!0,n)};qi.hydrateRoot=function(t,e,n){if(!NM(t))throw Error(Le(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=CN;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=TN(e,null,t,1,n??null,i,!1,o,s),t[_a]=e.current,lp(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new wx(e)};qi.render=function(t,e,n){if(!bx(e))throw Error(Le(200));return Ex(null,t,e,!1,n)};qi.unmountComponentAtNode=function(t){if(!bx(t))throw Error(Le(40));return t._reactRootContainer?(Lc(function(){Ex(null,null,t,!1,function(){t._reactRootContainer=null,t[_a]=null})}),!0):!1};qi.unstable_batchedUpdates=AM;qi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!bx(n))throw Error(Le(200));if(t==null||t._reactInternals===void 0)throw Error(Le(38));return Ex(t,e,n,!1,r)};qi.version="18.3.1-next-f1338f8080-20240426";function AN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AN)}catch(t){console.error(t)}}AN(),AL.exports=qi;var ma=AL.exports;const Tf=Us(ma);var DM,AP=ma;DM=AP.createRoot,AP.hydrateRoot;const _8="_panel_17tyo_1",S8="_buttonColumn_17tyo_21",w8="_selected_17tyo_93",Xg={panel:_8,buttonColumn:S8,selected:w8};function kc(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${t}; visit ${n} for the full message.`}const ga="$$material";function xl(){return xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xl.apply(null,arguments)}function PN(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var b8=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,E8=PN(function(t){return b8.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),M8=!1;function T8(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function C8(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var A8=function(){function t(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!M8:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(C8(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=T8(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Hr="-ms-",ov="-moz-",Zt="-webkit-",RN="comm",UM="rule",FM="decl",P8="@import",IN="@keyframes",R8="@layer",I8=Math.abs,Mx=String.fromCharCode,O8=Object.assign;function L8(t,e){return Ar(t,0)^45?(((e<<2^Ar(t,0))<<2^Ar(t,1))<<2^Ar(t,2))<<2^Ar(t,3):0}function ON(t){return t.trim()}function k8(t,e){return(t=e.exec(t))?t[0]:t}function Jt(t,e,n){return t.replace(e,n)}function Lb(t,e){return t.indexOf(e)}function Ar(t,e){return t.charCodeAt(e)|0}function yp(t,e,n){return t.slice(e,n)}function ys(t){return t.length}function zM(t){return t.length}function Yg(t,e){return e.push(t),t}function N8(t,e){return t.map(e).join("")}var Tx=1,Bf=1,LN=0,Ci=0,Qn=0,sd="";function Cx(t,e,n,r,i,o,s){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:Tx,column:Bf,length:s,return:""}}function Zd(t,e){return O8(Cx("",null,null,"",null,null,0),t,{length:-t.length},e)}function D8(){return Qn}function U8(){return Qn=Ci>0?Ar(sd,--Ci):0,Bf--,Qn===10&&(Bf=1,Tx--),Qn}function Wi(){return Qn=Ci<LN?Ar(sd,Ci++):0,Bf++,Qn===10&&(Bf=1,Tx++),Qn}function Is(){return Ar(sd,Ci)}function _y(){return Ci}function rm(t,e){return yp(sd,t,e)}function vp(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function kN(t){return Tx=Bf=1,LN=ys(sd=t),Ci=0,[]}function NN(t){return sd="",t}function Sy(t){return ON(rm(Ci-1,kb(t===91?t+2:t===40?t+1:t)))}function F8(t){for(;(Qn=Is())&&Qn<33;)Wi();return vp(t)>2||vp(Qn)>3?"":" "}function z8(t,e){for(;--e&&Wi()&&!(Qn<48||Qn>102||Qn>57&&Qn<65||Qn>70&&Qn<97););return rm(t,_y()+(e<6&&Is()==32&&Wi()==32))}function kb(t){for(;Wi();)switch(Qn){case t:return Ci;case 34:case 39:t!==34&&t!==39&&kb(Qn);break;case 40:t===41&&kb(t);break;case 92:Wi();break}return Ci}function B8(t,e){for(;Wi()&&t+Qn!==57;)if(t+Qn===84&&Is()===47)break;return"/*"+rm(e,Ci-1)+"*"+Mx(t===47?t:Wi())}function H8(t){for(;!vp(Is());)Wi();return rm(t,Ci)}function V8(t){return NN(wy("",null,null,null,[""],t=kN(t),0,[0],t))}function wy(t,e,n,r,i,o,s,a,l){for(var c=0,u=0,d=s,p=0,m=0,g=0,v=1,x=1,y=1,_=0,w="",M=i,A=o,C=r,P=w;x;)switch(g=_,_=Wi()){case 40:if(g!=108&&Ar(P,d-1)==58){Lb(P+=Jt(Sy(_),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:P+=Sy(_);break;case 9:case 10:case 13:case 32:P+=F8(g);break;case 92:P+=z8(_y()-1,7);continue;case 47:switch(Is()){case 42:case 47:Yg($8(B8(Wi(),_y()),e,n),l);break;default:P+="/"}break;case 123*v:a[c++]=ys(P)*y;case 125*v:case 59:case 0:switch(_){case 0:case 125:x=0;case 59+u:y==-1&&(P=Jt(P,/\f/g,"")),m>0&&ys(P)-d&&Yg(m>32?RP(P+";",r,n,d-1):RP(Jt(P," ","")+";",r,n,d-2),l);break;case 59:P+=";";default:if(Yg(C=PP(P,e,n,c,u,i,a,w,M=[],A=[],d),o),_===123)if(u===0)wy(P,e,C,C,M,o,d,a,A);else switch(p===99&&Ar(P,3)===110?100:p){case 100:case 108:case 109:case 115:wy(t,C,C,r&&Yg(PP(t,C,C,0,0,i,a,w,i,M=[],d),A),i,A,d,a,r?M:A);break;default:wy(P,C,C,C,[""],A,0,a,A)}}c=u=m=0,v=y=1,w=P="",d=s;break;case 58:d=1+ys(P),m=g;default:if(v<1){if(_==123)--v;else if(_==125&&v++==0&&U8()==125)continue}switch(P+=Mx(_),_*v){case 38:y=u>0?1:(P+="\f",-1);break;case 44:a[c++]=(ys(P)-1)*y,y=1;break;case 64:Is()===45&&(P+=Sy(Wi())),p=Is(),u=d=ys(w=P+=H8(_y())),_++;break;case 45:g===45&&ys(P)==2&&(v=0)}}return o}function PP(t,e,n,r,i,o,s,a,l,c,u){for(var d=i-1,p=i===0?o:[""],m=zM(p),g=0,v=0,x=0;g<r;++g)for(var y=0,_=yp(t,d+1,d=I8(v=s[g])),w=t;y<m;++y)(w=ON(v>0?p[y]+" "+_:Jt(_,/&\f/g,p[y])))&&(l[x++]=w);return Cx(t,e,n,i===0?UM:a,l,c,u)}function $8(t,e,n){return Cx(t,e,n,RN,Mx(D8()),yp(t,2,-2),0)}function RP(t,e,n,r){return Cx(t,e,n,FM,yp(t,0,r),yp(t,r+1,-1),r)}function Cf(t,e){for(var n="",r=zM(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function W8(t,e,n,r){switch(t.type){case R8:if(t.children.length)break;case P8:case FM:return t.return=t.return||t.value;case RN:return"";case IN:return t.return=t.value+"{"+Cf(t.children,r)+"}";case UM:t.value=t.props.join(",")}return ys(n=Cf(t.children,r))?t.return=t.value+"{"+n+"}":""}function j8(t){var e=zM(t);return function(n,r,i,o){for(var s="",a=0;a<e;a++)s+=t[a](n,r,i,o)||"";return s}}function G8(t){return function(e){e.root||(e=e.return)&&t(e)}}var X8=function(e,n,r){for(var i=0,o=0;i=o,o=Is(),i===38&&o===12&&(n[r]=1),!vp(o);)Wi();return rm(e,Ci)},Y8=function(e,n){var r=-1,i=44;do switch(vp(i)){case 0:i===38&&Is()===12&&(n[r]=1),e[r]+=X8(Ci-1,n,r);break;case 2:e[r]+=Sy(i);break;case 4:if(i===44){e[++r]=Is()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=Mx(i)}while(i=Wi());return e},q8=function(e,n){return NN(Y8(kN(e),n))},IP=new WeakMap,K8=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!IP.get(r))&&!i){IP.set(e,!0);for(var o=[],s=q8(n,o),a=r.props,l=0,c=0;l<s.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=o[l]?s[l].replace(/&\f/g,a[u]):a[u]+" "+s[l]}}},Z8=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function DN(t,e){switch(L8(t,e)){case 5103:return Zt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Zt+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Zt+t+ov+t+Hr+t+t;case 6828:case 4268:return Zt+t+Hr+t+t;case 6165:return Zt+t+Hr+"flex-"+t+t;case 5187:return Zt+t+Jt(t,/(\w+).+(:[^]+)/,Zt+"box-$1$2"+Hr+"flex-$1$2")+t;case 5443:return Zt+t+Hr+"flex-item-"+Jt(t,/flex-|-self/,"")+t;case 4675:return Zt+t+Hr+"flex-line-pack"+Jt(t,/align-content|flex-|-self/,"")+t;case 5548:return Zt+t+Hr+Jt(t,"shrink","negative")+t;case 5292:return Zt+t+Hr+Jt(t,"basis","preferred-size")+t;case 6060:return Zt+"box-"+Jt(t,"-grow","")+Zt+t+Hr+Jt(t,"grow","positive")+t;case 4554:return Zt+Jt(t,/([^-])(transform)/g,"$1"+Zt+"$2")+t;case 6187:return Jt(Jt(Jt(t,/(zoom-|grab)/,Zt+"$1"),/(image-set)/,Zt+"$1"),t,"")+t;case 5495:case 3959:return Jt(t,/(image-set\([^]*)/,Zt+"$1$`$1");case 4968:return Jt(Jt(t,/(.+:)(flex-)?(.*)/,Zt+"box-pack:$3"+Hr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Zt+t+t;case 4095:case 3583:case 4068:case 2532:return Jt(t,/(.+)-inline(.+)/,Zt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ys(t)-1-e>6)switch(Ar(t,e+1)){case 109:if(Ar(t,e+4)!==45)break;case 102:return Jt(t,/(.+:)(.+)-([^]+)/,"$1"+Zt+"$2-$3$1"+ov+(Ar(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Lb(t,"stretch")?DN(Jt(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Ar(t,e+1)!==115)break;case 6444:switch(Ar(t,ys(t)-3-(~Lb(t,"!important")&&10))){case 107:return Jt(t,":",":"+Zt)+t;case 101:return Jt(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Zt+(Ar(t,14)===45?"inline-":"")+"box$3$1"+Zt+"$2$3$1"+Hr+"$2box$3")+t}break;case 5936:switch(Ar(t,e+11)){case 114:return Zt+t+Hr+Jt(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Zt+t+Hr+Jt(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Zt+t+Hr+Jt(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Zt+t+Hr+t+t}return t}var J8=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case FM:e.return=DN(e.value,e.length);break;case IN:return Cf([Zd(e,{value:Jt(e.value,"@","@"+Zt)})],i);case UM:if(e.length)return N8(e.props,function(o){switch(k8(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Cf([Zd(e,{props:[Jt(o,/:(read-\w+)/,":"+ov+"$1")]})],i);case"::placeholder":return Cf([Zd(e,{props:[Jt(o,/:(plac\w+)/,":"+Zt+"input-$1")]}),Zd(e,{props:[Jt(o,/:(plac\w+)/,":"+ov+"$1")]}),Zd(e,{props:[Jt(o,/:(plac\w+)/,Hr+"input-$1")]})],i)}return""})}},Q8=[J8],eV=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(v){var x=v.getAttribute("data-emotion");x.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var i=e.stylisPlugins||Q8,o={},s,a=[];s=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(v){for(var x=v.getAttribute("data-emotion").split(" "),y=1;y<x.length;y++)o[x[y]]=!0;a.push(v)});var l,c=[K8,Z8];{var u,d=[W8,G8(function(v){u.insert(v)})],p=j8(c.concat(i,d)),m=function(x){return Cf(V8(x),p)};l=function(x,y,_,w){u=_,m(x?x+"{"+y.styles+"}":y.styles),w&&(g.inserted[y.name]=!0)}}var g={key:n,sheet:new A8({key:n,container:s,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:l};return g.sheet.hydrate(a),g},UN={exports:{}},nn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _r=typeof Symbol=="function"&&Symbol.for,BM=_r?Symbol.for("react.element"):60103,HM=_r?Symbol.for("react.portal"):60106,Ax=_r?Symbol.for("react.fragment"):60107,Px=_r?Symbol.for("react.strict_mode"):60108,Rx=_r?Symbol.for("react.profiler"):60114,Ix=_r?Symbol.for("react.provider"):60109,Ox=_r?Symbol.for("react.context"):60110,VM=_r?Symbol.for("react.async_mode"):60111,Lx=_r?Symbol.for("react.concurrent_mode"):60111,kx=_r?Symbol.for("react.forward_ref"):60112,Nx=_r?Symbol.for("react.suspense"):60113,tV=_r?Symbol.for("react.suspense_list"):60120,Dx=_r?Symbol.for("react.memo"):60115,Ux=_r?Symbol.for("react.lazy"):60116,nV=_r?Symbol.for("react.block"):60121,rV=_r?Symbol.for("react.fundamental"):60117,iV=_r?Symbol.for("react.responder"):60118,oV=_r?Symbol.for("react.scope"):60119;function Zi(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case BM:switch(t=t.type,t){case VM:case Lx:case Ax:case Rx:case Px:case Nx:return t;default:switch(t=t&&t.$$typeof,t){case Ox:case kx:case Ux:case Dx:case Ix:return t;default:return e}}case HM:return e}}}function FN(t){return Zi(t)===Lx}nn.AsyncMode=VM;nn.ConcurrentMode=Lx;nn.ContextConsumer=Ox;nn.ContextProvider=Ix;nn.Element=BM;nn.ForwardRef=kx;nn.Fragment=Ax;nn.Lazy=Ux;nn.Memo=Dx;nn.Portal=HM;nn.Profiler=Rx;nn.StrictMode=Px;nn.Suspense=Nx;nn.isAsyncMode=function(t){return FN(t)||Zi(t)===VM};nn.isConcurrentMode=FN;nn.isContextConsumer=function(t){return Zi(t)===Ox};nn.isContextProvider=function(t){return Zi(t)===Ix};nn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===BM};nn.isForwardRef=function(t){return Zi(t)===kx};nn.isFragment=function(t){return Zi(t)===Ax};nn.isLazy=function(t){return Zi(t)===Ux};nn.isMemo=function(t){return Zi(t)===Dx};nn.isPortal=function(t){return Zi(t)===HM};nn.isProfiler=function(t){return Zi(t)===Rx};nn.isStrictMode=function(t){return Zi(t)===Px};nn.isSuspense=function(t){return Zi(t)===Nx};nn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Ax||t===Lx||t===Rx||t===Px||t===Nx||t===tV||typeof t=="object"&&t!==null&&(t.$$typeof===Ux||t.$$typeof===Dx||t.$$typeof===Ix||t.$$typeof===Ox||t.$$typeof===kx||t.$$typeof===rV||t.$$typeof===iV||t.$$typeof===oV||t.$$typeof===nV)};nn.typeOf=Zi;UN.exports=nn;var sV=UN.exports,zN=sV,aV={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},lV={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},BN={};BN[zN.ForwardRef]=aV;BN[zN.Memo]=lV;var cV=!0;function uV(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var HN=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||cV===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},VN=function(e,n,r){HN(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var o=n;do e.insert(n===o?"."+i:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function fV(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var dV={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hV=!1,pV=/[A-Z]|^ms/g,mV=/_EMO_([^_]+?)_([^]*?)_EMO_/g,$N=function(e){return e.charCodeAt(1)===45},OP=function(e){return e!=null&&typeof e!="boolean"},_S=PN(function(t){return $N(t)?t:t.replace(pV,"-$&").toLowerCase()}),LP=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(mV,function(r,i,o){return vs={name:i,styles:o,next:vs},i})}return dV[e]!==1&&!$N(e)&&typeof n=="number"&&n!==0?n+"px":n},gV="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function xp(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return vs={name:i.name,styles:i.styles,next:vs},i.name;var o=n;if(o.styles!==void 0){var s=o.next;if(s!==void 0)for(;s!==void 0;)vs={name:s.name,styles:s.styles,next:vs},s=s.next;var a=o.styles+";";return a}return yV(t,e,n)}case"function":{if(t!==void 0){var l=vs,c=n(t);return vs=l,xp(t,e,c)}break}}var u=n;if(e==null)return u;var d=e[u];return d!==void 0?d:u}function yV(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=xp(t,e,n[i])+";";else for(var o in n){var s=n[o];if(typeof s!="object"){var a=s;e!=null&&e[a]!==void 0?r+=o+"{"+e[a]+"}":OP(a)&&(r+=_S(o)+":"+LP(o,a)+";")}else{if(o==="NO_COMPONENT_SELECTOR"&&hV)throw new Error(gV);if(Array.isArray(s)&&typeof s[0]=="string"&&(e==null||e[s[0]]===void 0))for(var l=0;l<s.length;l++)OP(s[l])&&(r+=_S(o)+":"+LP(o,s[l])+";");else{var c=xp(t,e,s);switch(o){case"animation":case"animationName":{r+=_S(o)+":"+c+";";break}default:r+=o+"{"+c+"}"}}}}return r}var kP=/label:\s*([^\s;{]+)\s*(;|$)/g,vs;function $M(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";vs=void 0;var o=t[0];if(o==null||o.raw===void 0)r=!1,i+=xp(n,e,o);else{var s=o;i+=s[0]}for(var a=1;a<t.length;a++)if(i+=xp(n,e,t[a]),r){var l=o;i+=l[a]}kP.lastIndex=0;for(var c="",u;(u=kP.exec(i))!==null;)c+="-"+u[1];var d=fV(i)+c;return{name:d,styles:i,next:vs}}var vV=function(e){return e()},WN=Bw.useInsertionEffect?Bw.useInsertionEffect:!1,xV=WN||vV,NP=WN||R.useLayoutEffect,jN=R.createContext(typeof HTMLElement<"u"?eV({key:"css"}):null);jN.Provider;var GN=function(e){return R.forwardRef(function(n,r){var i=R.useContext(jN);return e(n,i,r)})},Fx=R.createContext({}),_V=GN(function(t,e){var n=t.styles,r=$M([n],void 0,R.useContext(Fx)),i=R.useRef();return NP(function(){var o=e.key+"-global",s=new e.sheet.constructor({key:o,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return e.sheet.tags.length&&(s.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",o),s.hydrate([l])),i.current=[s,a],function(){s.flush()}},[e]),NP(function(){var o=i.current,s=o[0],a=o[1];if(a){o[1]=!1;return}if(r.next!==void 0&&VN(e,r.next,!0),s.tags.length){var l=s.tags[s.tags.length-1].nextElementSibling;s.before=l,s.flush()}e.insert("",r,s,!1)},[e,r.name]),null}),SV=E8,wV=function(e){return e!=="theme"},DP=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?SV:wV},UP=function(e,n,r){var i;if(n){var o=n.shouldForwardProp;i=e.__emotion_forwardProp&&o?function(s){return e.__emotion_forwardProp(s)&&o(s)}:o}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},bV=!1,EV=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return HN(n,r,i),xV(function(){return VN(n,r,i)}),null},MV=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,o,s;n!==void 0&&(o=n.label,s=n.target);var a=UP(e,n,r),l=a||DP(i),c=!l("as");return function(){var u=arguments,d=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&d.push("label:"+o+";"),u[0]==null||u[0].raw===void 0)d.push.apply(d,u);else{d.push(u[0][0]);for(var p=u.length,m=1;m<p;m++)d.push(u[m],u[0][m])}var g=GN(function(v,x,y){var _=c&&v.as||i,w="",M=[],A=v;if(v.theme==null){A={};for(var C in v)A[C]=v[C];A.theme=R.useContext(Fx)}typeof v.className=="string"?w=uV(x.registered,M,v.className):v.className!=null&&(w=v.className+" ");var P=$M(d.concat(M),x.registered,A);w+=x.key+"-"+P.name,s!==void 0&&(w+=" "+s);var N=c&&a===void 0?DP(_):l,O={};for(var E in v)c&&E==="as"||N(E)&&(O[E]=v[E]);return O.className=w,y&&(O.ref=y),R.createElement(R.Fragment,null,R.createElement(EV,{cache:x,serialized:P,isStringTag:typeof _=="string"}),R.createElement(_,O))});return g.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",g.defaultProps=e.defaultProps,g.__emotion_real=g,g.__emotion_base=i,g.__emotion_styles=d,g.__emotion_forwardProp=a,Object.defineProperty(g,"toString",{value:function(){return s===void 0&&bV?"NO_COMPONENT_SELECTOR":"."+s}}),g.withComponent=function(v,x){return t(v,xl({},n,x,{shouldForwardProp:UP(g,x,!0)})).apply(void 0,d)},g}},TV=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Nb=MV.bind();TV.forEach(function(t){Nb[t]=Nb(t)});var XN={exports:{}},CV="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",AV=CV,PV=AV;function YN(){}function qN(){}qN.resetWarningCache=YN;var RV=function(){function t(r,i,o,s,a,l){if(l!==PV){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:qN,resetWarningCache:YN};return n.PropTypes=n,n};XN.exports=RV();var IV=XN.exports;const Ce=Us(IV);function OV(t){return t==null||Object.keys(t).length===0}function KN(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(OV(i)?n:i):e;return k.jsx(_V,{styles:r})}/**
 * @mui/styled-engine v6.1.6
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function LV(t,e){return Nb(t,e)}function kV(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const FP=[];function zP(t){return FP[0]=t,$M(FP)}function sa(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function ZN(t){if(!sa(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=ZN(t[n])}),e}function ji(t,e,n={clone:!0}){const r=n.clone?{...t}:t;return sa(t)&&sa(e)&&Object.keys(e).forEach(i=>{sa(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&sa(t[i])?r[i]=ji(t[i],e[i],n):n.clone?r[i]=sa(e[i])?ZN(e[i]):e[i]:r[i]=e[i]}),r}const NV=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function DV(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=t,o=NV(e),s=Object.keys(o);function a(p){return`@media (min-width:${typeof e[p]=="number"?e[p]:p}${n})`}function l(p){return`@media (max-width:${(typeof e[p]=="number"?e[p]:p)-r/100}${n})`}function c(p,m){const g=s.indexOf(m);return`@media (min-width:${typeof e[p]=="number"?e[p]:p}${n}) and (max-width:${(g!==-1&&typeof e[s[g]]=="number"?e[s[g]]:m)-r/100}${n})`}function u(p){return s.indexOf(p)+1<s.length?c(p,s[s.indexOf(p)+1]):a(p)}function d(p){const m=s.indexOf(p);return m===0?a(s[1]):m===s.length-1?l(s[m]):c(p,s[s.indexOf(p)+1]).replace("@media","@media not all and")}return{keys:s,values:o,up:a,down:l,between:c,only:u,not:d,unit:n,...i}}function UV(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,i)=>{var s,a;const o=/min-width:\s*([0-9.]+)/;return+(((s=r.match(o))==null?void 0:s[1])||0)-+(((a=i.match(o))==null?void 0:a[1])||0)});return n.length?n.reduce((r,i)=>{const o=e[i];return delete r[i],r[i]=o,r},{...e}):e}function FV(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function zV(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,o=Number.isNaN(+r)?r||0:+r;return t.containerQueries(i).up(o)}function BV(t){const e=(o,s)=>o.replace("@media",s?`@container ${s}`:"@container");function n(o,s){o.up=(...a)=>e(t.breakpoints.up(...a),s),o.down=(...a)=>e(t.breakpoints.down(...a),s),o.between=(...a)=>e(t.breakpoints.between(...a),s),o.only=(...a)=>e(t.breakpoints.only(...a),s),o.not=(...a)=>{const l=e(t.breakpoints.not(...a),s);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const r={},i=o=>(n(r,o),r);return n(i),{...t,containerQueries:i}}const HV={borderRadius:4};function Bh(t,e){return e?ji(t,e,{clone:!1}):t}const zx={xs:0,sm:600,md:900,lg:1200,xl:1536},BP={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${zx[t]}px)`},VV={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:zx[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function ba(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const o=r.breakpoints||BP;return e.reduce((s,a,l)=>(s[o.up(o.keys[l])]=n(e[l]),s),{})}if(typeof e=="object"){const o=r.breakpoints||BP;return Object.keys(e).reduce((s,a)=>{if(FV(o.keys,a)){const l=zV(r.containerQueries?r:VV,a);l&&(s[l]=n(e[a],a))}else if(Object.keys(o.values||zx).includes(a)){const l=o.up(a);s[l]=n(e[a],a)}else{const l=a;s[l]=e[l]}return s},{})}return n(e)}function $V(t={}){var n;return((n=t.keys)==null?void 0:n.reduce((r,i)=>{const o=t.up(i);return r[o]={},r},{}))||{}}function WV(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function Hf(t){if(typeof t!="string")throw new Error(kc(7));return t.charAt(0).toUpperCase()+t.slice(1)}function Bx(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function sv(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=Bx(t,n)||r,e&&(i=e(i,r,t)),i}function Yn(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,o=s=>{if(s[e]==null)return null;const a=s[e],l=s.theme,c=Bx(l,r)||{};return ba(s,a,d=>{let p=sv(c,i,d);return d===p&&typeof d=="string"&&(p=sv(c,i,`${e}${d==="default"?"":Hf(d)}`,d)),n===!1?p:{[n]:p}})};return o.propTypes={},o.filterProps=[e],o}function jV(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const GV={m:"margin",p:"padding"},XV={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},HP={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},YV=jV(t=>{if(t.length>2)if(HP[t])t=HP[t];else return[t];const[e,n]=t.split(""),r=GV[e],i=XV[n]||"";return Array.isArray(i)?i.map(o=>r+o):[r+i]}),WM=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],jM=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...WM,...jM];function im(t,e,n,r){const i=Bx(t,e,!0)??n;return typeof i=="number"||typeof i=="string"?o=>typeof o=="string"?o:typeof i=="string"?`calc(${o} * ${i})`:i*o:Array.isArray(i)?o=>{if(typeof o=="string")return o;const s=Math.abs(o),a=i[s];return o>=0?a:typeof a=="number"?-a:`-${a}`}:typeof i=="function"?i:()=>{}}function GM(t){return im(t,"spacing",8)}function om(t,e){return typeof e=="string"||e==null?e:t(e)}function qV(t,e){return n=>t.reduce((r,i)=>(r[i]=om(e,n),r),{})}function KV(t,e,n,r){if(!e.includes(n))return null;const i=YV(n),o=qV(i,r),s=t[n];return ba(t,s,o)}function JN(t,e){const n=GM(t.theme);return Object.keys(t).map(r=>KV(t,e,r,n)).reduce(Bh,{})}function Bn(t){return JN(t,WM)}Bn.propTypes={};Bn.filterProps=WM;function Hn(t){return JN(t,jM)}Hn.propTypes={};Hn.filterProps=jM;function QN(t=8,e=GM({spacing:t})){if(t.mui)return t;const n=(...r)=>(r.length===0?[1]:r).map(o=>{const s=e(o);return typeof s=="number"?`${s}px`:s}).join(" ");return n.mui=!0,n}function Hx(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(o=>{r[o]=i}),r),{}),n=r=>Object.keys(r).reduce((i,o)=>e[o]?Bh(i,e[o](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function uo(t){return typeof t!="number"?t:`${t}px solid`}function So(t,e){return Yn({prop:t,themeKey:"borders",transform:e})}const ZV=So("border",uo),JV=So("borderTop",uo),QV=So("borderRight",uo),e$=So("borderBottom",uo),t$=So("borderLeft",uo),n$=So("borderColor"),r$=So("borderTopColor"),i$=So("borderRightColor"),o$=So("borderBottomColor"),s$=So("borderLeftColor"),a$=So("outline",uo),l$=So("outlineColor"),Vx=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=im(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:om(e,r)});return ba(t,t.borderRadius,n)}return null};Vx.propTypes={};Vx.filterProps=["borderRadius"];Hx(ZV,JV,QV,e$,t$,n$,r$,i$,o$,s$,Vx,a$,l$);const $x=t=>{if(t.gap!==void 0&&t.gap!==null){const e=im(t.theme,"spacing",8),n=r=>({gap:om(e,r)});return ba(t,t.gap,n)}return null};$x.propTypes={};$x.filterProps=["gap"];const Wx=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=im(t.theme,"spacing",8),n=r=>({columnGap:om(e,r)});return ba(t,t.columnGap,n)}return null};Wx.propTypes={};Wx.filterProps=["columnGap"];const jx=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=im(t.theme,"spacing",8),n=r=>({rowGap:om(e,r)});return ba(t,t.rowGap,n)}return null};jx.propTypes={};jx.filterProps=["rowGap"];const c$=Yn({prop:"gridColumn"}),u$=Yn({prop:"gridRow"}),f$=Yn({prop:"gridAutoFlow"}),d$=Yn({prop:"gridAutoColumns"}),h$=Yn({prop:"gridAutoRows"}),p$=Yn({prop:"gridTemplateColumns"}),m$=Yn({prop:"gridTemplateRows"}),g$=Yn({prop:"gridTemplateAreas"}),y$=Yn({prop:"gridArea"});Hx($x,Wx,jx,c$,u$,f$,d$,h$,p$,m$,g$,y$);function Af(t,e){return e==="grey"?e:t}const v$=Yn({prop:"color",themeKey:"palette",transform:Af}),x$=Yn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Af}),_$=Yn({prop:"backgroundColor",themeKey:"palette",transform:Af});Hx(v$,x$,_$);function zi(t){return t<=1&&t!==0?`${t*100}%`:t}const S$=Yn({prop:"width",transform:zi}),XM=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var i,o,s,a,l;const r=((s=(o=(i=t.theme)==null?void 0:i.breakpoints)==null?void 0:o.values)==null?void 0:s[n])||zx[n];return r?((l=(a=t.theme)==null?void 0:a.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:zi(n)}};return ba(t,t.maxWidth,e)}return null};XM.filterProps=["maxWidth"];const w$=Yn({prop:"minWidth",transform:zi}),b$=Yn({prop:"height",transform:zi}),E$=Yn({prop:"maxHeight",transform:zi}),M$=Yn({prop:"minHeight",transform:zi});Yn({prop:"size",cssProperty:"width",transform:zi});Yn({prop:"size",cssProperty:"height",transform:zi});const T$=Yn({prop:"boxSizing"});Hx(S$,XM,w$,b$,E$,M$,T$);const Gx={border:{themeKey:"borders",transform:uo},borderTop:{themeKey:"borders",transform:uo},borderRight:{themeKey:"borders",transform:uo},borderBottom:{themeKey:"borders",transform:uo},borderLeft:{themeKey:"borders",transform:uo},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:uo},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Vx},color:{themeKey:"palette",transform:Af},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Af},backgroundColor:{themeKey:"palette",transform:Af},p:{style:Hn},pt:{style:Hn},pr:{style:Hn},pb:{style:Hn},pl:{style:Hn},px:{style:Hn},py:{style:Hn},padding:{style:Hn},paddingTop:{style:Hn},paddingRight:{style:Hn},paddingBottom:{style:Hn},paddingLeft:{style:Hn},paddingX:{style:Hn},paddingY:{style:Hn},paddingInline:{style:Hn},paddingInlineStart:{style:Hn},paddingInlineEnd:{style:Hn},paddingBlock:{style:Hn},paddingBlockStart:{style:Hn},paddingBlockEnd:{style:Hn},m:{style:Bn},mt:{style:Bn},mr:{style:Bn},mb:{style:Bn},ml:{style:Bn},mx:{style:Bn},my:{style:Bn},margin:{style:Bn},marginTop:{style:Bn},marginRight:{style:Bn},marginBottom:{style:Bn},marginLeft:{style:Bn},marginX:{style:Bn},marginY:{style:Bn},marginInline:{style:Bn},marginInlineStart:{style:Bn},marginInlineEnd:{style:Bn},marginBlock:{style:Bn},marginBlockStart:{style:Bn},marginBlockEnd:{style:Bn},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:$x},rowGap:{style:jx},columnGap:{style:Wx},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:zi},maxWidth:{style:XM},minWidth:{transform:zi},height:{transform:zi},maxHeight:{transform:zi},minHeight:{transform:zi},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function C$(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function A$(t,e){return typeof t=="function"?t(e):t}function P$(){function t(n,r,i,o){const s={[n]:r,theme:i},a=o[n];if(!a)return{[n]:r};const{cssProperty:l=n,themeKey:c,transform:u,style:d}=a;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[n]:r};const p=Bx(i,c)||{};return d?d(s):ba(s,r,g=>{let v=sv(p,u,g);return g===v&&typeof g=="string"&&(v=sv(p,u,`${n}${g==="default"?"":Hf(g)}`,g)),l===!1?v:{[l]:v}})}function e(n){const{sx:r,theme:i={}}=n||{};if(!r)return null;const o=i.unstable_sxConfig??Gx;function s(a){let l=a;if(typeof a=="function")l=a(i);else if(typeof a!="object")return a;if(!l)return null;const c=$V(i.breakpoints),u=Object.keys(c);let d=c;return Object.keys(l).forEach(p=>{const m=A$(l[p],i);if(m!=null)if(typeof m=="object")if(o[p])d=Bh(d,t(p,m,i,o));else{const g=ba({theme:i},m,v=>({[p]:v}));C$(g,m)?d[p]=e({sx:m,theme:i}):d=Bh(d,g)}else d=Bh(d,t(p,m,i,o))}),UV(i,WV(u,d))}return Array.isArray(r)?r.map(s):s(r)}return e}const Nc=P$();Nc.filterProps=["sx"];function R$(t,e){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[t])||typeof n.getColorSchemeSelector!="function")return{};let i=n.getColorSchemeSelector(t);return i==="&"?e:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:e})}return n.palette.mode===t?e:{}}function YM(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:o={},...s}=t,a=DV(n),l=QN(i);let c=ji({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:l,shape:{...HV,...o}},s);return c=BV(c),c.applyStyles=R$,c=e.reduce((u,d)=>ji(u,d),c),c.unstable_sxConfig={...Gx,...s==null?void 0:s.unstable_sxConfig},c.unstable_sx=function(d){return Nc({sx:d,theme:this})},c}function I$(t){return Object.keys(t).length===0}function eD(t=null){const e=R.useContext(Fx);return!e||I$(e)?t:e}const O$=YM();function tD(t=O$){return eD(t)}function L$({styles:t,themeId:e,defaultTheme:n={}}){const r=tD(n),i=typeof t=="function"?t(e&&r[e]||r):t;return k.jsx(KN,{styles:i})}const VP=t=>t,k$=()=>{let t=VP;return{configure(e){t=e},generate(e){return t(e)},reset(){t=VP}}},N$=k$();function nD(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=nD(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function D$(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=nD(t))&&(r&&(r+=" "),r+=e);return r}const U$={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function rD(t,e,n="Mui"){const r=U$[e];return r?`${n}-${r}`:`${N$.generate(t)}-${e}`}function F$(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=rD(t,i,n)}),r}function iD(t){const{variants:e,...n}=t,r={variants:e,style:zP(n),isProcessed:!0};return r.style===n||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=zP(i.style))}),r}const z$=YM();function SS(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function B$(t){return t?(e,n)=>n[t]:null}function H$(t,e,n){t.theme=W$(t.theme)?n:t.theme[e]||t.theme}function by(t,e){const n=typeof e=="function"?e(t):e;if(Array.isArray(n))return n.flatMap(r=>by(t,r));if(Array.isArray(n==null?void 0:n.variants)){let r;if(n.isProcessed)r=n.style;else{const{variants:i,...o}=n;r=o}return oD(t,n.variants,[r])}return n!=null&&n.isProcessed?n.style:n}function oD(t,e,n=[]){var i;let r;e:for(let o=0;o<e.length;o+=1){const s=e[o];if(typeof s.props=="function"){if(r??(r={...t,...t.ownerState,ownerState:t.ownerState}),!s.props(r))continue}else for(const a in s.props)if(t[a]!==s.props[a]&&((i=t.ownerState)==null?void 0:i[a])!==s.props[a])continue e;typeof s.style=="function"?(r??(r={...t,...t.ownerState,ownerState:t.ownerState}),n.push(s.style(r))):n.push(s.style)}return n}function V$(t={}){const{themeId:e,defaultTheme:n=z$,rootShouldForwardProp:r=SS,slotShouldForwardProp:i=SS}=t;function o(a){H$(a,e,n)}return(a,l={})=>{kV(a,A=>A.filter(C=>C!==Nc));const{name:c,slot:u,skipVariantsResolver:d,skipSx:p,overridesResolver:m=B$(G$(u)),...g}=l,v=d!==void 0?d:u&&u!=="Root"&&u!=="root"||!1,x=p||!1;let y=SS;u==="Root"||u==="root"?y=r:u?y=i:j$(a)&&(y=void 0);const _=LV(a,{shouldForwardProp:y,label:$$(),...g}),w=A=>{if(typeof A=="function"&&A.__emotion_real!==A)return function(P){return by(P,A)};if(sa(A)){const C=iD(A);return C.variants?function(N){return by(N,C)}:C.style}return A},M=(...A)=>{const C=[],P=A.map(w),N=[];if(C.push(o),c&&m&&N.push(function(H){var J,Q;const Y=(Q=(J=H.theme.components)==null?void 0:J[c])==null?void 0:Q.styleOverrides;if(!Y)return null;const K={};for(const D in Y)K[D]=by(H,Y[D]);return m(H,K)}),c&&!v&&N.push(function(H){var K,J;const W=H.theme,Y=(J=(K=W==null?void 0:W.components)==null?void 0:K[c])==null?void 0:J.variants;return Y?oD(H,Y):null}),x||N.push(Nc),Array.isArray(P[0])){const L=P.shift(),H=new Array(C.length).fill(""),W=new Array(N.length).fill("");let Y;Y=[...H,...L,...W],Y.raw=[...H,...L.raw,...W],C.unshift(Y)}const O=[...C,...P,...N],E=_(...O);return a.muiName&&(E.muiName=a.muiName),E};return _.withConfig&&(M.withConfig=_.withConfig),M}}function $$(t,e){return void 0}function W$(t){for(const e in t)return!1;return!0}function j$(t){return typeof t=="string"&&t.charCodeAt(0)>96}function G$(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function Db(t,e){const n={...e};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const i=r;if(i==="components"||i==="slots")n[i]={...t[i],...n[i]};else if(i==="componentsProps"||i==="slotProps"){const o=t[i],s=e[i];if(!s)n[i]=o||{};else if(!o)n[i]=s;else{n[i]={...s};for(const a in o)if(Object.prototype.hasOwnProperty.call(o,a)){const l=a;n[i][l]=Db(o[l],s[l])}}}else n[i]===void 0&&(n[i]=t[i])}return n}function X$(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function qM(t,e=0,n=1){return X$(t,e,n)}function Y$(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function _l(t){if(t.type)return t;if(t.charAt(0)==="#")return _l(Y$(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(kc(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(kc(10,i))}else r=r.split(",");return r=r.map(o=>parseFloat(o)),{type:n,values:r,colorSpace:i}}const q$=t=>{const e=_l(t);return e.values.slice(0,3).map((n,r)=>e.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},Th=(t,e)=>{try{return q$(t)}catch{return t}};function Xx(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.includes("rgb")?r=r.map((i,o)=>o<3?parseInt(i,10):i):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function sD(t){t=_l(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,o=r*Math.min(i,1-i),s=(c,u=(c+n/30)%12)=>i-o*Math.max(Math.min(u-3,9-u,1),-1);let a="rgb";const l=[Math.round(s(0)*255),Math.round(s(8)*255),Math.round(s(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),Xx({type:a,values:l})}function Ub(t){t=_l(t);let e=t.type==="hsl"||t.type==="hsla"?_l(sD(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function K$(t,e){const n=Ub(t),r=Ub(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function Z$(t,e){return t=_l(t),e=qM(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,Xx(t)}function qg(t,e,n){try{return Z$(t,e)}catch{return t}}function KM(t,e){if(t=_l(t),e=qM(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return Xx(t)}function ln(t,e,n){try{return KM(t,e)}catch{return t}}function ZM(t,e){if(t=_l(t),e=qM(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return Xx(t)}function cn(t,e,n){try{return ZM(t,e)}catch{return t}}function J$(t,e=.15){return Ub(t)>.5?KM(t,e):ZM(t,e)}function Kg(t,e,n){try{return J$(t,e)}catch{return t}}function Q$(t,e,n=void 0){const r={};for(const i in t){const o=t[i];let s="",a=!0;for(let l=0;l<o.length;l+=1){const c=o[l];c&&(s+=(a===!0?"":" ")+e(c),a=!1,n&&n[c]&&(s+=" "+n[c]))}r[i]=s}return r}const aD=R.createContext(null);function JM(){return R.useContext(aD)}const eW=typeof Symbol=="function"&&Symbol.for,tW=eW?Symbol.for("mui.nested"):"__THEME_NESTED__";function nW(t,e){return typeof e=="function"?e(t):{...t,...e}}function rW(t){const{children:e,theme:n}=t,r=JM(),i=R.useMemo(()=>{const o=r===null?{...n}:nW(r,n);return o!=null&&(o[tW]=r!==null),o},[n,r]);return k.jsx(aD.Provider,{value:i,children:e})}const iW=R.createContext();function oW({value:t,...e}){return k.jsx(iW.Provider,{value:t??!0,...e})}const lD=R.createContext(void 0);function sW({value:t,children:e}){return k.jsx(lD.Provider,{value:t,children:e})}function aW(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const i=e.components[n];return i.defaultProps?Db(i.defaultProps,r):!i.styleOverrides&&!i.variants?Db(i,r):r}function lW({props:t,name:e}){const n=R.useContext(lD);return aW({props:t,name:e,theme:{components:n}})}const $P={};function WP(t,e,n,r=!1){return R.useMemo(()=>{const i=t&&e[t]||e;if(typeof n=="function"){const o=n(i),s=t?{...e,[t]:o}:o;return r?()=>s:s}return t?{...e,[t]:n}:{...e,...n}},[t,e,n,r])}function cD(t){const{children:e,theme:n,themeId:r}=t,i=eD($P),o=JM()||$P,s=WP(r,i,n),a=WP(r,o,n,!0),l=s.direction==="rtl";return k.jsx(rW,{theme:a,children:k.jsx(Fx.Provider,{value:s,children:k.jsx(oW,{value:l,children:k.jsx(sW,{value:s==null?void 0:s.components,children:e})})})})}const jP={theme:void 0};function cW(t){let e,n;return function(i){let o=e;return(o===void 0||i.theme!==n)&&(jP.theme=i.theme,o=iD(t(jP)),e=o,n=i.theme),o}}const QM="mode",eT="color-scheme",uW="data-color-scheme";function fW(t){const{defaultMode:e="system",defaultLightColorScheme:n="light",defaultDarkColorScheme:r="dark",modeStorageKey:i=QM,colorSchemeStorageKey:o=eT,attribute:s=uW,colorSchemeNode:a="document.documentElement",nonce:l}=t||{};let c="",u=s;if(s==="class"&&(u=".%s"),s==="data"&&(u="[data-%s]"),u.startsWith(".")){const p=u.substring(1);c+=`${a}.classList.remove('${p}'.replace('%s', light), '${p}'.replace('%s', dark));
      ${a}.classList.add('${p}'.replace('%s', colorScheme));`}const d=u.match(/\[([^\]]+)\]/);if(d){const[p,m]=d[1].split("=");m||(c+=`${a}.removeAttribute('${p}'.replace('%s', light));
      ${a}.removeAttribute('${p}'.replace('%s', dark));`),c+=`
      ${a}.setAttribute('${p}'.replace('%s', colorScheme), ${m?`${m}.replace('%s', colorScheme)`:'""'});`}else c+=`${a}.setAttribute('${u}', colorScheme);`;return k.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${i}') || '${e}';
  const dark = localStorage.getItem('${o}-dark') || '${r}';
  const light = localStorage.getItem('${o}-light') || '${n}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${c}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function GP(t){if(typeof window<"u"&&typeof window.matchMedia=="function"&&t==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function uD(t,e){if(t.mode==="light"||t.mode==="system"&&t.systemMode==="light")return e("light");if(t.mode==="dark"||t.mode==="system"&&t.systemMode==="dark")return e("dark")}function dW(t){return uD(t,e=>{if(e==="light")return t.lightColorScheme;if(e==="dark")return t.darkColorScheme})}function wS(t,e){if(typeof window>"u")return;let n;try{n=localStorage.getItem(t)||void 0,n||localStorage.setItem(t,e)}catch{}return n||e}function hW(t){const{defaultMode:e="light",defaultLightColorScheme:n,defaultDarkColorScheme:r,supportedColorSchemes:i=[],modeStorageKey:o=QM,colorSchemeStorageKey:s=eT,storageWindow:a=typeof window>"u"?void 0:window}=t,l=i.join(","),c=i.length>1,[u,d]=R.useState(()=>{const w=wS(o,e),M=wS(`${s}-light`,n),A=wS(`${s}-dark`,r);return{mode:w,systemMode:GP(w),lightColorScheme:M,darkColorScheme:A}}),[,p]=R.useState(!1),m=R.useRef(!1);R.useEffect(()=>{c&&p(!0),m.current=!0},[c]);const g=dW(u),v=R.useCallback(w=>{d(M=>{if(w===M.mode)return M;const A=w??e;try{localStorage.setItem(o,A)}catch{}return{...M,mode:A,systemMode:GP(A)}})},[o,e]),x=R.useCallback(w=>{w?typeof w=="string"?w&&!l.includes(w)?console.error(`\`${w}\` does not exist in \`theme.colorSchemes\`.`):d(M=>{const A={...M};return uD(M,C=>{try{localStorage.setItem(`${s}-${C}`,w)}catch{}C==="light"&&(A.lightColorScheme=w),C==="dark"&&(A.darkColorScheme=w)}),A}):d(M=>{const A={...M},C=w.light===null?n:w.light,P=w.dark===null?r:w.dark;if(C)if(!l.includes(C))console.error(`\`${C}\` does not exist in \`theme.colorSchemes\`.`);else{A.lightColorScheme=C;try{localStorage.setItem(`${s}-light`,C)}catch{}}if(P)if(!l.includes(P))console.error(`\`${P}\` does not exist in \`theme.colorSchemes\`.`);else{A.darkColorScheme=P;try{localStorage.setItem(`${s}-dark`,P)}catch{}}return A}):d(M=>{try{localStorage.setItem(`${s}-light`,n),localStorage.setItem(`${s}-dark`,r)}catch{}return{...M,lightColorScheme:n,darkColorScheme:r}})},[l,s,n,r]),y=R.useCallback(w=>{u.mode==="system"&&d(M=>{const A=w!=null&&w.matches?"dark":"light";return M.systemMode===A?M:{...M,systemMode:A}})},[u.mode]),_=R.useRef(y);return _.current=y,R.useEffect(()=>{if(typeof window.matchMedia!="function"||!c)return;const w=(...A)=>_.current(...A),M=window.matchMedia("(prefers-color-scheme: dark)");return M.addListener(w),w(M),()=>{M.removeListener(w)}},[c]),R.useEffect(()=>{if(a&&c){const w=M=>{const A=M.newValue;typeof M.key=="string"&&M.key.startsWith(s)&&(!A||l.match(A))&&(M.key.endsWith("light")&&x({light:A}),M.key.endsWith("dark")&&x({dark:A})),M.key===o&&(!A||["light","dark","system"].includes(A))&&v(A||e)};return a.addEventListener("storage",w),()=>{a.removeEventListener("storage",w)}}},[x,v,o,s,l,e,a,c]),{...u,mode:m.current||!c?u.mode:void 0,systemMode:m.current||!c?u.systemMode:void 0,colorScheme:m.current||!c?g:void 0,setMode:v,setColorScheme:x}}const pW="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function mW(t){const{themeId:e,theme:n={},modeStorageKey:r=QM,colorSchemeStorageKey:i=eT,disableTransitionOnChange:o=!1,defaultColorScheme:s,resolveTheme:a}=t,l={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},c=R.createContext(void 0),u=()=>R.useContext(c)||l;function d(v){var le,ee,se,he,je;const{children:x,theme:y,modeStorageKey:_=r,colorSchemeStorageKey:w=i,disableTransitionOnChange:M=o,storageWindow:A=typeof window>"u"?void 0:window,documentNode:C=typeof document>"u"?void 0:document,colorSchemeNode:P=typeof document>"u"?void 0:document.documentElement,disableNestedContext:N=!1,disableStyleSheetGeneration:O=!1,defaultMode:E="system"}=v,L=R.useRef(!1),H=JM(),W=R.useContext(c),Y=!!W&&!N,K=R.useMemo(()=>y||(typeof n=="function"?n():n),[y]),J=K[e],{colorSchemes:Q={},components:D={},cssVarPrefix:G,...X}=J||K,ne=Object.keys(Q).filter(Ee=>!!Q[Ee]).join(","),pe=R.useMemo(()=>ne.split(","),[ne]),De=typeof s=="string"?s:s.light,ae=typeof s=="string"?s:s.dark,_e=Q[De]&&Q[ae]?E:((ee=(le=Q[X.defaultColorScheme])==null?void 0:le.palette)==null?void 0:ee.mode)||((se=X.palette)==null?void 0:se.mode),{mode:Re,setMode:Ae,systemMode:qe,lightColorScheme:ut,darkColorScheme:Ye,colorScheme:Ve,setColorScheme:B}=hW({supportedColorSchemes:pe,defaultLightColorScheme:De,defaultDarkColorScheme:ae,modeStorageKey:_,colorSchemeStorageKey:w,defaultMode:_e,storageWindow:A});let me=Re,be=Ve;Y&&(me=W.mode,be=W.colorScheme);const ke=be||X.defaultColorScheme,ye=((he=X.generateThemeVars)==null?void 0:he.call(X))||X.vars,$e={...X,components:D,colorSchemes:Q,cssVarPrefix:G,vars:ye};if(typeof $e.generateSpacing=="function"&&($e.spacing=$e.generateSpacing()),ke){const Ee=Q[ke];Ee&&typeof Ee=="object"&&Object.keys(Ee).forEach(Oe=>{Ee[Oe]&&typeof Ee[Oe]=="object"?$e[Oe]={...$e[Oe],...Ee[Oe]}:$e[Oe]=Ee[Oe]})}const Ne=X.colorSchemeSelector;R.useEffect(()=>{if(be&&P&&Ne&&Ne!=="media"){const Ee=Ne;let Oe=Ne;if(Ee==="class"&&(Oe=".%s"),Ee==="data"&&(Oe="[data-%s]"),Ee!=null&&Ee.startsWith("data-")&&!Ee.includes("%s")&&(Oe=`[${Ee}="%s"]`),Oe.startsWith("."))P.classList.remove(...pe.map(dt=>Oe.substring(1).replace("%s",dt))),P.classList.add(Oe.substring(1).replace("%s",be));else{const dt=Oe.replace("%s",be).match(/\[([^\]]+)\]/);if(dt){const[Ie,We]=dt[1].split("=");We||pe.forEach(Ct=>{P.removeAttribute(Ie.replace(be,Ct))}),P.setAttribute(Ie,We?We.replace(/"|'/g,""):"")}else P.setAttribute(Oe,be)}}},[be,Ne,P,pe]),R.useEffect(()=>{let Ee;if(M&&L.current&&C){const Oe=C.createElement("style");Oe.appendChild(C.createTextNode(pW)),C.head.appendChild(Oe),window.getComputedStyle(C.body),Ee=setTimeout(()=>{C.head.removeChild(Oe)},1)}return()=>{clearTimeout(Ee)}},[be,M,C]),R.useEffect(()=>(L.current=!0,()=>{L.current=!1}),[]);const ze=R.useMemo(()=>({allColorSchemes:pe,colorScheme:be,darkColorScheme:Ye,lightColorScheme:ut,mode:me,setColorScheme:B,setMode:Ae,systemMode:qe}),[pe,be,Ye,ut,me,B,Ae,qe]);let V=!0;(O||X.cssVariables===!1||Y&&(H==null?void 0:H.cssVarPrefix)===G)&&(V=!1);const U=k.jsxs(R.Fragment,{children:[k.jsx(cD,{themeId:J?e:void 0,theme:a?a($e):$e,children:x}),V&&k.jsx(KN,{styles:((je=$e.generateStyleSheets)==null?void 0:je.call($e))||[]})]});return Y?U:k.jsx(c.Provider,{value:ze,children:U})}const p=typeof s=="string"?s:s.light,m=typeof s=="string"?s:s.dark;return{CssVarsProvider:d,useColorScheme:u,getInitColorSchemeScript:v=>fW({colorSchemeStorageKey:i,defaultLightColorScheme:p,defaultDarkColorScheme:m,modeStorageKey:r,...v})}}function gW(t=""){function e(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${i}${e(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${t?`${t}-`:""}${r}${e(...i)})`}const XP=(t,e,n,r=[])=>{let i=t;e.forEach((o,s)=>{s===e.length-1?Array.isArray(i)?i[Number(o)]=n:i&&typeof i=="object"&&(i[o]=n):i&&typeof i=="object"&&(i[o]||(i[o]=r.includes(o)?[]:{}),i=i[o])})},yW=(t,e,n)=>{function r(i,o=[],s=[]){Object.entries(i).forEach(([a,l])=>{(!n||n&&!n([...o,a]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?r(l,[...o,a],Array.isArray(l)?[...s,a]:s):e([...o,a],l,s))})}r(t)},vW=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function bS(t,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},i={},o={},s={};return yW(t,(a,l,c)=>{if((typeof l=="string"||typeof l=="number")&&(!r||!r(a,l))){const u=`--${n?`${n}-`:""}${a.join("-")}`,d=vW(a,l);Object.assign(i,{[u]:d}),XP(o,a,`var(${u})`,c),XP(s,a,`var(${u}, ${d})`,c)}},a=>a[0]==="vars"),{css:i,vars:o,varsWithDefaults:s}}function xW(t,e={}){const{getSelector:n=x,disableCssColorScheme:r,colorSchemeSelector:i}=e,{colorSchemes:o={},components:s,defaultColorScheme:a="light",...l}=t,{vars:c,css:u,varsWithDefaults:d}=bS(l,e);let p=d;const m={},{[a]:g,...v}=o;if(Object.entries(v||{}).forEach(([w,M])=>{const{vars:A,css:C,varsWithDefaults:P}=bS(M,e);p=ji(p,P),m[w]={css:C,vars:A}}),g){const{css:w,vars:M,varsWithDefaults:A}=bS(g,e);p=ji(p,A),m[a]={css:w,vars:M}}function x(w,M){var C,P;let A=i;if(i==="class"&&(A=".%s"),i==="data"&&(A="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(A=`[${i}="%s"]`),w){if(A==="media")return t.defaultColorScheme===w?":root":{[`@media (prefers-color-scheme: ${((P=(C=o[w])==null?void 0:C.palette)==null?void 0:P.mode)||w})`]:{":root":M}};if(A)return t.defaultColorScheme===w?`:root, ${A.replace("%s",String(w))}`:A.replace("%s",String(w))}return":root"}return{vars:p,generateThemeVars:()=>{let w={...c};return Object.entries(m).forEach(([,{vars:M}])=>{w=ji(w,M)}),w},generateStyleSheets:()=>{var N,O;const w=[],M=t.defaultColorScheme||"light";function A(E,L){Object.keys(L).length&&w.push(typeof E=="string"?{[E]:{...L}}:E)}A(n(void 0,{...u}),u);const{[M]:C,...P}=m;if(C){const{css:E}=C,L=(O=(N=o[M])==null?void 0:N.palette)==null?void 0:O.mode,H=!r&&L?{colorScheme:L,...E}:{...E};A(n(M,{...H}),H)}return Object.entries(P).forEach(([E,{css:L}])=>{var Y,K;const H=(K=(Y=o[E])==null?void 0:Y.palette)==null?void 0:K.mode,W=!r&&H?{colorScheme:H,...L}:{...L};A(n(E,{...W}),W)}),w}}}function _W(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}const _p={black:"#000",white:"#fff"},SW={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},yu={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},vu={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Jd={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},xu={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},_u={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Su={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function fD(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:_p.white,default:_p.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const wW=fD();function dD(){return{text:{primary:_p.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:_p.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const YP=dD();function qP(t,e,n,r){const i=r.light||r,o=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=ZM(t.main,i):e==="dark"&&(t.dark=KM(t.main,o)))}function bW(t="light"){return t==="dark"?{main:xu[200],light:xu[50],dark:xu[400]}:{main:xu[700],light:xu[400],dark:xu[800]}}function EW(t="light"){return t==="dark"?{main:yu[200],light:yu[50],dark:yu[400]}:{main:yu[500],light:yu[300],dark:yu[700]}}function MW(t="light"){return t==="dark"?{main:vu[500],light:vu[300],dark:vu[700]}:{main:vu[700],light:vu[400],dark:vu[800]}}function TW(t="light"){return t==="dark"?{main:_u[400],light:_u[300],dark:_u[700]}:{main:_u[700],light:_u[500],dark:_u[900]}}function CW(t="light"){return t==="dark"?{main:Su[400],light:Su[300],dark:Su[700]}:{main:Su[800],light:Su[500],dark:Su[900]}}function AW(t="light"){return t==="dark"?{main:Jd[400],light:Jd[300],dark:Jd[700]}:{main:"#ed6c02",light:Jd[500],dark:Jd[900]}}function tT(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2,...i}=t,o=t.primary||bW(e),s=t.secondary||EW(e),a=t.error||MW(e),l=t.info||TW(e),c=t.success||CW(e),u=t.warning||AW(e);function d(v){return K$(v,YP.text.primary)>=n?YP.text.primary:wW.text.primary}const p=({color:v,name:x,mainShade:y=500,lightShade:_=300,darkShade:w=700})=>{if(v={...v},!v.main&&v[y]&&(v.main=v[y]),!v.hasOwnProperty("main"))throw new Error(kc(11,x?` (${x})`:"",y));if(typeof v.main!="string")throw new Error(kc(12,x?` (${x})`:"",JSON.stringify(v.main)));return qP(v,"light",_,r),qP(v,"dark",w,r),v.contrastText||(v.contrastText=d(v.main)),v};let m;return e==="light"?m=fD():e==="dark"&&(m=dD()),ji({common:{..._p},mode:e,primary:p({color:o,name:"primary"}),secondary:p({color:s,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:p({color:a,name:"error"}),warning:p({color:u,name:"warning"}),info:p({color:l,name:"info"}),success:p({color:c,name:"success"}),grey:SW,contrastThreshold:n,getContrastText:d,augmentColor:p,tonalOffset:r,...m},i)}function PW(t){const e={};return Object.entries(t).forEach(r=>{const[i,o]=r;typeof o=="object"&&(e[i]=`${o.fontStyle?`${o.fontStyle} `:""}${o.fontVariant?`${o.fontVariant} `:""}${o.fontWeight?`${o.fontWeight} `:""}${o.fontStretch?`${o.fontStretch} `:""}${o.fontSize||""}${o.lineHeight?`/${o.lineHeight} `:""}${o.fontFamily||""}`)}),e}function RW(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function IW(t){return Math.round(t*1e5)/1e5}const KP={textTransform:"uppercase"},ZP='"Roboto", "Helvetica", "Arial", sans-serif';function hD(t,e){const{fontFamily:n=ZP,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:o=400,fontWeightMedium:s=500,fontWeightBold:a=700,htmlFontSize:l=16,allVariants:c,pxToRem:u,...d}=typeof e=="function"?e(t):e,p=r/14,m=u||(x=>`${x/l*p}rem`),g=(x,y,_,w,M)=>({fontFamily:n,fontWeight:x,fontSize:m(y),lineHeight:_,...n===ZP?{letterSpacing:`${IW(w/y)}em`}:{},...M,...c}),v={h1:g(i,96,1.167,-1.5),h2:g(i,60,1.2,-.5),h3:g(o,48,1.167,0),h4:g(o,34,1.235,.25),h5:g(o,24,1.334,0),h6:g(s,20,1.6,.15),subtitle1:g(o,16,1.75,.15),subtitle2:g(s,14,1.57,.1),body1:g(o,16,1.5,.15),body2:g(o,14,1.43,.15),button:g(s,14,1.75,.4,KP),caption:g(o,12,1.66,.4),overline:g(o,12,2.66,1,KP),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ji({htmlFontSize:l,pxToRem:m,fontFamily:n,fontSize:r,fontWeightLight:i,fontWeightRegular:o,fontWeightMedium:s,fontWeightBold:a,...v},d,{clone:!1})}const OW=.2,LW=.14,kW=.12;function bn(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${OW})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${LW})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${kW})`].join(",")}const NW=["none",bn(0,2,1,-1,0,1,1,0,0,1,3,0),bn(0,3,1,-2,0,2,2,0,0,1,5,0),bn(0,3,3,-2,0,3,4,0,0,1,8,0),bn(0,2,4,-1,0,4,5,0,0,1,10,0),bn(0,3,5,-1,0,5,8,0,0,1,14,0),bn(0,3,5,-1,0,6,10,0,0,1,18,0),bn(0,4,5,-2,0,7,10,1,0,2,16,1),bn(0,5,5,-3,0,8,10,1,0,3,14,2),bn(0,5,6,-3,0,9,12,1,0,3,16,2),bn(0,6,6,-3,0,10,14,1,0,4,18,3),bn(0,6,7,-4,0,11,15,1,0,4,20,3),bn(0,7,8,-4,0,12,17,2,0,5,22,4),bn(0,7,8,-4,0,13,19,2,0,5,24,4),bn(0,7,9,-4,0,14,21,2,0,5,26,4),bn(0,8,9,-5,0,15,22,2,0,6,28,5),bn(0,8,10,-5,0,16,24,2,0,6,30,5),bn(0,8,11,-5,0,17,26,2,0,6,32,5),bn(0,9,11,-5,0,18,28,2,0,7,34,6),bn(0,9,12,-6,0,19,29,2,0,7,36,6),bn(0,10,13,-6,0,20,31,3,0,8,38,7),bn(0,10,13,-6,0,21,33,3,0,8,40,7),bn(0,10,14,-6,0,22,35,3,0,8,42,7),bn(0,11,14,-7,0,23,36,3,0,9,44,8),bn(0,11,15,-7,0,24,38,3,0,9,46,8)],DW={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},UW={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function JP(t){return`${Math.round(t)}ms`}function FW(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function zW(t){const e={...DW,...t.easing},n={...UW,...t.duration};return{getAutoHeightDuration:FW,create:(i=["all"],o={})=>{const{duration:s=n.standard,easing:a=e.easeInOut,delay:l=0,...c}=o;return(Array.isArray(i)?i:[i]).map(u=>`${u} ${typeof s=="string"?s:JP(s)} ${a} ${typeof l=="string"?l:JP(l)}`).join(",")},...t,easing:e,duration:n}}const BW={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function HW(t){return sa(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function pD(t={}){const e={...t};function n(r){const i=Object.entries(r);for(let o=0;o<i.length;o++){const[s,a]=i[o];!HW(a)||s.startsWith("unstable_")?delete r[s]:sa(a)&&(r[s]={...a},n(r[s]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function Fb(t={},...e){const{breakpoints:n,mixins:r={},spacing:i,palette:o={},transitions:s={},typography:a={},shape:l,...c}=t;if(t.vars)throw new Error(kc(20));const u=tT(o),d=YM(t);let p=ji(d,{mixins:RW(d.breakpoints,r),palette:u,shadows:NW.slice(),typography:hD(u,a),transitions:zW(s),zIndex:{...BW}});return p=ji(p,c),p=e.reduce((m,g)=>ji(m,g),p),p.unstable_sxConfig={...Gx,...c==null?void 0:c.unstable_sxConfig},p.unstable_sx=function(g){return Nc({sx:g,theme:this})},p.toRuntimeSource=pD,p}function VW(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const $W=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=VW(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function mD(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function gD(t){return t==="dark"?$W:[]}function WW(t){const{palette:e={mode:"light"},opacity:n,overlays:r,...i}=t,o=tT(e);return{palette:o,opacity:{...mD(o.mode),...n},overlays:r||gD(o.mode),...i}}function jW(t){var e;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((e=t[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const GW=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],XW=t=>(e,n)=>{const r=t.rootSelector||":root",i=t.colorSchemeSelector;let o=i;if(i==="class"&&(o=".%s"),i==="data"&&(o="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(o=`[${i}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const s={};return GW(t.cssVarPrefix).forEach(a=>{s[a]=n[a],delete n[a]}),o==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:s}}:o?{[o.replace("%s",e)]:s,[`${r}, ${o.replace("%s",e)}`]:n}:{[r]:{...n,...s}}}if(o&&o!=="media")return`${r}, ${o.replace("%s",String(e))}`}else if(e){if(o==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:n}};if(o)return o.replace("%s",String(e))}return r};function YW(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function ve(t,e,n){!t[e]&&n&&(t[e]=n)}function Ch(t){return!t||!t.startsWith("hsl")?t:sD(t)}function Gs(t,e){`${e}Channel`in t||(t[`${e}Channel`]=Th(Ch(t[e]),`MUI: Can't create \`palette.${e}Channel\` because \`palette.${e}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${e}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}function qW(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const us=t=>{try{return t()}catch{}},KW=(t="mui")=>gW(t);function ES(t,e,n,r){if(!e)return;e=e===!0?{}:e;const i=r==="dark"?"dark":"light";if(!n){t[r]=WW({...e,palette:{mode:i,...e==null?void 0:e.palette}});return}const{palette:o,...s}=Fb({...n,palette:{mode:i,...e==null?void 0:e.palette}});return t[r]={...e,palette:o,opacity:{...mD(i),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||gD(i)},s}function ZW(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:o="mui",shouldSkipGeneratingVar:s=jW,colorSchemeSelector:a=n.light&&n.dark?"media":void 0,rootSelector:l=":root",...c}=t,u=Object.keys(n)[0],d=r||(n.light&&u!=="light"?"light":u),p=KW(o),{[d]:m,light:g,dark:v,...x}=n,y={...x};let _=m;if((d==="dark"&&!("dark"in n)||d==="light"&&!("light"in n))&&(_=!0),!_)throw new Error(kc(21,d));const w=ES(y,_,c,d);g&&!y.light&&ES(y,g,void 0,"light"),v&&!y.dark&&ES(y,v,void 0,"dark");let M={defaultColorScheme:d,...w,cssVarPrefix:o,colorSchemeSelector:a,rootSelector:l,getCssVar:p,colorSchemes:y,font:{...PW(w.typography),...w.font},spacing:qW(c.spacing)};Object.keys(M.colorSchemes).forEach(O=>{const E=M.colorSchemes[O].palette,L=H=>{const W=H.split("-"),Y=W[1],K=W[2];return p(H,E[Y][K])};if(E.mode==="light"&&(ve(E.common,"background","#fff"),ve(E.common,"onBackground","#000")),E.mode==="dark"&&(ve(E.common,"background","#000"),ve(E.common,"onBackground","#fff")),YW(E,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),E.mode==="light"){ve(E.Alert,"errorColor",ln(E.error.light,.6)),ve(E.Alert,"infoColor",ln(E.info.light,.6)),ve(E.Alert,"successColor",ln(E.success.light,.6)),ve(E.Alert,"warningColor",ln(E.warning.light,.6)),ve(E.Alert,"errorFilledBg",L("palette-error-main")),ve(E.Alert,"infoFilledBg",L("palette-info-main")),ve(E.Alert,"successFilledBg",L("palette-success-main")),ve(E.Alert,"warningFilledBg",L("palette-warning-main")),ve(E.Alert,"errorFilledColor",us(()=>E.getContrastText(E.error.main))),ve(E.Alert,"infoFilledColor",us(()=>E.getContrastText(E.info.main))),ve(E.Alert,"successFilledColor",us(()=>E.getContrastText(E.success.main))),ve(E.Alert,"warningFilledColor",us(()=>E.getContrastText(E.warning.main))),ve(E.Alert,"errorStandardBg",cn(E.error.light,.9)),ve(E.Alert,"infoStandardBg",cn(E.info.light,.9)),ve(E.Alert,"successStandardBg",cn(E.success.light,.9)),ve(E.Alert,"warningStandardBg",cn(E.warning.light,.9)),ve(E.Alert,"errorIconColor",L("palette-error-main")),ve(E.Alert,"infoIconColor",L("palette-info-main")),ve(E.Alert,"successIconColor",L("palette-success-main")),ve(E.Alert,"warningIconColor",L("palette-warning-main")),ve(E.AppBar,"defaultBg",L("palette-grey-100")),ve(E.Avatar,"defaultBg",L("palette-grey-400")),ve(E.Button,"inheritContainedBg",L("palette-grey-300")),ve(E.Button,"inheritContainedHoverBg",L("palette-grey-A100")),ve(E.Chip,"defaultBorder",L("palette-grey-400")),ve(E.Chip,"defaultAvatarColor",L("palette-grey-700")),ve(E.Chip,"defaultIconColor",L("palette-grey-700")),ve(E.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),ve(E.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),ve(E.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),ve(E.LinearProgress,"primaryBg",cn(E.primary.main,.62)),ve(E.LinearProgress,"secondaryBg",cn(E.secondary.main,.62)),ve(E.LinearProgress,"errorBg",cn(E.error.main,.62)),ve(E.LinearProgress,"infoBg",cn(E.info.main,.62)),ve(E.LinearProgress,"successBg",cn(E.success.main,.62)),ve(E.LinearProgress,"warningBg",cn(E.warning.main,.62)),ve(E.Skeleton,"bg",`rgba(${L("palette-text-primaryChannel")} / 0.11)`),ve(E.Slider,"primaryTrack",cn(E.primary.main,.62)),ve(E.Slider,"secondaryTrack",cn(E.secondary.main,.62)),ve(E.Slider,"errorTrack",cn(E.error.main,.62)),ve(E.Slider,"infoTrack",cn(E.info.main,.62)),ve(E.Slider,"successTrack",cn(E.success.main,.62)),ve(E.Slider,"warningTrack",cn(E.warning.main,.62));const H=Kg(E.background.default,.8);ve(E.SnackbarContent,"bg",H),ve(E.SnackbarContent,"color",us(()=>E.getContrastText(H))),ve(E.SpeedDialAction,"fabHoverBg",Kg(E.background.paper,.15)),ve(E.StepConnector,"border",L("palette-grey-400")),ve(E.StepContent,"border",L("palette-grey-400")),ve(E.Switch,"defaultColor",L("palette-common-white")),ve(E.Switch,"defaultDisabledColor",L("palette-grey-100")),ve(E.Switch,"primaryDisabledColor",cn(E.primary.main,.62)),ve(E.Switch,"secondaryDisabledColor",cn(E.secondary.main,.62)),ve(E.Switch,"errorDisabledColor",cn(E.error.main,.62)),ve(E.Switch,"infoDisabledColor",cn(E.info.main,.62)),ve(E.Switch,"successDisabledColor",cn(E.success.main,.62)),ve(E.Switch,"warningDisabledColor",cn(E.warning.main,.62)),ve(E.TableCell,"border",cn(qg(E.divider,1),.88)),ve(E.Tooltip,"bg",qg(E.grey[700],.92))}if(E.mode==="dark"){ve(E.Alert,"errorColor",cn(E.error.light,.6)),ve(E.Alert,"infoColor",cn(E.info.light,.6)),ve(E.Alert,"successColor",cn(E.success.light,.6)),ve(E.Alert,"warningColor",cn(E.warning.light,.6)),ve(E.Alert,"errorFilledBg",L("palette-error-dark")),ve(E.Alert,"infoFilledBg",L("palette-info-dark")),ve(E.Alert,"successFilledBg",L("palette-success-dark")),ve(E.Alert,"warningFilledBg",L("palette-warning-dark")),ve(E.Alert,"errorFilledColor",us(()=>E.getContrastText(E.error.dark))),ve(E.Alert,"infoFilledColor",us(()=>E.getContrastText(E.info.dark))),ve(E.Alert,"successFilledColor",us(()=>E.getContrastText(E.success.dark))),ve(E.Alert,"warningFilledColor",us(()=>E.getContrastText(E.warning.dark))),ve(E.Alert,"errorStandardBg",ln(E.error.light,.9)),ve(E.Alert,"infoStandardBg",ln(E.info.light,.9)),ve(E.Alert,"successStandardBg",ln(E.success.light,.9)),ve(E.Alert,"warningStandardBg",ln(E.warning.light,.9)),ve(E.Alert,"errorIconColor",L("palette-error-main")),ve(E.Alert,"infoIconColor",L("palette-info-main")),ve(E.Alert,"successIconColor",L("palette-success-main")),ve(E.Alert,"warningIconColor",L("palette-warning-main")),ve(E.AppBar,"defaultBg",L("palette-grey-900")),ve(E.AppBar,"darkBg",L("palette-background-paper")),ve(E.AppBar,"darkColor",L("palette-text-primary")),ve(E.Avatar,"defaultBg",L("palette-grey-600")),ve(E.Button,"inheritContainedBg",L("palette-grey-800")),ve(E.Button,"inheritContainedHoverBg",L("palette-grey-700")),ve(E.Chip,"defaultBorder",L("palette-grey-700")),ve(E.Chip,"defaultAvatarColor",L("palette-grey-300")),ve(E.Chip,"defaultIconColor",L("palette-grey-300")),ve(E.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),ve(E.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),ve(E.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),ve(E.LinearProgress,"primaryBg",ln(E.primary.main,.5)),ve(E.LinearProgress,"secondaryBg",ln(E.secondary.main,.5)),ve(E.LinearProgress,"errorBg",ln(E.error.main,.5)),ve(E.LinearProgress,"infoBg",ln(E.info.main,.5)),ve(E.LinearProgress,"successBg",ln(E.success.main,.5)),ve(E.LinearProgress,"warningBg",ln(E.warning.main,.5)),ve(E.Skeleton,"bg",`rgba(${L("palette-text-primaryChannel")} / 0.13)`),ve(E.Slider,"primaryTrack",ln(E.primary.main,.5)),ve(E.Slider,"secondaryTrack",ln(E.secondary.main,.5)),ve(E.Slider,"errorTrack",ln(E.error.main,.5)),ve(E.Slider,"infoTrack",ln(E.info.main,.5)),ve(E.Slider,"successTrack",ln(E.success.main,.5)),ve(E.Slider,"warningTrack",ln(E.warning.main,.5));const H=Kg(E.background.default,.98);ve(E.SnackbarContent,"bg",H),ve(E.SnackbarContent,"color",us(()=>E.getContrastText(H))),ve(E.SpeedDialAction,"fabHoverBg",Kg(E.background.paper,.15)),ve(E.StepConnector,"border",L("palette-grey-600")),ve(E.StepContent,"border",L("palette-grey-600")),ve(E.Switch,"defaultColor",L("palette-grey-300")),ve(E.Switch,"defaultDisabledColor",L("palette-grey-600")),ve(E.Switch,"primaryDisabledColor",ln(E.primary.main,.55)),ve(E.Switch,"secondaryDisabledColor",ln(E.secondary.main,.55)),ve(E.Switch,"errorDisabledColor",ln(E.error.main,.55)),ve(E.Switch,"infoDisabledColor",ln(E.info.main,.55)),ve(E.Switch,"successDisabledColor",ln(E.success.main,.55)),ve(E.Switch,"warningDisabledColor",ln(E.warning.main,.55)),ve(E.TableCell,"border",ln(qg(E.divider,1),.68)),ve(E.Tooltip,"bg",qg(E.grey[700],.92))}Gs(E.background,"default"),Gs(E.background,"paper"),Gs(E.common,"background"),Gs(E.common,"onBackground"),Gs(E,"divider"),Object.keys(E).forEach(H=>{const W=E[H];W&&typeof W=="object"&&(W.main&&ve(E[H],"mainChannel",Th(Ch(W.main))),W.light&&ve(E[H],"lightChannel",Th(Ch(W.light))),W.dark&&ve(E[H],"darkChannel",Th(Ch(W.dark))),W.contrastText&&ve(E[H],"contrastTextChannel",Th(Ch(W.contrastText))),H==="text"&&(Gs(E[H],"primary"),Gs(E[H],"secondary")),H==="action"&&(W.active&&Gs(E[H],"active"),W.selected&&Gs(E[H],"selected")))})}),M=e.reduce((O,E)=>ji(O,E),M);const A={prefix:o,disableCssColorScheme:i,shouldSkipGeneratingVar:s,getSelector:XW(M)},{vars:C,generateThemeVars:P,generateStyleSheets:N}=xW(M,A);return M.vars=C,Object.entries(M.colorSchemes[M.defaultColorScheme]).forEach(([O,E])=>{M[O]=E}),M.generateThemeVars=P,M.generateStyleSheets=N,M.generateSpacing=function(){return QN(c.spacing,GM(this))},M.getColorSchemeSelector=_W(a),M.spacing=M.generateSpacing(),M.shouldSkipGeneratingVar=s,M.unstable_sxConfig={...Gx,...c==null?void 0:c.unstable_sxConfig},M.unstable_sx=function(E){return Nc({sx:E,theme:this})},M.toRuntimeSource=pD,M}function QP(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:tT({...n===!0?{}:n.palette,mode:e})})}function nT(t={},...e){const{palette:n,cssVariables:r=!1,colorSchemes:i=n?void 0:{light:!0},defaultColorScheme:o=n==null?void 0:n.mode,...s}=t,a=o||"light",l=i==null?void 0:i[a],c={...i,...n?{[a]:{...typeof l!="boolean"&&l,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in t))return Fb(t,...e);let u=n;"palette"in t||c[a]&&(c[a]!==!0?u=c[a].palette:a==="dark"&&(u={mode:"dark"}));const d=Fb({...t,palette:u},...e);return d.defaultColorScheme=a,d.colorSchemes=c,d.palette.mode==="light"&&(d.colorSchemes.light={...c.light!==!0&&c.light,palette:d.palette},QP(d,"dark",c.dark)),d.palette.mode==="dark"&&(d.colorSchemes.dark={...c.dark!==!0&&c.dark,palette:d.palette},QP(d,"light",c.light)),d}return!n&&!("light"in c)&&a==="light"&&(c.light=!0),ZW({...s,colorSchemes:c,defaultColorScheme:a,...typeof r!="boolean"&&r},...e)}const rT=nT();function JW(){const t=tD(rT);return t[ga]||t}function QW(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const ej=t=>QW(t)&&t!=="classes",tj=V$({themeId:ga,defaultTheme:rT,rootShouldForwardProp:ej});function eR({theme:t,...e}){const n=ga in t?t[ga]:void 0;return k.jsx(cD,{...e,themeId:n?ga:void 0,theme:n||t})}const Zg={attribute:"data-mui-color-scheme",colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:nj,useColorScheme:Bde,getInitColorSchemeScript:Hde}=mW({themeId:ga,theme:()=>nT({cssVariables:!0}),colorSchemeStorageKey:Zg.colorSchemeStorageKey,modeStorageKey:Zg.modeStorageKey,defaultColorScheme:{light:Zg.defaultLightColorScheme,dark:Zg.defaultDarkColorScheme},resolveTheme:t=>{const e={...t,typography:hD(t.palette,t.typography)};return e.unstable_sx=function(r){return Nc({sx:r,theme:this})},e}}),rj=nj;function ij({theme:t,...e}){return typeof t=="function"?k.jsx(eR,{theme:t,...e}):"colorSchemes"in(ga in t?t[ga]:t)?k.jsx(rj,{theme:t,...e}):k.jsx(eR,{theme:t,...e})}const sm=nT({palette:{button:{selected:{background:"darkorange",foreground:"white"},unselected:{background:"white",foreground:"black"}}}}),oj=({color:t})=>k.jsx("svg",{width:"25px",height:"34px",viewBox:"-2 -2 11 14",xmlns:"http://www.w3.org/2000/svg",children:k.jsx("path",{d:"M 0 0 L 0 10 L 2.852 6.596 L 5.338 10.324 L 6.258 9.633 L 3.988 6.213 L 7.499 5 L 0 0",fill:t})}),sj=({color:t})=>k.jsxs("svg",{width:"35px",height:"35px",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("line",{x1:"10",y1:"13",x2:"10",y2:"5",stroke:t,strokeWidth:"2"}),k.jsx("polygon",{points:"10,3 7,6 13,6",fill:t}),k.jsx("line",{x1:"10",y1:"7",x2:"10",y2:"15",stroke:t,strokeWidth:"2"}),k.jsx("polygon",{points:"10,17 7,14 13,14",fill:t}),k.jsx("line",{x1:"13",y1:"10",x2:"5",y2:"10",stroke:t,strokeWidth:"2"}),k.jsx("polygon",{points:"3,10 6,7 6,13",fill:t}),k.jsx("line",{x1:"7",y1:"10",x2:"15",y2:"10",stroke:t,strokeWidth:"2"}),k.jsx("polygon",{points:"17,10 14,7 14,13",fill:t})]}),aj="_icon_17qna_1",lj="_button_17qna_11",Ey={icon:aj,button:lj},Wr=({onClick:t,selected:e,children:n,name:r,startIcon:i=null,style:o={}})=>{JW();const s=`var(--${e?"selected-bg":"unselected-bg"})`;return k.jsxs("button",{onMouseDown:t,className:`${Ey.button} ${e?Ey.selected:Ey.unselected}`,style:{...o,color:`var(--${e?"selected-fg":"unselected-fg"})`,backgroundColor:s},children:[n,r]})};function cj(t){return k.jsx(L$,{...t,defaultTheme:rT,themeId:ga})}function yD(t){return function(n){return k.jsx(cj,{styles:typeof t=="function"?r=>t({theme:r,...n}):t})}}const uj=cW;function vD(t){return lW(t)}function fj(t){return rD("MuiSvgIcon",t)}F$("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const dj=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${Hf(e)}`,`fontSize${Hf(n)}`]};return Q$(i,fj,r)},hj=tj("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${Hf(n.color)}`],e[`fontSize${Hf(n.fontSize)}`]]}})(uj(({theme:t})=>{var e,n,r,i,o,s,a,l,c,u,d,p,m,g;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(i=(e=t.transitions)==null?void 0:e.create)==null?void 0:i.call(e,"fill",{duration:(r=(n=(t.vars??t).transitions)==null?void 0:n.duration)==null?void 0:r.shorter}),variants:[{props:v=>!v.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((s=(o=t.typography)==null?void 0:o.pxToRem)==null?void 0:s.call(o,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((l=(a=t.typography)==null?void 0:a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((u=(c=t.typography)==null?void 0:c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,v])=>v&&v.main).map(([v])=>{var x,y;return{props:{color:v},style:{color:(y=(x=(t.vars??t).palette)==null?void 0:x[v])==null?void 0:y.main}}}),{props:{color:"action"},style:{color:(p=(d=(t.vars??t).palette)==null?void 0:d.action)==null?void 0:p.active}},{props:{color:"disabled"},style:{color:(g=(m=(t.vars??t).palette)==null?void 0:m.action)==null?void 0:g.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),av=R.forwardRef(function(e,n){const r=vD({props:e,name:"MuiSvgIcon"}),{children:i,className:o,color:s="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:d,viewBox:p="0 0 24 24",...m}=r,g=R.isValidElement(i)&&i.type==="svg",v={...r,color:s,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:p,hasSvgAsChild:g},x={};u||(x.viewBox=p);const y=dj(v);return k.jsxs(hj,{as:a,className:D$(y.root,o),focusable:"false",color:c,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:n,...x,...m,...g&&i.props,ownerState:v,children:[g?i.props.children:i,d?k.jsx("title",{children:d}):null]})});av&&(av.muiName="SvgIcon");function qo(t,e){function n(r,i){return k.jsx(av,{"data-testid":`${e}Icon`,ref:i,...r,children:t})}return n.muiName=av.muiName,R.memo(R.forwardRef(n))}const pj=qo(k.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");function mj({selected:t,onClick:e}){var i;const{foreground:n,background:r}=(i=sm.palette.button)==null?void 0:i[t?"selected":"unselected"];return k.jsx(Wr,{name:"remove",onClick:e,selected:t,children:k.jsx(pj,{className:Ey.icon,fontSize:"large",sx:{color:n}})})}const gj=qo(k.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack"),yj=qo(k.jsx("path",{d:"M12 4c4.41 0 8 3.59 8 8s-3.59 8-8 8-8-3.59-8-8 3.59-8 8-8m0-2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 10V8h-2v4H8l4 4 4-4z"}),"ArrowCircleDown"),vj=qo(k.jsx("path",{d:"M12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0 2c5.52 0 10-4.48 10-10S17.52 2 12 2 2 6.48 2 12s4.48 10 10 10m-1-10v4h2v-4h3l-4-4-4 4z"}),"ArrowCircleUp"),xj=qo(k.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward"),_j=qo(k.jsx("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward"),Sj=qo(k.jsx("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward"),wj=qo(k.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2"}),"Circle"),bj=qo(k.jsx("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 12H4V8h16z"}),"FolderOpen"),Ej=qo(k.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh"),Mj=qo(k.jsx("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8"}),"UndoOutlined");function Tj({selected:t,onClick:e}){var i;const n=(i=sm.palette)==null?void 0:i.button,r=n==null?void 0:n[t?"selected":"unselected"].foreground;return k.jsxs(Wr,{selected:t,onClick:e,name:"add",children:[k.jsx(wj,{style:{fontSize:"24px",marginTop:"9px",marginRight:"6px",color:`var(--${t?"selected-fg":"unselected-fg"})`}}),k.jsxs("div",{style:{position:"absolute",left:"28px",bottom:"48px"},children:[k.jsx("div",{style:{position:"absolute",top:"5px",width:"14px",height:"4px",backgroundColor:r,transition:"backgroundColor 0.2s ease-in-out"}}),k.jsx("div",{style:{position:"absolute",left:"5px",width:"4px",height:"14px",backgroundColor:r}})]})]})}function Cj({selected:t,onClick:e}){var i;const{foreground:n,background:r}=(i=sm.palette.button)==null?void 0:i[t?"selected":"unselected"];return k.jsx(Wr,{selected:t,onClick:e,name:"move",children:k.jsx(sj,{color:n})})}function Aj({selected:t,onClick:e}){var i;const{foreground:n,background:r}=(i=sm.palette.button)==null?void 0:i[t?"selected":"unselected"];return k.jsx(Wr,{selected:t,name:"select",onClick:e,children:k.jsx(oj,{color:n})})}const Pj=({enabled:t})=>k.jsx("div",{style:{height:"28px",width:"28px",border:"2px dashed black",marginTop:"5px"},children:k.jsx("div",{style:{marginLeft:"auto",height:"20px",width:"20px",transform:"translate(5px,-5px)",backgroundColor:"var(--unselected-bg)",border:"2px solid black",filter:"drop-shadow(-2px 2px 0px var(--unselected-bg))"},children:k.jsx("div",{style:{width:"12px",height:"12px",backgroundColor:"black",margin:"2px"}})})}),Rj=({enabled:t})=>k.jsx("div",{style:{height:"28px",width:"28px",marginTop:"5px",border:"2px dashed black"},children:k.jsxs("div",{style:{marginLeft:"auto",height:"20px",width:"20px",transform:"translate(5px,-5px)",backgroundColor:"var(--unselected-bg)",border:"2px solid black",position:"relative"},children:[k.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"14px",height:"2px",backgroundColor:"black",transform:"translate(-50%, -50%) rotate(45deg)"}}),k.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"14px",height:"2px",backgroundColor:"black",transform:"translate(-50%, -50%) rotate(-45deg)"}})]})}),Ij=({enabled:t})=>k.jsx("div",{style:{height:"36px",width:"42px"},children:k.jsxs("svg",{height:"32",width:"38",style:{margin:"none",transform:"translateY(3px)"},viewBox:"-2 0 36 34",children:[k.jsx("defs",{children:k.jsx("pattern",{id:"dashedFill",patternUnits:"userSpaceOnUse",width:"6",height:"6",patternTransform:"rotate(-50)",children:k.jsx("path",{d:"M 0 3 L 6 3",stroke:"black",strokeWidth:"3"})})}),k.jsx("polygon",{points:"2,4 6,29 30,30",style:{fill:"url(#dashedFill)",stroke:"black",strokeWidth:2.5}}),k.jsx("polygon",{points:"5,10 8,27 24,28",style:{fill:"transparent",stroke:"var(--unselected-bg)",strokeWidth:2}}),k.jsx("circle",{cx:"2",cy:"4",r:"4",fill:"black"}),k.jsx("circle",{cx:"6",cy:"28",r:"4",fill:"black"}),k.jsx("circle",{cx:"30",cy:"30",r:"4",fill:"black"}),k.jsx("line",{x1:"21",y1:"8",x2:"33",y2:"8",stroke:"black",strokeWidth:"3"}),k.jsx("line",{x1:"27",y1:"2",x2:"27",y2:"14",stroke:"black",strokeWidth:"3"})]})}),Oj=({enabled:t})=>k.jsx("div",{style:{height:"34px",width:"34px",transform:"translate(0px,0)"},children:k.jsx("svg",{height:"34",width:"34",style:{margin:"none"},viewBox:"0 0 34 34",children:k.jsxs("g",{transform:"rotate(45, 20, 20) translate(-8, -2) scale(1.15)",children:[k.jsx("path",{d:`M14 18\r
                     L13 30\r
                     L25 30\r
                     L24 18\r
                     L22 16\r
                     L20 6\r
                     L18 6\r
                     L16 16\r
                     Z`,stroke:"#000",strokeWidth:"0"}),k.jsx("path",{d:`M15 20\r
                     L15 26\r
                     L23 26\r
                     L23 20\r
                     L22 20\r
                     L16 20\r
                     Z`,stroke:"#000",strokeWidth:"1",fill:"var(--unselected-bg)"}),k.jsx("circle",{cx:"28",cy:"13",r:"3",stroke:"#000",strokeWidth:"0"}),k.jsx("polygon",{points:"23,8 25,13 28,10",fill:"black",stroke:"#000",strokeWidth:"1"})]})})});function Lj({enabled:t}){return k.jsx("div",{style:{marginTop:"4px",marginBottom:"2px",transform:"scale(1.15)"},children:k.jsx(Mj,{width:"20"})})}const kj=function(){return k.jsx("div",{style:{marginTop:"6px",marginBottom:"1px",transform:"scale(1.25) scaleX(-1) "},children:k.jsx(Ej,{width:"20"})})},Nj=t=>{const{setEditOptions:e,editOptions:n,setViewOptions:r,viewOptions:i,complexEditor:o,editorState:s}=t;return k.jsxs(k.Fragment,{children:[k.jsx(Wr,{name:"all",selected:!1,onClick:()=>o.selectAll(),style:{marginTop:"auto"},children:k.jsx(Pj,{enabled:!0})}),k.jsx(Wr,{name:"none",selected:!1,onClick:()=>o.deselectAll(),children:k.jsx(Rj,{enabled:!0})})]})},Dj=t=>{const e=()=>{t.complexEditor.shiftSelection(0,0,1)},n=()=>{t.complexEditor.shiftSelection(0,0,-1)},r=()=>{t.complexEditor.shiftSelection(1,0,0)};return k.jsxs(k.Fragment,{children:[k.jsx(Wr,{name:"right",selected:!1,onClick:r,style:{marginTop:"auto"},children:k.jsx(_j,{})}),k.jsx(Wr,{name:"in",selected:!1,onClick:e,children:k.jsx(vj,{})}),k.jsx(Wr,{name:"out",selected:!1,onClick:n,children:k.jsx(yj,{style:{fontWeight:"bold"}})})]})},Uj=t=>{const e=()=>{t.complexEditor.shiftSelection(0,1,0)},n=()=>{t.complexEditor.shiftSelection(0,-1,0)},r=()=>{t.complexEditor.shiftSelection(-1,0,0)};return k.jsxs(k.Fragment,{children:[k.jsx(Wr,{name:"left",selected:!1,onClick:r,style:{marginTop:"auto"},children:k.jsx(gj,{})}),k.jsx(Wr,{name:"up",selected:!1,onClick:e,children:k.jsx(Sj,{})}),k.jsx(Wr,{name:"down",selected:!1,onClick:n,children:k.jsx(xj,{})})]})},Fj=t=>{const{setEditOptions:e,editOptions:n,setViewOptions:r,viewOptions:i,complexEditor:o,editorState:s}=t,{nameState:a}=i,{mode:l}=n,c=d=>{e({...n,mode:d})},u=d=>{r({...i,nameState:d})};return k.jsxs("div",{className:Xg.panel,children:[k.jsxs("div",{className:Xg.buttonColumn,children:[k.jsx("div",{style:{width:"50px",height:"258px",transform:"translateY(5px)",position:"absolute"},className:"tour_mode_buttons"}),k.jsx(Tj,{selected:l=="add",onClick:()=>{o.deselectAll(),c("add")}}),k.jsx(Aj,{selected:l=="select",onClick:()=>{o.deselectAll(),c("select")}}),k.jsx(Cj,{selected:l=="move",onClick:()=>{o.deselectAll(),c("move")}}),k.jsx(mj,{selected:l=="remove",onClick:()=>{o.deselectAll(),c("remove")}}),l==="select"?k.jsx(Nj,{...t}):null,l==="move"?k.jsx(Uj,{...t}):null]}),k.jsxs("div",{className:Xg.buttonColumn,children:[k.jsx(Wr,{name:"fill",onClick:o.addCell,selected:!1,children:k.jsx(Ij,{enabled:!0})}),k.jsx(Wr,{name:"identify",onClick:o.identify,selected:!1,children:k.jsx(Oj,{enabled:!0})}),k.jsx(Wr,{name:"undo",onClick:o.undo,selected:!1,children:k.jsx(Lj,{enabled:!0})}),k.jsx(Wr,{name:"reset",onClick:()=>t.complexEditor.reset(),selected:!1,children:k.jsx(kj,{})}),l==="move"?k.jsx(Dj,{...t}):null]}),[].map(d=>k.jsx("button",{className:a[d]?Xg.selected:"",onClick:()=>{const p=[...a];p[d]=!a[d],u(p)},children:["Vertex"," Edge"," Face"][d]},d))]})};/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ad="168",oc={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},sc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},xD=0,zb=1,_D=2,zj=3,SD=0,Yx=1,Hh=2,Oo=3,Ea=0,li=1,xi=2,ya=0,Sc=1,Bb=2,Hb=3,Vb=4,wD=5,il=100,bD=101,ED=102,MD=103,TD=104,CD=200,AD=201,PD=202,RD=203,lv=204,cv=205,ID=206,OD=207,LD=208,kD=209,ND=210,DD=211,UD=212,FD=213,zD=214,BD=0,HD=1,VD=2,Sp=3,$D=4,WD=5,jD=6,GD=7,am=0,XD=1,YD=2,Os=0,qD=1,KD=2,ZD=3,iT=4,JD=5,QD=6,eU=7,$b="attached",tU="detached",qx=300,Ma=301,Sl=302,wp=303,bp=304,ld=306,Ep=1e3,po=1001,Mp=1002,gr=1003,oT=1004,Bj=1004,hf=1005,Hj=1005,tr=1006,Vh=1007,Vj=1007,Es=1008,$j=1008,Wo=1009,sT=1010,aT=1011,Vf=1012,Kx=1013,Ta=1014,Si=1015,cd=1016,Zx=1017,Jx=1018,Dc=1020,lT=35902,cT=1021,uT=1022,jr=1023,fT=1024,dT=1025,wc=1026,Uc=1027,Qx=1028,lm=1029,hT=1030,e1=1031,Wj=1032,t1=1033,$h=33776,Wh=33777,jh=33778,Gh=33779,uv=35840,fv=35841,dv=35842,hv=35843,pv=36196,mv=37492,gv=37496,yv=37808,vv=37809,xv=37810,_v=37811,Sv=37812,wv=37813,bv=37814,Ev=37815,Mv=37816,Tv=37817,Cv=37818,Av=37819,Pv=37820,Rv=37821,Xh=36492,Iv=36494,Ov=36495,pT=36283,Lv=36284,kv=36285,Nv=36286,nU=2200,rU=2201,iU=2202,Tp=2300,Dv=2301,My=2302,hc=2400,pc=2401,Cp=2402,n1=2500,mT=2501,jj=0,Gj=1,Xj=2,oU=3200,sU=3201,Yj=3202,qj=3203,Il=0,aU=1,aa="",ao="srgb",Oa="srgb-linear",r1="display-p3",cm="display-p3-linear",Ap="linear",hn="srgb",Pp="rec709",Rp="p3",Kj=0,ac=7680,Zj=7681,Jj=7682,Qj=7683,e9=34055,t9=34056,n9=5386,r9=512,i9=513,o9=514,s9=515,a9=516,l9=517,c9=518,Wb=519,lU=512,cU=513,uU=514,gT=515,fU=516,dU=517,hU=518,pU=519,Ip=35044,u9=35048,f9=35040,d9=35045,h9=35049,p9=35041,m9=35046,g9=35050,y9=35042,v9="100",jb="300 es",Ms=2e3,Op=2001;class Ko{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,s=i.length;o<s;o++)i[o].call(this,e);e.target=null}}}const Fr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let tR=1234567;const bc=Math.PI/180,$f=180/Math.PI;function Gi(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Fr[t&255]+Fr[t>>8&255]+Fr[t>>16&255]+Fr[t>>24&255]+"-"+Fr[e&255]+Fr[e>>8&255]+"-"+Fr[e>>16&15|64]+Fr[e>>24&255]+"-"+Fr[n&63|128]+Fr[n>>8&255]+"-"+Fr[n>>16&255]+Fr[n>>24&255]+Fr[r&255]+Fr[r>>8&255]+Fr[r>>16&255]+Fr[r>>24&255]).toLowerCase()}function $n(t,e,n){return Math.max(e,Math.min(n,t))}function yT(t,e){return(t%e+e)%e}function x9(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function _9(t,e,n){return t!==e?(n-t)/(e-t):0}function Yh(t,e,n){return(1-n)*t+n*e}function S9(t,e,n,r){return Yh(t,e,1-Math.exp(-n*r))}function w9(t,e=1){return e-Math.abs(yT(t,e*2)-e)}function b9(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function E9(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function M9(t,e){return t+Math.floor(Math.random()*(e-t+1))}function T9(t,e){return t+Math.random()*(e-t)}function C9(t){return t*(.5-Math.random())}function A9(t){t!==void 0&&(tR=t);let e=tR+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function P9(t){return t*bc}function R9(t){return t*$f}function I9(t){return(t&t-1)===0&&t!==0}function O9(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function L9(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function k9(t,e,n,r,i){const o=Math.cos,s=Math.sin,a=o(n/2),l=s(n/2),c=o((e+r)/2),u=s((e+r)/2),d=o((e-r)/2),p=s((e-r)/2),m=o((r-e)/2),g=s((r-e)/2);switch(i){case"XYX":t.set(a*u,l*d,l*p,a*c);break;case"YZY":t.set(l*p,a*u,l*d,a*c);break;case"ZXZ":t.set(l*d,l*p,a*u,a*c);break;case"XZX":t.set(a*u,l*g,l*m,a*c);break;case"YXY":t.set(l*m,a*u,l*g,a*c);break;case"ZYZ":t.set(l*g,l*m,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function ii(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Ot(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const mU={DEG2RAD:bc,RAD2DEG:$f,generateUUID:Gi,clamp:$n,euclideanModulo:yT,mapLinear:x9,inverseLerp:_9,lerp:Yh,damp:S9,pingpong:w9,smoothstep:b9,smootherstep:E9,randInt:M9,randFloat:T9,randFloatSpread:C9,seededRandom:A9,degToRad:P9,radToDeg:R9,isPowerOfTwo:I9,ceilPowerOfTwo:O9,floorPowerOfTwo:L9,setQuaternionFromProperEuler:k9,normalize:Ot,denormalize:ii};class Se{constructor(e=0,n=0){Se.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos($n(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),o=this.x-e.x,s=this.y-e.y;return this.x=o*r-s*i+e.x,this.y=o*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class It{constructor(e,n,r,i,o,s,a,l,c){It.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,s,a,l,c)}set(e,n,r,i,o,s,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=n,u[4]=o,u[5]=l,u[6]=r,u[7]=s,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,s=r[0],a=r[3],l=r[6],c=r[1],u=r[4],d=r[7],p=r[2],m=r[5],g=r[8],v=i[0],x=i[3],y=i[6],_=i[1],w=i[4],M=i[7],A=i[2],C=i[5],P=i[8];return o[0]=s*v+a*_+l*A,o[3]=s*x+a*w+l*C,o[6]=s*y+a*M+l*P,o[1]=c*v+u*_+d*A,o[4]=c*x+u*w+d*C,o[7]=c*y+u*M+d*P,o[2]=p*v+m*_+g*A,o[5]=p*x+m*w+g*C,o[8]=p*y+m*M+g*P,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*s*u-n*a*c-r*o*u+r*a*l+i*o*c-i*s*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*s-a*c,p=a*l-u*o,m=c*o-s*l,g=n*d+r*p+i*m;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return e[0]=d*v,e[1]=(i*c-u*r)*v,e[2]=(a*r-i*s)*v,e[3]=p*v,e[4]=(u*n-i*l)*v,e[5]=(i*o-a*n)*v,e[6]=m*v,e[7]=(r*l-c*n)*v,e[8]=(s*n-r*o)*v,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,o,s,a){const l=Math.cos(o),c=Math.sin(o);return this.set(r*l,r*c,-r*(l*s+c*a)+s+e,-i*c,i*l,-i*(-c*s+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(MS.makeScale(e,n)),this}rotate(e){return this.premultiply(MS.makeRotation(-e)),this}translate(e,n){return this.premultiply(MS.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const MS=new It;function gU(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const N9={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function pf(t,e){return new N9[t](e)}function Lp(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function yU(){const t=Lp("canvas");return t.style.display="block",t}const nR={};function Pf(t){t in nR||(nR[t]=!0,console.warn(t))}function D9(t,e,n){return new Promise(function(r,i){function o(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(o,n);break;default:r()}}setTimeout(o,n)})}const rR=new It().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),iR=new It().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Qd={[Oa]:{transfer:Ap,primaries:Pp,luminanceCoefficients:[.2126,.7152,.0722],toReference:t=>t,fromReference:t=>t},[ao]:{transfer:hn,primaries:Pp,luminanceCoefficients:[.2126,.7152,.0722],toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[cm]:{transfer:Ap,primaries:Rp,luminanceCoefficients:[.2289,.6917,.0793],toReference:t=>t.applyMatrix3(iR),fromReference:t=>t.applyMatrix3(rR)},[r1]:{transfer:hn,primaries:Rp,luminanceCoefficients:[.2289,.6917,.0793],toReference:t=>t.convertSRGBToLinear().applyMatrix3(iR),fromReference:t=>t.applyMatrix3(rR).convertLinearToSRGB()}},U9=new Set([Oa,cm]),Kt={enabled:!0,_workingColorSpace:Oa,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!U9.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=Qd[e].toReference,i=Qd[n].fromReference;return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return Qd[t].primaries},getTransfer:function(t){return t===aa?Ap:Qd[t].transfer},getLuminanceCoefficients:function(t,e=this._workingColorSpace){return t.fromArray(Qd[e].luminanceCoefficients)}};function Rf(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function TS(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let wu;class vU{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{wu===void 0&&(wu=Lp("canvas")),wu.width=e.width,wu.height=e.height;const r=wu.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=wu}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Lp("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),o=i.data;for(let s=0;s<o.length;s++)o[s]=Rf(o[s]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Rf(n[r]/255)*255):n[r]=Rf(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let F9=0;class mc{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:F9++}),this.uuid=Gi(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let s=0,a=i.length;s<a;s++)i[s].isDataTexture?o.push(CS(i[s].image)):o.push(CS(i[s]))}else o=CS(i);r.url=o}return n||(e.images[this.uuid]=r),r}}function CS(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?vU.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let z9=0;class Nn extends Ko{constructor(e=Nn.DEFAULT_IMAGE,n=Nn.DEFAULT_MAPPING,r=po,i=po,o=tr,s=Es,a=jr,l=Wo,c=Nn.DEFAULT_ANISOTROPY,u=aa){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:z9++}),this.uuid=Gi(),this.name="",this.source=new mc(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=o,this.minFilter=s,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Se(0,0),this.repeat=new Se(1,1),this.center=new Se(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new It,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==qx)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ep:e.x=e.x-Math.floor(e.x);break;case po:e.x=e.x<0?0:1;break;case Mp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ep:e.y=e.y-Math.floor(e.y);break;case po:e.y=e.y<0?0:1;break;case Mp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Nn.DEFAULT_IMAGE=null;Nn.DEFAULT_MAPPING=qx;Nn.DEFAULT_ANISOTROPY=1;class Bt{constructor(e=0,n=0,r=0,i=1){Bt.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=this.w,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i+s[12]*o,this.y=s[1]*n+s[5]*r+s[9]*i+s[13]*o,this.z=s[2]*n+s[6]*r+s[10]*i+s[14]*o,this.w=s[3]*n+s[7]*r+s[11]*i+s[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,o;const l=e.elements,c=l[0],u=l[4],d=l[8],p=l[1],m=l[5],g=l[9],v=l[2],x=l[6],y=l[10];if(Math.abs(u-p)<.01&&Math.abs(d-v)<.01&&Math.abs(g-x)<.01){if(Math.abs(u+p)<.1&&Math.abs(d+v)<.1&&Math.abs(g+x)<.1&&Math.abs(c+m+y-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const w=(c+1)/2,M=(m+1)/2,A=(y+1)/2,C=(u+p)/4,P=(d+v)/4,N=(g+x)/4;return w>M&&w>A?w<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(w),i=C/r,o=P/r):M>A?M<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(M),r=C/i,o=N/i):A<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(A),r=P/o,i=N/o),this.set(r,i,o,n),this}let _=Math.sqrt((x-g)*(x-g)+(d-v)*(d-v)+(p-u)*(p-u));return Math.abs(_)<.001&&(_=1),this.x=(x-g)/_,this.y=(d-v)/_,this.z=(p-u)/_,this.w=Math.acos((c+m+y-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class xU extends Ko{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Bt(0,0,e,n),this.scissorTest=!1,this.viewport=new Bt(0,0,e,n);const i={width:e,height:n,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:tr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const o=new Nn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);o.flipY=!1,o.generateMipmaps=r.generateMipmaps,o.internalFormat=r.internalFormat,this.textures=[];const s=r.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,o=this.textures.length;i<o;i++)this.textures[i].image.width=e,this.textures[i].image.height=n,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new mc(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class jo extends xU{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class i1 extends Nn{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=gr,this.minFilter=gr,this.wrapR=po,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class B9 extends jo{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new i1(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class vT extends Nn{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=gr,this.minFilter=gr,this.wrapR=po,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class H9 extends jo{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new vT(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class Xr{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,o,s,a){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const p=o[s+0],m=o[s+1],g=o[s+2],v=o[s+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d;return}if(a===1){e[n+0]=p,e[n+1]=m,e[n+2]=g,e[n+3]=v;return}if(d!==v||l!==p||c!==m||u!==g){let x=1-a;const y=l*p+c*m+u*g+d*v,_=y>=0?1:-1,w=1-y*y;if(w>Number.EPSILON){const A=Math.sqrt(w),C=Math.atan2(A,y*_);x=Math.sin(x*C)/A,a=Math.sin(a*C)/A}const M=a*_;if(l=l*x+p*M,c=c*x+m*M,u=u*x+g*M,d=d*x+v*M,x===1-a){const A=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=A,c*=A,u*=A,d*=A}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d}static multiplyQuaternionsFlat(e,n,r,i,o,s){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=o[s],p=o[s+1],m=o[s+2],g=o[s+3];return e[n]=a*g+u*d+l*m-c*p,e[n+1]=l*g+u*p+c*d-a*m,e[n+2]=c*g+u*m+a*p-l*d,e[n+3]=u*g-a*d-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),d=a(o/2),p=l(r/2),m=l(i/2),g=l(o/2);switch(s){case"XYZ":this._x=p*u*d+c*m*g,this._y=c*m*d-p*u*g,this._z=c*u*g+p*m*d,this._w=c*u*d-p*m*g;break;case"YXZ":this._x=p*u*d+c*m*g,this._y=c*m*d-p*u*g,this._z=c*u*g-p*m*d,this._w=c*u*d+p*m*g;break;case"ZXY":this._x=p*u*d-c*m*g,this._y=c*m*d+p*u*g,this._z=c*u*g+p*m*d,this._w=c*u*d-p*m*g;break;case"ZYX":this._x=p*u*d-c*m*g,this._y=c*m*d+p*u*g,this._z=c*u*g-p*m*d,this._w=c*u*d+p*m*g;break;case"YZX":this._x=p*u*d+c*m*g,this._y=c*m*d+p*u*g,this._z=c*u*g-p*m*d,this._w=c*u*d-p*m*g;break;case"XZY":this._x=p*u*d-c*m*g,this._y=c*m*d-p*u*g,this._z=c*u*g+p*m*d,this._w=c*u*d+p*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],o=n[8],s=n[1],a=n[5],l=n[9],c=n[2],u=n[6],d=n[10],p=r+a+d;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(u-l)*m,this._y=(o-c)*m,this._z=(s-i)*m}else if(r>a&&r>d){const m=2*Math.sqrt(1+r-a-d);this._w=(u-l)/m,this._x=.25*m,this._y=(i+s)/m,this._z=(o+c)/m}else if(a>d){const m=2*Math.sqrt(1+a-r-d);this._w=(o-c)/m,this._x=(i+s)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+d-r-a);this._w=(s-i)/m,this._x=(o+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs($n(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,o=e._z,s=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=r*u+s*a+i*c-o*l,this._y=i*u+s*l+o*a-r*c,this._z=o*u+s*c+r*l-i*a,this._w=s*u-r*a-i*l-o*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,o=this._z,s=this._w;let a=s*e._w+r*e._x+i*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=r,this._y=i,this._z=o,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-n;return this._w=m*s+n*this._w,this._x=m*r+n*this._x,this._y=m*i+n*this._y,this._z=m*o+n*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-n)*u)/c,p=Math.sin(n*u)/c;return this._w=s*d+this._w*p,this._x=r*d+this._x*p,this._y=i*d+this._y*p,this._z=o*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),o=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),o*Math.sin(n),o*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class z{constructor(e=0,n=0,r=0){z.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(oR.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(oR.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[3]*r+o[6]*i,this.y=o[1]*n+o[4]*r+o[7]*i,this.z=o[2]*n+o[5]*r+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=e.elements,s=1/(o[3]*n+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*n+o[4]*r+o[8]*i+o[12])*s,this.y=(o[1]*n+o[5]*r+o[9]*i+o[13])*s,this.z=(o[2]*n+o[6]*r+o[10]*i+o[14])*s,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,o=e.x,s=e.y,a=e.z,l=e.w,c=2*(s*i-a*r),u=2*(a*n-o*i),d=2*(o*r-s*n);return this.x=n+l*c+s*d-a*u,this.y=r+l*u+a*c-o*d,this.z=i+l*d+o*u-s*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i,this.y=o[1]*n+o[5]*r+o[9]*i,this.z=o[2]*n+o[6]*r+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,o=e.z,s=n.x,a=n.y,l=n.z;return this.x=i*l-o*a,this.y=o*s-r*l,this.z=r*a-i*s,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return AS.copy(this).projectOnVector(e),this.sub(AS)}reflect(e){return this.sub(AS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos($n(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const AS=new z,oR=new Xr;class vr{constructor(e=new z(1/0,1/0,1/0),n=new z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(Ao.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(Ao.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Ao.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const o=r.getAttribute("position");if(n===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)e.isMesh===!0?e.getVertexPosition(s,Ao):Ao.fromBufferAttribute(o,s),Ao.applyMatrix4(e.matrixWorld),this.expandByPoint(Ao);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Jg.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Jg.copy(r.boundingBox)),Jg.applyMatrix4(e.matrixWorld),this.union(Jg)}const i=e.children;for(let o=0,s=i.length;o<s;o++)this.expandByObject(i[o],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Ao),Ao.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(eh),Qg.subVectors(this.max,eh),bu.subVectors(e.a,eh),Eu.subVectors(e.b,eh),Mu.subVectors(e.c,eh),ja.subVectors(Eu,bu),Ga.subVectors(Mu,Eu),jl.subVectors(bu,Mu);let n=[0,-ja.z,ja.y,0,-Ga.z,Ga.y,0,-jl.z,jl.y,ja.z,0,-ja.x,Ga.z,0,-Ga.x,jl.z,0,-jl.x,-ja.y,ja.x,0,-Ga.y,Ga.x,0,-jl.y,jl.x,0];return!PS(n,bu,Eu,Mu,Qg)||(n=[1,0,0,0,1,0,0,0,1],!PS(n,bu,Eu,Mu,Qg))?!1:(e0.crossVectors(ja,Ga),n=[e0.x,e0.y,e0.z],PS(n,bu,Eu,Mu,Qg))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ao).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ao).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Xs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Xs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Xs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Xs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Xs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Xs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Xs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Xs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Xs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Xs=[new z,new z,new z,new z,new z,new z,new z,new z],Ao=new z,Jg=new vr,bu=new z,Eu=new z,Mu=new z,ja=new z,Ga=new z,jl=new z,eh=new z,Qg=new z,e0=new z,Gl=new z;function PS(t,e,n,r,i){for(let o=0,s=t.length-3;o<=s;o+=3){Gl.fromArray(t,o);const a=i.x*Math.abs(Gl.x)+i.y*Math.abs(Gl.y)+i.z*Math.abs(Gl.z),l=e.dot(Gl),c=n.dot(Gl),u=r.dot(Gl);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const V9=new vr,th=new z,RS=new z;let xr=class{constructor(e=new z,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):V9.setFromPoints(e).getCenter(r);let i=0;for(let o=0,s=e.length;o<s;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;th.subVectors(e,this.center);const n=th.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(th,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(RS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(th.copy(e.center).add(RS)),this.expandByPoint(th.copy(e.center).sub(RS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const Ys=new z,IS=new z,t0=new z,Xa=new z,OS=new z,n0=new z,LS=new z;class jc{constructor(e=new z,n=new z(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ys)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Ys.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Ys.copy(this.origin).addScaledVector(this.direction,n),Ys.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){IS.copy(e).add(n).multiplyScalar(.5),t0.copy(n).sub(e).normalize(),Xa.copy(this.origin).sub(IS);const o=e.distanceTo(n)*.5,s=-this.direction.dot(t0),a=Xa.dot(this.direction),l=-Xa.dot(t0),c=Xa.lengthSq(),u=Math.abs(1-s*s);let d,p,m,g;if(u>0)if(d=s*l-a,p=s*a-l,g=o*u,d>=0)if(p>=-g)if(p<=g){const v=1/u;d*=v,p*=v,m=d*(d+s*p+2*a)+p*(s*d+p+2*l)+c}else p=o,d=Math.max(0,-(s*p+a)),m=-d*d+p*(p+2*l)+c;else p=-o,d=Math.max(0,-(s*p+a)),m=-d*d+p*(p+2*l)+c;else p<=-g?(d=Math.max(0,-(-s*o+a)),p=d>0?-o:Math.min(Math.max(-o,-l),o),m=-d*d+p*(p+2*l)+c):p<=g?(d=0,p=Math.min(Math.max(-o,-l),o),m=p*(p+2*l)+c):(d=Math.max(0,-(s*o+a)),p=d>0?o:Math.min(Math.max(-o,-l),o),m=-d*d+p*(p+2*l)+c);else p=s>0?-o:o,d=Math.max(0,-(s*p+a)),m=-d*d+p*(p+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(IS).addScaledVector(t0,p),m}intersectSphere(e,n){Ys.subVectors(e.center,this.origin);const r=Ys.dot(this.direction),i=Ys.dot(Ys)-r*r,o=e.radius*e.radius;if(i>o)return null;const s=Math.sqrt(o-i),a=r-s,l=r+s;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,o,s,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,p=this.origin;return c>=0?(r=(e.min.x-p.x)*c,i=(e.max.x-p.x)*c):(r=(e.max.x-p.x)*c,i=(e.min.x-p.x)*c),u>=0?(o=(e.min.y-p.y)*u,s=(e.max.y-p.y)*u):(o=(e.max.y-p.y)*u,s=(e.min.y-p.y)*u),r>s||o>i||((o>r||isNaN(r))&&(r=o),(s<i||isNaN(i))&&(i=s),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Ys)!==null}intersectTriangle(e,n,r,i,o){OS.subVectors(n,e),n0.subVectors(r,e),LS.crossVectors(OS,n0);let s=this.direction.dot(LS),a;if(s>0){if(i)return null;a=1}else if(s<0)a=-1,s=-s;else return null;Xa.subVectors(this.origin,e);const l=a*this.direction.dot(n0.crossVectors(Xa,n0));if(l<0)return null;const c=a*this.direction.dot(OS.cross(Xa));if(c<0||l+c>s)return null;const u=-a*Xa.dot(LS);return u<0?null:this.at(u/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class St{constructor(e,n,r,i,o,s,a,l,c,u,d,p,m,g,v,x){St.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,s,a,l,c,u,d,p,m,g,v,x)}set(e,n,r,i,o,s,a,l,c,u,d,p,m,g,v,x){const y=this.elements;return y[0]=e,y[4]=n,y[8]=r,y[12]=i,y[1]=o,y[5]=s,y[9]=a,y[13]=l,y[2]=c,y[6]=u,y[10]=d,y[14]=p,y[3]=m,y[7]=g,y[11]=v,y[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new St().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/Tu.setFromMatrixColumn(e,0).length(),o=1/Tu.setFromMatrixColumn(e,1).length(),s=1/Tu.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*s,n[9]=r[9]*s,n[10]=r[10]*s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,o=e.z,s=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(o),d=Math.sin(o);if(e.order==="XYZ"){const p=s*u,m=s*d,g=a*u,v=a*d;n[0]=l*u,n[4]=-l*d,n[8]=c,n[1]=m+g*c,n[5]=p-v*c,n[9]=-a*l,n[2]=v-p*c,n[6]=g+m*c,n[10]=s*l}else if(e.order==="YXZ"){const p=l*u,m=l*d,g=c*u,v=c*d;n[0]=p+v*a,n[4]=g*a-m,n[8]=s*c,n[1]=s*d,n[5]=s*u,n[9]=-a,n[2]=m*a-g,n[6]=v+p*a,n[10]=s*l}else if(e.order==="ZXY"){const p=l*u,m=l*d,g=c*u,v=c*d;n[0]=p-v*a,n[4]=-s*d,n[8]=g+m*a,n[1]=m+g*a,n[5]=s*u,n[9]=v-p*a,n[2]=-s*c,n[6]=a,n[10]=s*l}else if(e.order==="ZYX"){const p=s*u,m=s*d,g=a*u,v=a*d;n[0]=l*u,n[4]=g*c-m,n[8]=p*c+v,n[1]=l*d,n[5]=v*c+p,n[9]=m*c-g,n[2]=-c,n[6]=a*l,n[10]=s*l}else if(e.order==="YZX"){const p=s*l,m=s*c,g=a*l,v=a*c;n[0]=l*u,n[4]=v-p*d,n[8]=g*d+m,n[1]=d,n[5]=s*u,n[9]=-a*u,n[2]=-c*u,n[6]=m*d+g,n[10]=p-v*d}else if(e.order==="XZY"){const p=s*l,m=s*c,g=a*l,v=a*c;n[0]=l*u,n[4]=-d,n[8]=c*u,n[1]=p*d+v,n[5]=s*u,n[9]=m*d-g,n[2]=g*d-m,n[6]=a*u,n[10]=v*d+p}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose($9,e,W9)}lookAt(e,n,r){const i=this.elements;return Ni.subVectors(e,n),Ni.lengthSq()===0&&(Ni.z=1),Ni.normalize(),Ya.crossVectors(r,Ni),Ya.lengthSq()===0&&(Math.abs(r.z)===1?Ni.x+=1e-4:Ni.z+=1e-4,Ni.normalize(),Ya.crossVectors(r,Ni)),Ya.normalize(),r0.crossVectors(Ni,Ya),i[0]=Ya.x,i[4]=r0.x,i[8]=Ni.x,i[1]=Ya.y,i[5]=r0.y,i[9]=Ni.y,i[2]=Ya.z,i[6]=r0.z,i[10]=Ni.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,s=r[0],a=r[4],l=r[8],c=r[12],u=r[1],d=r[5],p=r[9],m=r[13],g=r[2],v=r[6],x=r[10],y=r[14],_=r[3],w=r[7],M=r[11],A=r[15],C=i[0],P=i[4],N=i[8],O=i[12],E=i[1],L=i[5],H=i[9],W=i[13],Y=i[2],K=i[6],J=i[10],Q=i[14],D=i[3],G=i[7],X=i[11],ne=i[15];return o[0]=s*C+a*E+l*Y+c*D,o[4]=s*P+a*L+l*K+c*G,o[8]=s*N+a*H+l*J+c*X,o[12]=s*O+a*W+l*Q+c*ne,o[1]=u*C+d*E+p*Y+m*D,o[5]=u*P+d*L+p*K+m*G,o[9]=u*N+d*H+p*J+m*X,o[13]=u*O+d*W+p*Q+m*ne,o[2]=g*C+v*E+x*Y+y*D,o[6]=g*P+v*L+x*K+y*G,o[10]=g*N+v*H+x*J+y*X,o[14]=g*O+v*W+x*Q+y*ne,o[3]=_*C+w*E+M*Y+A*D,o[7]=_*P+w*L+M*K+A*G,o[11]=_*N+w*H+M*J+A*X,o[15]=_*O+w*W+M*Q+A*ne,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],o=e[12],s=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],p=e[10],m=e[14],g=e[3],v=e[7],x=e[11],y=e[15];return g*(+o*l*d-i*c*d-o*a*p+r*c*p+i*a*m-r*l*m)+v*(+n*l*m-n*c*p+o*s*p-i*s*m+i*c*u-o*l*u)+x*(+n*c*d-n*a*m-o*s*d+r*s*m+o*a*u-r*c*u)+y*(-i*a*u-n*l*d+n*a*p+i*s*d-r*s*p+r*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],p=e[10],m=e[11],g=e[12],v=e[13],x=e[14],y=e[15],_=d*x*c-v*p*c+v*l*m-a*x*m-d*l*y+a*p*y,w=g*p*c-u*x*c-g*l*m+s*x*m+u*l*y-s*p*y,M=u*v*c-g*d*c+g*a*m-s*v*m-u*a*y+s*d*y,A=g*d*l-u*v*l-g*a*p+s*v*p+u*a*x-s*d*x,C=n*_+r*w+i*M+o*A;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/C;return e[0]=_*P,e[1]=(v*p*o-d*x*o-v*i*m+r*x*m+d*i*y-r*p*y)*P,e[2]=(a*x*o-v*l*o+v*i*c-r*x*c-a*i*y+r*l*y)*P,e[3]=(d*l*o-a*p*o-d*i*c+r*p*c+a*i*m-r*l*m)*P,e[4]=w*P,e[5]=(u*x*o-g*p*o+g*i*m-n*x*m-u*i*y+n*p*y)*P,e[6]=(g*l*o-s*x*o-g*i*c+n*x*c+s*i*y-n*l*y)*P,e[7]=(s*p*o-u*l*o+u*i*c-n*p*c-s*i*m+n*l*m)*P,e[8]=M*P,e[9]=(g*d*o-u*v*o-g*r*m+n*v*m+u*r*y-n*d*y)*P,e[10]=(s*v*o-g*a*o+g*r*c-n*v*c-s*r*y+n*a*y)*P,e[11]=(u*a*o-s*d*o-u*r*c+n*d*c+s*r*m-n*a*m)*P,e[12]=A*P,e[13]=(u*v*i-g*d*i+g*r*p-n*v*p-u*r*x+n*d*x)*P,e[14]=(g*a*i-s*v*i-g*r*l+n*v*l+s*r*x-n*a*x)*P,e[15]=(s*d*i-u*a*i+u*r*l-n*d*l-s*r*p+n*a*p)*P,this}scale(e){const n=this.elements,r=e.x,i=e.y,o=e.z;return n[0]*=r,n[4]*=i,n[8]*=o,n[1]*=r,n[5]*=i,n[9]*=o,n[2]*=r,n[6]*=i,n[10]*=o,n[3]*=r,n[7]*=i,n[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),o=1-r,s=e.x,a=e.y,l=e.z,c=o*s,u=o*a;return this.set(c*s+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*s,0,c*l-i*a,u*l+i*s,o*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,o,s){return this.set(1,r,o,0,e,1,s,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,o=n._x,s=n._y,a=n._z,l=n._w,c=o+o,u=s+s,d=a+a,p=o*c,m=o*u,g=o*d,v=s*u,x=s*d,y=a*d,_=l*c,w=l*u,M=l*d,A=r.x,C=r.y,P=r.z;return i[0]=(1-(v+y))*A,i[1]=(m+M)*A,i[2]=(g-w)*A,i[3]=0,i[4]=(m-M)*C,i[5]=(1-(p+y))*C,i[6]=(x+_)*C,i[7]=0,i[8]=(g+w)*P,i[9]=(x-_)*P,i[10]=(1-(p+v))*P,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let o=Tu.set(i[0],i[1],i[2]).length();const s=Tu.set(i[4],i[5],i[6]).length(),a=Tu.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],Po.copy(this);const c=1/o,u=1/s,d=1/a;return Po.elements[0]*=c,Po.elements[1]*=c,Po.elements[2]*=c,Po.elements[4]*=u,Po.elements[5]*=u,Po.elements[6]*=u,Po.elements[8]*=d,Po.elements[9]*=d,Po.elements[10]*=d,n.setFromRotationMatrix(Po),r.x=o,r.y=s,r.z=a,this}makePerspective(e,n,r,i,o,s,a=Ms){const l=this.elements,c=2*o/(n-e),u=2*o/(r-i),d=(n+e)/(n-e),p=(r+i)/(r-i);let m,g;if(a===Ms)m=-(s+o)/(s-o),g=-2*s*o/(s-o);else if(a===Op)m=-s/(s-o),g=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,o,s,a=Ms){const l=this.elements,c=1/(n-e),u=1/(r-i),d=1/(s-o),p=(n+e)*c,m=(r+i)*u;let g,v;if(a===Ms)g=(s+o)*d,v=-2*d;else if(a===Op)g=o*d,v=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=v,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const Tu=new z,Po=new St,$9=new z(0,0,0),W9=new z(1,1,1),Ya=new z,r0=new z,Ni=new z,sR=new St,aR=new Xr;class Ai{constructor(e=0,n=0,r=0,i=Ai.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,o=i[0],s=i[4],a=i[8],l=i[1],c=i[5],u=i[9],d=i[2],p=i[6],m=i[10];switch(n){case"XYZ":this._y=Math.asin($n(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-$n(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,o),this._z=0);break;case"ZXY":this._x=Math.asin($n(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-$n(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-s,c));break;case"YZX":this._z=Math.asin($n(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-$n(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return sR.makeRotationFromQuaternion(e),this.setFromRotationMatrix(sR,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return aR.setFromEuler(this),this.setFromQuaternion(aR,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ai.DEFAULT_ORDER="XYZ";class Ec{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let j9=0;const lR=new z,Cu=new Xr,qs=new St,i0=new z,nh=new z,G9=new z,X9=new Xr,cR=new z(1,0,0),uR=new z(0,1,0),fR=new z(0,0,1),dR={type:"added"},Y9={type:"removed"},Au={type:"childadded",child:null},kS={type:"childremoved",child:null};class jt extends Ko{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:j9++}),this.uuid=Gi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=jt.DEFAULT_UP.clone();const e=new z,n=new Ai,r=new Xr,i=new z(1,1,1);function o(){r.setFromEuler(n,!1)}function s(){n.setFromQuaternion(r,void 0,!1)}n._onChange(o),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new St},normalMatrix:{value:new It}}),this.matrix=new St,this.matrixWorld=new St,this.matrixAutoUpdate=jt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=jt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Ec,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Cu.setFromAxisAngle(e,n),this.quaternion.multiply(Cu),this}rotateOnWorldAxis(e,n){return Cu.setFromAxisAngle(e,n),this.quaternion.premultiply(Cu),this}rotateX(e){return this.rotateOnAxis(cR,e)}rotateY(e){return this.rotateOnAxis(uR,e)}rotateZ(e){return this.rotateOnAxis(fR,e)}translateOnAxis(e,n){return lR.copy(e).applyQuaternion(this.quaternion),this.position.add(lR.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(cR,e)}translateY(e){return this.translateOnAxis(uR,e)}translateZ(e){return this.translateOnAxis(fR,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(qs.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?i0.copy(e):i0.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),nh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?qs.lookAt(nh,i0,this.up):qs.lookAt(i0,nh,this.up),this.quaternion.setFromRotationMatrix(qs),i&&(qs.extractRotation(i.matrixWorld),Cu.setFromRotationMatrix(qs),this.quaternion.premultiply(Cu.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(dR),Au.child=e,this.dispatchEvent(Au),Au.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Y9),kS.child=e,this.dispatchEvent(kS),kS.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),qs.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),qs.multiply(e.parent.matrixWorld)),e.applyMatrix4(qs),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(dR),Au.child=e,this.dispatchEvent(Au),Au.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(e,n);if(s!==void 0)return s}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let o=0,s=i.length;o<s;o++)i[o].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(nh,e,G9),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(nh,X9,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const i=this.children;for(let o=0,s=i.length;o<s;o++)i[o].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function o(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];o(e.shapes,d)}else o(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(o(e.materials,this.material[l]));i.material=a}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(o(e.animations,l))}}if(n){const a=s(e.geometries),l=s(e.materials),c=s(e.textures),u=s(e.images),d=s(e.shapes),p=s(e.skeletons),m=s(e.animations),g=s(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),g.length>0&&(r.nodes=g)}return r.object=i,r;function s(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}jt.DEFAULT_UP=new z(0,1,0);jt.DEFAULT_MATRIX_AUTO_UPDATE=!0;jt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ro=new z,Ks=new z,NS=new z,Zs=new z,Pu=new z,Ru=new z,hR=new z,DS=new z,US=new z,FS=new z;class Bi{constructor(e=new z,n=new z,r=new z){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Ro.subVectors(e,n),i.cross(Ro);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,n,r,i,o){Ro.subVectors(i,n),Ks.subVectors(r,n),NS.subVectors(e,n);const s=Ro.dot(Ro),a=Ro.dot(Ks),l=Ro.dot(NS),c=Ks.dot(Ks),u=Ks.dot(NS),d=s*c-a*a;if(d===0)return o.set(0,0,0),null;const p=1/d,m=(c*l-a*u)*p,g=(s*u-a*l)*p;return o.set(1-m-g,g,m)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Zs)===null?!1:Zs.x>=0&&Zs.y>=0&&Zs.x+Zs.y<=1}static getInterpolation(e,n,r,i,o,s,a,l){return this.getBarycoord(e,n,r,i,Zs)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,Zs.x),l.addScaledVector(s,Zs.y),l.addScaledVector(a,Zs.z),l)}static isFrontFacing(e,n,r,i){return Ro.subVectors(r,n),Ks.subVectors(e,n),Ro.cross(Ks).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ro.subVectors(this.c,this.b),Ks.subVectors(this.a,this.b),Ro.cross(Ks).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Bi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Bi.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,o){return Bi.getInterpolation(e,this.a,this.b,this.c,n,r,i,o)}containsPoint(e){return Bi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Bi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,o=this.c;let s,a;Pu.subVectors(i,r),Ru.subVectors(o,r),DS.subVectors(e,r);const l=Pu.dot(DS),c=Ru.dot(DS);if(l<=0&&c<=0)return n.copy(r);US.subVectors(e,i);const u=Pu.dot(US),d=Ru.dot(US);if(u>=0&&d<=u)return n.copy(i);const p=l*d-u*c;if(p<=0&&l>=0&&u<=0)return s=l/(l-u),n.copy(r).addScaledVector(Pu,s);FS.subVectors(e,o);const m=Pu.dot(FS),g=Ru.dot(FS);if(g>=0&&m<=g)return n.copy(o);const v=m*c-l*g;if(v<=0&&c>=0&&g<=0)return a=c/(c-g),n.copy(r).addScaledVector(Ru,a);const x=u*g-m*d;if(x<=0&&d-u>=0&&m-g>=0)return hR.subVectors(o,i),a=(d-u)/(d-u+(m-g)),n.copy(i).addScaledVector(hR,a);const y=1/(x+v+p);return s=v*y,a=p*y,n.copy(r).addScaledVector(Pu,s).addScaledVector(Ru,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const _U={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},qa={h:0,s:0,l:0},o0={h:0,s:0,l:0};function zS(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}let Je=class{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=ao){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Kt.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=Kt.workingColorSpace){return this.r=e,this.g=n,this.b=r,Kt.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=Kt.workingColorSpace){if(e=yT(e,1),n=$n(n,0,1),r=$n(r,0,1),n===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,s=2*r-o;this.r=zS(s,o,e+1/3),this.g=zS(s,o,e),this.b=zS(s,o,e-1/3)}return Kt.toWorkingColorSpace(this,i),this}setStyle(e,n=ao){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const s=i[1],a=i[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,n);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,n);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=i[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,n);if(s===6)return this.setHex(parseInt(o,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=ao){const r=_U[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Rf(e.r),this.g=Rf(e.g),this.b=Rf(e.b),this}copyLinearToSRGB(e){return this.r=TS(e.r),this.g=TS(e.g),this.b=TS(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ao){return Kt.fromWorkingColorSpace(zr.copy(this),e),Math.round($n(zr.r*255,0,255))*65536+Math.round($n(zr.g*255,0,255))*256+Math.round($n(zr.b*255,0,255))}getHexString(e=ao){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Kt.workingColorSpace){Kt.fromWorkingColorSpace(zr.copy(this),n);const r=zr.r,i=zr.g,o=zr.b,s=Math.max(r,i,o),a=Math.min(r,i,o);let l,c;const u=(a+s)/2;if(a===s)l=0,c=0;else{const d=s-a;switch(c=u<=.5?d/(s+a):d/(2-s-a),s){case r:l=(i-o)/d+(i<o?6:0);break;case i:l=(o-r)/d+2;break;case o:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=Kt.workingColorSpace){return Kt.fromWorkingColorSpace(zr.copy(this),n),e.r=zr.r,e.g=zr.g,e.b=zr.b,e}getStyle(e=ao){Kt.fromWorkingColorSpace(zr.copy(this),e);const n=zr.r,r=zr.g,i=zr.b;return e!==ao?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(qa),this.setHSL(qa.h+e,qa.s+n,qa.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(qa),e.getHSL(o0);const r=Yh(qa.h,o0.h,n),i=Yh(qa.s,o0.s,n),o=Yh(qa.l,o0.l,n);return this.setHSL(r,i,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,o=e.elements;return this.r=o[0]*n+o[3]*r+o[6]*i,this.g=o[1]*n+o[4]*r+o[7]*i,this.b=o[2]*n+o[5]*r+o[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const zr=new Je;Je.NAMES=_U;let q9=0;class Ir extends Ko{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:q9++}),this.uuid=Gi(),this.name="",this.type="Material",this.blending=Sc,this.side=Ea,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=lv,this.blendDst=cv,this.blendEquation=il,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Je(0,0,0),this.blendAlpha=0,this.depthFunc=Sp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Wb,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ac,this.stencilZFail=ac,this.stencilZPass=ac,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Sc&&(r.blending=this.blending),this.side!==Ea&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==lv&&(r.blendSrc=this.blendSrc),this.blendDst!==cv&&(r.blendDst=this.blendDst),this.blendEquation!==il&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Sp&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Wb&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ac&&(r.stencilFail=this.stencilFail),this.stencilZFail!==ac&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==ac&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(o){const s=[];for(const a in o){const l=o[a];delete l.metadata,s.push(l)}return s}if(n){const o=i(e.textures),s=i(e.images);o.length>0&&(r.textures=o),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=n[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Ol extends Ir{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Je(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ai,this.combine=am,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const la=K9();function K9(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const o=new Uint32Array(2048),s=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,o[l]=c|u}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:o,exponentTable:s,offsetTable:a}}function gi(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=$n(t,-65504,65504),la.floatView[0]=t;const e=la.uint32View[0],n=e>>23&511;return la.baseTable[n]+((e&8388607)>>la.shiftTable[n])}function Ah(t){const e=t>>10;return la.uint32View[0]=la.mantissaTable[la.offsetTable[e]+(t&1023)]+la.exponentTable[e],la.floatView[0]}const Z9={toHalfFloat:gi,fromHalfFloat:Ah},Jn=new z,s0=new Se;class on{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=Ip,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Si,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return Pf("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)s0.fromBufferAttribute(this,n),s0.applyMatrix3(e),this.setXY(n,s0.x,s0.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Jn.fromBufferAttribute(this,n),Jn.applyMatrix3(e),this.setXYZ(n,Jn.x,Jn.y,Jn.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Jn.fromBufferAttribute(this,n),Jn.applyMatrix4(e),this.setXYZ(n,Jn.x,Jn.y,Jn.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Jn.fromBufferAttribute(this,n),Jn.applyNormalMatrix(e),this.setXYZ(n,Jn.x,Jn.y,Jn.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Jn.fromBufferAttribute(this,n),Jn.transformDirection(e),this.setXYZ(n,Jn.x,Jn.y,Jn.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=ii(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Ot(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=ii(n,this.array)),n}setX(e,n){return this.normalized&&(n=Ot(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=ii(n,this.array)),n}setY(e,n){return this.normalized&&(n=Ot(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=ii(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Ot(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=ii(n,this.array)),n}setW(e,n){return this.normalized&&(n=Ot(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Ot(n,this.array),r=Ot(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Ot(n,this.array),r=Ot(r,this.array),i=Ot(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,o){return e*=this.itemSize,this.normalized&&(n=Ot(n,this.array),r=Ot(r,this.array),i=Ot(i,this.array),o=Ot(o,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Ip&&(e.usage=this.usage),e}}class J9 extends on{constructor(e,n,r){super(new Int8Array(e),n,r)}}class Q9 extends on{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class eG extends on{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class tG extends on{constructor(e,n,r){super(new Int16Array(e),n,r)}}class xT extends on{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class nG extends on{constructor(e,n,r){super(new Int32Array(e),n,r)}}class _T extends on{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class rG extends on{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=Ah(this.array[e*this.itemSize]);return this.normalized&&(n=ii(n,this.array)),n}setX(e,n){return this.normalized&&(n=Ot(n,this.array)),this.array[e*this.itemSize]=gi(n),this}getY(e){let n=Ah(this.array[e*this.itemSize+1]);return this.normalized&&(n=ii(n,this.array)),n}setY(e,n){return this.normalized&&(n=Ot(n,this.array)),this.array[e*this.itemSize+1]=gi(n),this}getZ(e){let n=Ah(this.array[e*this.itemSize+2]);return this.normalized&&(n=ii(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Ot(n,this.array)),this.array[e*this.itemSize+2]=gi(n),this}getW(e){let n=Ah(this.array[e*this.itemSize+3]);return this.normalized&&(n=ii(n,this.array)),n}setW(e,n){return this.normalized&&(n=Ot(n,this.array)),this.array[e*this.itemSize+3]=gi(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Ot(n,this.array),r=Ot(r,this.array)),this.array[e+0]=gi(n),this.array[e+1]=gi(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Ot(n,this.array),r=Ot(r,this.array),i=Ot(i,this.array)),this.array[e+0]=gi(n),this.array[e+1]=gi(r),this.array[e+2]=gi(i),this}setXYZW(e,n,r,i,o){return e*=this.itemSize,this.normalized&&(n=Ot(n,this.array),r=Ot(r,this.array),i=Ot(i,this.array),o=Ot(o,this.array)),this.array[e+0]=gi(n),this.array[e+1]=gi(r),this.array[e+2]=gi(i),this.array[e+3]=gi(o),this}}class ct extends on{constructor(e,n,r){super(new Float32Array(e),n,r)}}let iG=0;const so=new St,BS=new jt,Iu=new z,Di=new vr,rh=new vr,hr=new z;class kt extends Ko{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:iG++}),this.uuid=Gi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(gU(e)?_T:xT)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new It().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return so.makeRotationFromQuaternion(e),this.applyMatrix4(so),this}rotateX(e){return so.makeRotationX(e),this.applyMatrix4(so),this}rotateY(e){return so.makeRotationY(e),this.applyMatrix4(so),this}rotateZ(e){return so.makeRotationZ(e),this.applyMatrix4(so),this}translate(e,n,r){return so.makeTranslation(e,n,r),this.applyMatrix4(so),this}scale(e,n,r){return so.makeScale(e,n,r),this.applyMatrix4(so),this}lookAt(e){return BS.lookAt(e),BS.updateMatrix(),this.applyMatrix4(BS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Iu).negate(),this.translate(Iu.x,Iu.y,Iu.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const o=e[r];n.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new ct(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vr);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new z(-1/0,-1/0,-1/0),new z(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const o=n[r];Di.setFromBufferAttribute(o),this.morphTargetsRelative?(hr.addVectors(this.boundingBox.min,Di.min),this.boundingBox.expandByPoint(hr),hr.addVectors(this.boundingBox.max,Di.max),this.boundingBox.expandByPoint(hr)):(this.boundingBox.expandByPoint(Di.min),this.boundingBox.expandByPoint(Di.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xr);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new z,1/0);return}if(e){const r=this.boundingSphere.center;if(Di.setFromBufferAttribute(e),n)for(let o=0,s=n.length;o<s;o++){const a=n[o];rh.setFromBufferAttribute(a),this.morphTargetsRelative?(hr.addVectors(Di.min,rh.min),Di.expandByPoint(hr),hr.addVectors(Di.max,rh.max),Di.expandByPoint(hr)):(Di.expandByPoint(rh.min),Di.expandByPoint(rh.max))}Di.getCenter(r);let i=0;for(let o=0,s=e.count;o<s;o++)hr.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared(hr));if(n)for(let o=0,s=n.length;o<s;o++){const a=n[o],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)hr.fromBufferAttribute(a,c),l&&(Iu.fromBufferAttribute(e,c),hr.add(Iu)),i=Math.max(i,r.distanceToSquared(hr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,o=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new on(new Float32Array(4*r.count),4));const s=this.getAttribute("tangent"),a=[],l=[];for(let N=0;N<r.count;N++)a[N]=new z,l[N]=new z;const c=new z,u=new z,d=new z,p=new Se,m=new Se,g=new Se,v=new z,x=new z;function y(N,O,E){c.fromBufferAttribute(r,N),u.fromBufferAttribute(r,O),d.fromBufferAttribute(r,E),p.fromBufferAttribute(o,N),m.fromBufferAttribute(o,O),g.fromBufferAttribute(o,E),u.sub(c),d.sub(c),m.sub(p),g.sub(p);const L=1/(m.x*g.y-g.x*m.y);isFinite(L)&&(v.copy(u).multiplyScalar(g.y).addScaledVector(d,-m.y).multiplyScalar(L),x.copy(d).multiplyScalar(m.x).addScaledVector(u,-g.x).multiplyScalar(L),a[N].add(v),a[O].add(v),a[E].add(v),l[N].add(x),l[O].add(x),l[E].add(x))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let N=0,O=_.length;N<O;++N){const E=_[N],L=E.start,H=E.count;for(let W=L,Y=L+H;W<Y;W+=3)y(e.getX(W+0),e.getX(W+1),e.getX(W+2))}const w=new z,M=new z,A=new z,C=new z;function P(N){A.fromBufferAttribute(i,N),C.copy(A);const O=a[N];w.copy(O),w.sub(A.multiplyScalar(A.dot(O))).normalize(),M.crossVectors(C,O);const L=M.dot(l[N])<0?-1:1;s.setXYZW(N,w.x,w.y,w.z,L)}for(let N=0,O=_.length;N<O;++N){const E=_[N],L=E.start,H=E.count;for(let W=L,Y=L+H;W<Y;W+=3)P(e.getX(W+0)),P(e.getX(W+1)),P(e.getX(W+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new on(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let p=0,m=r.count;p<m;p++)r.setXYZ(p,0,0,0);const i=new z,o=new z,s=new z,a=new z,l=new z,c=new z,u=new z,d=new z;if(e)for(let p=0,m=e.count;p<m;p+=3){const g=e.getX(p+0),v=e.getX(p+1),x=e.getX(p+2);i.fromBufferAttribute(n,g),o.fromBufferAttribute(n,v),s.fromBufferAttribute(n,x),u.subVectors(s,o),d.subVectors(i,o),u.cross(d),a.fromBufferAttribute(r,g),l.fromBufferAttribute(r,v),c.fromBufferAttribute(r,x),a.add(u),l.add(u),c.add(u),r.setXYZ(g,a.x,a.y,a.z),r.setXYZ(v,l.x,l.y,l.z),r.setXYZ(x,c.x,c.y,c.z)}else for(let p=0,m=n.count;p<m;p+=3)i.fromBufferAttribute(n,p+0),o.fromBufferAttribute(n,p+1),s.fromBufferAttribute(n,p+2),u.subVectors(s,o),d.subVectors(i,o),u.cross(d),r.setXYZ(p+0,u.x,u.y,u.z),r.setXYZ(p+1,u.x,u.y,u.z),r.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)hr.fromBufferAttribute(e,n),hr.normalize(),e.setXYZ(n,hr.x,hr.y,hr.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,p=new c.constructor(l.length*u);let m=0,g=0;for(let v=0,x=l.length;v<x;v++){a.isInterleavedBufferAttribute?m=l[v]*a.data.stride+a.offset:m=l[v]*u;for(let y=0;y<u;y++)p[g++]=c[m++]}return new on(p,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new kt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);n.setAttribute(a,c)}const o=this.morphAttributes;for(const a in o){const l=[],c=o[a];for(let u=0,d=c.length;u<d;u++){const p=c[u],m=e(p,r);l.push(m)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,l=s.length;a<l;a++){const c=s[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let o=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,p=c.length;d<p;d++){const m=c[d];u.push(m.toJSON(e.data))}u.length>0&&(i[l]=u,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(n))}const o=e.morphAttributes;for(const c in o){const u=[],d=o[c];for(let p=0,m=d.length;p<m;p++)u.push(d[p].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let c=0,u=s.length;c<u;c++){const d=s[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const pR=new St,Xl=new jc,a0=new xr,mR=new z,Ou=new z,Lu=new z,ku=new z,HS=new z,l0=new z,c0=new Se,u0=new Se,f0=new Se,gR=new z,yR=new z,vR=new z,d0=new z,h0=new z;class On extends jt{constructor(e=new kt,n=new Ol){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,o=r.morphAttributes.position,s=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(o&&a){l0.set(0,0,0);for(let l=0,c=o.length;l<c;l++){const u=a[l],d=o[l];u!==0&&(HS.fromBufferAttribute(d,e),s?l0.addScaledVector(HS,u):l0.addScaledVector(HS.sub(n),u))}n.add(l0)}return n}raycast(e,n){const r=this.geometry,i=this.material,o=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),a0.copy(r.boundingSphere),a0.applyMatrix4(o),Xl.copy(e.ray).recast(e.near),!(a0.containsPoint(Xl.origin)===!1&&(Xl.intersectSphere(a0,mR)===null||Xl.origin.distanceToSquared(mR)>(e.far-e.near)**2))&&(pR.copy(o).invert(),Xl.copy(e.ray).applyMatrix4(pR),!(r.boundingBox!==null&&Xl.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,Xl)))}_computeIntersections(e,n,r){let i;const o=this.geometry,s=this.material,a=o.index,l=o.attributes.position,c=o.attributes.uv,u=o.attributes.uv1,d=o.attributes.normal,p=o.groups,m=o.drawRange;if(a!==null)if(Array.isArray(s))for(let g=0,v=p.length;g<v;g++){const x=p[g],y=s[x.materialIndex],_=Math.max(x.start,m.start),w=Math.min(a.count,Math.min(x.start+x.count,m.start+m.count));for(let M=_,A=w;M<A;M+=3){const C=a.getX(M),P=a.getX(M+1),N=a.getX(M+2);i=p0(this,y,e,r,c,u,d,C,P,N),i&&(i.faceIndex=Math.floor(M/3),i.face.materialIndex=x.materialIndex,n.push(i))}}else{const g=Math.max(0,m.start),v=Math.min(a.count,m.start+m.count);for(let x=g,y=v;x<y;x+=3){const _=a.getX(x),w=a.getX(x+1),M=a.getX(x+2);i=p0(this,s,e,r,c,u,d,_,w,M),i&&(i.faceIndex=Math.floor(x/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(s))for(let g=0,v=p.length;g<v;g++){const x=p[g],y=s[x.materialIndex],_=Math.max(x.start,m.start),w=Math.min(l.count,Math.min(x.start+x.count,m.start+m.count));for(let M=_,A=w;M<A;M+=3){const C=M,P=M+1,N=M+2;i=p0(this,y,e,r,c,u,d,C,P,N),i&&(i.faceIndex=Math.floor(M/3),i.face.materialIndex=x.materialIndex,n.push(i))}}else{const g=Math.max(0,m.start),v=Math.min(l.count,m.start+m.count);for(let x=g,y=v;x<y;x+=3){const _=x,w=x+1,M=x+2;i=p0(this,s,e,r,c,u,d,_,w,M),i&&(i.faceIndex=Math.floor(x/3),n.push(i))}}}}function oG(t,e,n,r,i,o,s,a){let l;if(e.side===li?l=r.intersectTriangle(s,o,i,!0,a):l=r.intersectTriangle(i,o,s,e.side===Ea,a),l===null)return null;h0.copy(a),h0.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(h0);return c<n.near||c>n.far?null:{distance:c,point:h0.clone(),object:t}}function p0(t,e,n,r,i,o,s,a,l,c){t.getVertexPosition(a,Ou),t.getVertexPosition(l,Lu),t.getVertexPosition(c,ku);const u=oG(t,e,n,r,Ou,Lu,ku,d0);if(u){i&&(c0.fromBufferAttribute(i,a),u0.fromBufferAttribute(i,l),f0.fromBufferAttribute(i,c),u.uv=Bi.getInterpolation(d0,Ou,Lu,ku,c0,u0,f0,new Se)),o&&(c0.fromBufferAttribute(o,a),u0.fromBufferAttribute(o,l),f0.fromBufferAttribute(o,c),u.uv1=Bi.getInterpolation(d0,Ou,Lu,ku,c0,u0,f0,new Se)),s&&(gR.fromBufferAttribute(s,a),yR.fromBufferAttribute(s,l),vR.fromBufferAttribute(s,c),u.normal=Bi.getInterpolation(d0,Ou,Lu,ku,gR,yR,vR,new z),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:l,c,normal:new z,materialIndex:0};Bi.getNormal(Ou,Lu,ku,d.normal),u.face=d}return u}class Gc extends kt{constructor(e=1,n=1,r=1,i=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:o,depthSegments:s};const a=this;i=Math.floor(i),o=Math.floor(o),s=Math.floor(s);const l=[],c=[],u=[],d=[];let p=0,m=0;g("z","y","x",-1,-1,r,n,e,s,o,0),g("z","y","x",1,-1,r,n,-e,s,o,1),g("x","z","y",1,1,e,r,n,i,s,2),g("x","z","y",1,-1,e,r,-n,i,s,3),g("x","y","z",1,-1,e,n,r,i,o,4),g("x","y","z",-1,-1,e,n,-r,i,o,5),this.setIndex(l),this.setAttribute("position",new ct(c,3)),this.setAttribute("normal",new ct(u,3)),this.setAttribute("uv",new ct(d,2));function g(v,x,y,_,w,M,A,C,P,N,O){const E=M/P,L=A/N,H=M/2,W=A/2,Y=C/2,K=P+1,J=N+1;let Q=0,D=0;const G=new z;for(let X=0;X<J;X++){const ne=X*L-W;for(let pe=0;pe<K;pe++){const De=pe*E-H;G[v]=De*_,G[x]=ne*w,G[y]=Y,c.push(G.x,G.y,G.z),G[v]=0,G[x]=0,G[y]=C>0?1:-1,u.push(G.x,G.y,G.z),d.push(pe/P),d.push(1-X/N),Q+=1}}for(let X=0;X<N;X++)for(let ne=0;ne<P;ne++){const pe=p+ne+K*X,De=p+ne+K*(X+1),ae=p+(ne+1)+K*(X+1),_e=p+(ne+1)+K*X;l.push(pe,De,_e),l.push(De,ae,_e),D+=6}a.addGroup(m,D,O),m+=D,p+=Q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Wf(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function ti(t){const e={};for(let n=0;n<t.length;n++){const r=Wf(t[n]);for(const i in r)e[i]=r[i]}return e}function sG(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function SU(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Kt.workingColorSpace}const Uv={clone:Wf,merge:ti};var aG=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,lG=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class _o extends Ir{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=aG,this.fragmentShader=lG,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Wf(e.uniforms),this.uniformsGroups=sG(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?n.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?n.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?n.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?n.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?n.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?n.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?n.uniforms[i]={type:"m4",value:s.toArray()}:n.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class um extends jt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new St,this.projectionMatrix=new St,this.projectionMatrixInverse=new St,this.coordinateSystem=Ms}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Ka=new z,xR=new Se,_R=new Se;class Tn extends um{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=$f*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(bc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return $f*2*Math.atan(Math.tan(bc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){Ka.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Ka.x,Ka.y).multiplyScalar(-e/Ka.z),Ka.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Ka.x,Ka.y).multiplyScalar(-e/Ka.z)}getViewSize(e,n){return this.getViewBounds(e,xR,_R),n.subVectors(_R,xR)}setViewOffset(e,n,r,i,o,s){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(bc*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,o=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,c=s.fullHeight;o+=s.offsetX*i/l,n-=s.offsetY*r/c,i*=s.width/l,r*=s.height/c}const a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Nu=-90,Du=1;class wU extends jt{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Tn(Nu,Du,e,n);i.layers=this.layers,this.add(i);const o=new Tn(Nu,Du,e,n);o.layers=this.layers,this.add(o);const s=new Tn(Nu,Du,e,n);s.layers=this.layers,this.add(s);const a=new Tn(Nu,Du,e,n);a.layers=this.layers,this.add(a);const l=new Tn(Nu,Du,e,n);l.layers=this.layers,this.add(l);const c=new Tn(Nu,Du,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,o,s,a,l]=n;for(const c of n)this.remove(c);if(e===Ms)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Op)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,s,a,l,c,u]=this.children,d=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const v=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,o),e.setRenderTarget(r,1,i),e.render(n,s),e.setRenderTarget(r,2,i),e.render(n,a),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,c),r.texture.generateMipmaps=v,e.setRenderTarget(r,5,i),e.render(n,u),e.setRenderTarget(d,p,m),e.xr.enabled=g,r.texture.needsPMREMUpdate=!0}}class fm extends Nn{constructor(e,n,r,i,o,s,a,l,c,u){e=e!==void 0?e:[],n=n!==void 0?n:Ma,super(e,n,r,i,o,s,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class bU extends jo{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new fm(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:tr}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Gc(5,5,5),o=new _o({name:"CubemapFromEquirect",uniforms:Wf(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:li,blending:ya});o.uniforms.tEquirect.value=n;const s=new On(i,o),a=n.minFilter;return n.minFilter===Es&&(n.minFilter=tr),new wU(1,10,this).update(e,s),n.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,n,r,i){const o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(n,r,i);e.setRenderTarget(o)}}const VS=new z,cG=new z,uG=new It;let ra=class{constructor(e=new z(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=VS.subVectors(r,n).cross(cG.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(VS),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:n.copy(e.start).addScaledVector(r,o)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||uG.getNormalMatrix(e),i=this.coplanarPoint(VS).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const Yl=new xr,m0=new z;class dm{constructor(e=new ra,n=new ra,r=new ra,i=new ra,o=new ra,s=new ra){this.planes=[e,n,r,i,o,s]}set(e,n,r,i,o,s){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(o),a[5].copy(s),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=Ms){const r=this.planes,i=e.elements,o=i[0],s=i[1],a=i[2],l=i[3],c=i[4],u=i[5],d=i[6],p=i[7],m=i[8],g=i[9],v=i[10],x=i[11],y=i[12],_=i[13],w=i[14],M=i[15];if(r[0].setComponents(l-o,p-c,x-m,M-y).normalize(),r[1].setComponents(l+o,p+c,x+m,M+y).normalize(),r[2].setComponents(l+s,p+u,x+g,M+_).normalize(),r[3].setComponents(l-s,p-u,x-g,M-_).normalize(),r[4].setComponents(l-a,p-d,x-v,M-w).normalize(),n===Ms)r[5].setComponents(l+a,p+d,x+v,M+w).normalize();else if(n===Op)r[5].setComponents(a,d,v,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Yl.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Yl.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Yl)}intersectsSprite(e){return Yl.center.set(0,0,0),Yl.radius=.7071067811865476,Yl.applyMatrix4(e.matrixWorld),this.intersectsSphere(Yl)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(m0.x=i.normal.x>0?e.max.x:e.min.x,m0.y=i.normal.y>0?e.max.y:e.min.y,m0.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(m0)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function EU(){let t=null,e=!1,n=null,r=null;function i(o,s){n(o,s),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){n=o},setContext:function(o){t=o}}}function fG(t){const e=new WeakMap;function n(a,l){const c=a.array,u=a.usage,d=c.byteLength,p=t.createBuffer();t.bindBuffer(l,p),t.bufferData(l,c,u),a.onUploadCallback();let m;if(c instanceof Float32Array)m=t.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?m=t.HALF_FLOAT:m=t.UNSIGNED_SHORT;else if(c instanceof Int16Array)m=t.SHORT;else if(c instanceof Uint32Array)m=t.UNSIGNED_INT;else if(c instanceof Int32Array)m=t.INT;else if(c instanceof Int8Array)m=t.BYTE;else if(c instanceof Uint8Array)m=t.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)m=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:p,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:d}}function r(a,l,c){const u=l.array,d=l._updateRange,p=l.updateRanges;if(t.bindBuffer(c,a),d.count===-1&&p.length===0&&t.bufferSubData(c,0,u),p.length!==0){for(let m=0,g=p.length;m<g;m++){const v=p[m];t.bufferSubData(c,v.start*u.BYTES_PER_ELEMENT,u,v.start,v.count)}l.clearUpdateRanges()}d.count!==-1&&(t.bufferSubData(c,d.offset*u.BYTES_PER_ELEMENT,u,d.offset,d.count),d.count=-1),l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(t.deleteBuffer(l.buffer),e.delete(a))}function s(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,n(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,a,l),c.version=a.version}}return{get:i,remove:o,update:s}}class ud extends kt{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const o=e/2,s=n/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,d=e/a,p=n/l,m=[],g=[],v=[],x=[];for(let y=0;y<u;y++){const _=y*p-s;for(let w=0;w<c;w++){const M=w*d-o;g.push(M,-_,0),v.push(0,0,1),x.push(w/a),x.push(1-y/l)}}for(let y=0;y<l;y++)for(let _=0;_<a;_++){const w=_+c*y,M=_+c*(y+1),A=_+1+c*(y+1),C=_+1+c*y;m.push(w,M,C),m.push(M,A,C)}this.setIndex(m),this.setAttribute("position",new ct(g,3)),this.setAttribute("normal",new ct(v,3)),this.setAttribute("uv",new ct(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ud(e.width,e.height,e.widthSegments,e.heightSegments)}}var dG=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,hG=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,pG=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,mG=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,gG=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,yG=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,vG=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,xG=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,_G=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,SG=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,wG=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,bG=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,EG=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,MG=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,TG=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,CG=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,AG=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,PG=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,RG=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,IG=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,OG=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,LG=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,kG=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,NG=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,DG=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,UG=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,FG=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,zG=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,BG=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,HG=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,VG="gl_FragColor = linearToOutputTexel( gl_FragColor );",$G=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,WG=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,jG=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,GG=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,XG=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,YG=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,qG=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,KG=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,ZG=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,JG=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,QG=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,e7=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,t7=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,n7=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,r7=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,i7=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,o7=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,s7=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,a7=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,l7=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,c7=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,u7=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,f7=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,d7=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,h7=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,p7=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,m7=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,g7=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,y7=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,v7=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,x7=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,_7=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,S7=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,w7=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,b7=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,E7=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,M7=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,T7=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,C7=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,A7=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,P7=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,R7=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,I7=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,O7=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,L7=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,k7=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,N7=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,D7=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,U7=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,F7=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,z7=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,B7=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,H7=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,V7=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,$7=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,W7=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,j7=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,G7=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,X7=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Y7=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,q7=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,K7=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Z7=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,J7=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Q7=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,eX=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,tX=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,nX=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,rX=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,iX=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,oX=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,sX=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,aX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,lX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,cX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,uX=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const fX=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,dX=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,hX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,pX=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,mX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,gX=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,yX=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,vX=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,xX=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,_X=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,SX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,wX=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bX=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,EX=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,MX=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,TX=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CX=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,AX=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PX=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,RX=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,IX=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,OX=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,LX=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kX=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NX=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,DX=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UX=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,FX=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zX=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,BX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,HX=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,VX=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,$X=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,WX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Lt={alphahash_fragment:dG,alphahash_pars_fragment:hG,alphamap_fragment:pG,alphamap_pars_fragment:mG,alphatest_fragment:gG,alphatest_pars_fragment:yG,aomap_fragment:vG,aomap_pars_fragment:xG,batching_pars_vertex:_G,batching_vertex:SG,begin_vertex:wG,beginnormal_vertex:bG,bsdfs:EG,iridescence_fragment:MG,bumpmap_pars_fragment:TG,clipping_planes_fragment:CG,clipping_planes_pars_fragment:AG,clipping_planes_pars_vertex:PG,clipping_planes_vertex:RG,color_fragment:IG,color_pars_fragment:OG,color_pars_vertex:LG,color_vertex:kG,common:NG,cube_uv_reflection_fragment:DG,defaultnormal_vertex:UG,displacementmap_pars_vertex:FG,displacementmap_vertex:zG,emissivemap_fragment:BG,emissivemap_pars_fragment:HG,colorspace_fragment:VG,colorspace_pars_fragment:$G,envmap_fragment:WG,envmap_common_pars_fragment:jG,envmap_pars_fragment:GG,envmap_pars_vertex:XG,envmap_physical_pars_fragment:i7,envmap_vertex:YG,fog_vertex:qG,fog_pars_vertex:KG,fog_fragment:ZG,fog_pars_fragment:JG,gradientmap_pars_fragment:QG,lightmap_pars_fragment:e7,lights_lambert_fragment:t7,lights_lambert_pars_fragment:n7,lights_pars_begin:r7,lights_toon_fragment:o7,lights_toon_pars_fragment:s7,lights_phong_fragment:a7,lights_phong_pars_fragment:l7,lights_physical_fragment:c7,lights_physical_pars_fragment:u7,lights_fragment_begin:f7,lights_fragment_maps:d7,lights_fragment_end:h7,logdepthbuf_fragment:p7,logdepthbuf_pars_fragment:m7,logdepthbuf_pars_vertex:g7,logdepthbuf_vertex:y7,map_fragment:v7,map_pars_fragment:x7,map_particle_fragment:_7,map_particle_pars_fragment:S7,metalnessmap_fragment:w7,metalnessmap_pars_fragment:b7,morphinstance_vertex:E7,morphcolor_vertex:M7,morphnormal_vertex:T7,morphtarget_pars_vertex:C7,morphtarget_vertex:A7,normal_fragment_begin:P7,normal_fragment_maps:R7,normal_pars_fragment:I7,normal_pars_vertex:O7,normal_vertex:L7,normalmap_pars_fragment:k7,clearcoat_normal_fragment_begin:N7,clearcoat_normal_fragment_maps:D7,clearcoat_pars_fragment:U7,iridescence_pars_fragment:F7,opaque_fragment:z7,packing:B7,premultiplied_alpha_fragment:H7,project_vertex:V7,dithering_fragment:$7,dithering_pars_fragment:W7,roughnessmap_fragment:j7,roughnessmap_pars_fragment:G7,shadowmap_pars_fragment:X7,shadowmap_pars_vertex:Y7,shadowmap_vertex:q7,shadowmask_pars_fragment:K7,skinbase_vertex:Z7,skinning_pars_vertex:J7,skinning_vertex:Q7,skinnormal_vertex:eX,specularmap_fragment:tX,specularmap_pars_fragment:nX,tonemapping_fragment:rX,tonemapping_pars_fragment:iX,transmission_fragment:oX,transmission_pars_fragment:sX,uv_pars_fragment:aX,uv_pars_vertex:lX,uv_vertex:cX,worldpos_vertex:uX,background_vert:fX,background_frag:dX,backgroundCube_vert:hX,backgroundCube_frag:pX,cube_vert:mX,cube_frag:gX,depth_vert:yX,depth_frag:vX,distanceRGBA_vert:xX,distanceRGBA_frag:_X,equirect_vert:SX,equirect_frag:wX,linedashed_vert:bX,linedashed_frag:EX,meshbasic_vert:MX,meshbasic_frag:TX,meshlambert_vert:CX,meshlambert_frag:AX,meshmatcap_vert:PX,meshmatcap_frag:RX,meshnormal_vert:IX,meshnormal_frag:OX,meshphong_vert:LX,meshphong_frag:kX,meshphysical_vert:NX,meshphysical_frag:DX,meshtoon_vert:UX,meshtoon_frag:FX,points_vert:zX,points_frag:BX,shadow_vert:HX,shadow_frag:VX,sprite_vert:$X,sprite_frag:WX},Ge={common:{diffuse:{value:new Je(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new It},alphaMap:{value:null},alphaMapTransform:{value:new It},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new It}},envmap:{envMap:{value:null},envMapRotation:{value:new It},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new It}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new It}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new It},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new It},normalScale:{value:new Se(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new It},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new It}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new It}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new It}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Je(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Je(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new It},alphaTest:{value:0},uvTransform:{value:new It}},sprite:{diffuse:{value:new Je(16777215)},opacity:{value:1},center:{value:new Se(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new It},alphaMap:{value:null},alphaMapTransform:{value:new It},alphaTest:{value:0}}},Do={basic:{uniforms:ti([Ge.common,Ge.specularmap,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.fog]),vertexShader:Lt.meshbasic_vert,fragmentShader:Lt.meshbasic_frag},lambert:{uniforms:ti([Ge.common,Ge.specularmap,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.fog,Ge.lights,{emissive:{value:new Je(0)}}]),vertexShader:Lt.meshlambert_vert,fragmentShader:Lt.meshlambert_frag},phong:{uniforms:ti([Ge.common,Ge.specularmap,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.fog,Ge.lights,{emissive:{value:new Je(0)},specular:{value:new Je(1118481)},shininess:{value:30}}]),vertexShader:Lt.meshphong_vert,fragmentShader:Lt.meshphong_frag},standard:{uniforms:ti([Ge.common,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.roughnessmap,Ge.metalnessmap,Ge.fog,Ge.lights,{emissive:{value:new Je(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Lt.meshphysical_vert,fragmentShader:Lt.meshphysical_frag},toon:{uniforms:ti([Ge.common,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.gradientmap,Ge.fog,Ge.lights,{emissive:{value:new Je(0)}}]),vertexShader:Lt.meshtoon_vert,fragmentShader:Lt.meshtoon_frag},matcap:{uniforms:ti([Ge.common,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.fog,{matcap:{value:null}}]),vertexShader:Lt.meshmatcap_vert,fragmentShader:Lt.meshmatcap_frag},points:{uniforms:ti([Ge.points,Ge.fog]),vertexShader:Lt.points_vert,fragmentShader:Lt.points_frag},dashed:{uniforms:ti([Ge.common,Ge.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Lt.linedashed_vert,fragmentShader:Lt.linedashed_frag},depth:{uniforms:ti([Ge.common,Ge.displacementmap]),vertexShader:Lt.depth_vert,fragmentShader:Lt.depth_frag},normal:{uniforms:ti([Ge.common,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,{opacity:{value:1}}]),vertexShader:Lt.meshnormal_vert,fragmentShader:Lt.meshnormal_frag},sprite:{uniforms:ti([Ge.sprite,Ge.fog]),vertexShader:Lt.sprite_vert,fragmentShader:Lt.sprite_frag},background:{uniforms:{uvTransform:{value:new It},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Lt.background_vert,fragmentShader:Lt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new It}},vertexShader:Lt.backgroundCube_vert,fragmentShader:Lt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Lt.cube_vert,fragmentShader:Lt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Lt.equirect_vert,fragmentShader:Lt.equirect_frag},distanceRGBA:{uniforms:ti([Ge.common,Ge.displacementmap,{referencePosition:{value:new z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Lt.distanceRGBA_vert,fragmentShader:Lt.distanceRGBA_frag},shadow:{uniforms:ti([Ge.lights,Ge.fog,{color:{value:new Je(0)},opacity:{value:1}}]),vertexShader:Lt.shadow_vert,fragmentShader:Lt.shadow_frag}};Do.physical={uniforms:ti([Do.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new It},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new It},clearcoatNormalScale:{value:new Se(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new It},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new It},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new It},sheen:{value:0},sheenColor:{value:new Je(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new It},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new It},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new It},transmissionSamplerSize:{value:new Se},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new It},attenuationDistance:{value:0},attenuationColor:{value:new Je(0)},specularColor:{value:new Je(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new It},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new It},anisotropyVector:{value:new Se},anisotropyMap:{value:null},anisotropyMapTransform:{value:new It}}]),vertexShader:Lt.meshphysical_vert,fragmentShader:Lt.meshphysical_frag};const g0={r:0,b:0,g:0},ql=new Ai,jX=new St;function GX(t,e,n,r,i,o,s){const a=new Je(0);let l=o===!0?0:1,c,u,d=null,p=0,m=null;function g(_){let w=_.isScene===!0?_.background:null;return w&&w.isTexture&&(w=(_.backgroundBlurriness>0?n:e).get(w)),w}function v(_){let w=!1;const M=g(_);M===null?y(a,l):M&&M.isColor&&(y(M,1),w=!0);const A=t.xr.getEnvironmentBlendMode();A==="additive"?r.buffers.color.setClear(0,0,0,1,s):A==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,s),(t.autoClear||w)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function x(_,w){const M=g(w);M&&(M.isCubeTexture||M.mapping===ld)?(u===void 0&&(u=new On(new Gc(1,1,1),new _o({name:"BackgroundCubeMaterial",uniforms:Wf(Do.backgroundCube.uniforms),vertexShader:Do.backgroundCube.vertexShader,fragmentShader:Do.backgroundCube.fragmentShader,side:li,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(A,C,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),ql.copy(w.backgroundRotation),ql.x*=-1,ql.y*=-1,ql.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(ql.y*=-1,ql.z*=-1),u.material.uniforms.envMap.value=M,u.material.uniforms.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=w.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(jX.makeRotationFromEuler(ql)),u.material.toneMapped=Kt.getTransfer(M.colorSpace)!==hn,(d!==M||p!==M.version||m!==t.toneMapping)&&(u.material.needsUpdate=!0,d=M,p=M.version,m=t.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null)):M&&M.isTexture&&(c===void 0&&(c=new On(new ud(2,2),new _o({name:"BackgroundMaterial",uniforms:Wf(Do.background.uniforms),vertexShader:Do.background.vertexShader,fragmentShader:Do.background.fragmentShader,side:Ea,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=M,c.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,c.material.toneMapped=Kt.getTransfer(M.colorSpace)!==hn,M.matrixAutoUpdate===!0&&M.updateMatrix(),c.material.uniforms.uvTransform.value.copy(M.matrix),(d!==M||p!==M.version||m!==t.toneMapping)&&(c.material.needsUpdate=!0,d=M,p=M.version,m=t.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}function y(_,w){_.getRGB(g0,SU(t)),r.buffers.color.setClear(g0.r,g0.g,g0.b,w,s)}return{getClearColor:function(){return a},setClearColor:function(_,w=1){a.set(_),l=w,y(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,y(a,l)},render:v,addToRenderList:x}}function XX(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},i=p(null);let o=i,s=!1;function a(E,L,H,W,Y){let K=!1;const J=d(W,H,L);o!==J&&(o=J,c(o.object)),K=m(E,W,H,Y),K&&g(E,W,H,Y),Y!==null&&e.update(Y,t.ELEMENT_ARRAY_BUFFER),(K||s)&&(s=!1,M(E,L,H,W),Y!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(Y).buffer))}function l(){return t.createVertexArray()}function c(E){return t.bindVertexArray(E)}function u(E){return t.deleteVertexArray(E)}function d(E,L,H){const W=H.wireframe===!0;let Y=r[E.id];Y===void 0&&(Y={},r[E.id]=Y);let K=Y[L.id];K===void 0&&(K={},Y[L.id]=K);let J=K[W];return J===void 0&&(J=p(l()),K[W]=J),J}function p(E){const L=[],H=[],W=[];for(let Y=0;Y<n;Y++)L[Y]=0,H[Y]=0,W[Y]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:L,enabledAttributes:H,attributeDivisors:W,object:E,attributes:{},index:null}}function m(E,L,H,W){const Y=o.attributes,K=L.attributes;let J=0;const Q=H.getAttributes();for(const D in Q)if(Q[D].location>=0){const X=Y[D];let ne=K[D];if(ne===void 0&&(D==="instanceMatrix"&&E.instanceMatrix&&(ne=E.instanceMatrix),D==="instanceColor"&&E.instanceColor&&(ne=E.instanceColor)),X===void 0||X.attribute!==ne||ne&&X.data!==ne.data)return!0;J++}return o.attributesNum!==J||o.index!==W}function g(E,L,H,W){const Y={},K=L.attributes;let J=0;const Q=H.getAttributes();for(const D in Q)if(Q[D].location>=0){let X=K[D];X===void 0&&(D==="instanceMatrix"&&E.instanceMatrix&&(X=E.instanceMatrix),D==="instanceColor"&&E.instanceColor&&(X=E.instanceColor));const ne={};ne.attribute=X,X&&X.data&&(ne.data=X.data),Y[D]=ne,J++}o.attributes=Y,o.attributesNum=J,o.index=W}function v(){const E=o.newAttributes;for(let L=0,H=E.length;L<H;L++)E[L]=0}function x(E){y(E,0)}function y(E,L){const H=o.newAttributes,W=o.enabledAttributes,Y=o.attributeDivisors;H[E]=1,W[E]===0&&(t.enableVertexAttribArray(E),W[E]=1),Y[E]!==L&&(t.vertexAttribDivisor(E,L),Y[E]=L)}function _(){const E=o.newAttributes,L=o.enabledAttributes;for(let H=0,W=L.length;H<W;H++)L[H]!==E[H]&&(t.disableVertexAttribArray(H),L[H]=0)}function w(E,L,H,W,Y,K,J){J===!0?t.vertexAttribIPointer(E,L,H,Y,K):t.vertexAttribPointer(E,L,H,W,Y,K)}function M(E,L,H,W){v();const Y=W.attributes,K=H.getAttributes(),J=L.defaultAttributeValues;for(const Q in K){const D=K[Q];if(D.location>=0){let G=Y[Q];if(G===void 0&&(Q==="instanceMatrix"&&E.instanceMatrix&&(G=E.instanceMatrix),Q==="instanceColor"&&E.instanceColor&&(G=E.instanceColor)),G!==void 0){const X=G.normalized,ne=G.itemSize,pe=e.get(G);if(pe===void 0)continue;const De=pe.buffer,ae=pe.type,_e=pe.bytesPerElement,Re=ae===t.INT||ae===t.UNSIGNED_INT||G.gpuType===Kx;if(G.isInterleavedBufferAttribute){const Ae=G.data,qe=Ae.stride,ut=G.offset;if(Ae.isInstancedInterleavedBuffer){for(let Ye=0;Ye<D.locationSize;Ye++)y(D.location+Ye,Ae.meshPerAttribute);E.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=Ae.meshPerAttribute*Ae.count)}else for(let Ye=0;Ye<D.locationSize;Ye++)x(D.location+Ye);t.bindBuffer(t.ARRAY_BUFFER,De);for(let Ye=0;Ye<D.locationSize;Ye++)w(D.location+Ye,ne/D.locationSize,ae,X,qe*_e,(ut+ne/D.locationSize*Ye)*_e,Re)}else{if(G.isInstancedBufferAttribute){for(let Ae=0;Ae<D.locationSize;Ae++)y(D.location+Ae,G.meshPerAttribute);E.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=G.meshPerAttribute*G.count)}else for(let Ae=0;Ae<D.locationSize;Ae++)x(D.location+Ae);t.bindBuffer(t.ARRAY_BUFFER,De);for(let Ae=0;Ae<D.locationSize;Ae++)w(D.location+Ae,ne/D.locationSize,ae,X,ne*_e,ne/D.locationSize*Ae*_e,Re)}}else if(J!==void 0){const X=J[Q];if(X!==void 0)switch(X.length){case 2:t.vertexAttrib2fv(D.location,X);break;case 3:t.vertexAttrib3fv(D.location,X);break;case 4:t.vertexAttrib4fv(D.location,X);break;default:t.vertexAttrib1fv(D.location,X)}}}}_()}function A(){N();for(const E in r){const L=r[E];for(const H in L){const W=L[H];for(const Y in W)u(W[Y].object),delete W[Y];delete L[H]}delete r[E]}}function C(E){if(r[E.id]===void 0)return;const L=r[E.id];for(const H in L){const W=L[H];for(const Y in W)u(W[Y].object),delete W[Y];delete L[H]}delete r[E.id]}function P(E){for(const L in r){const H=r[L];if(H[E.id]===void 0)continue;const W=H[E.id];for(const Y in W)u(W[Y].object),delete W[Y];delete H[E.id]}}function N(){O(),s=!0,o!==i&&(o=i,c(o.object))}function O(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:N,resetDefaultState:O,dispose:A,releaseStatesOfGeometry:C,releaseStatesOfProgram:P,initAttributes:v,enableAttribute:x,disableUnusedAttributes:_}}function YX(t,e,n){let r;function i(c){r=c}function o(c,u){t.drawArrays(r,c,u),n.update(u,r,1)}function s(c,u,d){d!==0&&(t.drawArraysInstanced(r,c,u,d),n.update(u,r,d))}function a(c,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,c,0,u,0,d);let m=0;for(let g=0;g<d;g++)m+=u[g];n.update(m,r,1)}function l(c,u,d,p){if(d===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let g=0;g<c.length;g++)s(c[g],u[g],p[g]);else{m.multiDrawArraysInstancedWEBGL(r,c,0,u,0,p,0,d);let g=0;for(let v=0;v<d;v++)g+=u[v];for(let v=0;v<p.length;v++)n.update(g,r,p[v])}}this.setMode=i,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function qX(t,e,n,r){let i;function o(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const C=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(C){return!(C!==jr&&r.convert(C)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(C){const P=C===cd&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(C!==Wo&&r.convert(C)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&C!==Si&&!P)}function l(C){if(C==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";C="mediump"}return C==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=n.precision!==void 0?n.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const d=n.logarithmicDepthBuffer===!0,p=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),m=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),g=t.getParameter(t.MAX_TEXTURE_SIZE),v=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),x=t.getParameter(t.MAX_VERTEX_ATTRIBS),y=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),_=t.getParameter(t.MAX_VARYING_VECTORS),w=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),M=m>0,A=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:d,maxTextures:p,maxVertexTextures:m,maxTextureSize:g,maxCubemapSize:v,maxAttributes:x,maxVertexUniforms:y,maxVaryings:_,maxFragmentUniforms:w,vertexTextures:M,maxSamples:A}}function KX(t){const e=this;let n=null,r=0,i=!1,o=!1;const s=new ra,a=new It,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const m=d.length!==0||p||r!==0||i;return i=p,r=d.length,m},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(d,p){n=u(d,p,0)},this.setState=function(d,p,m){const g=d.clippingPlanes,v=d.clipIntersection,x=d.clipShadows,y=t.get(d);if(!i||g===null||g.length===0||o&&!x)o?u(null):c();else{const _=o?0:r,w=_*4;let M=y.clippingState||null;l.value=M,M=u(g,p,w,m);for(let A=0;A!==w;++A)M[A]=n[A];y.clippingState=M,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=_}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,p,m,g){const v=d!==null?d.length:0;let x=null;if(v!==0){if(x=l.value,g!==!0||x===null){const y=m+v*4,_=p.matrixWorldInverse;a.getNormalMatrix(_),(x===null||x.length<y)&&(x=new Float32Array(y));for(let w=0,M=m;w!==v;++w,M+=4)s.copy(d[w]).applyMatrix4(_,a),s.normal.toArray(x,M),x[M+3]=s.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,x}}function ZX(t){let e=new WeakMap;function n(s,a){return a===wp?s.mapping=Ma:a===bp&&(s.mapping=Sl),s}function r(s){if(s&&s.isTexture){const a=s.mapping;if(a===wp||a===bp)if(e.has(s)){const l=e.get(s).texture;return n(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const c=new bU(l.height);return c.fromEquirectangularTexture(t,s),e.set(s,c),s.addEventListener("dispose",i),n(c.texture,s.mapping)}else return null}}return s}function i(s){const a=s.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}class Fo extends um{constructor(e=-1,n=1,r=1,i=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-e,s=r+e,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=c*this.view.offsetX,s=o+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const mf=4,SR=[.125,.215,.35,.446,.526,.582],cc=20,$S=new Fo,wR=new Je;let WS=null,jS=0,GS=0,XS=!1;const lc=(1+Math.sqrt(5))/2,Uu=1/lc,bR=[new z(-lc,Uu,0),new z(lc,Uu,0),new z(-Uu,0,lc),new z(Uu,0,lc),new z(0,lc,-Uu),new z(0,lc,Uu),new z(-1,1,-1),new z(1,1,-1),new z(-1,1,1),new z(1,1,1)];class Gb{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){WS=this._renderer.getRenderTarget(),jS=this._renderer.getActiveCubeFace(),GS=this._renderer.getActiveMipmapLevel(),XS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,r,i,o),n>0&&this._blur(o,0,0,n),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=TR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=MR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(WS,jS,GS),this._renderer.xr.enabled=XS,e.scissorTest=!1,y0(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Ma||e.mapping===Sl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),WS=this._renderer.getRenderTarget(),jS=this._renderer.getActiveCubeFace(),GS=this._renderer.getActiveMipmapLevel(),XS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:tr,minFilter:tr,generateMipmaps:!1,type:cd,format:jr,colorSpace:Oa,depthBuffer:!1},i=ER(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=ER(e,n,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=JX(o)),this._blurMaterial=QX(o,e,n)}return i}_compileMaterial(e){const n=new On(this._lodPlanes[0],e);this._renderer.compile(n,$S)}_sceneToCubeUV(e,n,r,i){const a=new Tn(90,1,n,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,p=u.toneMapping;u.getClearColor(wR),u.toneMapping=Os,u.autoClear=!1;const m=new Ol({name:"PMREM.Background",side:li,depthWrite:!1,depthTest:!1}),g=new On(new Gc,m);let v=!1;const x=e.background;x?x.isColor&&(m.color.copy(x),e.background=null,v=!0):(m.color.copy(wR),v=!0);for(let y=0;y<6;y++){const _=y%3;_===0?(a.up.set(0,l[y],0),a.lookAt(c[y],0,0)):_===1?(a.up.set(0,0,l[y]),a.lookAt(0,c[y],0)):(a.up.set(0,l[y],0),a.lookAt(0,0,c[y]));const w=this._cubeSize;y0(i,_*w,y>2?w:0,w,w),u.setRenderTarget(i),v&&u.render(g,a),u.render(e,a)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=p,u.autoClear=d,e.background=x}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===Ma||e.mapping===Sl;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=TR()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=MR());const o=i?this._cubemapMaterial:this._equirectMaterial,s=new On(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=e;const l=this._cubeSize;y0(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(s,$S)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const i=this._lodPlanes.length;for(let o=1;o<i;o++){const s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),a=bR[(i-o-1)%bR.length];this._blur(e,o-1,o,s,a)}n.autoClear=r}_blur(e,n,r,i,o){const s=this._pingPongRenderTarget;this._halfBlur(e,s,n,r,i,"latitudinal",o),this._halfBlur(s,e,r,r,i,"longitudinal",o)}_halfBlur(e,n,r,i,o,s,a){const l=this._renderer,c=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new On(this._lodPlanes[i],c),p=c.uniforms,m=this._sizeLods[r]-1,g=isFinite(o)?Math.PI/(2*m):2*Math.PI/(2*cc-1),v=o/g,x=isFinite(o)?1+Math.floor(u*v):cc;x>cc&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${cc}`);const y=[];let _=0;for(let P=0;P<cc;++P){const N=P/v,O=Math.exp(-N*N/2);y.push(O),P===0?_+=O:P<x&&(_+=2*O)}for(let P=0;P<y.length;P++)y[P]=y[P]/_;p.envMap.value=e.texture,p.samples.value=x,p.weights.value=y,p.latitudinal.value=s==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:w}=this;p.dTheta.value=g,p.mipInt.value=w-r;const M=this._sizeLods[i],A=3*M*(i>w-mf?i-w+mf:0),C=4*(this._cubeSize-M);y0(n,A,C,3*M,2*M),l.setRenderTarget(n),l.render(d,$S)}}function JX(t){const e=[],n=[],r=[];let i=t;const o=t-mf+1+SR.length;for(let s=0;s<o;s++){const a=Math.pow(2,i);n.push(a);let l=1/a;s>t-mf?l=SR[s-t+mf-1]:s===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,d=1+c,p=[u,u,d,u,d,d,u,u,d,d,u,d],m=6,g=6,v=3,x=2,y=1,_=new Float32Array(v*g*m),w=new Float32Array(x*g*m),M=new Float32Array(y*g*m);for(let C=0;C<m;C++){const P=C%3*2/3-1,N=C>2?0:-1,O=[P,N,0,P+2/3,N,0,P+2/3,N+1,0,P,N,0,P+2/3,N+1,0,P,N+1,0];_.set(O,v*g*C),w.set(p,x*g*C);const E=[C,C,C,C,C,C];M.set(E,y*g*C)}const A=new kt;A.setAttribute("position",new on(_,v)),A.setAttribute("uv",new on(w,x)),A.setAttribute("faceIndex",new on(M,y)),e.push(A),i>mf&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function ER(t,e,n){const r=new jo(t,e,n);return r.texture.mapping=ld,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function y0(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function QX(t,e,n){const r=new Float32Array(cc),i=new z(0,1,0);return new _o({name:"SphericalGaussianBlur",defines:{n:cc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:ST(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ya,depthTest:!1,depthWrite:!1})}function MR(){return new _o({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ST(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ya,depthTest:!1,depthWrite:!1})}function TR(){return new _o({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ST(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ya,depthTest:!1,depthWrite:!1})}function ST(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function eY(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===wp||l===bp,u=l===Ma||l===Sl;if(c||u){let d=e.get(a);const p=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return n===null&&(n=new Gb(t)),d=c?n.fromEquirectangular(a,d):n.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const m=a.image;return c&&m&&m.height>0||u&&m&&i(m)?(n===null&&(n=new Gb(t)),d=c?n.fromEquirectangular(a):n.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",o),d.texture):null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function o(a){const l=a.target;l.removeEventListener("dispose",o);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:s}}function tY(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const i=n(r);return i===null&&Pf("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function nY(t,e,n,r){const i={},o=new WeakMap;function s(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const g in p.attributes)e.remove(p.attributes[g]);for(const g in p.morphAttributes){const v=p.morphAttributes[g];for(let x=0,y=v.length;x<y;x++)e.remove(v[x])}p.removeEventListener("dispose",s),delete i[p.id];const m=o.get(p);m&&(e.remove(m),o.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,n.memory.geometries--}function a(d,p){return i[p.id]===!0||(p.addEventListener("dispose",s),i[p.id]=!0,n.memory.geometries++),p}function l(d){const p=d.attributes;for(const g in p)e.update(p[g],t.ARRAY_BUFFER);const m=d.morphAttributes;for(const g in m){const v=m[g];for(let x=0,y=v.length;x<y;x++)e.update(v[x],t.ARRAY_BUFFER)}}function c(d){const p=[],m=d.index,g=d.attributes.position;let v=0;if(m!==null){const _=m.array;v=m.version;for(let w=0,M=_.length;w<M;w+=3){const A=_[w+0],C=_[w+1],P=_[w+2];p.push(A,C,C,P,P,A)}}else if(g!==void 0){const _=g.array;v=g.version;for(let w=0,M=_.length/3-1;w<M;w+=3){const A=w+0,C=w+1,P=w+2;p.push(A,C,C,P,P,A)}}else return;const x=new(gU(p)?_T:xT)(p,1);x.version=v;const y=o.get(d);y&&e.remove(y),o.set(d,x)}function u(d){const p=o.get(d);if(p){const m=d.index;m!==null&&p.version<m.version&&c(d)}else c(d);return o.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function rY(t,e,n){let r;function i(p){r=p}let o,s;function a(p){o=p.type,s=p.bytesPerElement}function l(p,m){t.drawElements(r,m,o,p*s),n.update(m,r,1)}function c(p,m,g){g!==0&&(t.drawElementsInstanced(r,m,o,p*s,g),n.update(m,r,g))}function u(p,m,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,m,0,o,p,0,g);let x=0;for(let y=0;y<g;y++)x+=m[y];n.update(x,r,1)}function d(p,m,g,v){if(g===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let y=0;y<p.length;y++)c(p[y]/s,m[y],v[y]);else{x.multiDrawElementsInstancedWEBGL(r,m,0,o,p,0,v,0,g);let y=0;for(let _=0;_<g;_++)y+=m[_];for(let _=0;_<v.length;_++)n.update(y,r,v[_])}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function iY(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,s,a){switch(n.calls++,s){case t.TRIANGLES:n.triangles+=a*(o/3);break;case t.LINES:n.lines+=a*(o/2);break;case t.LINE_STRIP:n.lines+=a*(o-1);break;case t.LINE_LOOP:n.lines+=a*o;break;case t.POINTS:n.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function oY(t,e,n){const r=new WeakMap,i=new Bt;function o(s,a,l){const c=s.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=u!==void 0?u.length:0;let p=r.get(a);if(p===void 0||p.count!==d){let E=function(){N.dispose(),r.delete(a),a.removeEventListener("dispose",E)};var m=E;p!==void 0&&p.texture.dispose();const g=a.morphAttributes.position!==void 0,v=a.morphAttributes.normal!==void 0,x=a.morphAttributes.color!==void 0,y=a.morphAttributes.position||[],_=a.morphAttributes.normal||[],w=a.morphAttributes.color||[];let M=0;g===!0&&(M=1),v===!0&&(M=2),x===!0&&(M=3);let A=a.attributes.position.count*M,C=1;A>e.maxTextureSize&&(C=Math.ceil(A/e.maxTextureSize),A=e.maxTextureSize);const P=new Float32Array(A*C*4*d),N=new i1(P,A,C,d);N.type=Si,N.needsUpdate=!0;const O=M*4;for(let L=0;L<d;L++){const H=y[L],W=_[L],Y=w[L],K=A*C*4*L;for(let J=0;J<H.count;J++){const Q=J*O;g===!0&&(i.fromBufferAttribute(H,J),P[K+Q+0]=i.x,P[K+Q+1]=i.y,P[K+Q+2]=i.z,P[K+Q+3]=0),v===!0&&(i.fromBufferAttribute(W,J),P[K+Q+4]=i.x,P[K+Q+5]=i.y,P[K+Q+6]=i.z,P[K+Q+7]=0),x===!0&&(i.fromBufferAttribute(Y,J),P[K+Q+8]=i.x,P[K+Q+9]=i.y,P[K+Q+10]=i.z,P[K+Q+11]=Y.itemSize===4?i.w:1)}}p={count:d,texture:N,size:new Se(A,C)},r.set(a,p),a.addEventListener("dispose",E)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",s.morphTexture,n);else{let g=0;for(let x=0;x<c.length;x++)g+=c[x];const v=a.morphTargetsRelative?1:1-g;l.getUniforms().setValue(t,"morphTargetBaseInfluence",v),l.getUniforms().setValue(t,"morphTargetInfluences",c)}l.getUniforms().setValue(t,"morphTargetsTexture",p.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",p.size)}return{update:o}}function sY(t,e,n,r){let i=new WeakMap;function o(l){const c=r.render.frame,u=l.geometry,d=e.get(l,u);if(i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;i.get(p)!==c&&(p.update(),i.set(p,c))}return d}function s(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:o,dispose:s}}class wT extends Nn{constructor(e,n,r,i,o,s,a,l,c,u=wc){if(u!==wc&&u!==Uc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===wc&&(r=Ta),r===void 0&&u===Uc&&(r=Dc),super(null,i,o,s,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:gr,this.minFilter=l!==void 0?l:gr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const MU=new Nn,CR=new wT(1,1),TU=new i1,CU=new vT,AU=new fm,AR=[],PR=[],RR=new Float32Array(16),IR=new Float32Array(9),OR=new Float32Array(4);function fd(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=AR[i];if(o===void 0&&(o=new Float32Array(i),AR[i]=o),e!==0){r.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=n,t[s].toArray(o,a)}return o}function or(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function sr(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function o1(t,e){let n=PR[e];n===void 0&&(n=new Int32Array(e),PR[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function aY(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function lY(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(or(n,e))return;t.uniform2fv(this.addr,e),sr(n,e)}}function cY(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(or(n,e))return;t.uniform3fv(this.addr,e),sr(n,e)}}function uY(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(or(n,e))return;t.uniform4fv(this.addr,e),sr(n,e)}}function fY(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(or(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),sr(n,e)}else{if(or(n,r))return;OR.set(r),t.uniformMatrix2fv(this.addr,!1,OR),sr(n,r)}}function dY(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(or(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),sr(n,e)}else{if(or(n,r))return;IR.set(r),t.uniformMatrix3fv(this.addr,!1,IR),sr(n,r)}}function hY(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(or(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),sr(n,e)}else{if(or(n,r))return;RR.set(r),t.uniformMatrix4fv(this.addr,!1,RR),sr(n,r)}}function pY(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function mY(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(or(n,e))return;t.uniform2iv(this.addr,e),sr(n,e)}}function gY(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(or(n,e))return;t.uniform3iv(this.addr,e),sr(n,e)}}function yY(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(or(n,e))return;t.uniform4iv(this.addr,e),sr(n,e)}}function vY(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function xY(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(or(n,e))return;t.uniform2uiv(this.addr,e),sr(n,e)}}function _Y(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(or(n,e))return;t.uniform3uiv(this.addr,e),sr(n,e)}}function SY(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(or(n,e))return;t.uniform4uiv(this.addr,e),sr(n,e)}}function wY(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);let o;this.type===t.SAMPLER_2D_SHADOW?(CR.compareFunction=gT,o=CR):o=MU,n.setTexture2D(e||o,i)}function bY(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||CU,i)}function EY(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||AU,i)}function MY(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||TU,i)}function TY(t){switch(t){case 5126:return aY;case 35664:return lY;case 35665:return cY;case 35666:return uY;case 35674:return fY;case 35675:return dY;case 35676:return hY;case 5124:case 35670:return pY;case 35667:case 35671:return mY;case 35668:case 35672:return gY;case 35669:case 35673:return yY;case 5125:return vY;case 36294:return xY;case 36295:return _Y;case 36296:return SY;case 35678:case 36198:case 36298:case 36306:case 35682:return wY;case 35679:case 36299:case 36307:return bY;case 35680:case 36300:case 36308:case 36293:return EY;case 36289:case 36303:case 36311:case 36292:return MY}}function CY(t,e){t.uniform1fv(this.addr,e)}function AY(t,e){const n=fd(e,this.size,2);t.uniform2fv(this.addr,n)}function PY(t,e){const n=fd(e,this.size,3);t.uniform3fv(this.addr,n)}function RY(t,e){const n=fd(e,this.size,4);t.uniform4fv(this.addr,n)}function IY(t,e){const n=fd(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function OY(t,e){const n=fd(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function LY(t,e){const n=fd(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function kY(t,e){t.uniform1iv(this.addr,e)}function NY(t,e){t.uniform2iv(this.addr,e)}function DY(t,e){t.uniform3iv(this.addr,e)}function UY(t,e){t.uniform4iv(this.addr,e)}function FY(t,e){t.uniform1uiv(this.addr,e)}function zY(t,e){t.uniform2uiv(this.addr,e)}function BY(t,e){t.uniform3uiv(this.addr,e)}function HY(t,e){t.uniform4uiv(this.addr,e)}function VY(t,e,n){const r=this.cache,i=e.length,o=o1(n,i);or(r,o)||(t.uniform1iv(this.addr,o),sr(r,o));for(let s=0;s!==i;++s)n.setTexture2D(e[s]||MU,o[s])}function $Y(t,e,n){const r=this.cache,i=e.length,o=o1(n,i);or(r,o)||(t.uniform1iv(this.addr,o),sr(r,o));for(let s=0;s!==i;++s)n.setTexture3D(e[s]||CU,o[s])}function WY(t,e,n){const r=this.cache,i=e.length,o=o1(n,i);or(r,o)||(t.uniform1iv(this.addr,o),sr(r,o));for(let s=0;s!==i;++s)n.setTextureCube(e[s]||AU,o[s])}function jY(t,e,n){const r=this.cache,i=e.length,o=o1(n,i);or(r,o)||(t.uniform1iv(this.addr,o),sr(r,o));for(let s=0;s!==i;++s)n.setTexture2DArray(e[s]||TU,o[s])}function GY(t){switch(t){case 5126:return CY;case 35664:return AY;case 35665:return PY;case 35666:return RY;case 35674:return IY;case 35675:return OY;case 35676:return LY;case 5124:case 35670:return kY;case 35667:case 35671:return NY;case 35668:case 35672:return DY;case 35669:case 35673:return UY;case 5125:return FY;case 36294:return zY;case 36295:return BY;case 36296:return HY;case 35678:case 36198:case 36298:case 36306:case 35682:return VY;case 35679:case 36299:case 36307:return $Y;case 35680:case 36300:case 36308:case 36293:return WY;case 36289:case 36303:case 36311:case 36292:return jY}}class XY{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=TY(n.type)}}class YY{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=GY(n.type)}}class qY{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let o=0,s=i.length;o!==s;++o){const a=i[o];a.setValue(e,n[a.id],r)}}}const YS=/(\w+)(\])?(\[|\.)?/g;function LR(t,e){t.seq.push(e),t.map[e.id]=e}function KY(t,e,n){const r=t.name,i=r.length;for(YS.lastIndex=0;;){const o=YS.exec(r),s=YS.lastIndex;let a=o[1];const l=o[2]==="]",c=o[3];if(l&&(a=a|0),c===void 0||c==="["&&s+2===i){LR(n,c===void 0?new XY(a,t,e):new YY(a,t,e));break}else{let d=n.map[a];d===void 0&&(d=new qY(a),LR(n,d)),n=d}}}class Ty{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const o=e.getActiveUniform(n,i),s=e.getUniformLocation(n,o.name);KY(o,s,this)}}setValue(e,n,r,i){const o=this.map[n];o!==void 0&&o.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let o=0,s=n.length;o!==s;++o){const a=n[o],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,o=e.length;i!==o;++i){const s=e[i];s.id in n&&r.push(s)}return r}}function kR(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const ZY=37297;let JY=0;function QY(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let s=i;s<o;s++){const a=s+1;r.push(`${a===e?">":" "} ${a}: ${n[s]}`)}return r.join(`
`)}function eq(t){const e=Kt.getPrimaries(Kt.workingColorSpace),n=Kt.getPrimaries(t);let r;switch(e===n?r="":e===Rp&&n===Pp?r="LinearDisplayP3ToLinearSRGB":e===Pp&&n===Rp&&(r="LinearSRGBToLinearDisplayP3"),t){case Oa:case cm:return[r,"LinearTransferOETF"];case ao:case r1:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}function NR(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const s=parseInt(o[1]);return n.toUpperCase()+`

`+i+`

`+QY(t.getShaderSource(e),s)}else return i}function tq(t,e){const n=eq(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function nq(t,e){let n;switch(e){case qD:n="Linear";break;case KD:n="Reinhard";break;case ZD:n="Cineon";break;case iT:n="ACESFilmic";break;case QD:n="AgX";break;case eU:n="Neutral";break;case JD:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const v0=new z;function rq(){Kt.getLuminanceCoefficients(v0);const t=v0.x.toFixed(4),e=v0.y.toFixed(4),n=v0.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function iq(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Ph).join(`
`)}function oq(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function sq(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const o=t.getActiveAttrib(e,i),s=o.name;let a=1;o.type===t.FLOAT_MAT2&&(a=2),o.type===t.FLOAT_MAT3&&(a=3),o.type===t.FLOAT_MAT4&&(a=4),n[s]={type:o.type,location:t.getAttribLocation(e,s),locationSize:a}}return n}function Ph(t){return t!==""}function DR(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function UR(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const aq=/^[ \t]*#include +<([\w\d./]+)>/gm;function Xb(t){return t.replace(aq,cq)}const lq=new Map;function cq(t,e){let n=Lt[e];if(n===void 0){const r=lq.get(e);if(r!==void 0)n=Lt[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return Xb(n)}const uq=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function FR(t){return t.replace(uq,fq)}function fq(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function zR(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function dq(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===Yx?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Hh?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Oo&&(e="SHADOWMAP_TYPE_VSM"),e}function hq(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Ma:case Sl:e="ENVMAP_TYPE_CUBE";break;case ld:e="ENVMAP_TYPE_CUBE_UV";break}return e}function pq(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Sl:e="ENVMAP_MODE_REFRACTION";break}return e}function mq(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case am:e="ENVMAP_BLENDING_MULTIPLY";break;case XD:e="ENVMAP_BLENDING_MIX";break;case YD:e="ENVMAP_BLENDING_ADD";break}return e}function gq(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function yq(t,e,n,r){const i=t.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const l=dq(n),c=hq(n),u=pq(n),d=mq(n),p=gq(n),m=iq(n),g=oq(o),v=i.createProgram();let x,y,_=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(x=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g].filter(Ph).join(`
`),x.length>0&&(x+=`
`),y=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g].filter(Ph).join(`
`),y.length>0&&(y+=`
`)):(x=[zR(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ph).join(`
`),y=[zR(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Os?"#define TONE_MAPPING":"",n.toneMapping!==Os?Lt.tonemapping_pars_fragment:"",n.toneMapping!==Os?nq("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Lt.colorspace_pars_fragment,tq("linearToOutputTexel",n.outputColorSpace),rq(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Ph).join(`
`)),s=Xb(s),s=DR(s,n),s=UR(s,n),a=Xb(a),a=DR(a,n),a=UR(a,n),s=FR(s),a=FR(a),n.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,x=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,y=["#define varying in",n.glslVersion===jb?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===jb?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);const w=_+x+s,M=_+y+a,A=kR(i,i.VERTEX_SHADER,w),C=kR(i,i.FRAGMENT_SHADER,M);i.attachShader(v,A),i.attachShader(v,C),n.index0AttributeName!==void 0?i.bindAttribLocation(v,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v);function P(L){if(t.debug.checkShaderErrors){const H=i.getProgramInfoLog(v).trim(),W=i.getShaderInfoLog(A).trim(),Y=i.getShaderInfoLog(C).trim();let K=!0,J=!0;if(i.getProgramParameter(v,i.LINK_STATUS)===!1)if(K=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,v,A,C);else{const Q=NR(i,A,"vertex"),D=NR(i,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(v,i.VALIDATE_STATUS)+`

Material Name: `+L.name+`
Material Type: `+L.type+`

Program Info Log: `+H+`
`+Q+`
`+D)}else H!==""?console.warn("THREE.WebGLProgram: Program Info Log:",H):(W===""||Y==="")&&(J=!1);J&&(L.diagnostics={runnable:K,programLog:H,vertexShader:{log:W,prefix:x},fragmentShader:{log:Y,prefix:y}})}i.deleteShader(A),i.deleteShader(C),N=new Ty(i,v),O=sq(i,v)}let N;this.getUniforms=function(){return N===void 0&&P(this),N};let O;this.getAttributes=function(){return O===void 0&&P(this),O};let E=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return E===!1&&(E=i.getProgramParameter(v,ZY)),E},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=JY++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=A,this.fragmentShader=C,this}let vq=0;class xq{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),o=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new _q(e),n.set(e,r)),r}}class _q{constructor(e){this.id=vq++,this.code=e,this.usedTimes=0}}function Sq(t,e,n,r,i,o,s){const a=new Ec,l=new xq,c=new Set,u=[],d=i.logarithmicDepthBuffer,p=i.vertexTextures;let m=i.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(O){return c.add(O),O===0?"uv":`uv${O}`}function x(O,E,L,H,W){const Y=H.fog,K=W.geometry,J=O.isMeshStandardMaterial?H.environment:null,Q=(O.isMeshStandardMaterial?n:e).get(O.envMap||J),D=Q&&Q.mapping===ld?Q.image.height:null,G=g[O.type];O.precision!==null&&(m=i.getMaxPrecision(O.precision),m!==O.precision&&console.warn("THREE.WebGLProgram.getParameters:",O.precision,"not supported, using",m,"instead."));const X=K.morphAttributes.position||K.morphAttributes.normal||K.morphAttributes.color,ne=X!==void 0?X.length:0;let pe=0;K.morphAttributes.position!==void 0&&(pe=1),K.morphAttributes.normal!==void 0&&(pe=2),K.morphAttributes.color!==void 0&&(pe=3);let De,ae,_e,Re;if(G){const Dt=Do[G];De=Dt.vertexShader,ae=Dt.fragmentShader}else De=O.vertexShader,ae=O.fragmentShader,l.update(O),_e=l.getVertexShaderID(O),Re=l.getFragmentShaderID(O);const Ae=t.getRenderTarget(),qe=W.isInstancedMesh===!0,ut=W.isBatchedMesh===!0,Ye=!!O.map,Ve=!!O.matcap,B=!!Q,me=!!O.aoMap,be=!!O.lightMap,ke=!!O.bumpMap,ye=!!O.normalMap,$e=!!O.displacementMap,Ne=!!O.emissiveMap,ze=!!O.metalnessMap,V=!!O.roughnessMap,U=O.anisotropy>0,le=O.clearcoat>0,ee=O.dispersion>0,se=O.iridescence>0,he=O.sheen>0,je=O.transmission>0,Ee=U&&!!O.anisotropyMap,Oe=le&&!!O.clearcoatMap,dt=le&&!!O.clearcoatNormalMap,Ie=le&&!!O.clearcoatRoughnessMap,We=se&&!!O.iridescenceMap,Ct=se&&!!O.iridescenceThicknessMap,gt=he&&!!O.sheenColorMap,Ze=he&&!!O.sheenRoughnessMap,Z=!!O.specularMap,we=!!O.specularColorMap,Xe=!!O.specularIntensityMap,q=je&&!!O.transmissionMap,Pe=je&&!!O.thicknessMap,Me=!!O.gradientMap,Te=!!O.alphaMap,Be=O.alphaTest>0,vt=!!O.alphaHash,Tt=!!O.extensions;let Vt=Os;O.toneMapped&&(Ae===null||Ae.isXRRenderTarget===!0)&&(Vt=t.toneMapping);const mn={shaderID:G,shaderType:O.type,shaderName:O.name,vertexShader:De,fragmentShader:ae,defines:O.defines,customVertexShaderID:_e,customFragmentShaderID:Re,isRawShaderMaterial:O.isRawShaderMaterial===!0,glslVersion:O.glslVersion,precision:m,batching:ut,batchingColor:ut&&W._colorsTexture!==null,instancing:qe,instancingColor:qe&&W.instanceColor!==null,instancingMorph:qe&&W.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:Ae===null?t.outputColorSpace:Ae.isXRRenderTarget===!0?Ae.texture.colorSpace:Oa,alphaToCoverage:!!O.alphaToCoverage,map:Ye,matcap:Ve,envMap:B,envMapMode:B&&Q.mapping,envMapCubeUVHeight:D,aoMap:me,lightMap:be,bumpMap:ke,normalMap:ye,displacementMap:p&&$e,emissiveMap:Ne,normalMapObjectSpace:ye&&O.normalMapType===aU,normalMapTangentSpace:ye&&O.normalMapType===Il,metalnessMap:ze,roughnessMap:V,anisotropy:U,anisotropyMap:Ee,clearcoat:le,clearcoatMap:Oe,clearcoatNormalMap:dt,clearcoatRoughnessMap:Ie,dispersion:ee,iridescence:se,iridescenceMap:We,iridescenceThicknessMap:Ct,sheen:he,sheenColorMap:gt,sheenRoughnessMap:Ze,specularMap:Z,specularColorMap:we,specularIntensityMap:Xe,transmission:je,transmissionMap:q,thicknessMap:Pe,gradientMap:Me,opaque:O.transparent===!1&&O.blending===Sc&&O.alphaToCoverage===!1,alphaMap:Te,alphaTest:Be,alphaHash:vt,combine:O.combine,mapUv:Ye&&v(O.map.channel),aoMapUv:me&&v(O.aoMap.channel),lightMapUv:be&&v(O.lightMap.channel),bumpMapUv:ke&&v(O.bumpMap.channel),normalMapUv:ye&&v(O.normalMap.channel),displacementMapUv:$e&&v(O.displacementMap.channel),emissiveMapUv:Ne&&v(O.emissiveMap.channel),metalnessMapUv:ze&&v(O.metalnessMap.channel),roughnessMapUv:V&&v(O.roughnessMap.channel),anisotropyMapUv:Ee&&v(O.anisotropyMap.channel),clearcoatMapUv:Oe&&v(O.clearcoatMap.channel),clearcoatNormalMapUv:dt&&v(O.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ie&&v(O.clearcoatRoughnessMap.channel),iridescenceMapUv:We&&v(O.iridescenceMap.channel),iridescenceThicknessMapUv:Ct&&v(O.iridescenceThicknessMap.channel),sheenColorMapUv:gt&&v(O.sheenColorMap.channel),sheenRoughnessMapUv:Ze&&v(O.sheenRoughnessMap.channel),specularMapUv:Z&&v(O.specularMap.channel),specularColorMapUv:we&&v(O.specularColorMap.channel),specularIntensityMapUv:Xe&&v(O.specularIntensityMap.channel),transmissionMapUv:q&&v(O.transmissionMap.channel),thicknessMapUv:Pe&&v(O.thicknessMap.channel),alphaMapUv:Te&&v(O.alphaMap.channel),vertexTangents:!!K.attributes.tangent&&(ye||U),vertexColors:O.vertexColors,vertexAlphas:O.vertexColors===!0&&!!K.attributes.color&&K.attributes.color.itemSize===4,pointsUvs:W.isPoints===!0&&!!K.attributes.uv&&(Ye||Te),fog:!!Y,useFog:O.fog===!0,fogExp2:!!Y&&Y.isFogExp2,flatShading:O.flatShading===!0,sizeAttenuation:O.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:W.isSkinnedMesh===!0,morphTargets:K.morphAttributes.position!==void 0,morphNormals:K.morphAttributes.normal!==void 0,morphColors:K.morphAttributes.color!==void 0,morphTargetsCount:ne,morphTextureStride:pe,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numLightProbes:E.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:O.dithering,shadowMapEnabled:t.shadowMap.enabled&&L.length>0,shadowMapType:t.shadowMap.type,toneMapping:Vt,decodeVideoTexture:Ye&&O.map.isVideoTexture===!0&&Kt.getTransfer(O.map.colorSpace)===hn,premultipliedAlpha:O.premultipliedAlpha,doubleSided:O.side===xi,flipSided:O.side===li,useDepthPacking:O.depthPacking>=0,depthPacking:O.depthPacking||0,index0AttributeName:O.index0AttributeName,extensionClipCullDistance:Tt&&O.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Tt&&O.extensions.multiDraw===!0||ut)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:O.customProgramCacheKey()};return mn.vertexUv1s=c.has(1),mn.vertexUv2s=c.has(2),mn.vertexUv3s=c.has(3),c.clear(),mn}function y(O){const E=[];if(O.shaderID?E.push(O.shaderID):(E.push(O.customVertexShaderID),E.push(O.customFragmentShaderID)),O.defines!==void 0)for(const L in O.defines)E.push(L),E.push(O.defines[L]);return O.isRawShaderMaterial===!1&&(_(E,O),w(E,O),E.push(t.outputColorSpace)),E.push(O.customProgramCacheKey),E.join()}function _(O,E){O.push(E.precision),O.push(E.outputColorSpace),O.push(E.envMapMode),O.push(E.envMapCubeUVHeight),O.push(E.mapUv),O.push(E.alphaMapUv),O.push(E.lightMapUv),O.push(E.aoMapUv),O.push(E.bumpMapUv),O.push(E.normalMapUv),O.push(E.displacementMapUv),O.push(E.emissiveMapUv),O.push(E.metalnessMapUv),O.push(E.roughnessMapUv),O.push(E.anisotropyMapUv),O.push(E.clearcoatMapUv),O.push(E.clearcoatNormalMapUv),O.push(E.clearcoatRoughnessMapUv),O.push(E.iridescenceMapUv),O.push(E.iridescenceThicknessMapUv),O.push(E.sheenColorMapUv),O.push(E.sheenRoughnessMapUv),O.push(E.specularMapUv),O.push(E.specularColorMapUv),O.push(E.specularIntensityMapUv),O.push(E.transmissionMapUv),O.push(E.thicknessMapUv),O.push(E.combine),O.push(E.fogExp2),O.push(E.sizeAttenuation),O.push(E.morphTargetsCount),O.push(E.morphAttributeCount),O.push(E.numDirLights),O.push(E.numPointLights),O.push(E.numSpotLights),O.push(E.numSpotLightMaps),O.push(E.numHemiLights),O.push(E.numRectAreaLights),O.push(E.numDirLightShadows),O.push(E.numPointLightShadows),O.push(E.numSpotLightShadows),O.push(E.numSpotLightShadowsWithMaps),O.push(E.numLightProbes),O.push(E.shadowMapType),O.push(E.toneMapping),O.push(E.numClippingPlanes),O.push(E.numClipIntersection),O.push(E.depthPacking)}function w(O,E){a.disableAll(),E.supportsVertexTextures&&a.enable(0),E.instancing&&a.enable(1),E.instancingColor&&a.enable(2),E.instancingMorph&&a.enable(3),E.matcap&&a.enable(4),E.envMap&&a.enable(5),E.normalMapObjectSpace&&a.enable(6),E.normalMapTangentSpace&&a.enable(7),E.clearcoat&&a.enable(8),E.iridescence&&a.enable(9),E.alphaTest&&a.enable(10),E.vertexColors&&a.enable(11),E.vertexAlphas&&a.enable(12),E.vertexUv1s&&a.enable(13),E.vertexUv2s&&a.enable(14),E.vertexUv3s&&a.enable(15),E.vertexTangents&&a.enable(16),E.anisotropy&&a.enable(17),E.alphaHash&&a.enable(18),E.batching&&a.enable(19),E.dispersion&&a.enable(20),E.batchingColor&&a.enable(21),O.push(a.mask),a.disableAll(),E.fog&&a.enable(0),E.useFog&&a.enable(1),E.flatShading&&a.enable(2),E.logarithmicDepthBuffer&&a.enable(3),E.skinning&&a.enable(4),E.morphTargets&&a.enable(5),E.morphNormals&&a.enable(6),E.morphColors&&a.enable(7),E.premultipliedAlpha&&a.enable(8),E.shadowMapEnabled&&a.enable(9),E.doubleSided&&a.enable(10),E.flipSided&&a.enable(11),E.useDepthPacking&&a.enable(12),E.dithering&&a.enable(13),E.transmission&&a.enable(14),E.sheen&&a.enable(15),E.opaque&&a.enable(16),E.pointsUvs&&a.enable(17),E.decodeVideoTexture&&a.enable(18),E.alphaToCoverage&&a.enable(19),O.push(a.mask)}function M(O){const E=g[O.type];let L;if(E){const H=Do[E];L=Uv.clone(H.uniforms)}else L=O.uniforms;return L}function A(O,E){let L;for(let H=0,W=u.length;H<W;H++){const Y=u[H];if(Y.cacheKey===E){L=Y,++L.usedTimes;break}}return L===void 0&&(L=new yq(t,E,O,o),u.push(L)),L}function C(O){if(--O.usedTimes===0){const E=u.indexOf(O);u[E]=u[u.length-1],u.pop(),O.destroy()}}function P(O){l.remove(O)}function N(){l.dispose()}return{getParameters:x,getProgramCacheKey:y,getUniforms:M,acquireProgram:A,releaseProgram:C,releaseShaderCache:P,programs:u,dispose:N}}function wq(){let t=new WeakMap;function e(s){return t.has(s)}function n(s){let a=t.get(s);return a===void 0&&(a={},t.set(s,a)),a}function r(s){t.delete(s)}function i(s,a,l){t.get(s)[a]=l}function o(){t=new WeakMap}return{has:e,get:n,remove:r,update:i,dispose:o}}function bq(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function BR(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function HR(){const t=[];let e=0;const n=[],r=[],i=[];function o(){e=0,n.length=0,r.length=0,i.length=0}function s(d,p,m,g,v,x){let y=t[e];return y===void 0?(y={id:d.id,object:d,geometry:p,material:m,groupOrder:g,renderOrder:d.renderOrder,z:v,group:x},t[e]=y):(y.id=d.id,y.object=d,y.geometry=p,y.material=m,y.groupOrder=g,y.renderOrder=d.renderOrder,y.z=v,y.group=x),e++,y}function a(d,p,m,g,v,x){const y=s(d,p,m,g,v,x);m.transmission>0?r.push(y):m.transparent===!0?i.push(y):n.push(y)}function l(d,p,m,g,v,x){const y=s(d,p,m,g,v,x);m.transmission>0?r.unshift(y):m.transparent===!0?i.unshift(y):n.unshift(y)}function c(d,p){n.length>1&&n.sort(d||bq),r.length>1&&r.sort(p||BR),i.length>1&&i.sort(p||BR)}function u(){for(let d=e,p=t.length;d<p;d++){const m=t[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:n,transmissive:r,transparent:i,init:o,push:a,unshift:l,finish:u,sort:c}}function Eq(){let t=new WeakMap;function e(r,i){const o=t.get(r);let s;return o===void 0?(s=new HR,t.set(r,[s])):i>=o.length?(s=new HR,o.push(s)):s=o[i],s}function n(){t=new WeakMap}return{get:e,dispose:n}}function Mq(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new z,color:new Je};break;case"SpotLight":n={position:new z,direction:new z,color:new Je,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new z,color:new Je,distance:0,decay:0};break;case"HemisphereLight":n={direction:new z,skyColor:new Je,groundColor:new Je};break;case"RectAreaLight":n={color:new Je,position:new z,halfWidth:new z,halfHeight:new z};break}return t[e.id]=n,n}}}function Tq(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Se};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Se};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Se,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let Cq=0;function Aq(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Pq(t){const e=new Mq,n=Tq(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new z);const i=new z,o=new St,s=new St;function a(c){let u=0,d=0,p=0;for(let O=0;O<9;O++)r.probe[O].set(0,0,0);let m=0,g=0,v=0,x=0,y=0,_=0,w=0,M=0,A=0,C=0,P=0;c.sort(Aq);for(let O=0,E=c.length;O<E;O++){const L=c[O],H=L.color,W=L.intensity,Y=L.distance,K=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)u+=H.r*W,d+=H.g*W,p+=H.b*W;else if(L.isLightProbe){for(let J=0;J<9;J++)r.probe[J].addScaledVector(L.sh.coefficients[J],W);P++}else if(L.isDirectionalLight){const J=e.get(L);if(J.color.copy(L.color).multiplyScalar(L.intensity),L.castShadow){const Q=L.shadow,D=n.get(L);D.shadowIntensity=Q.intensity,D.shadowBias=Q.bias,D.shadowNormalBias=Q.normalBias,D.shadowRadius=Q.radius,D.shadowMapSize=Q.mapSize,r.directionalShadow[m]=D,r.directionalShadowMap[m]=K,r.directionalShadowMatrix[m]=L.shadow.matrix,_++}r.directional[m]=J,m++}else if(L.isSpotLight){const J=e.get(L);J.position.setFromMatrixPosition(L.matrixWorld),J.color.copy(H).multiplyScalar(W),J.distance=Y,J.coneCos=Math.cos(L.angle),J.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),J.decay=L.decay,r.spot[v]=J;const Q=L.shadow;if(L.map&&(r.spotLightMap[A]=L.map,A++,Q.updateMatrices(L),L.castShadow&&C++),r.spotLightMatrix[v]=Q.matrix,L.castShadow){const D=n.get(L);D.shadowIntensity=Q.intensity,D.shadowBias=Q.bias,D.shadowNormalBias=Q.normalBias,D.shadowRadius=Q.radius,D.shadowMapSize=Q.mapSize,r.spotShadow[v]=D,r.spotShadowMap[v]=K,M++}v++}else if(L.isRectAreaLight){const J=e.get(L);J.color.copy(H).multiplyScalar(W),J.halfWidth.set(L.width*.5,0,0),J.halfHeight.set(0,L.height*.5,0),r.rectArea[x]=J,x++}else if(L.isPointLight){const J=e.get(L);if(J.color.copy(L.color).multiplyScalar(L.intensity),J.distance=L.distance,J.decay=L.decay,L.castShadow){const Q=L.shadow,D=n.get(L);D.shadowIntensity=Q.intensity,D.shadowBias=Q.bias,D.shadowNormalBias=Q.normalBias,D.shadowRadius=Q.radius,D.shadowMapSize=Q.mapSize,D.shadowCameraNear=Q.camera.near,D.shadowCameraFar=Q.camera.far,r.pointShadow[g]=D,r.pointShadowMap[g]=K,r.pointShadowMatrix[g]=L.shadow.matrix,w++}r.point[g]=J,g++}else if(L.isHemisphereLight){const J=e.get(L);J.skyColor.copy(L.color).multiplyScalar(W),J.groundColor.copy(L.groundColor).multiplyScalar(W),r.hemi[y]=J,y++}}x>0&&(t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ge.LTC_FLOAT_1,r.rectAreaLTC2=Ge.LTC_FLOAT_2):(r.rectAreaLTC1=Ge.LTC_HALF_1,r.rectAreaLTC2=Ge.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=d,r.ambient[2]=p;const N=r.hash;(N.directionalLength!==m||N.pointLength!==g||N.spotLength!==v||N.rectAreaLength!==x||N.hemiLength!==y||N.numDirectionalShadows!==_||N.numPointShadows!==w||N.numSpotShadows!==M||N.numSpotMaps!==A||N.numLightProbes!==P)&&(r.directional.length=m,r.spot.length=v,r.rectArea.length=x,r.point.length=g,r.hemi.length=y,r.directionalShadow.length=_,r.directionalShadowMap.length=_,r.pointShadow.length=w,r.pointShadowMap.length=w,r.spotShadow.length=M,r.spotShadowMap.length=M,r.directionalShadowMatrix.length=_,r.pointShadowMatrix.length=w,r.spotLightMatrix.length=M+A-C,r.spotLightMap.length=A,r.numSpotLightShadowsWithMaps=C,r.numLightProbes=P,N.directionalLength=m,N.pointLength=g,N.spotLength=v,N.rectAreaLength=x,N.hemiLength=y,N.numDirectionalShadows=_,N.numPointShadows=w,N.numSpotShadows=M,N.numSpotMaps=A,N.numLightProbes=P,r.version=Cq++)}function l(c,u){let d=0,p=0,m=0,g=0,v=0;const x=u.matrixWorldInverse;for(let y=0,_=c.length;y<_;y++){const w=c[y];if(w.isDirectionalLight){const M=r.directional[d];M.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),M.direction.sub(i),M.direction.transformDirection(x),d++}else if(w.isSpotLight){const M=r.spot[m];M.position.setFromMatrixPosition(w.matrixWorld),M.position.applyMatrix4(x),M.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),M.direction.sub(i),M.direction.transformDirection(x),m++}else if(w.isRectAreaLight){const M=r.rectArea[g];M.position.setFromMatrixPosition(w.matrixWorld),M.position.applyMatrix4(x),s.identity(),o.copy(w.matrixWorld),o.premultiply(x),s.extractRotation(o),M.halfWidth.set(w.width*.5,0,0),M.halfHeight.set(0,w.height*.5,0),M.halfWidth.applyMatrix4(s),M.halfHeight.applyMatrix4(s),g++}else if(w.isPointLight){const M=r.point[p];M.position.setFromMatrixPosition(w.matrixWorld),M.position.applyMatrix4(x),p++}else if(w.isHemisphereLight){const M=r.hemi[v];M.direction.setFromMatrixPosition(w.matrixWorld),M.direction.transformDirection(x),v++}}}return{setup:a,setupView:l,state:r}}function VR(t){const e=new Pq(t),n=[],r=[];function i(u){c.camera=u,n.length=0,r.length=0}function o(u){n.push(u)}function s(u){r.push(u)}function a(){e.setup(n)}function l(u){e.setupView(n,u)}const c={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:a,setupLightsView:l,pushLight:o,pushShadow:s}}function Rq(t){let e=new WeakMap;function n(i,o=0){const s=e.get(i);let a;return s===void 0?(a=new VR(t),e.set(i,[a])):o>=s.length?(a=new VR(t),s.push(a)):a=s[o],a}function r(){e=new WeakMap}return{get:n,dispose:r}}class bT extends Ir{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=oU,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class ET extends Ir{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Iq=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Oq=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Lq(t,e,n){let r=new dm;const i=new Se,o=new Se,s=new Bt,a=new bT({depthPacking:sU}),l=new ET,c={},u=n.maxTextureSize,d={[Ea]:li,[li]:Ea,[xi]:xi},p=new _o({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Se},radius:{value:4}},vertexShader:Iq,fragmentShader:Oq}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const g=new kt;g.setAttribute("position",new on(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new On(g,p),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Yx;let y=this.type;this.render=function(C,P,N){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||C.length===0)return;const O=t.getRenderTarget(),E=t.getActiveCubeFace(),L=t.getActiveMipmapLevel(),H=t.state;H.setBlending(ya),H.buffers.color.setClear(1,1,1,1),H.buffers.depth.setTest(!0),H.setScissorTest(!1);const W=y!==Oo&&this.type===Oo,Y=y===Oo&&this.type!==Oo;for(let K=0,J=C.length;K<J;K++){const Q=C[K],D=Q.shadow;if(D===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if(D.autoUpdate===!1&&D.needsUpdate===!1)continue;i.copy(D.mapSize);const G=D.getFrameExtents();if(i.multiply(G),o.copy(D.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(o.x=Math.floor(u/G.x),i.x=o.x*G.x,D.mapSize.x=o.x),i.y>u&&(o.y=Math.floor(u/G.y),i.y=o.y*G.y,D.mapSize.y=o.y)),D.map===null||W===!0||Y===!0){const ne=this.type!==Oo?{minFilter:gr,magFilter:gr}:{};D.map!==null&&D.map.dispose(),D.map=new jo(i.x,i.y,ne),D.map.texture.name=Q.name+".shadowMap",D.camera.updateProjectionMatrix()}t.setRenderTarget(D.map),t.clear();const X=D.getViewportCount();for(let ne=0;ne<X;ne++){const pe=D.getViewport(ne);s.set(o.x*pe.x,o.y*pe.y,o.x*pe.z,o.y*pe.w),H.viewport(s),D.updateMatrices(Q,ne),r=D.getFrustum(),M(P,N,D.camera,Q,this.type)}D.isPointLightShadow!==!0&&this.type===Oo&&_(D,N),D.needsUpdate=!1}y=this.type,x.needsUpdate=!1,t.setRenderTarget(O,E,L)};function _(C,P){const N=e.update(v);p.defines.VSM_SAMPLES!==C.blurSamples&&(p.defines.VSM_SAMPLES=C.blurSamples,m.defines.VSM_SAMPLES=C.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),C.mapPass===null&&(C.mapPass=new jo(i.x,i.y)),p.uniforms.shadow_pass.value=C.map.texture,p.uniforms.resolution.value=C.mapSize,p.uniforms.radius.value=C.radius,t.setRenderTarget(C.mapPass),t.clear(),t.renderBufferDirect(P,null,N,p,v,null),m.uniforms.shadow_pass.value=C.mapPass.texture,m.uniforms.resolution.value=C.mapSize,m.uniforms.radius.value=C.radius,t.setRenderTarget(C.map),t.clear(),t.renderBufferDirect(P,null,N,m,v,null)}function w(C,P,N,O){let E=null;const L=N.isPointLight===!0?C.customDistanceMaterial:C.customDepthMaterial;if(L!==void 0)E=L;else if(E=N.isPointLight===!0?l:a,t.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const H=E.uuid,W=P.uuid;let Y=c[H];Y===void 0&&(Y={},c[H]=Y);let K=Y[W];K===void 0&&(K=E.clone(),Y[W]=K,P.addEventListener("dispose",A)),E=K}if(E.visible=P.visible,E.wireframe=P.wireframe,O===Oo?E.side=P.shadowSide!==null?P.shadowSide:P.side:E.side=P.shadowSide!==null?P.shadowSide:d[P.side],E.alphaMap=P.alphaMap,E.alphaTest=P.alphaTest,E.map=P.map,E.clipShadows=P.clipShadows,E.clippingPlanes=P.clippingPlanes,E.clipIntersection=P.clipIntersection,E.displacementMap=P.displacementMap,E.displacementScale=P.displacementScale,E.displacementBias=P.displacementBias,E.wireframeLinewidth=P.wireframeLinewidth,E.linewidth=P.linewidth,N.isPointLight===!0&&E.isMeshDistanceMaterial===!0){const H=t.properties.get(E);H.light=N}return E}function M(C,P,N,O,E){if(C.visible===!1)return;if(C.layers.test(P.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&E===Oo)&&(!C.frustumCulled||r.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(N.matrixWorldInverse,C.matrixWorld);const W=e.update(C),Y=C.material;if(Array.isArray(Y)){const K=W.groups;for(let J=0,Q=K.length;J<Q;J++){const D=K[J],G=Y[D.materialIndex];if(G&&G.visible){const X=w(C,G,O,E);C.onBeforeShadow(t,C,P,N,W,X,D),t.renderBufferDirect(N,null,W,X,C,D),C.onAfterShadow(t,C,P,N,W,X,D)}}}else if(Y.visible){const K=w(C,Y,O,E);C.onBeforeShadow(t,C,P,N,W,K,null),t.renderBufferDirect(N,null,W,K,C,null),C.onAfterShadow(t,C,P,N,W,K,null)}}const H=C.children;for(let W=0,Y=H.length;W<Y;W++)M(H[W],P,N,O,E)}function A(C){C.target.removeEventListener("dispose",A);for(const N in c){const O=c[N],E=C.target.uuid;E in O&&(O[E].dispose(),delete O[E])}}}function kq(t){function e(){let q=!1;const Pe=new Bt;let Me=null;const Te=new Bt(0,0,0,0);return{setMask:function(Be){Me!==Be&&!q&&(t.colorMask(Be,Be,Be,Be),Me=Be)},setLocked:function(Be){q=Be},setClear:function(Be,vt,Tt,Vt,mn){mn===!0&&(Be*=Vt,vt*=Vt,Tt*=Vt),Pe.set(Be,vt,Tt,Vt),Te.equals(Pe)===!1&&(t.clearColor(Be,vt,Tt,Vt),Te.copy(Pe))},reset:function(){q=!1,Me=null,Te.set(-1,0,0,0)}}}function n(){let q=!1,Pe=null,Me=null,Te=null;return{setTest:function(Be){Be?Re(t.DEPTH_TEST):Ae(t.DEPTH_TEST)},setMask:function(Be){Pe!==Be&&!q&&(t.depthMask(Be),Pe=Be)},setFunc:function(Be){if(Me!==Be){switch(Be){case BD:t.depthFunc(t.NEVER);break;case HD:t.depthFunc(t.ALWAYS);break;case VD:t.depthFunc(t.LESS);break;case Sp:t.depthFunc(t.LEQUAL);break;case $D:t.depthFunc(t.EQUAL);break;case WD:t.depthFunc(t.GEQUAL);break;case jD:t.depthFunc(t.GREATER);break;case GD:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Me=Be}},setLocked:function(Be){q=Be},setClear:function(Be){Te!==Be&&(t.clearDepth(Be),Te=Be)},reset:function(){q=!1,Pe=null,Me=null,Te=null}}}function r(){let q=!1,Pe=null,Me=null,Te=null,Be=null,vt=null,Tt=null,Vt=null,mn=null;return{setTest:function(Dt){q||(Dt?Re(t.STENCIL_TEST):Ae(t.STENCIL_TEST))},setMask:function(Dt){Pe!==Dt&&!q&&(t.stencilMask(Dt),Pe=Dt)},setFunc:function(Dt,ar,lr){(Me!==Dt||Te!==ar||Be!==lr)&&(t.stencilFunc(Dt,ar,lr),Me=Dt,Te=ar,Be=lr)},setOp:function(Dt,ar,lr){(vt!==Dt||Tt!==ar||Vt!==lr)&&(t.stencilOp(Dt,ar,lr),vt=Dt,Tt=ar,Vt=lr)},setLocked:function(Dt){q=Dt},setClear:function(Dt){mn!==Dt&&(t.clearStencil(Dt),mn=Dt)},reset:function(){q=!1,Pe=null,Me=null,Te=null,Be=null,vt=null,Tt=null,Vt=null,mn=null}}}const i=new e,o=new n,s=new r,a=new WeakMap,l=new WeakMap;let c={},u={},d=new WeakMap,p=[],m=null,g=!1,v=null,x=null,y=null,_=null,w=null,M=null,A=null,C=new Je(0,0,0),P=0,N=!1,O=null,E=null,L=null,H=null,W=null;const Y=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let K=!1,J=0;const Q=t.getParameter(t.VERSION);Q.indexOf("WebGL")!==-1?(J=parseFloat(/^WebGL (\d)/.exec(Q)[1]),K=J>=1):Q.indexOf("OpenGL ES")!==-1&&(J=parseFloat(/^OpenGL ES (\d)/.exec(Q)[1]),K=J>=2);let D=null,G={};const X=t.getParameter(t.SCISSOR_BOX),ne=t.getParameter(t.VIEWPORT),pe=new Bt().fromArray(X),De=new Bt().fromArray(ne);function ae(q,Pe,Me,Te){const Be=new Uint8Array(4),vt=t.createTexture();t.bindTexture(q,vt),t.texParameteri(q,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(q,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Tt=0;Tt<Me;Tt++)q===t.TEXTURE_3D||q===t.TEXTURE_2D_ARRAY?t.texImage3D(Pe,0,t.RGBA,1,1,Te,0,t.RGBA,t.UNSIGNED_BYTE,Be):t.texImage2D(Pe+Tt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,Be);return vt}const _e={};_e[t.TEXTURE_2D]=ae(t.TEXTURE_2D,t.TEXTURE_2D,1),_e[t.TEXTURE_CUBE_MAP]=ae(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),_e[t.TEXTURE_2D_ARRAY]=ae(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),_e[t.TEXTURE_3D]=ae(t.TEXTURE_3D,t.TEXTURE_3D,1,1),i.setClear(0,0,0,1),o.setClear(1),s.setClear(0),Re(t.DEPTH_TEST),o.setFunc(Sp),ke(!1),ye(zb),Re(t.CULL_FACE),me(ya);function Re(q){c[q]!==!0&&(t.enable(q),c[q]=!0)}function Ae(q){c[q]!==!1&&(t.disable(q),c[q]=!1)}function qe(q,Pe){return u[q]!==Pe?(t.bindFramebuffer(q,Pe),u[q]=Pe,q===t.DRAW_FRAMEBUFFER&&(u[t.FRAMEBUFFER]=Pe),q===t.FRAMEBUFFER&&(u[t.DRAW_FRAMEBUFFER]=Pe),!0):!1}function ut(q,Pe){let Me=p,Te=!1;if(q){Me=d.get(Pe),Me===void 0&&(Me=[],d.set(Pe,Me));const Be=q.textures;if(Me.length!==Be.length||Me[0]!==t.COLOR_ATTACHMENT0){for(let vt=0,Tt=Be.length;vt<Tt;vt++)Me[vt]=t.COLOR_ATTACHMENT0+vt;Me.length=Be.length,Te=!0}}else Me[0]!==t.BACK&&(Me[0]=t.BACK,Te=!0);Te&&t.drawBuffers(Me)}function Ye(q){return m!==q?(t.useProgram(q),m=q,!0):!1}const Ve={[il]:t.FUNC_ADD,[bD]:t.FUNC_SUBTRACT,[ED]:t.FUNC_REVERSE_SUBTRACT};Ve[MD]=t.MIN,Ve[TD]=t.MAX;const B={[CD]:t.ZERO,[AD]:t.ONE,[PD]:t.SRC_COLOR,[lv]:t.SRC_ALPHA,[ND]:t.SRC_ALPHA_SATURATE,[LD]:t.DST_COLOR,[ID]:t.DST_ALPHA,[RD]:t.ONE_MINUS_SRC_COLOR,[cv]:t.ONE_MINUS_SRC_ALPHA,[kD]:t.ONE_MINUS_DST_COLOR,[OD]:t.ONE_MINUS_DST_ALPHA,[DD]:t.CONSTANT_COLOR,[UD]:t.ONE_MINUS_CONSTANT_COLOR,[FD]:t.CONSTANT_ALPHA,[zD]:t.ONE_MINUS_CONSTANT_ALPHA};function me(q,Pe,Me,Te,Be,vt,Tt,Vt,mn,Dt){if(q===ya){g===!0&&(Ae(t.BLEND),g=!1);return}if(g===!1&&(Re(t.BLEND),g=!0),q!==wD){if(q!==v||Dt!==N){if((x!==il||w!==il)&&(t.blendEquation(t.FUNC_ADD),x=il,w=il),Dt)switch(q){case Sc:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Bb:t.blendFunc(t.ONE,t.ONE);break;case Hb:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case Vb:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",q);break}else switch(q){case Sc:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Bb:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case Hb:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case Vb:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",q);break}y=null,_=null,M=null,A=null,C.set(0,0,0),P=0,v=q,N=Dt}return}Be=Be||Pe,vt=vt||Me,Tt=Tt||Te,(Pe!==x||Be!==w)&&(t.blendEquationSeparate(Ve[Pe],Ve[Be]),x=Pe,w=Be),(Me!==y||Te!==_||vt!==M||Tt!==A)&&(t.blendFuncSeparate(B[Me],B[Te],B[vt],B[Tt]),y=Me,_=Te,M=vt,A=Tt),(Vt.equals(C)===!1||mn!==P)&&(t.blendColor(Vt.r,Vt.g,Vt.b,mn),C.copy(Vt),P=mn),v=q,N=!1}function be(q,Pe){q.side===xi?Ae(t.CULL_FACE):Re(t.CULL_FACE);let Me=q.side===li;Pe&&(Me=!Me),ke(Me),q.blending===Sc&&q.transparent===!1?me(ya):me(q.blending,q.blendEquation,q.blendSrc,q.blendDst,q.blendEquationAlpha,q.blendSrcAlpha,q.blendDstAlpha,q.blendColor,q.blendAlpha,q.premultipliedAlpha),o.setFunc(q.depthFunc),o.setTest(q.depthTest),o.setMask(q.depthWrite),i.setMask(q.colorWrite);const Te=q.stencilWrite;s.setTest(Te),Te&&(s.setMask(q.stencilWriteMask),s.setFunc(q.stencilFunc,q.stencilRef,q.stencilFuncMask),s.setOp(q.stencilFail,q.stencilZFail,q.stencilZPass)),Ne(q.polygonOffset,q.polygonOffsetFactor,q.polygonOffsetUnits),q.alphaToCoverage===!0?Re(t.SAMPLE_ALPHA_TO_COVERAGE):Ae(t.SAMPLE_ALPHA_TO_COVERAGE)}function ke(q){O!==q&&(q?t.frontFace(t.CW):t.frontFace(t.CCW),O=q)}function ye(q){q!==xD?(Re(t.CULL_FACE),q!==E&&(q===zb?t.cullFace(t.BACK):q===_D?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Ae(t.CULL_FACE),E=q}function $e(q){q!==L&&(K&&t.lineWidth(q),L=q)}function Ne(q,Pe,Me){q?(Re(t.POLYGON_OFFSET_FILL),(H!==Pe||W!==Me)&&(t.polygonOffset(Pe,Me),H=Pe,W=Me)):Ae(t.POLYGON_OFFSET_FILL)}function ze(q){q?Re(t.SCISSOR_TEST):Ae(t.SCISSOR_TEST)}function V(q){q===void 0&&(q=t.TEXTURE0+Y-1),D!==q&&(t.activeTexture(q),D=q)}function U(q,Pe,Me){Me===void 0&&(D===null?Me=t.TEXTURE0+Y-1:Me=D);let Te=G[Me];Te===void 0&&(Te={type:void 0,texture:void 0},G[Me]=Te),(Te.type!==q||Te.texture!==Pe)&&(D!==Me&&(t.activeTexture(Me),D=Me),t.bindTexture(q,Pe||_e[q]),Te.type=q,Te.texture=Pe)}function le(){const q=G[D];q!==void 0&&q.type!==void 0&&(t.bindTexture(q.type,null),q.type=void 0,q.texture=void 0)}function ee(){try{t.compressedTexImage2D.apply(t,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function se(){try{t.compressedTexImage3D.apply(t,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function he(){try{t.texSubImage2D.apply(t,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function je(){try{t.texSubImage3D.apply(t,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Ee(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Oe(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function dt(){try{t.texStorage2D.apply(t,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Ie(){try{t.texStorage3D.apply(t,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function We(){try{t.texImage2D.apply(t,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Ct(){try{t.texImage3D.apply(t,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function gt(q){pe.equals(q)===!1&&(t.scissor(q.x,q.y,q.z,q.w),pe.copy(q))}function Ze(q){De.equals(q)===!1&&(t.viewport(q.x,q.y,q.z,q.w),De.copy(q))}function Z(q,Pe){let Me=l.get(Pe);Me===void 0&&(Me=new WeakMap,l.set(Pe,Me));let Te=Me.get(q);Te===void 0&&(Te=t.getUniformBlockIndex(Pe,q.name),Me.set(q,Te))}function we(q,Pe){const Te=l.get(Pe).get(q);a.get(Pe)!==Te&&(t.uniformBlockBinding(Pe,Te,q.__bindingPointIndex),a.set(Pe,Te))}function Xe(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),c={},D=null,G={},u={},d=new WeakMap,p=[],m=null,g=!1,v=null,x=null,y=null,_=null,w=null,M=null,A=null,C=new Je(0,0,0),P=0,N=!1,O=null,E=null,L=null,H=null,W=null,pe.set(0,0,t.canvas.width,t.canvas.height),De.set(0,0,t.canvas.width,t.canvas.height),i.reset(),o.reset(),s.reset()}return{buffers:{color:i,depth:o,stencil:s},enable:Re,disable:Ae,bindFramebuffer:qe,drawBuffers:ut,useProgram:Ye,setBlending:me,setMaterial:be,setFlipSided:ke,setCullFace:ye,setLineWidth:$e,setPolygonOffset:Ne,setScissorTest:ze,activeTexture:V,bindTexture:U,unbindTexture:le,compressedTexImage2D:ee,compressedTexImage3D:se,texImage2D:We,texImage3D:Ct,updateUBOMapping:Z,uniformBlockBinding:we,texStorage2D:dt,texStorage3D:Ie,texSubImage2D:he,texSubImage3D:je,compressedTexSubImage2D:Ee,compressedTexSubImage3D:Oe,scissor:gt,viewport:Ze,reset:Xe}}function Nq(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2):(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0),t}function Dq(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0):(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2),t}function Uq(t){return t.repeat.x=1,t.repeat.y=1,t.offset.x=0,t.offset.y=0,t}function Yb(t,e,n,r){const i=Fq(r);switch(n){case cT:return t*e;case fT:return t*e;case dT:return t*e*2;case Qx:return t*e/i.components*i.byteLength;case lm:return t*e/i.components*i.byteLength;case hT:return t*e*2/i.components*i.byteLength;case e1:return t*e*2/i.components*i.byteLength;case uT:return t*e*3/i.components*i.byteLength;case jr:return t*e*4/i.components*i.byteLength;case t1:return t*e*4/i.components*i.byteLength;case $h:case Wh:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case jh:case Gh:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case fv:case hv:return Math.max(t,16)*Math.max(e,8)/4;case uv:case dv:return Math.max(t,8)*Math.max(e,8)/2;case pv:case mv:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case gv:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case yv:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case vv:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case xv:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case _v:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case Sv:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case wv:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case bv:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case Ev:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case Mv:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case Tv:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case Cv:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case Av:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case Pv:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case Rv:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case Xh:case Iv:case Ov:return Math.ceil(t/4)*Math.ceil(e/4)*16;case pT:case Lv:return Math.ceil(t/4)*Math.ceil(e/4)*8;case kv:case Nv:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function Fq(t){switch(t){case Wo:case sT:return{byteLength:1,components:1};case Vf:case aT:case cd:return{byteLength:2,components:1};case Zx:case Jx:return{byteLength:2,components:4};case Ta:case Kx:case Si:return{byteLength:4,components:1};case lT:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}const zq={contain:Nq,cover:Dq,fill:Uq,getByteLength:Yb};function Bq(t,e,n,r,i,o,s){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Se,u=new WeakMap;let d;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(V,U){return m?new OffscreenCanvas(V,U):Lp("canvas")}function v(V,U,le){let ee=1;const se=ze(V);if((se.width>le||se.height>le)&&(ee=le/Math.max(se.width,se.height)),ee<1)if(typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&V instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&V instanceof ImageBitmap||typeof VideoFrame<"u"&&V instanceof VideoFrame){const he=Math.floor(ee*se.width),je=Math.floor(ee*se.height);d===void 0&&(d=g(he,je));const Ee=U?g(he,je):d;return Ee.width=he,Ee.height=je,Ee.getContext("2d").drawImage(V,0,0,he,je),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+se.width+"x"+se.height+") to ("+he+"x"+je+")."),Ee}else return"data"in V&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+se.width+"x"+se.height+")."),V;return V}function x(V){return V.generateMipmaps&&V.minFilter!==gr&&V.minFilter!==tr}function y(V){t.generateMipmap(V)}function _(V,U,le,ee,se=!1){if(V!==null){if(t[V]!==void 0)return t[V];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+V+"'")}let he=U;if(U===t.RED&&(le===t.FLOAT&&(he=t.R32F),le===t.HALF_FLOAT&&(he=t.R16F),le===t.UNSIGNED_BYTE&&(he=t.R8)),U===t.RED_INTEGER&&(le===t.UNSIGNED_BYTE&&(he=t.R8UI),le===t.UNSIGNED_SHORT&&(he=t.R16UI),le===t.UNSIGNED_INT&&(he=t.R32UI),le===t.BYTE&&(he=t.R8I),le===t.SHORT&&(he=t.R16I),le===t.INT&&(he=t.R32I)),U===t.RG&&(le===t.FLOAT&&(he=t.RG32F),le===t.HALF_FLOAT&&(he=t.RG16F),le===t.UNSIGNED_BYTE&&(he=t.RG8)),U===t.RG_INTEGER&&(le===t.UNSIGNED_BYTE&&(he=t.RG8UI),le===t.UNSIGNED_SHORT&&(he=t.RG16UI),le===t.UNSIGNED_INT&&(he=t.RG32UI),le===t.BYTE&&(he=t.RG8I),le===t.SHORT&&(he=t.RG16I),le===t.INT&&(he=t.RG32I)),U===t.RGB&&le===t.UNSIGNED_INT_5_9_9_9_REV&&(he=t.RGB9_E5),U===t.RGBA){const je=se?Ap:Kt.getTransfer(ee);le===t.FLOAT&&(he=t.RGBA32F),le===t.HALF_FLOAT&&(he=t.RGBA16F),le===t.UNSIGNED_BYTE&&(he=je===hn?t.SRGB8_ALPHA8:t.RGBA8),le===t.UNSIGNED_SHORT_4_4_4_4&&(he=t.RGBA4),le===t.UNSIGNED_SHORT_5_5_5_1&&(he=t.RGB5_A1)}return(he===t.R16F||he===t.R32F||he===t.RG16F||he===t.RG32F||he===t.RGBA16F||he===t.RGBA32F)&&e.get("EXT_color_buffer_float"),he}function w(V,U){let le;return V?U===null||U===Ta||U===Dc?le=t.DEPTH24_STENCIL8:U===Si?le=t.DEPTH32F_STENCIL8:U===Vf&&(le=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):U===null||U===Ta||U===Dc?le=t.DEPTH_COMPONENT24:U===Si?le=t.DEPTH_COMPONENT32F:U===Vf&&(le=t.DEPTH_COMPONENT16),le}function M(V,U){return x(V)===!0||V.isFramebufferTexture&&V.minFilter!==gr&&V.minFilter!==tr?Math.log2(Math.max(U.width,U.height))+1:V.mipmaps!==void 0&&V.mipmaps.length>0?V.mipmaps.length:V.isCompressedTexture&&Array.isArray(V.image)?U.mipmaps.length:1}function A(V){const U=V.target;U.removeEventListener("dispose",A),P(U),U.isVideoTexture&&u.delete(U)}function C(V){const U=V.target;U.removeEventListener("dispose",C),O(U)}function P(V){const U=r.get(V);if(U.__webglInit===void 0)return;const le=V.source,ee=p.get(le);if(ee){const se=ee[U.__cacheKey];se.usedTimes--,se.usedTimes===0&&N(V),Object.keys(ee).length===0&&p.delete(le)}r.remove(V)}function N(V){const U=r.get(V);t.deleteTexture(U.__webglTexture);const le=V.source,ee=p.get(le);delete ee[U.__cacheKey],s.memory.textures--}function O(V){const U=r.get(V);if(V.depthTexture&&V.depthTexture.dispose(),V.isWebGLCubeRenderTarget)for(let ee=0;ee<6;ee++){if(Array.isArray(U.__webglFramebuffer[ee]))for(let se=0;se<U.__webglFramebuffer[ee].length;se++)t.deleteFramebuffer(U.__webglFramebuffer[ee][se]);else t.deleteFramebuffer(U.__webglFramebuffer[ee]);U.__webglDepthbuffer&&t.deleteRenderbuffer(U.__webglDepthbuffer[ee])}else{if(Array.isArray(U.__webglFramebuffer))for(let ee=0;ee<U.__webglFramebuffer.length;ee++)t.deleteFramebuffer(U.__webglFramebuffer[ee]);else t.deleteFramebuffer(U.__webglFramebuffer);if(U.__webglDepthbuffer&&t.deleteRenderbuffer(U.__webglDepthbuffer),U.__webglMultisampledFramebuffer&&t.deleteFramebuffer(U.__webglMultisampledFramebuffer),U.__webglColorRenderbuffer)for(let ee=0;ee<U.__webglColorRenderbuffer.length;ee++)U.__webglColorRenderbuffer[ee]&&t.deleteRenderbuffer(U.__webglColorRenderbuffer[ee]);U.__webglDepthRenderbuffer&&t.deleteRenderbuffer(U.__webglDepthRenderbuffer)}const le=V.textures;for(let ee=0,se=le.length;ee<se;ee++){const he=r.get(le[ee]);he.__webglTexture&&(t.deleteTexture(he.__webglTexture),s.memory.textures--),r.remove(le[ee])}r.remove(V)}let E=0;function L(){E=0}function H(){const V=E;return V>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+V+" texture units while this GPU supports only "+i.maxTextures),E+=1,V}function W(V){const U=[];return U.push(V.wrapS),U.push(V.wrapT),U.push(V.wrapR||0),U.push(V.magFilter),U.push(V.minFilter),U.push(V.anisotropy),U.push(V.internalFormat),U.push(V.format),U.push(V.type),U.push(V.generateMipmaps),U.push(V.premultiplyAlpha),U.push(V.flipY),U.push(V.unpackAlignment),U.push(V.colorSpace),U.join()}function Y(V,U){const le=r.get(V);if(V.isVideoTexture&&$e(V),V.isRenderTargetTexture===!1&&V.version>0&&le.__version!==V.version){const ee=V.image;if(ee===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ee.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{De(le,V,U);return}}n.bindTexture(t.TEXTURE_2D,le.__webglTexture,t.TEXTURE0+U)}function K(V,U){const le=r.get(V);if(V.version>0&&le.__version!==V.version){De(le,V,U);return}n.bindTexture(t.TEXTURE_2D_ARRAY,le.__webglTexture,t.TEXTURE0+U)}function J(V,U){const le=r.get(V);if(V.version>0&&le.__version!==V.version){De(le,V,U);return}n.bindTexture(t.TEXTURE_3D,le.__webglTexture,t.TEXTURE0+U)}function Q(V,U){const le=r.get(V);if(V.version>0&&le.__version!==V.version){ae(le,V,U);return}n.bindTexture(t.TEXTURE_CUBE_MAP,le.__webglTexture,t.TEXTURE0+U)}const D={[Ep]:t.REPEAT,[po]:t.CLAMP_TO_EDGE,[Mp]:t.MIRRORED_REPEAT},G={[gr]:t.NEAREST,[oT]:t.NEAREST_MIPMAP_NEAREST,[hf]:t.NEAREST_MIPMAP_LINEAR,[tr]:t.LINEAR,[Vh]:t.LINEAR_MIPMAP_NEAREST,[Es]:t.LINEAR_MIPMAP_LINEAR},X={[lU]:t.NEVER,[pU]:t.ALWAYS,[cU]:t.LESS,[gT]:t.LEQUAL,[uU]:t.EQUAL,[hU]:t.GEQUAL,[fU]:t.GREATER,[dU]:t.NOTEQUAL};function ne(V,U){if(U.type===Si&&e.has("OES_texture_float_linear")===!1&&(U.magFilter===tr||U.magFilter===Vh||U.magFilter===hf||U.magFilter===Es||U.minFilter===tr||U.minFilter===Vh||U.minFilter===hf||U.minFilter===Es)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(V,t.TEXTURE_WRAP_S,D[U.wrapS]),t.texParameteri(V,t.TEXTURE_WRAP_T,D[U.wrapT]),(V===t.TEXTURE_3D||V===t.TEXTURE_2D_ARRAY)&&t.texParameteri(V,t.TEXTURE_WRAP_R,D[U.wrapR]),t.texParameteri(V,t.TEXTURE_MAG_FILTER,G[U.magFilter]),t.texParameteri(V,t.TEXTURE_MIN_FILTER,G[U.minFilter]),U.compareFunction&&(t.texParameteri(V,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(V,t.TEXTURE_COMPARE_FUNC,X[U.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(U.magFilter===gr||U.minFilter!==hf&&U.minFilter!==Es||U.type===Si&&e.has("OES_texture_float_linear")===!1)return;if(U.anisotropy>1||r.get(U).__currentAnisotropy){const le=e.get("EXT_texture_filter_anisotropic");t.texParameterf(V,le.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(U.anisotropy,i.getMaxAnisotropy())),r.get(U).__currentAnisotropy=U.anisotropy}}}function pe(V,U){let le=!1;V.__webglInit===void 0&&(V.__webglInit=!0,U.addEventListener("dispose",A));const ee=U.source;let se=p.get(ee);se===void 0&&(se={},p.set(ee,se));const he=W(U);if(he!==V.__cacheKey){se[he]===void 0&&(se[he]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,le=!0),se[he].usedTimes++;const je=se[V.__cacheKey];je!==void 0&&(se[V.__cacheKey].usedTimes--,je.usedTimes===0&&N(U)),V.__cacheKey=he,V.__webglTexture=se[he].texture}return le}function De(V,U,le){let ee=t.TEXTURE_2D;(U.isDataArrayTexture||U.isCompressedArrayTexture)&&(ee=t.TEXTURE_2D_ARRAY),U.isData3DTexture&&(ee=t.TEXTURE_3D);const se=pe(V,U),he=U.source;n.bindTexture(ee,V.__webglTexture,t.TEXTURE0+le);const je=r.get(he);if(he.version!==je.__version||se===!0){n.activeTexture(t.TEXTURE0+le);const Ee=Kt.getPrimaries(Kt.workingColorSpace),Oe=U.colorSpace===aa?null:Kt.getPrimaries(U.colorSpace),dt=U.colorSpace===aa||Ee===Oe?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,U.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,U.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,dt);let Ie=v(U.image,!1,i.maxTextureSize);Ie=Ne(U,Ie);const We=o.convert(U.format,U.colorSpace),Ct=o.convert(U.type);let gt=_(U.internalFormat,We,Ct,U.colorSpace,U.isVideoTexture);ne(ee,U);let Ze;const Z=U.mipmaps,we=U.isVideoTexture!==!0,Xe=je.__version===void 0||se===!0,q=he.dataReady,Pe=M(U,Ie);if(U.isDepthTexture)gt=w(U.format===Uc,U.type),Xe&&(we?n.texStorage2D(t.TEXTURE_2D,1,gt,Ie.width,Ie.height):n.texImage2D(t.TEXTURE_2D,0,gt,Ie.width,Ie.height,0,We,Ct,null));else if(U.isDataTexture)if(Z.length>0){we&&Xe&&n.texStorage2D(t.TEXTURE_2D,Pe,gt,Z[0].width,Z[0].height);for(let Me=0,Te=Z.length;Me<Te;Me++)Ze=Z[Me],we?q&&n.texSubImage2D(t.TEXTURE_2D,Me,0,0,Ze.width,Ze.height,We,Ct,Ze.data):n.texImage2D(t.TEXTURE_2D,Me,gt,Ze.width,Ze.height,0,We,Ct,Ze.data);U.generateMipmaps=!1}else we?(Xe&&n.texStorage2D(t.TEXTURE_2D,Pe,gt,Ie.width,Ie.height),q&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Ie.width,Ie.height,We,Ct,Ie.data)):n.texImage2D(t.TEXTURE_2D,0,gt,Ie.width,Ie.height,0,We,Ct,Ie.data);else if(U.isCompressedTexture)if(U.isCompressedArrayTexture){we&&Xe&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Pe,gt,Z[0].width,Z[0].height,Ie.depth);for(let Me=0,Te=Z.length;Me<Te;Me++)if(Ze=Z[Me],U.format!==jr)if(We!==null)if(we){if(q)if(U.layerUpdates.size>0){const Be=Yb(Ze.width,Ze.height,U.format,U.type);for(const vt of U.layerUpdates){const Tt=Ze.data.subarray(vt*Be/Ze.data.BYTES_PER_ELEMENT,(vt+1)*Be/Ze.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Me,0,0,vt,Ze.width,Ze.height,1,We,Tt,0,0)}U.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Me,0,0,0,Ze.width,Ze.height,Ie.depth,We,Ze.data,0,0)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Me,gt,Ze.width,Ze.height,Ie.depth,0,Ze.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else we?q&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,Me,0,0,0,Ze.width,Ze.height,Ie.depth,We,Ct,Ze.data):n.texImage3D(t.TEXTURE_2D_ARRAY,Me,gt,Ze.width,Ze.height,Ie.depth,0,We,Ct,Ze.data)}else{we&&Xe&&n.texStorage2D(t.TEXTURE_2D,Pe,gt,Z[0].width,Z[0].height);for(let Me=0,Te=Z.length;Me<Te;Me++)Ze=Z[Me],U.format!==jr?We!==null?we?q&&n.compressedTexSubImage2D(t.TEXTURE_2D,Me,0,0,Ze.width,Ze.height,We,Ze.data):n.compressedTexImage2D(t.TEXTURE_2D,Me,gt,Ze.width,Ze.height,0,Ze.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):we?q&&n.texSubImage2D(t.TEXTURE_2D,Me,0,0,Ze.width,Ze.height,We,Ct,Ze.data):n.texImage2D(t.TEXTURE_2D,Me,gt,Ze.width,Ze.height,0,We,Ct,Ze.data)}else if(U.isDataArrayTexture)if(we){if(Xe&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Pe,gt,Ie.width,Ie.height,Ie.depth),q)if(U.layerUpdates.size>0){const Me=Yb(Ie.width,Ie.height,U.format,U.type);for(const Te of U.layerUpdates){const Be=Ie.data.subarray(Te*Me/Ie.data.BYTES_PER_ELEMENT,(Te+1)*Me/Ie.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,Te,Ie.width,Ie.height,1,We,Ct,Be)}U.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Ie.width,Ie.height,Ie.depth,We,Ct,Ie.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,gt,Ie.width,Ie.height,Ie.depth,0,We,Ct,Ie.data);else if(U.isData3DTexture)we?(Xe&&n.texStorage3D(t.TEXTURE_3D,Pe,gt,Ie.width,Ie.height,Ie.depth),q&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Ie.width,Ie.height,Ie.depth,We,Ct,Ie.data)):n.texImage3D(t.TEXTURE_3D,0,gt,Ie.width,Ie.height,Ie.depth,0,We,Ct,Ie.data);else if(U.isFramebufferTexture){if(Xe)if(we)n.texStorage2D(t.TEXTURE_2D,Pe,gt,Ie.width,Ie.height);else{let Me=Ie.width,Te=Ie.height;for(let Be=0;Be<Pe;Be++)n.texImage2D(t.TEXTURE_2D,Be,gt,Me,Te,0,We,Ct,null),Me>>=1,Te>>=1}}else if(Z.length>0){if(we&&Xe){const Me=ze(Z[0]);n.texStorage2D(t.TEXTURE_2D,Pe,gt,Me.width,Me.height)}for(let Me=0,Te=Z.length;Me<Te;Me++)Ze=Z[Me],we?q&&n.texSubImage2D(t.TEXTURE_2D,Me,0,0,We,Ct,Ze):n.texImage2D(t.TEXTURE_2D,Me,gt,We,Ct,Ze);U.generateMipmaps=!1}else if(we){if(Xe){const Me=ze(Ie);n.texStorage2D(t.TEXTURE_2D,Pe,gt,Me.width,Me.height)}q&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,We,Ct,Ie)}else n.texImage2D(t.TEXTURE_2D,0,gt,We,Ct,Ie);x(U)&&y(ee),je.__version=he.version,U.onUpdate&&U.onUpdate(U)}V.__version=U.version}function ae(V,U,le){if(U.image.length!==6)return;const ee=pe(V,U),se=U.source;n.bindTexture(t.TEXTURE_CUBE_MAP,V.__webglTexture,t.TEXTURE0+le);const he=r.get(se);if(se.version!==he.__version||ee===!0){n.activeTexture(t.TEXTURE0+le);const je=Kt.getPrimaries(Kt.workingColorSpace),Ee=U.colorSpace===aa?null:Kt.getPrimaries(U.colorSpace),Oe=U.colorSpace===aa||je===Ee?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,U.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,U.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Oe);const dt=U.isCompressedTexture||U.image[0].isCompressedTexture,Ie=U.image[0]&&U.image[0].isDataTexture,We=[];for(let Te=0;Te<6;Te++)!dt&&!Ie?We[Te]=v(U.image[Te],!0,i.maxCubemapSize):We[Te]=Ie?U.image[Te].image:U.image[Te],We[Te]=Ne(U,We[Te]);const Ct=We[0],gt=o.convert(U.format,U.colorSpace),Ze=o.convert(U.type),Z=_(U.internalFormat,gt,Ze,U.colorSpace),we=U.isVideoTexture!==!0,Xe=he.__version===void 0||ee===!0,q=se.dataReady;let Pe=M(U,Ct);ne(t.TEXTURE_CUBE_MAP,U);let Me;if(dt){we&&Xe&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Pe,Z,Ct.width,Ct.height);for(let Te=0;Te<6;Te++){Me=We[Te].mipmaps;for(let Be=0;Be<Me.length;Be++){const vt=Me[Be];U.format!==jr?gt!==null?we?q&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Be,0,0,vt.width,vt.height,gt,vt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Be,Z,vt.width,vt.height,0,vt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):we?q&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Be,0,0,vt.width,vt.height,gt,Ze,vt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Be,Z,vt.width,vt.height,0,gt,Ze,vt.data)}}}else{if(Me=U.mipmaps,we&&Xe){Me.length>0&&Pe++;const Te=ze(We[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,Pe,Z,Te.width,Te.height)}for(let Te=0;Te<6;Te++)if(Ie){we?q&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,We[Te].width,We[Te].height,gt,Ze,We[Te].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,Z,We[Te].width,We[Te].height,0,gt,Ze,We[Te].data);for(let Be=0;Be<Me.length;Be++){const Tt=Me[Be].image[Te].image;we?q&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Be+1,0,0,Tt.width,Tt.height,gt,Ze,Tt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Be+1,Z,Tt.width,Tt.height,0,gt,Ze,Tt.data)}}else{we?q&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,gt,Ze,We[Te]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,Z,gt,Ze,We[Te]);for(let Be=0;Be<Me.length;Be++){const vt=Me[Be];we?q&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Be+1,0,0,gt,Ze,vt.image[Te]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Be+1,Z,gt,Ze,vt.image[Te])}}}x(U)&&y(t.TEXTURE_CUBE_MAP),he.__version=se.version,U.onUpdate&&U.onUpdate(U)}V.__version=U.version}function _e(V,U,le,ee,se,he){const je=o.convert(le.format,le.colorSpace),Ee=o.convert(le.type),Oe=_(le.internalFormat,je,Ee,le.colorSpace);if(!r.get(U).__hasExternalTextures){const Ie=Math.max(1,U.width>>he),We=Math.max(1,U.height>>he);se===t.TEXTURE_3D||se===t.TEXTURE_2D_ARRAY?n.texImage3D(se,he,Oe,Ie,We,U.depth,0,je,Ee,null):n.texImage2D(se,he,Oe,Ie,We,0,je,Ee,null)}n.bindFramebuffer(t.FRAMEBUFFER,V),ye(U)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,ee,se,r.get(le).__webglTexture,0,ke(U)):(se===t.TEXTURE_2D||se>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&se<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,ee,se,r.get(le).__webglTexture,he),n.bindFramebuffer(t.FRAMEBUFFER,null)}function Re(V,U,le){if(t.bindRenderbuffer(t.RENDERBUFFER,V),U.depthBuffer){const ee=U.depthTexture,se=ee&&ee.isDepthTexture?ee.type:null,he=w(U.stencilBuffer,se),je=U.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ee=ke(U);ye(U)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Ee,he,U.width,U.height):le?t.renderbufferStorageMultisample(t.RENDERBUFFER,Ee,he,U.width,U.height):t.renderbufferStorage(t.RENDERBUFFER,he,U.width,U.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,je,t.RENDERBUFFER,V)}else{const ee=U.textures;for(let se=0;se<ee.length;se++){const he=ee[se],je=o.convert(he.format,he.colorSpace),Ee=o.convert(he.type),Oe=_(he.internalFormat,je,Ee,he.colorSpace),dt=ke(U);le&&ye(U)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,dt,Oe,U.width,U.height):ye(U)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,dt,Oe,U.width,U.height):t.renderbufferStorage(t.RENDERBUFFER,Oe,U.width,U.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function Ae(V,U){if(U&&U.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,V),!(U.depthTexture&&U.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(U.depthTexture).__webglTexture||U.depthTexture.image.width!==U.width||U.depthTexture.image.height!==U.height)&&(U.depthTexture.image.width=U.width,U.depthTexture.image.height=U.height,U.depthTexture.needsUpdate=!0),Y(U.depthTexture,0);const ee=r.get(U.depthTexture).__webglTexture,se=ke(U);if(U.depthTexture.format===wc)ye(U)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ee,0,se):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ee,0);else if(U.depthTexture.format===Uc)ye(U)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ee,0,se):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ee,0);else throw new Error("Unknown depthTexture format")}function qe(V){const U=r.get(V),le=V.isWebGLCubeRenderTarget===!0;if(U.__boundDepthTexture!==V.depthTexture){const ee=V.depthTexture;if(U.__depthDisposeCallback&&U.__depthDisposeCallback(),ee){const se=()=>{delete U.__boundDepthTexture,delete U.__depthDisposeCallback,ee.removeEventListener("dispose",se)};ee.addEventListener("dispose",se),U.__depthDisposeCallback=se}U.__boundDepthTexture=ee}if(V.depthTexture&&!U.__autoAllocateDepthBuffer){if(le)throw new Error("target.depthTexture not supported in Cube render targets");Ae(U.__webglFramebuffer,V)}else if(le){U.__webglDepthbuffer=[];for(let ee=0;ee<6;ee++)if(n.bindFramebuffer(t.FRAMEBUFFER,U.__webglFramebuffer[ee]),U.__webglDepthbuffer[ee]===void 0)U.__webglDepthbuffer[ee]=t.createRenderbuffer(),Re(U.__webglDepthbuffer[ee],V,!1);else{const se=V.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,he=U.__webglDepthbuffer[ee];t.bindRenderbuffer(t.RENDERBUFFER,he),t.framebufferRenderbuffer(t.FRAMEBUFFER,se,t.RENDERBUFFER,he)}}else if(n.bindFramebuffer(t.FRAMEBUFFER,U.__webglFramebuffer),U.__webglDepthbuffer===void 0)U.__webglDepthbuffer=t.createRenderbuffer(),Re(U.__webglDepthbuffer,V,!1);else{const ee=V.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,se=U.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,se),t.framebufferRenderbuffer(t.FRAMEBUFFER,ee,t.RENDERBUFFER,se)}n.bindFramebuffer(t.FRAMEBUFFER,null)}function ut(V,U,le){const ee=r.get(V);U!==void 0&&_e(ee.__webglFramebuffer,V,V.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),le!==void 0&&qe(V)}function Ye(V){const U=V.texture,le=r.get(V),ee=r.get(U);V.addEventListener("dispose",C);const se=V.textures,he=V.isWebGLCubeRenderTarget===!0,je=se.length>1;if(je||(ee.__webglTexture===void 0&&(ee.__webglTexture=t.createTexture()),ee.__version=U.version,s.memory.textures++),he){le.__webglFramebuffer=[];for(let Ee=0;Ee<6;Ee++)if(U.mipmaps&&U.mipmaps.length>0){le.__webglFramebuffer[Ee]=[];for(let Oe=0;Oe<U.mipmaps.length;Oe++)le.__webglFramebuffer[Ee][Oe]=t.createFramebuffer()}else le.__webglFramebuffer[Ee]=t.createFramebuffer()}else{if(U.mipmaps&&U.mipmaps.length>0){le.__webglFramebuffer=[];for(let Ee=0;Ee<U.mipmaps.length;Ee++)le.__webglFramebuffer[Ee]=t.createFramebuffer()}else le.__webglFramebuffer=t.createFramebuffer();if(je)for(let Ee=0,Oe=se.length;Ee<Oe;Ee++){const dt=r.get(se[Ee]);dt.__webglTexture===void 0&&(dt.__webglTexture=t.createTexture(),s.memory.textures++)}if(V.samples>0&&ye(V)===!1){le.__webglMultisampledFramebuffer=t.createFramebuffer(),le.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,le.__webglMultisampledFramebuffer);for(let Ee=0;Ee<se.length;Ee++){const Oe=se[Ee];le.__webglColorRenderbuffer[Ee]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,le.__webglColorRenderbuffer[Ee]);const dt=o.convert(Oe.format,Oe.colorSpace),Ie=o.convert(Oe.type),We=_(Oe.internalFormat,dt,Ie,Oe.colorSpace,V.isXRRenderTarget===!0),Ct=ke(V);t.renderbufferStorageMultisample(t.RENDERBUFFER,Ct,We,V.width,V.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ee,t.RENDERBUFFER,le.__webglColorRenderbuffer[Ee])}t.bindRenderbuffer(t.RENDERBUFFER,null),V.depthBuffer&&(le.__webglDepthRenderbuffer=t.createRenderbuffer(),Re(le.__webglDepthRenderbuffer,V,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(he){n.bindTexture(t.TEXTURE_CUBE_MAP,ee.__webglTexture),ne(t.TEXTURE_CUBE_MAP,U);for(let Ee=0;Ee<6;Ee++)if(U.mipmaps&&U.mipmaps.length>0)for(let Oe=0;Oe<U.mipmaps.length;Oe++)_e(le.__webglFramebuffer[Ee][Oe],V,U,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,Oe);else _e(le.__webglFramebuffer[Ee],V,U,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,0);x(U)&&y(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(je){for(let Ee=0,Oe=se.length;Ee<Oe;Ee++){const dt=se[Ee],Ie=r.get(dt);n.bindTexture(t.TEXTURE_2D,Ie.__webglTexture),ne(t.TEXTURE_2D,dt),_e(le.__webglFramebuffer,V,dt,t.COLOR_ATTACHMENT0+Ee,t.TEXTURE_2D,0),x(dt)&&y(t.TEXTURE_2D)}n.unbindTexture()}else{let Ee=t.TEXTURE_2D;if((V.isWebGL3DRenderTarget||V.isWebGLArrayRenderTarget)&&(Ee=V.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(Ee,ee.__webglTexture),ne(Ee,U),U.mipmaps&&U.mipmaps.length>0)for(let Oe=0;Oe<U.mipmaps.length;Oe++)_e(le.__webglFramebuffer[Oe],V,U,t.COLOR_ATTACHMENT0,Ee,Oe);else _e(le.__webglFramebuffer,V,U,t.COLOR_ATTACHMENT0,Ee,0);x(U)&&y(Ee),n.unbindTexture()}V.depthBuffer&&qe(V)}function Ve(V){const U=V.textures;for(let le=0,ee=U.length;le<ee;le++){const se=U[le];if(x(se)){const he=V.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,je=r.get(se).__webglTexture;n.bindTexture(he,je),y(he),n.unbindTexture()}}}const B=[],me=[];function be(V){if(V.samples>0){if(ye(V)===!1){const U=V.textures,le=V.width,ee=V.height;let se=t.COLOR_BUFFER_BIT;const he=V.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,je=r.get(V),Ee=U.length>1;if(Ee)for(let Oe=0;Oe<U.length;Oe++)n.bindFramebuffer(t.FRAMEBUFFER,je.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Oe,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,je.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Oe,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,je.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,je.__webglFramebuffer);for(let Oe=0;Oe<U.length;Oe++){if(V.resolveDepthBuffer&&(V.depthBuffer&&(se|=t.DEPTH_BUFFER_BIT),V.stencilBuffer&&V.resolveStencilBuffer&&(se|=t.STENCIL_BUFFER_BIT)),Ee){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,je.__webglColorRenderbuffer[Oe]);const dt=r.get(U[Oe]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,dt,0)}t.blitFramebuffer(0,0,le,ee,0,0,le,ee,se,t.NEAREST),l===!0&&(B.length=0,me.length=0,B.push(t.COLOR_ATTACHMENT0+Oe),V.depthBuffer&&V.resolveDepthBuffer===!1&&(B.push(he),me.push(he),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,me)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,B))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Ee)for(let Oe=0;Oe<U.length;Oe++){n.bindFramebuffer(t.FRAMEBUFFER,je.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Oe,t.RENDERBUFFER,je.__webglColorRenderbuffer[Oe]);const dt=r.get(U[Oe]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,je.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Oe,t.TEXTURE_2D,dt,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,je.__webglMultisampledFramebuffer)}else if(V.depthBuffer&&V.resolveDepthBuffer===!1&&l){const U=V.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[U])}}}function ke(V){return Math.min(i.maxSamples,V.samples)}function ye(V){const U=r.get(V);return V.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&U.__useRenderToTexture!==!1}function $e(V){const U=s.render.frame;u.get(V)!==U&&(u.set(V,U),V.update())}function Ne(V,U){const le=V.colorSpace,ee=V.format,se=V.type;return V.isCompressedTexture===!0||V.isVideoTexture===!0||le!==Oa&&le!==aa&&(Kt.getTransfer(le)===hn?(ee!==jr||se!==Wo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",le)),U}function ze(V){return typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement?(c.width=V.naturalWidth||V.width,c.height=V.naturalHeight||V.height):typeof VideoFrame<"u"&&V instanceof VideoFrame?(c.width=V.displayWidth,c.height=V.displayHeight):(c.width=V.width,c.height=V.height),c}this.allocateTextureUnit=H,this.resetTextureUnits=L,this.setTexture2D=Y,this.setTexture2DArray=K,this.setTexture3D=J,this.setTextureCube=Q,this.rebindTextures=ut,this.setupRenderTarget=Ye,this.updateRenderTargetMipmap=Ve,this.updateMultisampleRenderTarget=be,this.setupDepthRenderbuffer=qe,this.setupFrameBufferTexture=_e,this.useMultisampledRTT=ye}function PU(t,e){function n(r,i=aa){let o;const s=Kt.getTransfer(i);if(r===Wo)return t.UNSIGNED_BYTE;if(r===Zx)return t.UNSIGNED_SHORT_4_4_4_4;if(r===Jx)return t.UNSIGNED_SHORT_5_5_5_1;if(r===lT)return t.UNSIGNED_INT_5_9_9_9_REV;if(r===sT)return t.BYTE;if(r===aT)return t.SHORT;if(r===Vf)return t.UNSIGNED_SHORT;if(r===Kx)return t.INT;if(r===Ta)return t.UNSIGNED_INT;if(r===Si)return t.FLOAT;if(r===cd)return t.HALF_FLOAT;if(r===cT)return t.ALPHA;if(r===uT)return t.RGB;if(r===jr)return t.RGBA;if(r===fT)return t.LUMINANCE;if(r===dT)return t.LUMINANCE_ALPHA;if(r===wc)return t.DEPTH_COMPONENT;if(r===Uc)return t.DEPTH_STENCIL;if(r===Qx)return t.RED;if(r===lm)return t.RED_INTEGER;if(r===hT)return t.RG;if(r===e1)return t.RG_INTEGER;if(r===t1)return t.RGBA_INTEGER;if(r===$h||r===Wh||r===jh||r===Gh)if(s===hn)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(r===$h)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===Wh)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===jh)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Gh)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(r===$h)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Wh)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===jh)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Gh)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===uv||r===fv||r===dv||r===hv)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(r===uv)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===fv)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===dv)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===hv)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===pv||r===mv||r===gv)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(r===pv||r===mv)return s===hn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(r===gv)return s===hn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===yv||r===vv||r===xv||r===_v||r===Sv||r===wv||r===bv||r===Ev||r===Mv||r===Tv||r===Cv||r===Av||r===Pv||r===Rv)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(r===yv)return s===hn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===vv)return s===hn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===xv)return s===hn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===_v)return s===hn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===Sv)return s===hn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===wv)return s===hn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===bv)return s===hn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===Ev)return s===hn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===Mv)return s===hn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===Tv)return s===hn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===Cv)return s===hn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===Av)return s===hn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===Pv)return s===hn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===Rv)return s===hn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===Xh||r===Iv||r===Ov)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(r===Xh)return s===hn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===Iv)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===Ov)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===pT||r===Lv||r===kv||r===Nv)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(r===Xh)return o.COMPRESSED_RED_RGTC1_EXT;if(r===Lv)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===kv)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===Nv)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Dc?t.UNSIGNED_INT_24_8:t[r]!==void 0?t[r]:null}return{convert:n}}class RU extends Tn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let gf=class extends jt{constructor(){super(),this.isGroup=!0,this.type="Group"}};const Hq={type:"move"};class qS{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new gf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new gf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new z),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new gf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new z),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,o=null,s=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){s=!0;for(const v of e.hand.values()){const x=n.getJointPose(v,r),y=this._getHandJoint(c,v);x!==null&&(y.matrix.fromArray(x.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,y.jointRadius=x.radius),y.visible=x!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],p=u.position.distanceTo(d.position),m=.02,g=.005;c.inputState.pinching&&p>m+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=n.getPose(e.gripSpace,r),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&o!==null&&(i=o),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Hq)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=o!==null),c!==null&&(c.visible=s!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new gf;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}const Vq=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,$q=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Wq{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const i=new Nn,o=e.properties.get(i);o.__webglTexture=n.texture,(n.depthNear!=r.depthNear||n.depthFar!=r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,r=new _o({vertexShader:Vq,fragmentShader:$q,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new On(new ud(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class jq extends Ko{constructor(e,n){super();const r=this;let i=null,o=1,s=null,a="local-floor",l=1,c=null,u=null,d=null,p=null,m=null,g=null;const v=new Wq,x=n.getContextAttributes();let y=null,_=null;const w=[],M=[],A=new Se;let C=null;const P=new Tn;P.layers.enable(1),P.viewport=new Bt;const N=new Tn;N.layers.enable(2),N.viewport=new Bt;const O=[P,N],E=new RU;E.layers.enable(1),E.layers.enable(2);let L=null,H=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ae){let _e=w[ae];return _e===void 0&&(_e=new qS,w[ae]=_e),_e.getTargetRaySpace()},this.getControllerGrip=function(ae){let _e=w[ae];return _e===void 0&&(_e=new qS,w[ae]=_e),_e.getGripSpace()},this.getHand=function(ae){let _e=w[ae];return _e===void 0&&(_e=new qS,w[ae]=_e),_e.getHandSpace()};function W(ae){const _e=M.indexOf(ae.inputSource);if(_e===-1)return;const Re=w[_e];Re!==void 0&&(Re.update(ae.inputSource,ae.frame,c||s),Re.dispatchEvent({type:ae.type,data:ae.inputSource}))}function Y(){i.removeEventListener("select",W),i.removeEventListener("selectstart",W),i.removeEventListener("selectend",W),i.removeEventListener("squeeze",W),i.removeEventListener("squeezestart",W),i.removeEventListener("squeezeend",W),i.removeEventListener("end",Y),i.removeEventListener("inputsourceschange",K);for(let ae=0;ae<w.length;ae++){const _e=M[ae];_e!==null&&(M[ae]=null,w[ae].disconnect(_e))}L=null,H=null,v.reset(),e.setRenderTarget(y),m=null,p=null,d=null,i=null,_=null,De.stop(),r.isPresenting=!1,e.setPixelRatio(C),e.setSize(A.width,A.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ae){o=ae,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ae){a=ae,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||s},this.setReferenceSpace=function(ae){c=ae},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return d},this.getFrame=function(){return g},this.getSession=function(){return i},this.setSession=async function(ae){if(i=ae,i!==null){if(y=e.getRenderTarget(),i.addEventListener("select",W),i.addEventListener("selectstart",W),i.addEventListener("selectend",W),i.addEventListener("squeeze",W),i.addEventListener("squeezestart",W),i.addEventListener("squeezeend",W),i.addEventListener("end",Y),i.addEventListener("inputsourceschange",K),x.xrCompatible!==!0&&await n.makeXRCompatible(),C=e.getPixelRatio(),e.getSize(A),i.renderState.layers===void 0){const _e={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:o};m=new XRWebGLLayer(i,n,_e),i.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),_=new jo(m.framebufferWidth,m.framebufferHeight,{format:jr,type:Wo,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})}else{let _e=null,Re=null,Ae=null;x.depth&&(Ae=x.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,_e=x.stencil?Uc:wc,Re=x.stencil?Dc:Ta);const qe={colorFormat:n.RGBA8,depthFormat:Ae,scaleFactor:o};d=new XRWebGLBinding(i,n),p=d.createProjectionLayer(qe),i.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),_=new jo(p.textureWidth,p.textureHeight,{format:jr,type:Wo,depthTexture:new wT(p.textureWidth,p.textureHeight,Re,void 0,void 0,void 0,void 0,void 0,void 0,_e),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1})}_.isXRRenderTarget=!0,this.setFoveation(l),c=null,s=await i.requestReferenceSpace(a),De.setContext(i),De.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};function K(ae){for(let _e=0;_e<ae.removed.length;_e++){const Re=ae.removed[_e],Ae=M.indexOf(Re);Ae>=0&&(M[Ae]=null,w[Ae].disconnect(Re))}for(let _e=0;_e<ae.added.length;_e++){const Re=ae.added[_e];let Ae=M.indexOf(Re);if(Ae===-1){for(let ut=0;ut<w.length;ut++)if(ut>=M.length){M.push(Re),Ae=ut;break}else if(M[ut]===null){M[ut]=Re,Ae=ut;break}if(Ae===-1)break}const qe=w[Ae];qe&&qe.connect(Re)}}const J=new z,Q=new z;function D(ae,_e,Re){J.setFromMatrixPosition(_e.matrixWorld),Q.setFromMatrixPosition(Re.matrixWorld);const Ae=J.distanceTo(Q),qe=_e.projectionMatrix.elements,ut=Re.projectionMatrix.elements,Ye=qe[14]/(qe[10]-1),Ve=qe[14]/(qe[10]+1),B=(qe[9]+1)/qe[5],me=(qe[9]-1)/qe[5],be=(qe[8]-1)/qe[0],ke=(ut[8]+1)/ut[0],ye=Ye*be,$e=Ye*ke,Ne=Ae/(-be+ke),ze=Ne*-be;if(_e.matrixWorld.decompose(ae.position,ae.quaternion,ae.scale),ae.translateX(ze),ae.translateZ(Ne),ae.matrixWorld.compose(ae.position,ae.quaternion,ae.scale),ae.matrixWorldInverse.copy(ae.matrixWorld).invert(),qe[10]===-1)ae.projectionMatrix.copy(_e.projectionMatrix),ae.projectionMatrixInverse.copy(_e.projectionMatrixInverse);else{const V=Ye+Ne,U=Ve+Ne,le=ye-ze,ee=$e+(Ae-ze),se=B*Ve/U*V,he=me*Ve/U*V;ae.projectionMatrix.makePerspective(le,ee,se,he,V,U),ae.projectionMatrixInverse.copy(ae.projectionMatrix).invert()}}function G(ae,_e){_e===null?ae.matrixWorld.copy(ae.matrix):ae.matrixWorld.multiplyMatrices(_e.matrixWorld,ae.matrix),ae.matrixWorldInverse.copy(ae.matrixWorld).invert()}this.updateCamera=function(ae){if(i===null)return;let _e=ae.near,Re=ae.far;v.texture!==null&&(v.depthNear>0&&(_e=v.depthNear),v.depthFar>0&&(Re=v.depthFar)),E.near=N.near=P.near=_e,E.far=N.far=P.far=Re,(L!==E.near||H!==E.far)&&(i.updateRenderState({depthNear:E.near,depthFar:E.far}),L=E.near,H=E.far);const Ae=ae.parent,qe=E.cameras;G(E,Ae);for(let ut=0;ut<qe.length;ut++)G(qe[ut],Ae);qe.length===2?D(E,P,N):E.projectionMatrix.copy(P.projectionMatrix),X(ae,E,Ae)};function X(ae,_e,Re){Re===null?ae.matrix.copy(_e.matrixWorld):(ae.matrix.copy(Re.matrixWorld),ae.matrix.invert(),ae.matrix.multiply(_e.matrixWorld)),ae.matrix.decompose(ae.position,ae.quaternion,ae.scale),ae.updateMatrixWorld(!0),ae.projectionMatrix.copy(_e.projectionMatrix),ae.projectionMatrixInverse.copy(_e.projectionMatrixInverse),ae.isPerspectiveCamera&&(ae.fov=$f*2*Math.atan(1/ae.projectionMatrix.elements[5]),ae.zoom=1)}this.getCamera=function(){return E},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(ae){l=ae,p!==null&&(p.fixedFoveation=ae),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=ae)},this.hasDepthSensing=function(){return v.texture!==null},this.getDepthSensingMesh=function(){return v.getMesh(E)};let ne=null;function pe(ae,_e){if(u=_e.getViewerPose(c||s),g=_e,u!==null){const Re=u.views;m!==null&&(e.setRenderTargetFramebuffer(_,m.framebuffer),e.setRenderTarget(_));let Ae=!1;Re.length!==E.cameras.length&&(E.cameras.length=0,Ae=!0);for(let ut=0;ut<Re.length;ut++){const Ye=Re[ut];let Ve=null;if(m!==null)Ve=m.getViewport(Ye);else{const me=d.getViewSubImage(p,Ye);Ve=me.viewport,ut===0&&(e.setRenderTargetTextures(_,me.colorTexture,p.ignoreDepthValues?void 0:me.depthStencilTexture),e.setRenderTarget(_))}let B=O[ut];B===void 0&&(B=new Tn,B.layers.enable(ut),B.viewport=new Bt,O[ut]=B),B.matrix.fromArray(Ye.transform.matrix),B.matrix.decompose(B.position,B.quaternion,B.scale),B.projectionMatrix.fromArray(Ye.projectionMatrix),B.projectionMatrixInverse.copy(B.projectionMatrix).invert(),B.viewport.set(Ve.x,Ve.y,Ve.width,Ve.height),ut===0&&(E.matrix.copy(B.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),Ae===!0&&E.cameras.push(B)}const qe=i.enabledFeatures;if(qe&&qe.includes("depth-sensing")){const ut=d.getDepthInformation(Re[0]);ut&&ut.isValid&&ut.texture&&v.init(e,ut,i.renderState)}}for(let Re=0;Re<w.length;Re++){const Ae=M[Re],qe=w[Re];Ae!==null&&qe!==void 0&&qe.update(Ae,_e,c||s)}ne&&ne(ae,_e),_e.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:_e}),g=null}const De=new EU;De.setAnimationLoop(pe),this.setAnimationLoop=function(ae){ne=ae},this.dispose=function(){}}}const Kl=new Ai,Gq=new St;function Xq(t,e){function n(x,y){x.matrixAutoUpdate===!0&&x.updateMatrix(),y.value.copy(x.matrix)}function r(x,y){y.color.getRGB(x.fogColor.value,SU(t)),y.isFog?(x.fogNear.value=y.near,x.fogFar.value=y.far):y.isFogExp2&&(x.fogDensity.value=y.density)}function i(x,y,_,w,M){y.isMeshBasicMaterial||y.isMeshLambertMaterial?o(x,y):y.isMeshToonMaterial?(o(x,y),d(x,y)):y.isMeshPhongMaterial?(o(x,y),u(x,y)):y.isMeshStandardMaterial?(o(x,y),p(x,y),y.isMeshPhysicalMaterial&&m(x,y,M)):y.isMeshMatcapMaterial?(o(x,y),g(x,y)):y.isMeshDepthMaterial?o(x,y):y.isMeshDistanceMaterial?(o(x,y),v(x,y)):y.isMeshNormalMaterial?o(x,y):y.isLineBasicMaterial?(s(x,y),y.isLineDashedMaterial&&a(x,y)):y.isPointsMaterial?l(x,y,_,w):y.isSpriteMaterial?c(x,y):y.isShadowMaterial?(x.color.value.copy(y.color),x.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function o(x,y){x.opacity.value=y.opacity,y.color&&x.diffuse.value.copy(y.color),y.emissive&&x.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(x.map.value=y.map,n(y.map,x.mapTransform)),y.alphaMap&&(x.alphaMap.value=y.alphaMap,n(y.alphaMap,x.alphaMapTransform)),y.bumpMap&&(x.bumpMap.value=y.bumpMap,n(y.bumpMap,x.bumpMapTransform),x.bumpScale.value=y.bumpScale,y.side===li&&(x.bumpScale.value*=-1)),y.normalMap&&(x.normalMap.value=y.normalMap,n(y.normalMap,x.normalMapTransform),x.normalScale.value.copy(y.normalScale),y.side===li&&x.normalScale.value.negate()),y.displacementMap&&(x.displacementMap.value=y.displacementMap,n(y.displacementMap,x.displacementMapTransform),x.displacementScale.value=y.displacementScale,x.displacementBias.value=y.displacementBias),y.emissiveMap&&(x.emissiveMap.value=y.emissiveMap,n(y.emissiveMap,x.emissiveMapTransform)),y.specularMap&&(x.specularMap.value=y.specularMap,n(y.specularMap,x.specularMapTransform)),y.alphaTest>0&&(x.alphaTest.value=y.alphaTest);const _=e.get(y),w=_.envMap,M=_.envMapRotation;w&&(x.envMap.value=w,Kl.copy(M),Kl.x*=-1,Kl.y*=-1,Kl.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(Kl.y*=-1,Kl.z*=-1),x.envMapRotation.value.setFromMatrix4(Gq.makeRotationFromEuler(Kl)),x.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=y.reflectivity,x.ior.value=y.ior,x.refractionRatio.value=y.refractionRatio),y.lightMap&&(x.lightMap.value=y.lightMap,x.lightMapIntensity.value=y.lightMapIntensity,n(y.lightMap,x.lightMapTransform)),y.aoMap&&(x.aoMap.value=y.aoMap,x.aoMapIntensity.value=y.aoMapIntensity,n(y.aoMap,x.aoMapTransform))}function s(x,y){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity,y.map&&(x.map.value=y.map,n(y.map,x.mapTransform))}function a(x,y){x.dashSize.value=y.dashSize,x.totalSize.value=y.dashSize+y.gapSize,x.scale.value=y.scale}function l(x,y,_,w){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity,x.size.value=y.size*_,x.scale.value=w*.5,y.map&&(x.map.value=y.map,n(y.map,x.uvTransform)),y.alphaMap&&(x.alphaMap.value=y.alphaMap,n(y.alphaMap,x.alphaMapTransform)),y.alphaTest>0&&(x.alphaTest.value=y.alphaTest)}function c(x,y){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity,x.rotation.value=y.rotation,y.map&&(x.map.value=y.map,n(y.map,x.mapTransform)),y.alphaMap&&(x.alphaMap.value=y.alphaMap,n(y.alphaMap,x.alphaMapTransform)),y.alphaTest>0&&(x.alphaTest.value=y.alphaTest)}function u(x,y){x.specular.value.copy(y.specular),x.shininess.value=Math.max(y.shininess,1e-4)}function d(x,y){y.gradientMap&&(x.gradientMap.value=y.gradientMap)}function p(x,y){x.metalness.value=y.metalness,y.metalnessMap&&(x.metalnessMap.value=y.metalnessMap,n(y.metalnessMap,x.metalnessMapTransform)),x.roughness.value=y.roughness,y.roughnessMap&&(x.roughnessMap.value=y.roughnessMap,n(y.roughnessMap,x.roughnessMapTransform)),y.envMap&&(x.envMapIntensity.value=y.envMapIntensity)}function m(x,y,_){x.ior.value=y.ior,y.sheen>0&&(x.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),x.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(x.sheenColorMap.value=y.sheenColorMap,n(y.sheenColorMap,x.sheenColorMapTransform)),y.sheenRoughnessMap&&(x.sheenRoughnessMap.value=y.sheenRoughnessMap,n(y.sheenRoughnessMap,x.sheenRoughnessMapTransform))),y.clearcoat>0&&(x.clearcoat.value=y.clearcoat,x.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(x.clearcoatMap.value=y.clearcoatMap,n(y.clearcoatMap,x.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,n(y.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(x.clearcoatNormalMap.value=y.clearcoatNormalMap,n(y.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),y.side===li&&x.clearcoatNormalScale.value.negate())),y.dispersion>0&&(x.dispersion.value=y.dispersion),y.iridescence>0&&(x.iridescence.value=y.iridescence,x.iridescenceIOR.value=y.iridescenceIOR,x.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(x.iridescenceMap.value=y.iridescenceMap,n(y.iridescenceMap,x.iridescenceMapTransform)),y.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=y.iridescenceThicknessMap,n(y.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),y.transmission>0&&(x.transmission.value=y.transmission,x.transmissionSamplerMap.value=_.texture,x.transmissionSamplerSize.value.set(_.width,_.height),y.transmissionMap&&(x.transmissionMap.value=y.transmissionMap,n(y.transmissionMap,x.transmissionMapTransform)),x.thickness.value=y.thickness,y.thicknessMap&&(x.thicknessMap.value=y.thicknessMap,n(y.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=y.attenuationDistance,x.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(x.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(x.anisotropyMap.value=y.anisotropyMap,n(y.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=y.specularIntensity,x.specularColor.value.copy(y.specularColor),y.specularColorMap&&(x.specularColorMap.value=y.specularColorMap,n(y.specularColorMap,x.specularColorMapTransform)),y.specularIntensityMap&&(x.specularIntensityMap.value=y.specularIntensityMap,n(y.specularIntensityMap,x.specularIntensityMapTransform))}function g(x,y){y.matcap&&(x.matcap.value=y.matcap)}function v(x,y){const _=e.get(y).light;x.referencePosition.value.setFromMatrixPosition(_.matrixWorld),x.nearDistance.value=_.shadow.camera.near,x.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function Yq(t,e,n,r){let i={},o={},s=[];const a=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(_,w){const M=w.program;r.uniformBlockBinding(_,M)}function c(_,w){let M=i[_.id];M===void 0&&(g(_),M=u(_),i[_.id]=M,_.addEventListener("dispose",x));const A=w.program;r.updateUBOMapping(_,A);const C=e.render.frame;o[_.id]!==C&&(p(_),o[_.id]=C)}function u(_){const w=d();_.__bindingPointIndex=w;const M=t.createBuffer(),A=_.__size,C=_.usage;return t.bindBuffer(t.UNIFORM_BUFFER,M),t.bufferData(t.UNIFORM_BUFFER,A,C),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,w,M),M}function d(){for(let _=0;_<a;_++)if(s.indexOf(_)===-1)return s.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(_){const w=i[_.id],M=_.uniforms,A=_.__cache;t.bindBuffer(t.UNIFORM_BUFFER,w);for(let C=0,P=M.length;C<P;C++){const N=Array.isArray(M[C])?M[C]:[M[C]];for(let O=0,E=N.length;O<E;O++){const L=N[O];if(m(L,C,O,A)===!0){const H=L.__offset,W=Array.isArray(L.value)?L.value:[L.value];let Y=0;for(let K=0;K<W.length;K++){const J=W[K],Q=v(J);typeof J=="number"||typeof J=="boolean"?(L.__data[0]=J,t.bufferSubData(t.UNIFORM_BUFFER,H+Y,L.__data)):J.isMatrix3?(L.__data[0]=J.elements[0],L.__data[1]=J.elements[1],L.__data[2]=J.elements[2],L.__data[3]=0,L.__data[4]=J.elements[3],L.__data[5]=J.elements[4],L.__data[6]=J.elements[5],L.__data[7]=0,L.__data[8]=J.elements[6],L.__data[9]=J.elements[7],L.__data[10]=J.elements[8],L.__data[11]=0):(J.toArray(L.__data,Y),Y+=Q.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,H,L.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function m(_,w,M,A){const C=_.value,P=w+"_"+M;if(A[P]===void 0)return typeof C=="number"||typeof C=="boolean"?A[P]=C:A[P]=C.clone(),!0;{const N=A[P];if(typeof C=="number"||typeof C=="boolean"){if(N!==C)return A[P]=C,!0}else if(N.equals(C)===!1)return N.copy(C),!0}return!1}function g(_){const w=_.uniforms;let M=0;const A=16;for(let P=0,N=w.length;P<N;P++){const O=Array.isArray(w[P])?w[P]:[w[P]];for(let E=0,L=O.length;E<L;E++){const H=O[E],W=Array.isArray(H.value)?H.value:[H.value];for(let Y=0,K=W.length;Y<K;Y++){const J=W[Y],Q=v(J),D=M%A,G=D%Q.boundary,X=D+G;M+=G,X!==0&&A-X<Q.storage&&(M+=A-X),H.__data=new Float32Array(Q.storage/Float32Array.BYTES_PER_ELEMENT),H.__offset=M,M+=Q.storage}}}const C=M%A;return C>0&&(M+=A-C),_.__size=M,_.__cache={},this}function v(_){const w={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(w.boundary=4,w.storage=4):_.isVector2?(w.boundary=8,w.storage=8):_.isVector3||_.isColor?(w.boundary=16,w.storage=12):_.isVector4?(w.boundary=16,w.storage=16):_.isMatrix3?(w.boundary=48,w.storage=48):_.isMatrix4?(w.boundary=64,w.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),w}function x(_){const w=_.target;w.removeEventListener("dispose",x);const M=s.indexOf(w.__bindingPointIndex);s.splice(M,1),t.deleteBuffer(i[w.id]),delete i[w.id],delete o[w.id]}function y(){for(const _ in i)t.deleteBuffer(i[_]);s=[],i={},o={}}return{bind:l,update:c,dispose:y}}class IU{constructor(e={}){const{canvas:n=yU(),context:r=null,depth:i=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let p;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=r.getContextAttributes().alpha}else p=s;const m=new Uint32Array(4),g=new Int32Array(4);let v=null,x=null;const y=[],_=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ao,this.toneMapping=Os,this.toneMappingExposure=1;const w=this;let M=!1,A=0,C=0,P=null,N=-1,O=null;const E=new Bt,L=new Bt;let H=null;const W=new Je(0);let Y=0,K=n.width,J=n.height,Q=1,D=null,G=null;const X=new Bt(0,0,K,J),ne=new Bt(0,0,K,J);let pe=!1;const De=new dm;let ae=!1,_e=!1;const Re=new St,Ae=new z,qe=new Bt,ut={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ye=!1;function Ve(){return P===null?Q:1}let B=r;function me(F,re){return n.getContext(F,re)}try{const F={alpha:!0,depth:i,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${ad}`),n.addEventListener("webglcontextlost",Me,!1),n.addEventListener("webglcontextrestored",Te,!1),n.addEventListener("webglcontextcreationerror",Be,!1),B===null){const re="webgl2";if(B=me(re,F),B===null)throw me(re)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(F){throw console.error("THREE.WebGLRenderer: "+F.message),F}let be,ke,ye,$e,Ne,ze,V,U,le,ee,se,he,je,Ee,Oe,dt,Ie,We,Ct,gt,Ze,Z,we,Xe;function q(){be=new tY(B),be.init(),Z=new PU(B,be),ke=new qX(B,be,e,Z),ye=new kq(B),$e=new iY(B),Ne=new wq,ze=new Bq(B,be,ye,Ne,ke,Z,$e),V=new ZX(w),U=new eY(w),le=new fG(B),we=new XX(B,le),ee=new nY(B,le,$e,we),se=new sY(B,ee,le,$e),Ct=new oY(B,ke,ze),dt=new KX(Ne),he=new Sq(w,V,U,be,ke,we,dt),je=new Xq(w,Ne),Ee=new Eq,Oe=new Rq(be),We=new GX(w,V,U,ye,se,p,l),Ie=new Lq(w,se,ke),Xe=new Yq(B,$e,ke,ye),gt=new YX(B,be,$e),Ze=new rY(B,be,$e),$e.programs=he.programs,w.capabilities=ke,w.extensions=be,w.properties=Ne,w.renderLists=Ee,w.shadowMap=Ie,w.state=ye,w.info=$e}q();const Pe=new jq(w,B);this.xr=Pe,this.getContext=function(){return B},this.getContextAttributes=function(){return B.getContextAttributes()},this.forceContextLoss=function(){const F=be.get("WEBGL_lose_context");F&&F.loseContext()},this.forceContextRestore=function(){const F=be.get("WEBGL_lose_context");F&&F.restoreContext()},this.getPixelRatio=function(){return Q},this.setPixelRatio=function(F){F!==void 0&&(Q=F,this.setSize(K,J,!1))},this.getSize=function(F){return F.set(K,J)},this.setSize=function(F,re,ue=!0){if(Pe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}K=F,J=re,n.width=Math.floor(F*Q),n.height=Math.floor(re*Q),ue===!0&&(n.style.width=F+"px",n.style.height=re+"px"),this.setViewport(0,0,F,re)},this.getDrawingBufferSize=function(F){return F.set(K*Q,J*Q).floor()},this.setDrawingBufferSize=function(F,re,ue){K=F,J=re,Q=ue,n.width=Math.floor(F*ue),n.height=Math.floor(re*ue),this.setViewport(0,0,F,re)},this.getCurrentViewport=function(F){return F.copy(E)},this.getViewport=function(F){return F.copy(X)},this.setViewport=function(F,re,ue,fe){F.isVector4?X.set(F.x,F.y,F.z,F.w):X.set(F,re,ue,fe),ye.viewport(E.copy(X).multiplyScalar(Q).round())},this.getScissor=function(F){return F.copy(ne)},this.setScissor=function(F,re,ue,fe){F.isVector4?ne.set(F.x,F.y,F.z,F.w):ne.set(F,re,ue,fe),ye.scissor(L.copy(ne).multiplyScalar(Q).round())},this.getScissorTest=function(){return pe},this.setScissorTest=function(F){ye.setScissorTest(pe=F)},this.setOpaqueSort=function(F){D=F},this.setTransparentSort=function(F){G=F},this.getClearColor=function(F){return F.copy(We.getClearColor())},this.setClearColor=function(){We.setClearColor.apply(We,arguments)},this.getClearAlpha=function(){return We.getClearAlpha()},this.setClearAlpha=function(){We.setClearAlpha.apply(We,arguments)},this.clear=function(F=!0,re=!0,ue=!0){let fe=0;if(F){let oe=!1;if(P!==null){const Fe=P.texture.format;oe=Fe===t1||Fe===e1||Fe===lm}if(oe){const Fe=P.texture.type,et=Fe===Wo||Fe===Ta||Fe===Vf||Fe===Dc||Fe===Zx||Fe===Jx,at=We.getClearColor(),rt=We.getClearAlpha(),yt=at.r,wt=at.g,ft=at.b;et?(m[0]=yt,m[1]=wt,m[2]=ft,m[3]=rt,B.clearBufferuiv(B.COLOR,0,m)):(g[0]=yt,g[1]=wt,g[2]=ft,g[3]=rt,B.clearBufferiv(B.COLOR,0,g))}else fe|=B.COLOR_BUFFER_BIT}re&&(fe|=B.DEPTH_BUFFER_BIT),ue&&(fe|=B.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),B.clear(fe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Me,!1),n.removeEventListener("webglcontextrestored",Te,!1),n.removeEventListener("webglcontextcreationerror",Be,!1),Ee.dispose(),Oe.dispose(),Ne.dispose(),V.dispose(),U.dispose(),se.dispose(),we.dispose(),Xe.dispose(),he.dispose(),Pe.dispose(),Pe.removeEventListener("sessionstart",lr),Pe.removeEventListener("sessionend",km),zs.stop()};function Me(F){F.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),M=!0}function Te(){console.log("THREE.WebGLRenderer: Context Restored."),M=!1;const F=$e.autoReset,re=Ie.enabled,ue=Ie.autoUpdate,fe=Ie.needsUpdate,oe=Ie.type;q(),$e.autoReset=F,Ie.enabled=re,Ie.autoUpdate=ue,Ie.needsUpdate=fe,Ie.type=oe}function Be(F){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",F.statusMessage)}function vt(F){const re=F.target;re.removeEventListener("dispose",vt),Tt(re)}function Tt(F){Vt(F),Ne.remove(F)}function Vt(F){const re=Ne.get(F).programs;re!==void 0&&(re.forEach(function(ue){he.releaseProgram(ue)}),F.isShaderMaterial&&he.releaseShaderCache(F))}this.renderBufferDirect=function(F,re,ue,fe,oe,Fe){re===null&&(re=ut);const et=oe.isMesh&&oe.matrixWorld.determinant()<0,at=H1(F,re,ue,fe,oe);ye.setMaterial(fe,et);let rt=ue.index,yt=1;if(fe.wireframe===!0){if(rt=ee.getWireframeAttribute(ue),rt===void 0)return;yt=2}const wt=ue.drawRange,ft=ue.attributes.position;let Gt=wt.start*yt,un=(wt.start+wt.count)*yt;Fe!==null&&(Gt=Math.max(Gt,Fe.start*yt),un=Math.min(un,(Fe.start+Fe.count)*yt)),rt!==null?(Gt=Math.max(Gt,0),un=Math.min(un,rt.count)):ft!=null&&(Gt=Math.max(Gt,0),un=Math.min(un,ft.count));const en=un-Gt;if(en<0||en===1/0)return;we.setup(oe,fe,at,ue,rt);let Un,mt=gt;if(rt!==null&&(Un=le.get(rt),mt=Ze,mt.setIndex(Un)),oe.isMesh)fe.wireframe===!0?(ye.setLineWidth(fe.wireframeLinewidth*Ve()),mt.setMode(B.LINES)):mt.setMode(B.TRIANGLES);else if(oe.isLine){let He=fe.linewidth;He===void 0&&(He=1),ye.setLineWidth(He*Ve()),oe.isLineSegments?mt.setMode(B.LINES):oe.isLineLoop?mt.setMode(B.LINE_LOOP):mt.setMode(B.LINE_STRIP)}else oe.isPoints?mt.setMode(B.POINTS):oe.isSprite&&mt.setMode(B.TRIANGLES);if(oe.isBatchedMesh)if(oe._multiDrawInstances!==null)mt.renderMultiDrawInstances(oe._multiDrawStarts,oe._multiDrawCounts,oe._multiDrawCount,oe._multiDrawInstances);else if(be.get("WEBGL_multi_draw"))mt.renderMultiDraw(oe._multiDrawStarts,oe._multiDrawCounts,oe._multiDrawCount);else{const He=oe._multiDrawStarts,fn=oe._multiDrawCounts,Et=oe._multiDrawCount,dn=rt?le.get(rt).bytesPerElement:1,di=Ne.get(fe).currentProgram.getUniforms();for(let qn=0;qn<Et;qn++)di.setValue(B,"_gl_DrawID",qn),mt.render(He[qn]/dn,fn[qn])}else if(oe.isInstancedMesh)mt.renderInstances(Gt,en,oe.count);else if(ue.isInstancedBufferGeometry){const He=ue._maxInstanceCount!==void 0?ue._maxInstanceCount:1/0,fn=Math.min(ue.instanceCount,He);mt.renderInstances(Gt,en,fn)}else mt.render(Gt,en)};function mn(F,re,ue){F.transparent===!0&&F.side===xi&&F.forceSinglePass===!1?(F.side=li,F.needsUpdate=!0,tu(F,re,ue),F.side=Ea,F.needsUpdate=!0,tu(F,re,ue),F.side=xi):tu(F,re,ue)}this.compile=function(F,re,ue=null){ue===null&&(ue=F),x=Oe.get(ue),x.init(re),_.push(x),ue.traverseVisible(function(oe){oe.isLight&&oe.layers.test(re.layers)&&(x.pushLight(oe),oe.castShadow&&x.pushShadow(oe))}),F!==ue&&F.traverseVisible(function(oe){oe.isLight&&oe.layers.test(re.layers)&&(x.pushLight(oe),oe.castShadow&&x.pushShadow(oe))}),x.setupLights();const fe=new Set;return F.traverse(function(oe){const Fe=oe.material;if(Fe)if(Array.isArray(Fe))for(let et=0;et<Fe.length;et++){const at=Fe[et];mn(at,ue,oe),fe.add(at)}else mn(Fe,ue,oe),fe.add(Fe)}),_.pop(),x=null,fe},this.compileAsync=function(F,re,ue=null){const fe=this.compile(F,re,ue);return new Promise(oe=>{function Fe(){if(fe.forEach(function(et){Ne.get(et).currentProgram.isReady()&&fe.delete(et)}),fe.size===0){oe(F);return}setTimeout(Fe,10)}be.get("KHR_parallel_shader_compile")!==null?Fe():setTimeout(Fe,10)})};let Dt=null;function ar(F){Dt&&Dt(F)}function lr(){zs.stop()}function km(){zs.start()}const zs=new EU;zs.setAnimationLoop(ar),typeof self<"u"&&zs.setContext(self),this.setAnimationLoop=function(F){Dt=F,Pe.setAnimationLoop(F),F===null?zs.stop():zs.start()},Pe.addEventListener("sessionstart",lr),Pe.addEventListener("sessionend",km),this.render=function(F,re){if(re!==void 0&&re.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(M===!0)return;if(F.matrixWorldAutoUpdate===!0&&F.updateMatrixWorld(),re.parent===null&&re.matrixWorldAutoUpdate===!0&&re.updateMatrixWorld(),Pe.enabled===!0&&Pe.isPresenting===!0&&(Pe.cameraAutoUpdate===!0&&Pe.updateCamera(re),re=Pe.getCamera()),F.isScene===!0&&F.onBeforeRender(w,F,re,P),x=Oe.get(F,_.length),x.init(re),_.push(x),Re.multiplyMatrices(re.projectionMatrix,re.matrixWorldInverse),De.setFromProjectionMatrix(Re),_e=this.localClippingEnabled,ae=dt.init(this.clippingPlanes,_e),v=Ee.get(F,y.length),v.init(),y.push(v),Pe.enabled===!0&&Pe.isPresenting===!0){const Fe=w.xr.getDepthSensingMesh();Fe!==null&&wd(Fe,re,-1/0,w.sortObjects)}wd(F,re,0,w.sortObjects),v.finish(),w.sortObjects===!0&&v.sort(D,G),Ye=Pe.enabled===!1||Pe.isPresenting===!1||Pe.hasDepthSensing()===!1,Ye&&We.addToRenderList(v,F),this.info.render.frame++,ae===!0&&dt.beginShadows();const ue=x.state.shadowsArray;Ie.render(ue,F,re),ae===!0&&dt.endShadows(),this.info.autoReset===!0&&this.info.reset();const fe=v.opaque,oe=v.transmissive;if(x.setupLights(),re.isArrayCamera){const Fe=re.cameras;if(oe.length>0)for(let et=0,at=Fe.length;et<at;et++){const rt=Fe[et];Qc(fe,oe,F,rt)}Ye&&We.render(F);for(let et=0,at=Fe.length;et<at;et++){const rt=Fe[et];bd(v,F,rt,rt.viewport)}}else oe.length>0&&Qc(fe,oe,F,re),Ye&&We.render(F),bd(v,F,re);P!==null&&(ze.updateMultisampleRenderTarget(P),ze.updateRenderTargetMipmap(P)),F.isScene===!0&&F.onAfterRender(w,F,re),we.resetDefaultState(),N=-1,O=null,_.pop(),_.length>0?(x=_[_.length-1],ae===!0&&dt.setGlobalState(w.clippingPlanes,x.state.camera)):x=null,y.pop(),y.length>0?v=y[y.length-1]:v=null};function wd(F,re,ue,fe){if(F.visible===!1)return;if(F.layers.test(re.layers)){if(F.isGroup)ue=F.renderOrder;else if(F.isLOD)F.autoUpdate===!0&&F.update(re);else if(F.isLight)x.pushLight(F),F.castShadow&&x.pushShadow(F);else if(F.isSprite){if(!F.frustumCulled||De.intersectsSprite(F)){fe&&qe.setFromMatrixPosition(F.matrixWorld).applyMatrix4(Re);const et=se.update(F),at=F.material;at.visible&&v.push(F,et,at,ue,qe.z,null)}}else if((F.isMesh||F.isLine||F.isPoints)&&(!F.frustumCulled||De.intersectsObject(F))){const et=se.update(F),at=F.material;if(fe&&(F.boundingSphere!==void 0?(F.boundingSphere===null&&F.computeBoundingSphere(),qe.copy(F.boundingSphere.center)):(et.boundingSphere===null&&et.computeBoundingSphere(),qe.copy(et.boundingSphere.center)),qe.applyMatrix4(F.matrixWorld).applyMatrix4(Re)),Array.isArray(at)){const rt=et.groups;for(let yt=0,wt=rt.length;yt<wt;yt++){const ft=rt[yt],Gt=at[ft.materialIndex];Gt&&Gt.visible&&v.push(F,et,Gt,ue,qe.z,ft)}}else at.visible&&v.push(F,et,at,ue,qe.z,null)}}const Fe=F.children;for(let et=0,at=Fe.length;et<at;et++)wd(Fe[et],re,ue,fe)}function bd(F,re,ue,fe){const oe=F.opaque,Fe=F.transmissive,et=F.transparent;x.setupLightsView(ue),ae===!0&&dt.setGlobalState(w.clippingPlanes,ue),fe&&ye.viewport(E.copy(fe)),oe.length>0&&eu(oe,re,ue),Fe.length>0&&eu(Fe,re,ue),et.length>0&&eu(et,re,ue),ye.buffers.depth.setTest(!0),ye.buffers.depth.setMask(!0),ye.buffers.color.setMask(!0),ye.setPolygonOffset(!1)}function Qc(F,re,ue,fe){if((ue.isScene===!0?ue.overrideMaterial:null)!==null)return;x.state.transmissionRenderTarget[fe.id]===void 0&&(x.state.transmissionRenderTarget[fe.id]=new jo(1,1,{generateMipmaps:!0,type:be.has("EXT_color_buffer_half_float")||be.has("EXT_color_buffer_float")?cd:Wo,minFilter:Es,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Kt.workingColorSpace}));const Fe=x.state.transmissionRenderTarget[fe.id],et=fe.viewport||E;Fe.setSize(et.z,et.w);const at=w.getRenderTarget();w.setRenderTarget(Fe),w.getClearColor(W),Y=w.getClearAlpha(),Y<1&&w.setClearColor(16777215,.5),w.clear(),Ye&&We.render(ue);const rt=w.toneMapping;w.toneMapping=Os;const yt=fe.viewport;if(fe.viewport!==void 0&&(fe.viewport=void 0),x.setupLightsView(fe),ae===!0&&dt.setGlobalState(w.clippingPlanes,fe),eu(F,ue,fe),ze.updateMultisampleRenderTarget(Fe),ze.updateRenderTargetMipmap(Fe),be.has("WEBGL_multisampled_render_to_texture")===!1){let wt=!1;for(let ft=0,Gt=re.length;ft<Gt;ft++){const un=re[ft],en=un.object,Un=un.geometry,mt=un.material,He=un.group;if(mt.side===xi&&en.layers.test(fe.layers)){const fn=mt.side;mt.side=li,mt.needsUpdate=!0,Na(en,ue,fe,Un,mt,He),mt.side=fn,mt.needsUpdate=!0,wt=!0}}wt===!0&&(ze.updateMultisampleRenderTarget(Fe),ze.updateRenderTargetMipmap(Fe))}w.setRenderTarget(at),w.setClearColor(W,Y),yt!==void 0&&(fe.viewport=yt),w.toneMapping=rt}function eu(F,re,ue){const fe=re.isScene===!0?re.overrideMaterial:null;for(let oe=0,Fe=F.length;oe<Fe;oe++){const et=F[oe],at=et.object,rt=et.geometry,yt=fe===null?et.material:fe,wt=et.group;at.layers.test(ue.layers)&&Na(at,re,ue,rt,yt,wt)}}function Na(F,re,ue,fe,oe,Fe){F.onBeforeRender(w,re,ue,fe,oe,Fe),F.modelViewMatrix.multiplyMatrices(ue.matrixWorldInverse,F.matrixWorld),F.normalMatrix.getNormalMatrix(F.modelViewMatrix),oe.onBeforeRender(w,re,ue,fe,F,Fe),oe.transparent===!0&&oe.side===xi&&oe.forceSinglePass===!1?(oe.side=li,oe.needsUpdate=!0,w.renderBufferDirect(ue,re,fe,oe,F,Fe),oe.side=Ea,oe.needsUpdate=!0,w.renderBufferDirect(ue,re,fe,oe,F,Fe),oe.side=xi):w.renderBufferDirect(ue,re,fe,oe,F,Fe),F.onAfterRender(w,re,ue,fe,oe,Fe)}function tu(F,re,ue){re.isScene!==!0&&(re=ut);const fe=Ne.get(F),oe=x.state.lights,Fe=x.state.shadowsArray,et=oe.state.version,at=he.getParameters(F,oe.state,Fe,re,ue),rt=he.getProgramCacheKey(at);let yt=fe.programs;fe.environment=F.isMeshStandardMaterial?re.environment:null,fe.fog=re.fog,fe.envMap=(F.isMeshStandardMaterial?U:V).get(F.envMap||fe.environment),fe.envMapRotation=fe.environment!==null&&F.envMap===null?re.environmentRotation:F.envMapRotation,yt===void 0&&(F.addEventListener("dispose",vt),yt=new Map,fe.programs=yt);let wt=yt.get(rt);if(wt!==void 0){if(fe.currentProgram===wt&&fe.lightsStateVersion===et)return Dm(F,at),wt}else at.uniforms=he.getUniforms(F),F.onBeforeCompile(at,w),wt=he.acquireProgram(at,rt),yt.set(rt,wt),fe.uniforms=at.uniforms;const ft=fe.uniforms;return(!F.isShaderMaterial&&!F.isRawShaderMaterial||F.clipping===!0)&&(ft.clippingPlanes=dt.uniform),Dm(F,at),fe.needsLights=$1(F),fe.lightsStateVersion=et,fe.needsLights&&(ft.ambientLightColor.value=oe.state.ambient,ft.lightProbe.value=oe.state.probe,ft.directionalLights.value=oe.state.directional,ft.directionalLightShadows.value=oe.state.directionalShadow,ft.spotLights.value=oe.state.spot,ft.spotLightShadows.value=oe.state.spotShadow,ft.rectAreaLights.value=oe.state.rectArea,ft.ltc_1.value=oe.state.rectAreaLTC1,ft.ltc_2.value=oe.state.rectAreaLTC2,ft.pointLights.value=oe.state.point,ft.pointLightShadows.value=oe.state.pointShadow,ft.hemisphereLights.value=oe.state.hemi,ft.directionalShadowMap.value=oe.state.directionalShadowMap,ft.directionalShadowMatrix.value=oe.state.directionalShadowMatrix,ft.spotShadowMap.value=oe.state.spotShadowMap,ft.spotLightMatrix.value=oe.state.spotLightMatrix,ft.spotLightMap.value=oe.state.spotLightMap,ft.pointShadowMap.value=oe.state.pointShadowMap,ft.pointShadowMatrix.value=oe.state.pointShadowMatrix),fe.currentProgram=wt,fe.uniformsList=null,wt}function Nm(F){if(F.uniformsList===null){const re=F.currentProgram.getUniforms();F.uniformsList=Ty.seqWithValue(re.seq,F.uniforms)}return F.uniformsList}function Dm(F,re){const ue=Ne.get(F);ue.outputColorSpace=re.outputColorSpace,ue.batching=re.batching,ue.batchingColor=re.batchingColor,ue.instancing=re.instancing,ue.instancingColor=re.instancingColor,ue.instancingMorph=re.instancingMorph,ue.skinning=re.skinning,ue.morphTargets=re.morphTargets,ue.morphNormals=re.morphNormals,ue.morphColors=re.morphColors,ue.morphTargetsCount=re.morphTargetsCount,ue.numClippingPlanes=re.numClippingPlanes,ue.numIntersection=re.numClipIntersection,ue.vertexAlphas=re.vertexAlphas,ue.vertexTangents=re.vertexTangents,ue.toneMapping=re.toneMapping}function H1(F,re,ue,fe,oe){re.isScene!==!0&&(re=ut),ze.resetTextureUnits();const Fe=re.fog,et=fe.isMeshStandardMaterial?re.environment:null,at=P===null?w.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:Oa,rt=(fe.isMeshStandardMaterial?U:V).get(fe.envMap||et),yt=fe.vertexColors===!0&&!!ue.attributes.color&&ue.attributes.color.itemSize===4,wt=!!ue.attributes.tangent&&(!!fe.normalMap||fe.anisotropy>0),ft=!!ue.morphAttributes.position,Gt=!!ue.morphAttributes.normal,un=!!ue.morphAttributes.color;let en=Os;fe.toneMapped&&(P===null||P.isXRRenderTarget===!0)&&(en=w.toneMapping);const Un=ue.morphAttributes.position||ue.morphAttributes.normal||ue.morphAttributes.color,mt=Un!==void 0?Un.length:0,He=Ne.get(fe),fn=x.state.lights;if(ae===!0&&(_e===!0||F!==O)){const Sr=F===O&&fe.id===N;dt.setState(fe,F,Sr)}let Et=!1;fe.version===He.__version?(He.needsLights&&He.lightsStateVersion!==fn.state.version||He.outputColorSpace!==at||oe.isBatchedMesh&&He.batching===!1||!oe.isBatchedMesh&&He.batching===!0||oe.isBatchedMesh&&He.batchingColor===!0&&oe.colorTexture===null||oe.isBatchedMesh&&He.batchingColor===!1&&oe.colorTexture!==null||oe.isInstancedMesh&&He.instancing===!1||!oe.isInstancedMesh&&He.instancing===!0||oe.isSkinnedMesh&&He.skinning===!1||!oe.isSkinnedMesh&&He.skinning===!0||oe.isInstancedMesh&&He.instancingColor===!0&&oe.instanceColor===null||oe.isInstancedMesh&&He.instancingColor===!1&&oe.instanceColor!==null||oe.isInstancedMesh&&He.instancingMorph===!0&&oe.morphTexture===null||oe.isInstancedMesh&&He.instancingMorph===!1&&oe.morphTexture!==null||He.envMap!==rt||fe.fog===!0&&He.fog!==Fe||He.numClippingPlanes!==void 0&&(He.numClippingPlanes!==dt.numPlanes||He.numIntersection!==dt.numIntersection)||He.vertexAlphas!==yt||He.vertexTangents!==wt||He.morphTargets!==ft||He.morphNormals!==Gt||He.morphColors!==un||He.toneMapping!==en||He.morphTargetsCount!==mt)&&(Et=!0):(Et=!0,He.__version=fe.version);let dn=He.currentProgram;Et===!0&&(dn=tu(fe,re,oe));let di=!1,qn=!1,cr=!1;const gn=dn.getUniforms(),bo=He.uniforms;if(ye.useProgram(dn.program)&&(di=!0,qn=!0,cr=!0),fe.id!==N&&(N=fe.id,qn=!0),di||O!==F){gn.setValue(B,"projectionMatrix",F.projectionMatrix),gn.setValue(B,"viewMatrix",F.matrixWorldInverse);const Sr=gn.map.cameraPosition;Sr!==void 0&&Sr.setValue(B,Ae.setFromMatrixPosition(F.matrixWorld)),ke.logarithmicDepthBuffer&&gn.setValue(B,"logDepthBufFC",2/(Math.log(F.far+1)/Math.LN2)),(fe.isMeshPhongMaterial||fe.isMeshToonMaterial||fe.isMeshLambertMaterial||fe.isMeshBasicMaterial||fe.isMeshStandardMaterial||fe.isShaderMaterial)&&gn.setValue(B,"isOrthographic",F.isOrthographicCamera===!0),O!==F&&(O=F,qn=!0,cr=!0)}if(oe.isSkinnedMesh){gn.setOptional(B,oe,"bindMatrix"),gn.setOptional(B,oe,"bindMatrixInverse");const Sr=oe.skeleton;Sr&&(Sr.boneTexture===null&&Sr.computeBoneTexture(),gn.setValue(B,"boneTexture",Sr.boneTexture,ze))}oe.isBatchedMesh&&(gn.setOptional(B,oe,"batchingTexture"),gn.setValue(B,"batchingTexture",oe._matricesTexture,ze),gn.setOptional(B,oe,"batchingIdTexture"),gn.setValue(B,"batchingIdTexture",oe._indirectTexture,ze),gn.setOptional(B,oe,"batchingColorTexture"),oe._colorsTexture!==null&&gn.setValue(B,"batchingColorTexture",oe._colorsTexture,ze));const nu=ue.morphAttributes;if((nu.position!==void 0||nu.normal!==void 0||nu.color!==void 0)&&Ct.update(oe,ue,dn),(qn||He.receiveShadow!==oe.receiveShadow)&&(He.receiveShadow=oe.receiveShadow,gn.setValue(B,"receiveShadow",oe.receiveShadow)),fe.isMeshGouraudMaterial&&fe.envMap!==null&&(bo.envMap.value=rt,bo.flipEnvMap.value=rt.isCubeTexture&&rt.isRenderTargetTexture===!1?-1:1),fe.isMeshStandardMaterial&&fe.envMap===null&&re.environment!==null&&(bo.envMapIntensity.value=re.environmentIntensity),qn&&(gn.setValue(B,"toneMappingExposure",w.toneMappingExposure),He.needsLights&&V1(bo,cr),Fe&&fe.fog===!0&&je.refreshFogUniforms(bo,Fe),je.refreshMaterialUniforms(bo,fe,Q,J,x.state.transmissionRenderTarget[F.id]),Ty.upload(B,Nm(He),bo,ze)),fe.isShaderMaterial&&fe.uniformsNeedUpdate===!0&&(Ty.upload(B,Nm(He),bo,ze),fe.uniformsNeedUpdate=!1),fe.isSpriteMaterial&&gn.setValue(B,"center",oe.center),gn.setValue(B,"modelViewMatrix",oe.modelViewMatrix),gn.setValue(B,"normalMatrix",oe.normalMatrix),gn.setValue(B,"modelMatrix",oe.matrixWorld),fe.isShaderMaterial||fe.isRawShaderMaterial){const Sr=fe.uniformsGroups;for(let ru=0,Ri=Sr.length;ru<Ri;ru++){const Um=Sr[ru];Xe.update(Um,dn),Xe.bind(Um,dn)}}return dn}function V1(F,re){F.ambientLightColor.needsUpdate=re,F.lightProbe.needsUpdate=re,F.directionalLights.needsUpdate=re,F.directionalLightShadows.needsUpdate=re,F.pointLights.needsUpdate=re,F.pointLightShadows.needsUpdate=re,F.spotLights.needsUpdate=re,F.spotLightShadows.needsUpdate=re,F.rectAreaLights.needsUpdate=re,F.hemisphereLights.needsUpdate=re}function $1(F){return F.isMeshLambertMaterial||F.isMeshToonMaterial||F.isMeshPhongMaterial||F.isMeshStandardMaterial||F.isShadowMaterial||F.isShaderMaterial&&F.lights===!0}this.getActiveCubeFace=function(){return A},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(F,re,ue){Ne.get(F.texture).__webglTexture=re,Ne.get(F.depthTexture).__webglTexture=ue;const fe=Ne.get(F);fe.__hasExternalTextures=!0,fe.__autoAllocateDepthBuffer=ue===void 0,fe.__autoAllocateDepthBuffer||be.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),fe.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(F,re){const ue=Ne.get(F);ue.__webglFramebuffer=re,ue.__useDefaultFramebuffer=re===void 0},this.setRenderTarget=function(F,re=0,ue=0){P=F,A=re,C=ue;let fe=!0,oe=null,Fe=!1,et=!1;if(F){const rt=Ne.get(F);if(rt.__useDefaultFramebuffer!==void 0)ye.bindFramebuffer(B.FRAMEBUFFER,null),fe=!1;else if(rt.__webglFramebuffer===void 0)ze.setupRenderTarget(F);else if(rt.__hasExternalTextures)ze.rebindTextures(F,Ne.get(F.texture).__webglTexture,Ne.get(F.depthTexture).__webglTexture);else if(F.depthBuffer){const ft=F.depthTexture;if(rt.__boundDepthTexture!==ft){if(ft!==null&&Ne.has(ft)&&(F.width!==ft.image.width||F.height!==ft.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ze.setupDepthRenderbuffer(F)}}const yt=F.texture;(yt.isData3DTexture||yt.isDataArrayTexture||yt.isCompressedArrayTexture)&&(et=!0);const wt=Ne.get(F).__webglFramebuffer;F.isWebGLCubeRenderTarget?(Array.isArray(wt[re])?oe=wt[re][ue]:oe=wt[re],Fe=!0):F.samples>0&&ze.useMultisampledRTT(F)===!1?oe=Ne.get(F).__webglMultisampledFramebuffer:Array.isArray(wt)?oe=wt[ue]:oe=wt,E.copy(F.viewport),L.copy(F.scissor),H=F.scissorTest}else E.copy(X).multiplyScalar(Q).floor(),L.copy(ne).multiplyScalar(Q).floor(),H=pe;if(ye.bindFramebuffer(B.FRAMEBUFFER,oe)&&fe&&ye.drawBuffers(F,oe),ye.viewport(E),ye.scissor(L),ye.setScissorTest(H),Fe){const rt=Ne.get(F.texture);B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_CUBE_MAP_POSITIVE_X+re,rt.__webglTexture,ue)}else if(et){const rt=Ne.get(F.texture),yt=re||0;B.framebufferTextureLayer(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,rt.__webglTexture,ue||0,yt)}N=-1},this.readRenderTargetPixels=function(F,re,ue,fe,oe,Fe,et){if(!(F&&F.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let at=Ne.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&et!==void 0&&(at=at[et]),at){ye.bindFramebuffer(B.FRAMEBUFFER,at);try{const rt=F.texture,yt=rt.format,wt=rt.type;if(!ke.textureFormatReadable(yt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ke.textureTypeReadable(wt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}re>=0&&re<=F.width-fe&&ue>=0&&ue<=F.height-oe&&B.readPixels(re,ue,fe,oe,Z.convert(yt),Z.convert(wt),Fe)}finally{const rt=P!==null?Ne.get(P).__webglFramebuffer:null;ye.bindFramebuffer(B.FRAMEBUFFER,rt)}}},this.readRenderTargetPixelsAsync=async function(F,re,ue,fe,oe,Fe,et){if(!(F&&F.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let at=Ne.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&et!==void 0&&(at=at[et]),at){ye.bindFramebuffer(B.FRAMEBUFFER,at);try{const rt=F.texture,yt=rt.format,wt=rt.type;if(!ke.textureFormatReadable(yt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ke.textureTypeReadable(wt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(re>=0&&re<=F.width-fe&&ue>=0&&ue<=F.height-oe){const ft=B.createBuffer();B.bindBuffer(B.PIXEL_PACK_BUFFER,ft),B.bufferData(B.PIXEL_PACK_BUFFER,Fe.byteLength,B.STREAM_READ),B.readPixels(re,ue,fe,oe,Z.convert(yt),Z.convert(wt),0),B.flush();const Gt=B.fenceSync(B.SYNC_GPU_COMMANDS_COMPLETE,0);await D9(B,Gt,4);try{B.bindBuffer(B.PIXEL_PACK_BUFFER,ft),B.getBufferSubData(B.PIXEL_PACK_BUFFER,0,Fe)}finally{B.deleteBuffer(ft),B.deleteSync(Gt)}return Fe}}finally{const rt=P!==null?Ne.get(P).__webglFramebuffer:null;ye.bindFramebuffer(B.FRAMEBUFFER,rt)}}},this.copyFramebufferToTexture=function(F,re=null,ue=0){F.isTexture!==!0&&(Pf("WebGLRenderer: copyFramebufferToTexture function signature has changed."),re=arguments[0]||null,F=arguments[1]);const fe=Math.pow(2,-ue),oe=Math.floor(F.image.width*fe),Fe=Math.floor(F.image.height*fe),et=re!==null?re.x:0,at=re!==null?re.y:0;ze.setTexture2D(F,0),B.copyTexSubImage2D(B.TEXTURE_2D,ue,0,0,et,at,oe,Fe),ye.unbindTexture()},this.copyTextureToTexture=function(F,re,ue=null,fe=null,oe=0){F.isTexture!==!0&&(Pf("WebGLRenderer: copyTextureToTexture function signature has changed."),fe=arguments[0]||null,F=arguments[1],re=arguments[2],oe=arguments[3]||0,ue=null);let Fe,et,at,rt,yt,wt;ue!==null?(Fe=ue.max.x-ue.min.x,et=ue.max.y-ue.min.y,at=ue.min.x,rt=ue.min.y):(Fe=F.image.width,et=F.image.height,at=0,rt=0),fe!==null?(yt=fe.x,wt=fe.y):(yt=0,wt=0);const ft=Z.convert(re.format),Gt=Z.convert(re.type);ze.setTexture2D(re,0),B.pixelStorei(B.UNPACK_FLIP_Y_WEBGL,re.flipY),B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,re.premultiplyAlpha),B.pixelStorei(B.UNPACK_ALIGNMENT,re.unpackAlignment);const un=B.getParameter(B.UNPACK_ROW_LENGTH),en=B.getParameter(B.UNPACK_IMAGE_HEIGHT),Un=B.getParameter(B.UNPACK_SKIP_PIXELS),mt=B.getParameter(B.UNPACK_SKIP_ROWS),He=B.getParameter(B.UNPACK_SKIP_IMAGES),fn=F.isCompressedTexture?F.mipmaps[oe]:F.image;B.pixelStorei(B.UNPACK_ROW_LENGTH,fn.width),B.pixelStorei(B.UNPACK_IMAGE_HEIGHT,fn.height),B.pixelStorei(B.UNPACK_SKIP_PIXELS,at),B.pixelStorei(B.UNPACK_SKIP_ROWS,rt),F.isDataTexture?B.texSubImage2D(B.TEXTURE_2D,oe,yt,wt,Fe,et,ft,Gt,fn.data):F.isCompressedTexture?B.compressedTexSubImage2D(B.TEXTURE_2D,oe,yt,wt,fn.width,fn.height,ft,fn.data):B.texSubImage2D(B.TEXTURE_2D,oe,yt,wt,Fe,et,ft,Gt,fn),B.pixelStorei(B.UNPACK_ROW_LENGTH,un),B.pixelStorei(B.UNPACK_IMAGE_HEIGHT,en),B.pixelStorei(B.UNPACK_SKIP_PIXELS,Un),B.pixelStorei(B.UNPACK_SKIP_ROWS,mt),B.pixelStorei(B.UNPACK_SKIP_IMAGES,He),oe===0&&re.generateMipmaps&&B.generateMipmap(B.TEXTURE_2D),ye.unbindTexture()},this.copyTextureToTexture3D=function(F,re,ue=null,fe=null,oe=0){F.isTexture!==!0&&(Pf("WebGLRenderer: copyTextureToTexture3D function signature has changed."),ue=arguments[0]||null,fe=arguments[1]||null,F=arguments[2],re=arguments[3],oe=arguments[4]||0);let Fe,et,at,rt,yt,wt,ft,Gt,un;const en=F.isCompressedTexture?F.mipmaps[oe]:F.image;ue!==null?(Fe=ue.max.x-ue.min.x,et=ue.max.y-ue.min.y,at=ue.max.z-ue.min.z,rt=ue.min.x,yt=ue.min.y,wt=ue.min.z):(Fe=en.width,et=en.height,at=en.depth,rt=0,yt=0,wt=0),fe!==null?(ft=fe.x,Gt=fe.y,un=fe.z):(ft=0,Gt=0,un=0);const Un=Z.convert(re.format),mt=Z.convert(re.type);let He;if(re.isData3DTexture)ze.setTexture3D(re,0),He=B.TEXTURE_3D;else if(re.isDataArrayTexture||re.isCompressedArrayTexture)ze.setTexture2DArray(re,0),He=B.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}B.pixelStorei(B.UNPACK_FLIP_Y_WEBGL,re.flipY),B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,re.premultiplyAlpha),B.pixelStorei(B.UNPACK_ALIGNMENT,re.unpackAlignment);const fn=B.getParameter(B.UNPACK_ROW_LENGTH),Et=B.getParameter(B.UNPACK_IMAGE_HEIGHT),dn=B.getParameter(B.UNPACK_SKIP_PIXELS),di=B.getParameter(B.UNPACK_SKIP_ROWS),qn=B.getParameter(B.UNPACK_SKIP_IMAGES);B.pixelStorei(B.UNPACK_ROW_LENGTH,en.width),B.pixelStorei(B.UNPACK_IMAGE_HEIGHT,en.height),B.pixelStorei(B.UNPACK_SKIP_PIXELS,rt),B.pixelStorei(B.UNPACK_SKIP_ROWS,yt),B.pixelStorei(B.UNPACK_SKIP_IMAGES,wt),F.isDataTexture||F.isData3DTexture?B.texSubImage3D(He,oe,ft,Gt,un,Fe,et,at,Un,mt,en.data):re.isCompressedArrayTexture?B.compressedTexSubImage3D(He,oe,ft,Gt,un,Fe,et,at,Un,en.data):B.texSubImage3D(He,oe,ft,Gt,un,Fe,et,at,Un,mt,en),B.pixelStorei(B.UNPACK_ROW_LENGTH,fn),B.pixelStorei(B.UNPACK_IMAGE_HEIGHT,Et),B.pixelStorei(B.UNPACK_SKIP_PIXELS,dn),B.pixelStorei(B.UNPACK_SKIP_ROWS,di),B.pixelStorei(B.UNPACK_SKIP_IMAGES,qn),oe===0&&re.generateMipmaps&&B.generateMipmap(He),ye.unbindTexture()},this.initRenderTarget=function(F){Ne.get(F).__webglFramebuffer===void 0&&ze.setupRenderTarget(F)},this.initTexture=function(F){F.isCubeTexture?ze.setTextureCube(F,0):F.isData3DTexture?ze.setTexture3D(F,0):F.isDataArrayTexture||F.isCompressedArrayTexture?ze.setTexture2DArray(F,0):ze.setTexture2D(F,0),ye.unbindTexture()},this.resetState=function(){A=0,C=0,P=null,ye.reset(),we.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ms}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===r1?"display-p3":"srgb",n.unpackColorSpace=Kt.workingColorSpace===cm?"display-p3":"srgb"}}class s1{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Je(e),this.density=n}clone(){return new s1(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class a1{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new Je(e),this.near=n,this.far=r}clone(){return new a1(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let Fv=class extends jt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ai,this.environmentIntensity=1,this.environmentRotation=new Ai,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}};class l1{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=Ip,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Gi()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return Pf("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,o=this.stride;i<o;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Gi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Gi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Jr=new z;class Vi{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)Jr.fromBufferAttribute(this,n),Jr.applyMatrix4(e),this.setXYZ(n,Jr.x,Jr.y,Jr.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Jr.fromBufferAttribute(this,n),Jr.applyNormalMatrix(e),this.setXYZ(n,Jr.x,Jr.y,Jr.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Jr.fromBufferAttribute(this,n),Jr.transformDirection(e),this.setXYZ(n,Jr.x,Jr.y,Jr.z);return this}getComponent(e,n){let r=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(r=ii(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Ot(r,this.array)),this.data.array[e*this.data.stride+this.offset+n]=r,this}setX(e,n){return this.normalized&&(n=Ot(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Ot(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Ot(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Ot(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=ii(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=ii(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=ii(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=ii(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Ot(n,this.array),r=Ot(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Ot(n,this.array),r=Ot(r,this.array),i=Ot(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,o){return e=e*this.data.stride+this.offset,this.normalized&&(n=Ot(n,this.array),r=Ot(r,this.array),i=Ot(i,this.array),o=Ot(o,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)n.push(this.data.array[i+o])}return new on(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Vi(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)n.push(this.data.array[i+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class MT extends Ir{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Je(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Fu;const ih=new z,zu=new z,Bu=new z,Hu=new Se,oh=new Se,OU=new St,x0=new z,sh=new z,_0=new z,$R=new Se,KS=new Se,WR=new Se;class LU extends jt{constructor(e=new MT){if(super(),this.isSprite=!0,this.type="Sprite",Fu===void 0){Fu=new kt;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new l1(n,5);Fu.setIndex([0,1,2,0,2,3]),Fu.setAttribute("position",new Vi(r,3,0,!1)),Fu.setAttribute("uv",new Vi(r,2,3,!1))}this.geometry=Fu,this.material=e,this.center=new Se(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),zu.setFromMatrixScale(this.matrixWorld),OU.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Bu.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&zu.multiplyScalar(-Bu.z);const r=this.material.rotation;let i,o;r!==0&&(o=Math.cos(r),i=Math.sin(r));const s=this.center;S0(x0.set(-.5,-.5,0),Bu,s,zu,i,o),S0(sh.set(.5,-.5,0),Bu,s,zu,i,o),S0(_0.set(.5,.5,0),Bu,s,zu,i,o),$R.set(0,0),KS.set(1,0),WR.set(1,1);let a=e.ray.intersectTriangle(x0,sh,_0,!1,ih);if(a===null&&(S0(sh.set(-.5,.5,0),Bu,s,zu,i,o),KS.set(0,1),a=e.ray.intersectTriangle(x0,_0,sh,!1,ih),a===null))return;const l=e.ray.origin.distanceTo(ih);l<e.near||l>e.far||n.push({distance:l,point:ih.clone(),uv:Bi.getInterpolation(ih,x0,sh,_0,$R,KS,WR,new Se),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function S0(t,e,n,r,i,o){Hu.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(oh.x=o*Hu.x-i*Hu.y,oh.y=i*Hu.x+o*Hu.y):oh.copy(Hu),t.copy(e),t.x+=oh.x,t.y+=oh.y,t.applyMatrix4(OU)}const w0=new z,jR=new z;class kU extends jt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const o=n[r];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let o;for(o=0;o<i.length&&!(n<i[o].distance);o++);return i.splice(o,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let o=n[r].distance;if(n[r].object.visible&&(o-=o*n[r].hysteresis),e<o)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){w0.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(w0);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){w0.setFromMatrixPosition(e.matrixWorld),jR.setFromMatrixPosition(this.matrixWorld);const r=w0.distanceTo(jR)/e.zoom;n[0].object.visible=!0;let i,o;for(i=1,o=n.length;i<o;i++){let s=n[i].distance;if(n[i].object.visible&&(s-=s*n[i].hysteresis),r>=s)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<o;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,o=r.length;i<o;i++){const s=r[i];n.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return n}}const GR=new z,XR=new Bt,YR=new Bt,qq=new z,qR=new St,b0=new z,ZS=new xr,KR=new St,JS=new jc;class NU extends On{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=$b,this.bindMatrix=new St,this.bindMatrixInverse=new St,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new vr),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,b0),this.boundingBox.expandByPoint(b0)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new xr),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,b0),this.boundingSphere.expandByPoint(b0)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ZS.copy(this.boundingSphere),ZS.applyMatrix4(i),e.ray.intersectsSphere(ZS)!==!1&&(KR.copy(i).invert(),JS.copy(e.ray).applyMatrix4(KR),!(this.boundingBox!==null&&JS.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,JS)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Bt,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===$b?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===tU?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;XR.fromBufferAttribute(i.attributes.skinIndex,e),YR.fromBufferAttribute(i.attributes.skinWeight,e),GR.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let o=0;o<4;o++){const s=YR.getComponent(o);if(s!==0){const a=XR.getComponent(o);qR.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),n.addScaledVector(qq.copy(GR).applyMatrix4(qR),s)}}return n.applyMatrix4(this.bindMatrixInverse)}}class TT extends jt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ls extends Nn{constructor(e=null,n=1,r=1,i,o,s,a,l,c=gr,u=gr,d,p){super(null,s,a,l,c,u,i,o,d,p),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const ZR=new St,Kq=new St;class c1{constructor(e=[],n=[]){this.uuid=Gi(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new St)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new St;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let o=0,s=e.length;o<s;o++){const a=e[o]?e[o].matrixWorld:Kq;ZR.multiplyMatrices(a,n[o]),ZR.toArray(r,o*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new c1(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new Ls(n,e,e,jr,Si);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const o=e.bones[r];let s=n[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new TT),this.bones.push(s),this.boneInverses.push(new St().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,o=n.length;i<o;i++){const s=n[i];e.bones.push(s.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class jf extends on{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Vu=new St,JR=new St,E0=[],QR=new vr,Zq=new St,ah=new On,lh=new xr;class DU extends On{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new jf(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,Zq)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new vr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,Vu),QR.copy(e.boundingBox).applyMatrix4(Vu),this.boundingBox.union(QR)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new xr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,Vu),lh.copy(e.boundingSphere).applyMatrix4(Vu),this.boundingSphere.union(lh)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const r=n.morphTargetInfluences,i=this.morphTexture.source.data.data,o=r.length+1,s=e*o+1;for(let a=0;a<r.length;a++)r[a]=i[s+a]}raycast(e,n){const r=this.matrixWorld,i=this.count;if(ah.geometry=this.geometry,ah.material=this.material,ah.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),lh.copy(this.boundingSphere),lh.applyMatrix4(r),e.ray.intersectsSphere(lh)!==!1))for(let o=0;o<i;o++){this.getMatrixAt(o,Vu),JR.multiplyMatrices(r,Vu),ah.matrixWorld=JR,ah.raycast(e,E0);for(let s=0,a=E0.length;s<a;s++){const l=E0[s];l.instanceId=o,l.object=this,n.push(l)}E0.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new jf(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const r=n.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new Ls(new Float32Array(i*this.count),i,this.count,Qx,Si));const o=this.morphTexture.source.data.data;let s=0;for(let c=0;c<r.length;c++)s+=r[c];const a=this.geometry.morphTargetsRelative?1:1-s,l=i*e;o[l]=a,o.set(r,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function Jq(t,e){return t.z-e.z}function Qq(t,e){return e.z-t.z}class eK{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n,r){const i=this.pool,o=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1,index:-1});const s=i[this.index];o.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=n,s.index=r}reset(){this.list.length=0,this.index=0}}const Za=new St,QS=new St,tK=new St,nK=new Je(1,1,1),e3=new St,ew=new dm,M0=new vr,Zl=new xr,ch=new z,t3=new z,rK=new z,tw=new eK,Br=new On,T0=[];function iK(t,e,n=0){const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const i=t.count;for(let o=0;o<i;o++)for(let s=0;s<r;s++)e.setComponent(o+n,s,t.getComponent(o,s))}else e.array.set(t.array,n*r);e.needsUpdate=!0}class UU extends On{get maxInstanceCount(){return this._maxInstanceCount}constructor(e,n,r=n*2,i){super(new kt,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=e,this._maxVertexCount=n,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),r=new Ls(n,e,e,jr,Si);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Uint32Array(e*e),r=new Ls(n,e,e,lm,Ta);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Float32Array(e*e*4).fill(1),r=new Ls(n,e,e,jr,Si);r.colorSpace=Kt.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const o in e.attributes){const s=e.getAttribute(o),{array:a,itemSize:l,normalized:c}=s,u=new a.constructor(r*l),d=new on(u,l,c);n.setAttribute(o,d)}if(e.getIndex()!==null){const o=r>65535?new Uint32Array(i):new Uint16Array(i);n.setIndex(new on(o,1))}this._geometryInitialized=!0}}_validateGeometry(e){const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),o=n.getAttribute(r);if(i.itemSize!==o.itemSize||i.normalized!==o.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vr);const e=this.boundingBox,n=this._drawInfo;e.makeEmpty();for(let r=0,i=n.length;r<i;r++){if(n[r].active===!1)continue;const o=n[r].geometryIndex;this.getMatrixAt(r,Za),this.getBoundingBoxAt(o,M0).applyMatrix4(Za),e.union(M0)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xr);const e=this.boundingSphere,n=this._drawInfo;e.makeEmpty();for(let r=0,i=n.length;r<i;r++){if(n[r].active===!1)continue;const o=n[r].geometryIndex;this.getMatrixAt(r,Za),this.getBoundingSphereAt(o,Zl).applyMatrix4(Za),e.union(Zl)}}addInstance(e){if(this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");this._drawInfo.push({visible:!0,active:!0,geometryIndex:e});const n=this._drawInfo.length-1,r=this._matricesTexture,i=r.image.data;tK.toArray(i,n*16),r.needsUpdate=!0;const o=this._colorsTexture;return o&&(nK.toArray(o.image.data,n*4),o.needsUpdate=!0),n}addGeometry(e,n=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let o=null;const s=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(o=s[s.length-1]),n===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=n,o===null?i.vertexStart=0:i.vertexStart=o.vertexStart+o.vertexCount;const c=e.getIndex(),u=c!==null;if(u&&(r===-1?i.indexCount=c.count:i.indexCount=r,o===null?i.indexStart=0:i.indexStart=o.indexStart+o.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const d=this._geometryCount;return this._geometryCount++,s.push(i),a.push({start:u?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new vr,sphereInitialized:!1,sphere:new xr}),this.setGeometryAt(d,e),d}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,i=r.getIndex()!==null,o=r.getIndex(),s=n.getIndex(),a=this._reservedRanges[e];if(i&&s.count>a.indexCount||n.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const m in r.attributes){const g=n.getAttribute(m),v=r.getAttribute(m);iK(g,v,l);const x=g.itemSize;for(let y=g.count,_=c;y<_;y++){const w=l+y;for(let M=0;M<x;M++)v.setComponent(w,M,0)}v.needsUpdate=!0,v.addUpdateRange(l*x,c*x)}if(i){const m=a.indexStart;for(let g=0;g<s.count;g++)o.setX(m+g,l+s.getX(g));for(let g=s.count,v=a.indexCount;g<v;g++)o.setX(m+g,l);o.needsUpdate=!0,o.addUpdateRange(m,a.indexCount)}const u=this._bounds[e];n.boundingBox!==null?(u.box.copy(n.boundingBox),u.boxInitialized=!0):u.boxInitialized=!1,n.boundingSphere!==null?(u.sphere.copy(n.boundingSphere),u.sphereInitialized=!0):u.sphereInitialized=!1;const d=this._drawRanges[e],p=n.getAttribute("position");return d.count=i?s.count:p.count,this._visibilityChanged=!0,e}getBoundingBoxAt(e,n){if(e>=this._geometryCount)return null;const r=this._bounds[e],i=r.box,o=this.geometry;if(r.boxInitialized===!1){i.makeEmpty();const s=o.index,a=o.attributes.position,l=this._drawRanges[e];for(let c=l.start,u=l.start+l.count;c<u;c++){let d=c;s&&(d=s.getX(d)),i.expandByPoint(ch.fromBufferAttribute(a,d))}r.boxInitialized=!0}return n.copy(i),n}getBoundingSphereAt(e,n){if(e>=this._geometryCount)return null;const r=this._bounds[e],i=r.sphere,o=this.geometry;if(r.sphereInitialized===!1){i.makeEmpty(),this.getBoundingBoxAt(e,M0),M0.getCenter(i.center);const s=o.index,a=o.attributes.position,l=this._drawRanges[e];let c=0;for(let u=l.start,d=l.start+l.count;u<d;u++){let p=u;s&&(p=s.getX(p)),ch.fromBufferAttribute(a,p),c=Math.max(c,i.center.distanceToSquared(ch))}i.radius=Math.sqrt(c),r.sphereInitialized=!0}return n.copy(i),n}setMatrixAt(e,n){const r=this._drawInfo,i=this._matricesTexture,o=this._matricesTexture.image.data;return e>=r.length||r[e].active===!1?this:(n.toArray(o,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,n){const r=this._drawInfo,i=this._matricesTexture.image.data;return e>=r.length||r[e].active===!1?null:n.fromArray(i,e*16)}setColorAt(e,n){this._colorsTexture===null&&this._initColorsTexture();const r=this._colorsTexture,i=this._colorsTexture.image.data,o=this._drawInfo;return e>=o.length||o[e].active===!1?this:(n.toArray(i,e*4),r.needsUpdate=!0,this)}getColorAt(e,n){const r=this._colorsTexture.image.data,i=this._drawInfo;return e>=i.length||i[e].active===!1?null:n.fromArray(r,e*4)}setVisibleAt(e,n){const r=this._drawInfo;return e>=r.length||r[e].active===!1||r[e].visible===n?this:(r[e].visible=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._drawInfo;return e>=n.length||n[e].active===!1?!1:n[e].visible}raycast(e,n){const r=this._drawInfo,i=this._drawRanges,o=this.matrixWorld,s=this.geometry;Br.material=this.material,Br.geometry.index=s.index,Br.geometry.attributes=s.attributes,Br.geometry.boundingBox===null&&(Br.geometry.boundingBox=new vr),Br.geometry.boundingSphere===null&&(Br.geometry.boundingSphere=new xr);for(let a=0,l=r.length;a<l;a++){if(!r[a].visible||!r[a].active)continue;const c=r[a].geometryIndex,u=i[c];Br.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(a,Br.matrixWorld).premultiply(o),this.getBoundingBoxAt(c,Br.geometry.boundingBox),this.getBoundingSphereAt(c,Br.geometry.boundingSphere),Br.raycast(e,T0);for(let d=0,p=T0.length;d<p;d++){const m=T0[d];m.object=this,m.batchId=a,n.push(m)}T0.length=0}Br.material=null,Br.geometry.index=null,Br.geometry.attributes={},Br.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(n=>({...n})),this._reservedRanges=e._reservedRanges.map(n=>({...n})),this._drawInfo=e._drawInfo.map(n=>({...n})),this._bounds=e._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,n,r,i,o){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=i.getIndex(),a=s===null?1:s.array.BYTES_PER_ELEMENT,l=this._drawInfo,c=this._multiDrawStarts,u=this._multiDrawCounts,d=this._drawRanges,p=this.perObjectFrustumCulled,m=this._indirectTexture,g=m.image.data;p&&(e3.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),ew.setFromProjectionMatrix(e3,e.coordinateSystem));let v=0;if(this.sortObjects){QS.copy(this.matrixWorld).invert(),ch.setFromMatrixPosition(r.matrixWorld).applyMatrix4(QS),t3.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(QS);for(let _=0,w=l.length;_<w;_++)if(l[_].visible&&l[_].active){const M=l[_].geometryIndex;this.getMatrixAt(_,Za),this.getBoundingSphereAt(M,Zl).applyMatrix4(Za);let A=!1;if(p&&(A=!ew.intersectsSphere(Zl)),!A){const C=rK.subVectors(Zl.center,ch).dot(t3);tw.push(d[M],C,_)}}const x=tw.list,y=this.customSort;y===null?x.sort(o.transparent?Qq:Jq):y.call(this,x,r);for(let _=0,w=x.length;_<w;_++){const M=x[_];c[v]=M.start*a,u[v]=M.count,g[v]=M.index,v++}tw.reset()}else for(let x=0,y=l.length;x<y;x++)if(l[x].visible&&l[x].active){const _=l[x].geometryIndex;let w=!1;if(p&&(this.getMatrixAt(x,Za),this.getBoundingSphereAt(_,Zl).applyMatrix4(Za),w=!ew.intersectsSphere(Zl)),!w){const M=d[_];c[v]=M.start*a,u[v]=M.count,g[v]=x,v++}}m.needsUpdate=!0,this._multiDrawCount=v,this._visibilityChanged=!1}onBeforeShadow(e,n,r,i,o,s){this.onBeforeRender(e,null,i,o,s)}}class fi extends Ir{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Je(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const zv=new z,Bv=new z,n3=new St,uh=new jc,C0=new xr,nw=new z,r3=new z;let wl=class extends jt{constructor(e=new kt,n=new fi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,o=n.count;i<o;i++)zv.fromBufferAttribute(n,i-1),Bv.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=zv.distanceTo(Bv);e.setAttribute("lineDistance",new ct(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,o=e.params.Line.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),C0.copy(r.boundingSphere),C0.applyMatrix4(i),C0.radius+=o,e.ray.intersectsSphere(C0)===!1)return;n3.copy(i).invert(),uh.copy(e.ray).applyMatrix4(n3);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=r.index,p=r.attributes.position;if(u!==null){const m=Math.max(0,s.start),g=Math.min(u.count,s.start+s.count);for(let v=m,x=g-1;v<x;v+=c){const y=u.getX(v),_=u.getX(v+1),w=A0(this,e,uh,l,y,_);w&&n.push(w)}if(this.isLineLoop){const v=u.getX(g-1),x=u.getX(m),y=A0(this,e,uh,l,v,x);y&&n.push(y)}}else{const m=Math.max(0,s.start),g=Math.min(p.count,s.start+s.count);for(let v=m,x=g-1;v<x;v+=c){const y=A0(this,e,uh,l,v,v+1);y&&n.push(y)}if(this.isLineLoop){const v=A0(this,e,uh,l,g-1,m);v&&n.push(v)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function A0(t,e,n,r,i,o){const s=t.geometry.attributes.position;if(zv.fromBufferAttribute(s,i),Bv.fromBufferAttribute(s,o),n.distanceSqToSegment(zv,Bv,nw,r3)>r)return;nw.applyMatrix4(t.matrixWorld);const l=e.ray.origin.distanceTo(nw);if(!(l<e.near||l>e.far))return{distance:l,point:r3.clone().applyMatrix4(t.matrixWorld),index:i,face:null,faceIndex:null,object:t}}const i3=new z,o3=new z;class Fs extends wl{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,o=n.count;i<o;i+=2)i3.fromBufferAttribute(n,i),o3.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+i3.distanceTo(o3);e.setAttribute("lineDistance",new ct(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class FU extends wl{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class CT extends Ir{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Je(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const s3=new St,qb=new jc,P0=new xr,R0=new z;class zU extends jt{constructor(e=new kt,n=new CT){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,o=e.params.Points.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),P0.copy(r.boundingSphere),P0.applyMatrix4(i),P0.radius+=o,e.ray.intersectsSphere(P0)===!1)return;s3.copy(i).invert(),qb.copy(e.ray).applyMatrix4(s3);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,d=r.attributes.position;if(c!==null){const p=Math.max(0,s.start),m=Math.min(c.count,s.start+s.count);for(let g=p,v=m;g<v;g++){const x=c.getX(g);R0.fromBufferAttribute(d,x),a3(R0,x,l,i,e,n,this)}}else{const p=Math.max(0,s.start),m=Math.min(d.count,s.start+s.count);for(let g=p,v=m;g<v;g++)R0.fromBufferAttribute(d,g),a3(R0,g,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}}function a3(t,e,n,r,i,o,s){const a=qb.distanceSqToPoint(t);if(a<n){const l=new z;qb.closestPointToPoint(t,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;o.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:s})}}class oK extends Nn{constructor(e,n,r,i,o,s,a,l,c){super(e,n,r,i,o,s,a,l,c),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:tr,this.magFilter=o!==void 0?o:tr,this.generateMipmaps=!1;const u=this;function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class sK extends Nn{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=gr,this.minFilter=gr,this.generateMipmaps=!1,this.needsUpdate=!0}}class u1 extends Nn{constructor(e,n,r,i,o,s,a,l,c,u,d,p){super(null,s,a,l,c,u,i,o,d,p),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class aK extends u1{constructor(e,n,r,i,o,s){super(e,n,r,o,s),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=po,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class lK extends u1{constructor(e,n,r){super(void 0,e[0].width,e[0].height,n,r,Ma),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class cK extends Nn{constructor(e,n,r,i,o,s,a,l,c){super(e,n,r,i,o,s,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Zo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),o=0;n.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),o+=r.distanceTo(i),n.push(o),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const o=r.length;let s;n?s=n:s=e*r[o-1];let a=0,l=o-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-s,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===s)return i/(o-1);const u=r[i],p=r[i+1]-u,m=(s-u)/p;return(i+m)/(o-1)}getTangent(e,n){let i=e-1e-4,o=e+1e-4;i<0&&(i=0),o>1&&(o=1);const s=this.getPoint(i),a=this.getPoint(o),l=n||(s.isVector2?new Se:new z);return l.copy(a).sub(s).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new z,i=[],o=[],s=[],a=new z,l=new St;for(let m=0;m<=e;m++){const g=m/e;i[m]=this.getTangentAt(g,new z)}o[0]=new z,s[0]=new z;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),d=Math.abs(i[0].y),p=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),d<=c&&(c=d,r.set(0,1,0)),p<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),o[0].crossVectors(i[0],a),s[0].crossVectors(i[0],o[0]);for(let m=1;m<=e;m++){if(o[m]=o[m-1].clone(),s[m]=s[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos($n(i[m-1].dot(i[m]),-1,1));o[m].applyMatrix4(l.makeRotationAxis(a,g))}s[m].crossVectors(i[m],o[m])}if(n===!0){let m=Math.acos($n(o[0].dot(o[e]),-1,1));m/=e,i[0].dot(a.crossVectors(o[0],o[e]))>0&&(m=-m);for(let g=1;g<=e;g++)o[g].applyMatrix4(l.makeRotationAxis(i[g],m*g)),s[g].crossVectors(i[g],o[g])}return{tangents:i,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class f1 extends Zo{constructor(e=0,n=0,r=1,i=1,o=0,s=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=l}getPoint(e,n=new Se){const r=n,i=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=i;for(;o>i;)o-=i;o<Number.EPSILON&&(s?o=0:o=i),this.aClockwise===!0&&!s&&(o===i?o=-i:o=o-i);const a=this.aStartAngle+e*o;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*u-m*d+this.aX,c=p*d+m*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class BU extends f1{constructor(e,n,r,i,o,s){super(e,n,r,r,i,o,s),this.isArcCurve=!0,this.type="ArcCurve"}}function AT(){let t=0,e=0,n=0,r=0;function i(o,s,a,l){t=o,e=a,n=-3*o+3*s-2*a-l,r=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,c){i(s,a,c*(a-o),c*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,c,u,d){let p=(s-o)/c-(a-o)/(c+u)+(a-s)/u,m=(a-s)/u-(l-s)/(u+d)+(l-a)/d;p*=u,m*=u,i(s,a,p,m)},calc:function(o){const s=o*o,a=s*o;return t+e*o+n*s+r*a}}}const I0=new z,rw=new AT,iw=new AT,ow=new AT;class HU extends Zo{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new z){const r=n,i=this.points,o=i.length,s=(o-(this.closed?0:1))*e;let a=Math.floor(s),l=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:l===0&&a===o-1&&(a=o-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%o]:(I0.subVectors(i[0],i[1]).add(i[0]),c=I0);const d=i[a%o],p=i[(a+1)%o];if(this.closed||a+2<o?u=i[(a+2)%o]:(I0.subVectors(i[o-1],i[o-2]).add(i[o-1]),u=I0),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let g=Math.pow(c.distanceToSquared(d),m),v=Math.pow(d.distanceToSquared(p),m),x=Math.pow(p.distanceToSquared(u),m);v<1e-4&&(v=1),g<1e-4&&(g=v),x<1e-4&&(x=v),rw.initNonuniformCatmullRom(c.x,d.x,p.x,u.x,g,v,x),iw.initNonuniformCatmullRom(c.y,d.y,p.y,u.y,g,v,x),ow.initNonuniformCatmullRom(c.z,d.z,p.z,u.z,g,v,x)}else this.curveType==="catmullrom"&&(rw.initCatmullRom(c.x,d.x,p.x,u.x,this.tension),iw.initCatmullRom(c.y,d.y,p.y,u.y,this.tension),ow.initCatmullRom(c.z,d.z,p.z,u.z,this.tension));return r.set(rw.calc(l),iw.calc(l),ow.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new z().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function l3(t,e,n,r,i){const o=(r-e)*.5,s=(i-n)*.5,a=t*t,l=t*a;return(2*n-2*r+o+s)*l+(-3*n+3*r-2*o-s)*a+o*t+n}function uK(t,e){const n=1-t;return n*n*e}function fK(t,e){return 2*(1-t)*t*e}function dK(t,e){return t*t*e}function qh(t,e,n,r){return uK(t,e)+fK(t,n)+dK(t,r)}function hK(t,e){const n=1-t;return n*n*n*e}function pK(t,e){const n=1-t;return 3*n*n*t*e}function mK(t,e){return 3*(1-t)*t*t*e}function gK(t,e){return t*t*t*e}function Kh(t,e,n,r,i){return hK(t,e)+pK(t,n)+mK(t,r)+gK(t,i)}class PT extends Zo{constructor(e=new Se,n=new Se,r=new Se,i=new Se){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new Se){const r=n,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return r.set(Kh(e,i.x,o.x,s.x,a.x),Kh(e,i.y,o.y,s.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class VU extends Zo{constructor(e=new z,n=new z,r=new z,i=new z){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new z){const r=n,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return r.set(Kh(e,i.x,o.x,s.x,a.x),Kh(e,i.y,o.y,s.y,a.y),Kh(e,i.z,o.z,s.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class RT extends Zo{constructor(e=new Se,n=new Se){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Se){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Se){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $U extends Zo{constructor(e=new z,n=new z){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new z){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new z){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class IT extends Zo{constructor(e=new Se,n=new Se,r=new Se){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new Se){const r=n,i=this.v0,o=this.v1,s=this.v2;return r.set(qh(e,i.x,o.x,s.x),qh(e,i.y,o.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class OT extends Zo{constructor(e=new z,n=new z,r=new z){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new z){const r=n,i=this.v0,o=this.v1,s=this.v2;return r.set(qh(e,i.x,o.x,s.x),qh(e,i.y,o.y,s.y),qh(e,i.z,o.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class LT extends Zo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new Se){const r=n,i=this.points,o=(i.length-1)*e,s=Math.floor(o),a=o-s,l=i[s===0?s:s-1],c=i[s],u=i[s>i.length-2?i.length-1:s+1],d=i[s>i.length-3?i.length-1:s+2];return r.set(l3(a,l.x,c.x,u.x,d.x),l3(a,l.y,c.y,u.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new Se().fromArray(i))}return this}}var Hv=Object.freeze({__proto__:null,ArcCurve:BU,CatmullRomCurve3:HU,CubicBezierCurve:PT,CubicBezierCurve3:VU,EllipseCurve:f1,LineCurve:RT,LineCurve3:$U,QuadraticBezierCurve:IT,QuadraticBezierCurve3:OT,SplineCurve:LT});class WU extends Zo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Hv[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let o=0;for(;o<i.length;){if(i[o]>=r){const s=i[o]-r,a=this.curves[o],l=a.getLength(),c=l===0?0:1-s/l;return a.getPointAt(c,n)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,o=this.curves;i<o.length;i++){const s=o[i],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(n.push(u),r=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new Hv[i.type]().fromJSON(i))}return this}}class kp extends WU{constructor(e){super(),this.type="Path",this.currentPoint=new Se,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new RT(this.currentPoint.clone(),new Se(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const o=new IT(this.currentPoint.clone(),new Se(e,n),new Se(r,i));return this.curves.push(o),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,o,s){const a=new PT(this.currentPoint.clone(),new Se(e,n),new Se(r,i),new Se(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new LT(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,o,s){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,r,i,o,s),this}absarc(e,n,r,i,o,s){return this.absellipse(e,n,r,r,i,o,s),this}ellipse(e,n,r,i,o,s,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,n+u,r,i,o,s,a,l),this}absellipse(e,n,r,i,o,s,a,l){const c=new f1(e,n,r,i,o,s,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class hm extends kt{constructor(e=[new Se(0,-.5),new Se(.5,0),new Se(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=$n(i,0,Math.PI*2);const o=[],s=[],a=[],l=[],c=[],u=1/n,d=new z,p=new Se,m=new z,g=new z,v=new z;let x=0,y=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:x=e[_+1].x-e[_].x,y=e[_+1].y-e[_].y,m.x=y*1,m.y=-x,m.z=y*0,v.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:x=e[_+1].x-e[_].x,y=e[_+1].y-e[_].y,m.x=y*1,m.y=-x,m.z=y*0,g.copy(m),m.x+=v.x,m.y+=v.y,m.z+=v.z,m.normalize(),l.push(m.x,m.y,m.z),v.copy(g)}for(let _=0;_<=n;_++){const w=r+_*u*i,M=Math.sin(w),A=Math.cos(w);for(let C=0;C<=e.length-1;C++){d.x=e[C].x*M,d.y=e[C].y,d.z=e[C].x*A,s.push(d.x,d.y,d.z),p.x=_/n,p.y=C/(e.length-1),a.push(p.x,p.y);const P=l[3*C+0]*M,N=l[3*C+1],O=l[3*C+0]*A;c.push(P,N,O)}}for(let _=0;_<n;_++)for(let w=0;w<e.length-1;w++){const M=w+_*e.length,A=M,C=M+e.length,P=M+e.length+1,N=M+1;o.push(A,C,N),o.push(P,N,C)}this.setIndex(o),this.setAttribute("position",new ct(s,3)),this.setAttribute("uv",new ct(a,2)),this.setAttribute("normal",new ct(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hm(e.points,e.segments,e.phiStart,e.phiLength)}}class d1 extends hm{constructor(e=1,n=1,r=4,i=8){const o=new kp;o.absarc(0,-n/2,e,Math.PI*1.5,0),o.absarc(0,n/2,e,0,Math.PI*.5),super(o.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new d1(e.radius,e.length,e.capSegments,e.radialSegments)}}class h1 extends kt{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const o=[],s=[],a=[],l=[],c=new z,u=new Se;s.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=n;d++,p+=3){const m=r+d/n*i;c.x=e*Math.cos(m),c.y=e*Math.sin(m),s.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(s[p]/e+1)/2,u.y=(s[p+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=n;d++)o.push(d,d+1,0);this.setIndex(o),this.setAttribute("position",new ct(s,3)),this.setAttribute("normal",new ct(a,3)),this.setAttribute("uv",new ct(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new h1(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Xc extends kt{constructor(e=1,n=1,r=1,i=32,o=1,s=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),o=Math.floor(o);const u=[],d=[],p=[],m=[];let g=0;const v=[],x=r/2;let y=0;_(),s===!1&&(e>0&&w(!0),n>0&&w(!1)),this.setIndex(u),this.setAttribute("position",new ct(d,3)),this.setAttribute("normal",new ct(p,3)),this.setAttribute("uv",new ct(m,2));function _(){const M=new z,A=new z;let C=0;const P=(n-e)/r;for(let N=0;N<=o;N++){const O=[],E=N/o,L=E*(n-e)+e;for(let H=0;H<=i;H++){const W=H/i,Y=W*l+a,K=Math.sin(Y),J=Math.cos(Y);A.x=L*K,A.y=-E*r+x,A.z=L*J,d.push(A.x,A.y,A.z),M.set(K,P,J).normalize(),p.push(M.x,M.y,M.z),m.push(W,1-E),O.push(g++)}v.push(O)}for(let N=0;N<i;N++)for(let O=0;O<o;O++){const E=v[O][N],L=v[O+1][N],H=v[O+1][N+1],W=v[O][N+1];u.push(E,L,W),u.push(L,H,W),C+=6}c.addGroup(y,C,0),y+=C}function w(M){const A=g,C=new Se,P=new z;let N=0;const O=M===!0?e:n,E=M===!0?1:-1;for(let H=1;H<=i;H++)d.push(0,x*E,0),p.push(0,E,0),m.push(.5,.5),g++;const L=g;for(let H=0;H<=i;H++){const Y=H/i*l+a,K=Math.cos(Y),J=Math.sin(Y);P.x=O*J,P.y=x*E,P.z=O*K,d.push(P.x,P.y,P.z),p.push(0,E,0),C.x=K*.5+.5,C.y=J*.5*E+.5,m.push(C.x,C.y),g++}for(let H=0;H<i;H++){const W=A+H,Y=L+H;M===!0?u.push(Y,Y+1,W):u.push(Y+1,Y,W),N+=3}c.addGroup(y,N,M===!0?1:2),y+=N}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class p1 extends Xc{constructor(e=1,n=1,r=32,i=1,o=!1,s=0,a=Math.PI*2){super(0,e,n,r,i,o,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a}}static fromJSON(e){return new p1(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ll extends kt{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const o=[],s=[];a(i),c(r),u(),this.setAttribute("position",new ct(o,3)),this.setAttribute("normal",new ct(o.slice(),3)),this.setAttribute("uv",new ct(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(_){const w=new z,M=new z,A=new z;for(let C=0;C<n.length;C+=3)m(n[C+0],w),m(n[C+1],M),m(n[C+2],A),l(w,M,A,_)}function l(_,w,M,A){const C=A+1,P=[];for(let N=0;N<=C;N++){P[N]=[];const O=_.clone().lerp(M,N/C),E=w.clone().lerp(M,N/C),L=C-N;for(let H=0;H<=L;H++)H===0&&N===C?P[N][H]=O:P[N][H]=O.clone().lerp(E,H/L)}for(let N=0;N<C;N++)for(let O=0;O<2*(C-N)-1;O++){const E=Math.floor(O/2);O%2===0?(p(P[N][E+1]),p(P[N+1][E]),p(P[N][E])):(p(P[N][E+1]),p(P[N+1][E+1]),p(P[N+1][E]))}}function c(_){const w=new z;for(let M=0;M<o.length;M+=3)w.x=o[M+0],w.y=o[M+1],w.z=o[M+2],w.normalize().multiplyScalar(_),o[M+0]=w.x,o[M+1]=w.y,o[M+2]=w.z}function u(){const _=new z;for(let w=0;w<o.length;w+=3){_.x=o[w+0],_.y=o[w+1],_.z=o[w+2];const M=x(_)/2/Math.PI+.5,A=y(_)/Math.PI+.5;s.push(M,1-A)}g(),d()}function d(){for(let _=0;_<s.length;_+=6){const w=s[_+0],M=s[_+2],A=s[_+4],C=Math.max(w,M,A),P=Math.min(w,M,A);C>.9&&P<.1&&(w<.2&&(s[_+0]+=1),M<.2&&(s[_+2]+=1),A<.2&&(s[_+4]+=1))}}function p(_){o.push(_.x,_.y,_.z)}function m(_,w){const M=_*3;w.x=e[M+0],w.y=e[M+1],w.z=e[M+2]}function g(){const _=new z,w=new z,M=new z,A=new z,C=new Se,P=new Se,N=new Se;for(let O=0,E=0;O<o.length;O+=9,E+=6){_.set(o[O+0],o[O+1],o[O+2]),w.set(o[O+3],o[O+4],o[O+5]),M.set(o[O+6],o[O+7],o[O+8]),C.set(s[E+0],s[E+1]),P.set(s[E+2],s[E+3]),N.set(s[E+4],s[E+5]),A.copy(_).add(w).add(M).divideScalar(3);const L=x(A);v(C,E+0,_,L),v(P,E+2,w,L),v(N,E+4,M,L)}}function v(_,w,M,A){A<0&&_.x===1&&(s[w]=_.x-1),M.x===0&&M.z===0&&(s[w]=A/2/Math.PI+.5)}function x(_){return Math.atan2(_.z,-_.x)}function y(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ll(e.vertices,e.indices,e.radius,e.details)}}class m1 extends Ll{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,s,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new m1(e.radius,e.detail)}}const O0=new z,L0=new z,sw=new z,k0=new Bi;class jU extends kt{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),o=Math.cos(bc*n),s=e.getIndex(),a=e.getAttribute("position"),l=s?s.count:a.count,c=[0,0,0],u=["a","b","c"],d=new Array(3),p={},m=[];for(let g=0;g<l;g+=3){s?(c[0]=s.getX(g),c[1]=s.getX(g+1),c[2]=s.getX(g+2)):(c[0]=g,c[1]=g+1,c[2]=g+2);const{a:v,b:x,c:y}=k0;if(v.fromBufferAttribute(a,c[0]),x.fromBufferAttribute(a,c[1]),y.fromBufferAttribute(a,c[2]),k0.getNormal(sw),d[0]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,d[1]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,d[2]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let _=0;_<3;_++){const w=(_+1)%3,M=d[_],A=d[w],C=k0[u[_]],P=k0[u[w]],N=`${M}_${A}`,O=`${A}_${M}`;O in p&&p[O]?(sw.dot(p[O].normal)<=o&&(m.push(C.x,C.y,C.z),m.push(P.x,P.y,P.z)),p[O]=null):N in p||(p[N]={index0:c[_],index1:c[w],normal:sw.clone()})}}for(const g in p)if(p[g]){const{index0:v,index1:x}=p[g];O0.fromBufferAttribute(a,v),L0.fromBufferAttribute(a,x),m.push(O0.x,O0.y,O0.z),m.push(L0.x,L0.y,L0.z)}this.setAttribute("position",new ct(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Mc extends kp{constructor(e){super(e),this.uuid=Gi(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new kp().fromJSON(i))}return this}}const yK={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let o=GU(t,0,i,n,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,c,u,d,p,m;if(r&&(o=wK(t,e,o,n)),t.length>80*n){a=c=t[0],l=u=t[1];for(let g=n;g<i;g+=n)d=t[g],p=t[g+1],d<a&&(a=d),p<l&&(l=p),d>c&&(c=d),p>u&&(u=p);m=Math.max(c-a,u-l),m=m!==0?32767/m:0}return Np(o,s,n,a,l,m,0),s}};function GU(t,e,n,r,i){let o,s;if(i===LK(t,e,n,r)>0)for(o=e;o<n;o+=r)s=c3(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=c3(o,t[o],t[o+1],s);return s&&g1(s,s.next)&&(Up(s),s=s.next),s}function Fc(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(g1(n,n.next)||In(n.prev,n,n.next)===0)){if(Up(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function Np(t,e,n,r,i,o,s){if(!t)return;!s&&o&&CK(t,r,i,o);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,o?xK(t,r,i,o):vK(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),Up(t),t=c.next,a=c.next;continue}if(t=c,t===a){s?s===1?(t=_K(Fc(t),e,n),Np(t,e,n,r,i,o,2)):s===2&&SK(t,e,n,r,i,o):Np(Fc(t),e,n,r,i,o,1);break}}}function vK(t){const e=t.prev,n=t,r=t.next;if(In(e,n,r)>=0)return!1;const i=e.x,o=n.x,s=r.x,a=e.y,l=n.y,c=r.y,u=i<o?i<s?i:s:o<s?o:s,d=a<l?a<c?a:c:l<c?l:c,p=i>o?i>s?i:s:o>s?o:s,m=a>l?a>c?a:c:l>c?l:c;let g=r.next;for(;g!==e;){if(g.x>=u&&g.x<=p&&g.y>=d&&g.y<=m&&yf(i,a,o,l,s,c,g.x,g.y)&&In(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function xK(t,e,n,r){const i=t.prev,o=t,s=t.next;if(In(i,o,s)>=0)return!1;const a=i.x,l=o.x,c=s.x,u=i.y,d=o.y,p=s.y,m=a<l?a<c?a:c:l<c?l:c,g=u<d?u<p?u:p:d<p?d:p,v=a>l?a>c?a:c:l>c?l:c,x=u>d?u>p?u:p:d>p?d:p,y=Kb(m,g,e,n,r),_=Kb(v,x,e,n,r);let w=t.prevZ,M=t.nextZ;for(;w&&w.z>=y&&M&&M.z<=_;){if(w.x>=m&&w.x<=v&&w.y>=g&&w.y<=x&&w!==i&&w!==s&&yf(a,u,l,d,c,p,w.x,w.y)&&In(w.prev,w,w.next)>=0||(w=w.prevZ,M.x>=m&&M.x<=v&&M.y>=g&&M.y<=x&&M!==i&&M!==s&&yf(a,u,l,d,c,p,M.x,M.y)&&In(M.prev,M,M.next)>=0))return!1;M=M.nextZ}for(;w&&w.z>=y;){if(w.x>=m&&w.x<=v&&w.y>=g&&w.y<=x&&w!==i&&w!==s&&yf(a,u,l,d,c,p,w.x,w.y)&&In(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;M&&M.z<=_;){if(M.x>=m&&M.x<=v&&M.y>=g&&M.y<=x&&M!==i&&M!==s&&yf(a,u,l,d,c,p,M.x,M.y)&&In(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function _K(t,e,n){let r=t;do{const i=r.prev,o=r.next.next;!g1(i,o)&&XU(i,r,r.next,o)&&Dp(i,o)&&Dp(o,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(o.i/n|0),Up(r),Up(r.next),r=t=o),r=r.next}while(r!==t);return Fc(r)}function SK(t,e,n,r,i,o){let s=t;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&RK(s,a)){let l=YU(s,a);s=Fc(s,s.next),l=Fc(l,l.next),Np(s,e,n,r,i,o,0),Np(l,e,n,r,i,o,0);return}a=a.next}s=s.next}while(s!==t)}function wK(t,e,n,r){const i=[];let o,s,a,l,c;for(o=0,s=e.length;o<s;o++)a=e[o]*r,l=o<s-1?e[o+1]*r:t.length,c=GU(t,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(PK(c));for(i.sort(bK),o=0;o<i.length;o++)n=EK(i[o],n);return n}function bK(t,e){return t.x-e.x}function EK(t,e){const n=MK(t,e);if(!n)return e;const r=YU(n,t);return Fc(r,r.next),Fc(n,n.next)}function MK(t,e){let n=e,r=-1/0,i;const o=t.x,s=t.y;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){const p=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(p<=o&&p>r&&(r=p,i=n.x<n.next.x?n:n.next,p===o))return i}n=n.next}while(n!==e);if(!i)return null;const a=i,l=i.x,c=i.y;let u=1/0,d;n=i;do o>=n.x&&n.x>=l&&o!==n.x&&yf(s<c?o:r,s,l,c,s<c?r:o,s,n.x,n.y)&&(d=Math.abs(s-n.y)/(o-n.x),Dp(n,t)&&(d<u||d===u&&(n.x>i.x||n.x===i.x&&TK(i,n)))&&(i=n,u=d)),n=n.next;while(n!==a);return i}function TK(t,e){return In(t.prev,t,e.prev)<0&&In(e.next,t,t.next)<0}function CK(t,e,n,r){let i=t;do i.z===0&&(i.z=Kb(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,AK(i)}function AK(t){let e,n,r,i,o,s,a,l,c=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(s>1);return t}function Kb(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function PK(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function yf(t,e,n,r,i,o,s,a){return(i-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(r-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function RK(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!IK(t,e)&&(Dp(t,e)&&Dp(e,t)&&OK(t,e)&&(In(t.prev,t,e.prev)||In(t,e.prev,e))||g1(t,e)&&In(t.prev,t,t.next)>0&&In(e.prev,e,e.next)>0)}function In(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function g1(t,e){return t.x===e.x&&t.y===e.y}function XU(t,e,n,r){const i=D0(In(t,e,n)),o=D0(In(t,e,r)),s=D0(In(n,r,t)),a=D0(In(n,r,e));return!!(i!==o&&s!==a||i===0&&N0(t,n,e)||o===0&&N0(t,r,e)||s===0&&N0(n,t,r)||a===0&&N0(n,e,r))}function N0(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function D0(t){return t>0?1:t<0?-1:0}function IK(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&XU(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Dp(t,e){return In(t.prev,t,t.next)<0?In(t,e,t.next)>=0&&In(t,t.prev,e)>=0:In(t,e,t.prev)<0||In(t,t.next,e)<0}function OK(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function YU(t,e){const n=new Zb(t.i,t.x,t.y),r=new Zb(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function c3(t,e,n,r){const i=new Zb(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Up(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Zb(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function LK(t,e,n,r){let i=0;for(let o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}class ks{static area(e){const n=e.length;let r=0;for(let i=n-1,o=0;o<n;i=o++)r+=e[i].x*e[o].y-e[o].x*e[i].y;return r*.5}static isClockWise(e){return ks.area(e)<0}static triangulateShape(e,n){const r=[],i=[],o=[];u3(e),f3(r,e);let s=e.length;n.forEach(u3);for(let l=0;l<n.length;l++)i.push(s),s+=n[l].length,f3(r,n[l]);const a=yK.triangulate(r,i);for(let l=0;l<a.length;l+=3)o.push(a.slice(l,l+3));return o}}function u3(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function f3(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class y1 extends kt{constructor(e=new Mc([new Se(.5,.5),new Se(-.5,.5),new Se(-.5,-.5),new Se(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];s(c)}this.setAttribute("position",new ct(i,3)),this.setAttribute("uv",new ct(o,2)),this.computeVertexNormals();function s(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1,d=n.depth!==void 0?n.depth:1;let p=n.bevelEnabled!==void 0?n.bevelEnabled:!0,m=n.bevelThickness!==void 0?n.bevelThickness:.2,g=n.bevelSize!==void 0?n.bevelSize:m-.1,v=n.bevelOffset!==void 0?n.bevelOffset:0,x=n.bevelSegments!==void 0?n.bevelSegments:3;const y=n.extrudePath,_=n.UVGenerator!==void 0?n.UVGenerator:kK;let w,M=!1,A,C,P,N;y&&(w=y.getSpacedPoints(u),M=!0,p=!1,A=y.computeFrenetFrames(u,!1),C=new z,P=new z,N=new z),p||(x=0,m=0,g=0,v=0);const O=a.extractPoints(c);let E=O.shape;const L=O.holes;if(!ks.isClockWise(E)){E=E.reverse();for(let B=0,me=L.length;B<me;B++){const be=L[B];ks.isClockWise(be)&&(L[B]=be.reverse())}}const W=ks.triangulateShape(E,L),Y=E;for(let B=0,me=L.length;B<me;B++){const be=L[B];E=E.concat(be)}function K(B,me,be){return me||console.error("THREE.ExtrudeGeometry: vec does not exist"),B.clone().addScaledVector(me,be)}const J=E.length,Q=W.length;function D(B,me,be){let ke,ye,$e;const Ne=B.x-me.x,ze=B.y-me.y,V=be.x-B.x,U=be.y-B.y,le=Ne*Ne+ze*ze,ee=Ne*U-ze*V;if(Math.abs(ee)>Number.EPSILON){const se=Math.sqrt(le),he=Math.sqrt(V*V+U*U),je=me.x-ze/se,Ee=me.y+Ne/se,Oe=be.x-U/he,dt=be.y+V/he,Ie=((Oe-je)*U-(dt-Ee)*V)/(Ne*U-ze*V);ke=je+Ne*Ie-B.x,ye=Ee+ze*Ie-B.y;const We=ke*ke+ye*ye;if(We<=2)return new Se(ke,ye);$e=Math.sqrt(We/2)}else{let se=!1;Ne>Number.EPSILON?V>Number.EPSILON&&(se=!0):Ne<-Number.EPSILON?V<-Number.EPSILON&&(se=!0):Math.sign(ze)===Math.sign(U)&&(se=!0),se?(ke=-ze,ye=Ne,$e=Math.sqrt(le)):(ke=Ne,ye=ze,$e=Math.sqrt(le/2))}return new Se(ke/$e,ye/$e)}const G=[];for(let B=0,me=Y.length,be=me-1,ke=B+1;B<me;B++,be++,ke++)be===me&&(be=0),ke===me&&(ke=0),G[B]=D(Y[B],Y[be],Y[ke]);const X=[];let ne,pe=G.concat();for(let B=0,me=L.length;B<me;B++){const be=L[B];ne=[];for(let ke=0,ye=be.length,$e=ye-1,Ne=ke+1;ke<ye;ke++,$e++,Ne++)$e===ye&&($e=0),Ne===ye&&(Ne=0),ne[ke]=D(be[ke],be[$e],be[Ne]);X.push(ne),pe=pe.concat(ne)}for(let B=0;B<x;B++){const me=B/x,be=m*Math.cos(me*Math.PI/2),ke=g*Math.sin(me*Math.PI/2)+v;for(let ye=0,$e=Y.length;ye<$e;ye++){const Ne=K(Y[ye],G[ye],ke);Ae(Ne.x,Ne.y,-be)}for(let ye=0,$e=L.length;ye<$e;ye++){const Ne=L[ye];ne=X[ye];for(let ze=0,V=Ne.length;ze<V;ze++){const U=K(Ne[ze],ne[ze],ke);Ae(U.x,U.y,-be)}}}const De=g+v;for(let B=0;B<J;B++){const me=p?K(E[B],pe[B],De):E[B];M?(P.copy(A.normals[0]).multiplyScalar(me.x),C.copy(A.binormals[0]).multiplyScalar(me.y),N.copy(w[0]).add(P).add(C),Ae(N.x,N.y,N.z)):Ae(me.x,me.y,0)}for(let B=1;B<=u;B++)for(let me=0;me<J;me++){const be=p?K(E[me],pe[me],De):E[me];M?(P.copy(A.normals[B]).multiplyScalar(be.x),C.copy(A.binormals[B]).multiplyScalar(be.y),N.copy(w[B]).add(P).add(C),Ae(N.x,N.y,N.z)):Ae(be.x,be.y,d/u*B)}for(let B=x-1;B>=0;B--){const me=B/x,be=m*Math.cos(me*Math.PI/2),ke=g*Math.sin(me*Math.PI/2)+v;for(let ye=0,$e=Y.length;ye<$e;ye++){const Ne=K(Y[ye],G[ye],ke);Ae(Ne.x,Ne.y,d+be)}for(let ye=0,$e=L.length;ye<$e;ye++){const Ne=L[ye];ne=X[ye];for(let ze=0,V=Ne.length;ze<V;ze++){const U=K(Ne[ze],ne[ze],ke);M?Ae(U.x,U.y+w[u-1].y,w[u-1].x+be):Ae(U.x,U.y,d+be)}}}ae(),_e();function ae(){const B=i.length/3;if(p){let me=0,be=J*me;for(let ke=0;ke<Q;ke++){const ye=W[ke];qe(ye[2]+be,ye[1]+be,ye[0]+be)}me=u+x*2,be=J*me;for(let ke=0;ke<Q;ke++){const ye=W[ke];qe(ye[0]+be,ye[1]+be,ye[2]+be)}}else{for(let me=0;me<Q;me++){const be=W[me];qe(be[2],be[1],be[0])}for(let me=0;me<Q;me++){const be=W[me];qe(be[0]+J*u,be[1]+J*u,be[2]+J*u)}}r.addGroup(B,i.length/3-B,0)}function _e(){const B=i.length/3;let me=0;Re(Y,me),me+=Y.length;for(let be=0,ke=L.length;be<ke;be++){const ye=L[be];Re(ye,me),me+=ye.length}r.addGroup(B,i.length/3-B,1)}function Re(B,me){let be=B.length;for(;--be>=0;){const ke=be;let ye=be-1;ye<0&&(ye=B.length-1);for(let $e=0,Ne=u+x*2;$e<Ne;$e++){const ze=J*$e,V=J*($e+1),U=me+ke+ze,le=me+ye+ze,ee=me+ye+V,se=me+ke+V;ut(U,le,ee,se)}}}function Ae(B,me,be){l.push(B),l.push(me),l.push(be)}function qe(B,me,be){Ye(B),Ye(me),Ye(be);const ke=i.length/3,ye=_.generateTopUV(r,i,ke-3,ke-2,ke-1);Ve(ye[0]),Ve(ye[1]),Ve(ye[2])}function ut(B,me,be,ke){Ye(B),Ye(me),Ye(ke),Ye(me),Ye(be),Ye(ke);const ye=i.length/3,$e=_.generateSideWallUV(r,i,ye-6,ye-3,ye-2,ye-1);Ve($e[0]),Ve($e[1]),Ve($e[3]),Ve($e[1]),Ve($e[2]),Ve($e[3])}function Ye(B){i.push(l[B*3+0]),i.push(l[B*3+1]),i.push(l[B*3+2])}function Ve(B){o.push(B.x),o.push(B.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return NK(n,r,e)}static fromJSON(e,n){const r=[];for(let o=0,s=e.shapes.length;o<s;o++){const a=n[e.shapes[o]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new Hv[i.type]().fromJSON(i)),new y1(r,e.options)}}const kK={generateTopUV:function(t,e,n,r,i){const o=e[n*3],s=e[n*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new Se(o,s),new Se(a,l),new Se(c,u)]},generateSideWallUV:function(t,e,n,r,i,o){const s=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[r*3],u=e[r*3+1],d=e[r*3+2],p=e[i*3],m=e[i*3+1],g=e[i*3+2],v=e[o*3],x=e[o*3+1],y=e[o*3+2];return Math.abs(a-u)<Math.abs(s-c)?[new Se(s,1-l),new Se(c,1-d),new Se(p,1-g),new Se(v,1-y)]:[new Se(a,1-l),new Se(u,1-d),new Se(m,1-g),new Se(x,1-y)]}};function NK(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const o=t[r];n.shapes.push(o.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class v1 extends Ll{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,o,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new v1(e.radius,e.detail)}}class pm extends Ll{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new pm(e.radius,e.detail)}}class x1 extends kt{constructor(e=.5,n=1,r=32,i=1,o=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:o,thetaLength:s},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],u=[];let d=e;const p=(n-e)/i,m=new z,g=new Se;for(let v=0;v<=i;v++){for(let x=0;x<=r;x++){const y=o+x/r*s;m.x=d*Math.cos(y),m.y=d*Math.sin(y),l.push(m.x,m.y,m.z),c.push(0,0,1),g.x=(m.x/n+1)/2,g.y=(m.y/n+1)/2,u.push(g.x,g.y)}d+=p}for(let v=0;v<i;v++){const x=v*(r+1);for(let y=0;y<r;y++){const _=y+x,w=_,M=_+r+1,A=_+r+2,C=_+1;a.push(w,M,C),a.push(M,A,C)}}this.setIndex(a),this.setAttribute("position",new ct(l,3)),this.setAttribute("normal",new ct(c,3)),this.setAttribute("uv",new ct(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new x1(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class _1 extends kt{constructor(e=new Mc([new Se(0,.5),new Se(-.5,-.5),new Se(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],o=[],s=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new ct(i,3)),this.setAttribute("normal",new ct(o,3)),this.setAttribute("uv",new ct(s,2));function c(u){const d=i.length/3,p=u.extractPoints(n);let m=p.shape;const g=p.holes;ks.isClockWise(m)===!1&&(m=m.reverse());for(let x=0,y=g.length;x<y;x++){const _=g[x];ks.isClockWise(_)===!0&&(g[x]=_.reverse())}const v=ks.triangulateShape(m,g);for(let x=0,y=g.length;x<y;x++){const _=g[x];m=m.concat(_)}for(let x=0,y=m.length;x<y;x++){const _=m[x];i.push(_.x,_.y,0),o.push(0,0,1),s.push(_.x,_.y)}for(let x=0,y=v.length;x<y;x++){const _=v[x],w=_[0]+d,M=_[1]+d,A=_[2]+d;r.push(w,M,A),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return DK(n,e)}static fromJSON(e,n){const r=[];for(let i=0,o=e.shapes.length;i<o;i++){const s=n[e.shapes[i]];r.push(s)}return new _1(r,e.curveSegments)}}function DK(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class mm extends kt{constructor(e=1,n=32,r=16,i=0,o=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:o,thetaStart:s,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(s+a,Math.PI);let c=0;const u=[],d=new z,p=new z,m=[],g=[],v=[],x=[];for(let y=0;y<=r;y++){const _=[],w=y/r;let M=0;y===0&&s===0?M=.5/n:y===r&&l===Math.PI&&(M=-.5/n);for(let A=0;A<=n;A++){const C=A/n;d.x=-e*Math.cos(i+C*o)*Math.sin(s+w*a),d.y=e*Math.cos(s+w*a),d.z=e*Math.sin(i+C*o)*Math.sin(s+w*a),g.push(d.x,d.y,d.z),p.copy(d).normalize(),v.push(p.x,p.y,p.z),x.push(C+M,1-w),_.push(c++)}u.push(_)}for(let y=0;y<r;y++)for(let _=0;_<n;_++){const w=u[y][_+1],M=u[y][_],A=u[y+1][_],C=u[y+1][_+1];(y!==0||s>0)&&m.push(w,M,C),(y!==r-1||l<Math.PI)&&m.push(M,A,C)}this.setIndex(m),this.setAttribute("position",new ct(g,3)),this.setAttribute("normal",new ct(v,3)),this.setAttribute("uv",new ct(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mm(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class S1 extends Ll{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new S1(e.radius,e.detail)}}class w1 extends kt{constructor(e=1,n=.4,r=12,i=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:o},r=Math.floor(r),i=Math.floor(i);const s=[],a=[],l=[],c=[],u=new z,d=new z,p=new z;for(let m=0;m<=r;m++)for(let g=0;g<=i;g++){const v=g/i*o,x=m/r*Math.PI*2;d.x=(e+n*Math.cos(x))*Math.cos(v),d.y=(e+n*Math.cos(x))*Math.sin(v),d.z=n*Math.sin(x),a.push(d.x,d.y,d.z),u.x=e*Math.cos(v),u.y=e*Math.sin(v),p.subVectors(d,u).normalize(),l.push(p.x,p.y,p.z),c.push(g/i),c.push(m/r)}for(let m=1;m<=r;m++)for(let g=1;g<=i;g++){const v=(i+1)*m+g-1,x=(i+1)*(m-1)+g-1,y=(i+1)*(m-1)+g,_=(i+1)*m+g;s.push(v,x,_),s.push(x,y,_)}this.setIndex(s),this.setAttribute("position",new ct(a,3)),this.setAttribute("normal",new ct(l,3)),this.setAttribute("uv",new ct(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new w1(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class b1 extends kt{constructor(e=1,n=.4,r=64,i=8,o=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:o,q:s},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],u=[],d=new z,p=new z,m=new z,g=new z,v=new z,x=new z,y=new z;for(let w=0;w<=r;++w){const M=w/r*o*Math.PI*2;_(M,o,s,e,m),_(M+.01,o,s,e,g),x.subVectors(g,m),y.addVectors(g,m),v.crossVectors(x,y),y.crossVectors(v,x),v.normalize(),y.normalize();for(let A=0;A<=i;++A){const C=A/i*Math.PI*2,P=-n*Math.cos(C),N=n*Math.sin(C);d.x=m.x+(P*y.x+N*v.x),d.y=m.y+(P*y.y+N*v.y),d.z=m.z+(P*y.z+N*v.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),c.push(p.x,p.y,p.z),u.push(w/r),u.push(A/i)}}for(let w=1;w<=r;w++)for(let M=1;M<=i;M++){const A=(i+1)*(w-1)+(M-1),C=(i+1)*w+(M-1),P=(i+1)*w+M,N=(i+1)*(w-1)+M;a.push(A,C,N),a.push(C,P,N)}this.setIndex(a),this.setAttribute("position",new ct(l,3)),this.setAttribute("normal",new ct(c,3)),this.setAttribute("uv",new ct(u,2));function _(w,M,A,C,P){const N=Math.cos(w),O=Math.sin(w),E=A/M*w,L=Math.cos(E);P.x=C*(2+L)*.5*N,P.y=C*(2+L)*O*.5,P.z=C*Math.sin(E)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new b1(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class E1 extends kt{constructor(e=new OT(new z(-1,-1,0),new z(-1,1,0),new z(1,1,0)),n=64,r=1,i=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:o};const s=e.computeFrenetFrames(n,o);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const a=new z,l=new z,c=new Se;let u=new z;const d=[],p=[],m=[],g=[];v(),this.setIndex(g),this.setAttribute("position",new ct(d,3)),this.setAttribute("normal",new ct(p,3)),this.setAttribute("uv",new ct(m,2));function v(){for(let w=0;w<n;w++)x(w);x(o===!1?n:0),_(),y()}function x(w){u=e.getPointAt(w/n,u);const M=s.normals[w],A=s.binormals[w];for(let C=0;C<=i;C++){const P=C/i*Math.PI*2,N=Math.sin(P),O=-Math.cos(P);l.x=O*M.x+N*A.x,l.y=O*M.y+N*A.y,l.z=O*M.z+N*A.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=u.x+r*l.x,a.y=u.y+r*l.y,a.z=u.z+r*l.z,d.push(a.x,a.y,a.z)}}function y(){for(let w=1;w<=n;w++)for(let M=1;M<=i;M++){const A=(i+1)*(w-1)+(M-1),C=(i+1)*w+(M-1),P=(i+1)*w+M,N=(i+1)*(w-1)+M;g.push(A,C,N),g.push(C,P,N)}}function _(){for(let w=0;w<=n;w++)for(let M=0;M<=i;M++)c.x=w/n,c.y=M/i,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new E1(new Hv[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class kT extends kt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new z,o=new z;if(e.index!==null){const s=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const d=l[c],p=d.start,m=d.count;for(let g=p,v=p+m;g<v;g+=3)for(let x=0;x<3;x++){const y=a.getX(g+x),_=a.getX(g+(x+1)%3);i.fromBufferAttribute(s,y),o.fromBufferAttribute(s,_),d3(i,o,r)===!0&&(n.push(i.x,i.y,i.z),n.push(o.x,o.y,o.z))}}}else{const s=e.attributes.position;for(let a=0,l=s.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,d=3*a+(c+1)%3;i.fromBufferAttribute(s,u),o.fromBufferAttribute(s,d),d3(i,o,r)===!0&&(n.push(i.x,i.y,i.z),n.push(o.x,o.y,o.z))}}this.setAttribute("position",new ct(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function d3(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var h3=Object.freeze({__proto__:null,BoxGeometry:Gc,CapsuleGeometry:d1,CircleGeometry:h1,ConeGeometry:p1,CylinderGeometry:Xc,DodecahedronGeometry:m1,EdgesGeometry:jU,ExtrudeGeometry:y1,IcosahedronGeometry:v1,LatheGeometry:hm,OctahedronGeometry:pm,PlaneGeometry:ud,PolyhedronGeometry:Ll,RingGeometry:x1,ShapeGeometry:_1,SphereGeometry:mm,TetrahedronGeometry:S1,TorusGeometry:w1,TorusKnotGeometry:b1,TubeGeometry:E1,WireframeGeometry:kT});class qU extends Ir{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Je(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class KU extends _o{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Fp extends Ir{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Je(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Il,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ai,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ZU extends Fp{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Se(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return $n(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Je(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Je(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Je(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class JU extends Ir{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Je(16777215),this.specular=new Je(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Il,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ai,this.combine=am,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class QU extends Ir{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Je(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Il,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class eF extends Ir{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Il,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class tF extends Ir{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Je(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Il,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ai,this.combine=am,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nF extends Ir{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Je(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Il,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class rF extends fi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function gc(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function iF(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function oF(t){function e(i,o){return t[i]-t[o]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function Jb(t,e,n){const r=t.length,i=new t.constructor(r);for(let o=0,s=0;s!==r;++o){const a=n[o]*e;for(let l=0;l!==e;++l)i[s++]=t[a+l]}return i}function NT(t,e,n,r){let i=1,o=t[0];for(;o!==void 0&&o[r]===void 0;)o=t[i++];if(o===void 0)return;let s=o[r];if(s!==void 0)if(Array.isArray(s))do s=o[r],s!==void 0&&(e.push(o.time),n.push.apply(n,s)),o=t[i++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[r],s!==void 0&&(e.push(o.time),s.toArray(n,n.length)),o=t[i++];while(o!==void 0);else do s=o[r],s!==void 0&&(e.push(o.time),n.push(s)),o=t[i++];while(o!==void 0)}function UK(t,e,n,r,i=30){const o=t.clone();o.name=e;const s=[];for(let l=0;l<o.tracks.length;++l){const c=o.tracks[l],u=c.getValueSize(),d=[],p=[];for(let m=0;m<c.times.length;++m){const g=c.times[m]*i;if(!(g<n||g>=r)){d.push(c.times[m]);for(let v=0;v<u;++v)p.push(c.values[m*u+v])}}d.length!==0&&(c.times=gc(d,c.times.constructor),c.values=gc(p,c.values.constructor),s.push(c))}o.tracks=s;let a=1/0;for(let l=0;l<o.tracks.length;++l)a>o.tracks[l].times[0]&&(a=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*a);return o.resetDuration(),o}function FK(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,o=e/r;for(let s=0;s<i;++s){const a=n.tracks[s],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(y){return y.name===a.name&&y.ValueTypeName===l});if(c===void 0)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const g=a.times.length-1;let v;if(o<=a.times[0]){const y=u,_=d-u;v=a.values.slice(y,_)}else if(o>=a.times[g]){const y=g*d+u,_=y+d-u;v=a.values.slice(y,_)}else{const y=a.createInterpolant(),_=u,w=d-u;y.evaluate(o),v=y.resultBuffer.slice(_,w)}l==="quaternion"&&new Xr().fromArray(v).normalize().conjugate().toArray(v);const x=c.times.length;for(let y=0;y<x;++y){const _=y*m+p;if(l==="quaternion")Xr.multiplyQuaternionsFlat(c.values,_,v,0,c.values,_);else{const w=m-p*2;for(let M=0;M<w;++M)c.values[_+M]-=v[M]}}}return t.blendMode=mT,t}const zK={convertArray:gc,isTypedArray:iF,getKeyframeOrder:oF,sortedArray:Jb,flattenJSON:NT,subclip:UK,makeClipAdditive:FK};class gm{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],o=n[r-1];e:{t:{let s;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<o)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(o=i,i=n[++r],e<i)break t}s=n.length;break n}if(!(e>=o)){const a=n[1];e<a&&(r=2,o=a);for(let l=r-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=o,o=n[--r-1],e>=o)break t}s=r,r=0;break n}break e}for(;r<s;){const a=r+s>>>1;e<n[a]?s=a:r=a+1}if(i=n[r],o=n[r-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,o,i)}return this.interpolate_(r,o,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,o=e*i;for(let s=0;s!==i;++s)n[s]=r[o+s];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class sF extends gm{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:hc,endingEnd:hc}}intervalChanged_(e,n,r){const i=this.parameterPositions;let o=e-2,s=e+1,a=i[o],l=i[s];if(a===void 0)switch(this.getSettings_().endingStart){case pc:o=e,a=2*n-r;break;case Cp:o=i.length-2,a=n+i[o]-i[o+1];break;default:o=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case pc:s=e,l=2*r-n;break;case Cp:s=1,l=r+i[1]-i[0];break;default:s=e-1,l=n}const c=(r-n)*.5,u=this.valueSize;this._weightPrev=c/(n-a),this._weightNext=c/(l-r),this._offsetPrev=o*u,this._offsetNext=s*u}interpolate_(e,n,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,m=this._weightNext,g=(r-n)/(i-n),v=g*g,x=v*g,y=-p*x+2*p*v-p*g,_=(1+p)*x+(-1.5-2*p)*v+(-.5+p)*g+1,w=(-1-m)*x+(1.5+m)*v+.5*g,M=m*x-m*v;for(let A=0;A!==a;++A)o[A]=y*s[u+A]+_*s[c+A]+w*s[l+A]+M*s[d+A];return o}}class DT extends gm{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-n)/(i-n),d=1-u;for(let p=0;p!==a;++p)o[p]=s[c+p]*d+s[l+p]*u;return o}}class aF extends gm{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Jo{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=gc(n,this.TimeBufferType),this.values=gc(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:gc(e.times,Array),values:gc(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new aF(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new DT(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new sF(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case Tp:n=this.InterpolantFactoryMethodDiscrete;break;case Dv:n=this.InterpolantFactoryMethodLinear;break;case My:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Tp;case this.InterpolantFactoryMethodLinear:return Dv;case this.InterpolantFactoryMethodSmooth:return My}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let o=0,s=i-1;for(;o!==i&&r[o]<e;)++o;for(;s!==-1&&r[s]>n;)--s;if(++s,o!==0||s!==i){o>=s&&(s=Math.max(s,1),o=s-1);const a=this.getValueSize();this.times=r.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,o=r.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),e=!1;break}s=l}if(i!==void 0&&iF(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===My,o=e.length-1;let s=1;for(let a=1;a<o;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(i)l=!0;else{const d=a*r,p=d-r,m=d+r;for(let g=0;g!==r;++g){const v=n[d+g];if(v!==n[p+g]||v!==n[m+g]){l=!0;break}}}if(l){if(a!==s){e[s]=e[a];const d=a*r,p=s*r;for(let m=0;m!==r;++m)n[p+m]=n[d+m]}++s}}if(o>0){e[s]=e[o];for(let a=o*r,l=s*r,c=0;c!==r;++c)n[l+c]=n[a+c];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=n.slice(0,s*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}Jo.prototype.TimeBufferType=Float32Array;Jo.prototype.ValueBufferType=Float32Array;Jo.prototype.DefaultInterpolation=Dv;class Yc extends Jo{constructor(e,n,r){super(e,n,r)}}Yc.prototype.ValueTypeName="bool";Yc.prototype.ValueBufferType=Array;Yc.prototype.DefaultInterpolation=Tp;Yc.prototype.InterpolantFactoryMethodLinear=void 0;Yc.prototype.InterpolantFactoryMethodSmooth=void 0;class UT extends Jo{}UT.prototype.ValueTypeName="color";class zp extends Jo{}zp.prototype.ValueTypeName="number";class lF extends gm{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(r-n)/(i-n);let c=e*a;for(let u=c+a;c!==u;c+=4)Xr.slerpFlat(o,0,s,c-a,s,c,l);return o}}class ym extends Jo{InterpolantFactoryMethodLinear(e){return new lF(this.times,this.values,this.getValueSize(),e)}}ym.prototype.ValueTypeName="quaternion";ym.prototype.InterpolantFactoryMethodSmooth=void 0;class qc extends Jo{constructor(e,n,r){super(e,n,r)}}qc.prototype.ValueTypeName="string";qc.prototype.ValueBufferType=Array;qc.prototype.DefaultInterpolation=Tp;qc.prototype.InterpolantFactoryMethodLinear=void 0;qc.prototype.InterpolantFactoryMethodSmooth=void 0;class Bp extends Jo{}Bp.prototype.ValueTypeName="vector";class Hp{constructor(e="",n=-1,r=[],i=n1){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=Gi(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let s=0,a=r.length;s!==a;++s)n.push(HK(r[s]).scale(i));const o=new this(e.name,e.duration,n,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,s=r.length;o!==s;++o)n.push(Jo.toJSON(r[o]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const o=n.length,s=[];for(let a=0;a<o;a++){let l=[],c=[];l.push((a+o-1)%o,a,(a+1)%o),c.push(0,1,0);const u=oF(l);l=Jb(l,1,u),c=Jb(c,1,u),!i&&l[0]===0&&(l.push(o),c.push(c[0])),s.push(new zp(".morphTargetInfluences["+n[a].name+"]",l,c).scale(1/r))}return new this(e,-1,s)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(o);if(u&&u.length>1){const d=u[1];let p=i[d];p||(i[d]=p=[]),p.push(c)}}const s=[];for(const a in i)s.push(this.CreateFromMorphTargetSequence(a,i[a],n,r));return s}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,p,m,g,v){if(m.length!==0){const x=[],y=[];NT(m,x,y,g),x.length!==0&&v.push(new d(p,x,y))}},i=[],o=e.name||"default",s=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const p=c[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let g;for(g=0;g<p.length;g++)if(p[g].morphTargets)for(let v=0;v<p[g].morphTargets.length;v++)m[p[g].morphTargets[v]]=-1;for(const v in m){const x=[],y=[];for(let _=0;_!==p[g].morphTargets.length;++_){const w=p[g];x.push(w.time),y.push(w.morphTarget===v?1:0)}i.push(new zp(".morphTargetInfluence["+v+"]",x,y))}l=m.length*s}else{const m=".bones["+n[d].name+"]";r(Bp,m+".position",p,"pos",i),r(ym,m+".quaternion",p,"rot",i),r(Bp,m+".scale",p,"scl",i)}}return i.length===0?null:new this(o,l,i,a)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const o=this.tracks[r];n=Math.max(n,o.times[o.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function BK(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return zp;case"vector":case"vector2":case"vector3":case"vector4":return Bp;case"color":return UT;case"quaternion":return ym;case"bool":case"boolean":return Yc;case"string":return qc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function HK(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=BK(t.type);if(t.times===void 0){const n=[],r=[];NT(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const da={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class FT{constructor(e,n,r){const i=this;let o=!1,s=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(u){a++,o===!1&&i.onStart!==void 0&&i.onStart(u,s,a),o=!0},this.itemEnd=function(u){s++,i.onProgress!==void 0&&i.onProgress(u,s,a),s===a&&(o=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,p=c.length;d<p;d+=2){const m=c[d],g=c[d+1];if(m.global&&(m.lastIndex=0),m.test(u))return g}return null}}}const cF=new FT;class Pi{constructor(e){this.manager=e!==void 0?e:cF,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,o){r.load(e,i,n,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Pi.DEFAULT_MATERIAL_NAME="__DEFAULT";const Js={};class VK extends Error{constructor(e,n){super(e),this.response=n}}class Ca extends Pi{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=da.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(o),this.manager.itemEnd(e)},0),o;if(Js[e]!==void 0){Js[e].push({onLoad:n,onProgress:r,onError:i});return}Js[e]=[],Js[e].push({onLoad:n,onProgress:r,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(s).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Js[e],d=c.body.getReader(),p=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),m=p?parseInt(p):0,g=m!==0;let v=0;const x=new ReadableStream({start(y){_();function _(){d.read().then(({done:w,value:M})=>{if(w)y.close();else{v+=M.byteLength;const A=new ProgressEvent("progress",{lengthComputable:g,loaded:v,total:m});for(let C=0,P=u.length;C<P;C++){const N=u[C];N.onProgress&&N.onProgress(A)}y.enqueue(M),_()}},w=>{y.error(w)})}}});return new Response(x)}else throw new VK(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),p=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(g=>m.decode(g))}}}).then(c=>{da.add(e,c);const u=Js[e];delete Js[e];for(let d=0,p=u.length;d<p;d++){const m=u[d];m.onLoad&&m.onLoad(c)}}).catch(c=>{const u=Js[e];if(u===void 0)throw this.manager.itemError(e),c;delete Js[e];for(let d=0,p=u.length;d<p;d++){const m=u[d];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class $K extends Pi{constructor(e){super(e)}load(e,n,r,i){const o=this,s=new Ca(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{n(o.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=Hp.parse(e[r]);n.push(i)}return n}}class WK extends Pi{constructor(e){super(e)}load(e,n,r,i){const o=this,s=[],a=new u1,l=new Ca(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(o.withCredentials);let c=0;function u(d){l.load(e[d],function(p){const m=o.parse(p,!0);s[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=tr),a.image=s,a.format=m.format,a.needsUpdate=!0,n&&n(a))},r,i)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)u(d);else l.load(e,function(d){const p=o.parse(d,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let g=0;g<m;g++){s[g]={mipmaps:[]};for(let v=0;v<p.mipmapCount;v++)s[g].mipmaps.push(p.mipmaps[g*p.mipmapCount+v]),s[g].format=p.format,s[g].width=p.width,s[g].height=p.height}a.image=s}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=tr),a.format=p.format,a.needsUpdate=!0,n&&n(a)},r,i);return a}}class Vp extends Pi{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=da.get(e);if(s!==void 0)return o.manager.itemStart(e),setTimeout(function(){n&&n(s),o.manager.itemEnd(e)},0),s;const a=Lp("img");function l(){u(),da.add(e,this),n&&n(this),o.manager.itemEnd(e)}function c(d){u(),i&&i(d),o.manager.itemError(e),o.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(e),a.src=e,a}}class jK extends Pi{constructor(e){super(e)}load(e,n,r,i){const o=new fm;o.colorSpace=ao;const s=new Vp(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function l(c){s.load(e[c],function(u){o.images[c]=u,a++,a===6&&(o.needsUpdate=!0,n&&n(o))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return o}}class GK extends Pi{constructor(e){super(e)}load(e,n,r,i){const o=this,s=new Ls,a=new Ca(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(o.withCredentials),a.load(e,function(l){let c;try{c=o.parse(l)}catch(u){if(i!==void 0)i(u);else{console.error(u);return}}c.image!==void 0?s.image=c.image:c.data!==void 0&&(s.image.width=c.width,s.image.height=c.height,s.image.data=c.data),s.wrapS=c.wrapS!==void 0?c.wrapS:po,s.wrapT=c.wrapT!==void 0?c.wrapT:po,s.magFilter=c.magFilter!==void 0?c.magFilter:tr,s.minFilter=c.minFilter!==void 0?c.minFilter:tr,s.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(s.colorSpace=c.colorSpace),c.flipY!==void 0&&(s.flipY=c.flipY),c.format!==void 0&&(s.format=c.format),c.type!==void 0&&(s.type=c.type),c.mipmaps!==void 0&&(s.mipmaps=c.mipmaps,s.minFilter=Es),c.mipmapCount===1&&(s.minFilter=tr),c.generateMipmaps!==void 0&&(s.generateMipmaps=c.generateMipmaps),s.needsUpdate=!0,n&&n(s,c)},r,i),s}}class XK extends Pi{constructor(e){super(e)}load(e,n,r,i){const o=new Nn,s=new Vp(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,n!==void 0&&n(o)},r,i),o}}class kl extends jt{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Je(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}class uF extends kl{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(jt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Je(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const aw=new St,p3=new z,m3=new z;class zT{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Se(512,512),this.map=null,this.mapPass=null,this.matrix=new St,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new dm,this._frameExtents=new Se(1,1),this._viewportCount=1,this._viewports=[new Bt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;p3.setFromMatrixPosition(e.matrixWorld),n.position.copy(p3),m3.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(m3),n.updateMatrixWorld(),aw.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(aw),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(aw)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class YK extends zT{constructor(){super(new Tn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=$f*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,o=e.distance||n.far;(r!==n.fov||i!==n.aspect||o!==n.far)&&(n.fov=r,n.aspect=i,n.far=o,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class fF extends kl{constructor(e,n,r=0,i=Math.PI/3,o=0,s=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(jt.DEFAULT_UP),this.updateMatrix(),this.target=new jt,this.distance=r,this.angle=i,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new YK}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const g3=new St,fh=new z,lw=new z;class qK extends zT{constructor(){super(new Tn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Se(4,2),this._viewportCount=6,this._viewports=[new Bt(2,1,1,1),new Bt(0,1,1,1),new Bt(3,1,1,1),new Bt(1,1,1,1),new Bt(3,0,1,1),new Bt(1,0,1,1)],this._cubeDirections=[new z(1,0,0),new z(-1,0,0),new z(0,0,1),new z(0,0,-1),new z(0,1,0),new z(0,-1,0)],this._cubeUps=[new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,0,1),new z(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,o=e.distance||r.far;o!==r.far&&(r.far=o,r.updateProjectionMatrix()),fh.setFromMatrixPosition(e.matrixWorld),r.position.copy(fh),lw.copy(r.position),lw.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(lw),r.updateMatrixWorld(),i.makeTranslation(-fh.x,-fh.y,-fh.z),g3.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(g3)}}class dF extends kl{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new qK}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class KK extends zT{constructor(){super(new Fo(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class hF extends kl{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(jt.DEFAULT_UP),this.updateMatrix(),this.target=new jt,this.shadow=new KK}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class pF extends kl{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class mF extends kl{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class gF{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new z)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,o=e.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.282095),n.addScaledVector(s[1],.488603*i),n.addScaledVector(s[2],.488603*o),n.addScaledVector(s[3],.488603*r),n.addScaledVector(s[4],1.092548*(r*i)),n.addScaledVector(s[5],1.092548*(i*o)),n.addScaledVector(s[6],.315392*(3*o*o-1)),n.addScaledVector(s[7],1.092548*(r*o)),n.addScaledVector(s[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,o=e.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.886227),n.addScaledVector(s[1],2*.511664*i),n.addScaledVector(s[2],2*.511664*o),n.addScaledVector(s[3],2*.511664*r),n.addScaledVector(s[4],2*.429043*r*i),n.addScaledVector(s[5],2*.429043*i*o),n.addScaledVector(s[6],.743125*o*o-.247708),n.addScaledVector(s[7],2*.429043*r*o),n.addScaledVector(s[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,o=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*o,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*o,n[6]=.315392*(3*o*o-1),n[7]=1.092548*r*o,n[8]=.546274*(r*r-i*i)}}class yF extends kl{constructor(e=new gF,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class M1 extends Pi{constructor(e){super(e),this.textures={}}load(e,n,r,i){const o=this,s=new Ca(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{n(o.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(o){return n[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),n[o]}const i=M1.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Je().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const s=e.uniforms[o];switch(i.uniforms[o]={},s.type){case"t":i.uniforms[o].value=r(s.value);break;case"c":i.uniforms[o].value=new Je().setHex(s.value);break;case"v2":i.uniforms[o].value=new Se().fromArray(s.value);break;case"v3":i.uniforms[o].value=new z().fromArray(s.value);break;case"v4":i.uniforms[o].value=new Bt().fromArray(s.value);break;case"m3":i.uniforms[o].value=new It().fromArray(s.value);break;case"m4":i.uniforms[o].value=new St().fromArray(s.value);break;default:i.uniforms[o].value=s.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const o in e.extensions)i.extensions[o]=e.extensions[o];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),i.normalScale=new Se().fromArray(o)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Se().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:qU,SpriteMaterial:MT,RawShaderMaterial:KU,ShaderMaterial:_o,PointsMaterial:CT,MeshPhysicalMaterial:ZU,MeshStandardMaterial:Fp,MeshPhongMaterial:JU,MeshToonMaterial:QU,MeshNormalMaterial:eF,MeshLambertMaterial:tF,MeshDepthMaterial:bT,MeshDistanceMaterial:ET,MeshBasicMaterial:Ol,MeshMatcapMaterial:nF,LineDashedMaterial:rF,LineBasicMaterial:fi,Material:Ir};return new n[e]}}class Qb{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class BT extends kt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class vF extends Pi{constructor(e){super(e)}load(e,n,r,i){const o=this,s=new Ca(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{n(o.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(m,g){if(n[g]!==void 0)return n[g];const x=m.interleavedBuffers[g],y=o(m,x.buffer),_=pf(x.type,y),w=new l1(_,x.stride);return w.uuid=x.uuid,n[g]=w,w}function o(m,g){if(r[g]!==void 0)return r[g];const x=m.arrayBuffers[g],y=new Uint32Array(x).buffer;return r[g]=y,y}const s=e.isInstancedBufferGeometry?new BT:new kt,a=e.data.index;if(a!==void 0){const m=pf(a.type,a.array);s.setIndex(new on(m,1))}const l=e.data.attributes;for(const m in l){const g=l[m];let v;if(g.isInterleavedBufferAttribute){const x=i(e.data,g.data);v=new Vi(x,g.itemSize,g.offset,g.normalized)}else{const x=pf(g.type,g.array),y=g.isInstancedBufferAttribute?jf:on;v=new y(x,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),g.usage!==void 0&&v.setUsage(g.usage),s.setAttribute(m,v)}const c=e.data.morphAttributes;if(c)for(const m in c){const g=c[m],v=[];for(let x=0,y=g.length;x<y;x++){const _=g[x];let w;if(_.isInterleavedBufferAttribute){const M=i(e.data,_.data);w=new Vi(M,_.itemSize,_.offset,_.normalized)}else{const M=pf(_.type,_.array);w=new on(M,_.itemSize,_.normalized)}_.name!==void 0&&(w.name=_.name),v.push(w)}s.morphAttributes[m]=v}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let m=0,g=d.length;m!==g;++m){const v=d[m];s.addGroup(v.start,v.count,v.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new z;p.center!==void 0&&m.fromArray(p.center),s.boundingSphere=new xr(m,p.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class ZK extends Pi{constructor(e){super(e)}load(e,n,r,i){const o=this,s=this.path===""?Qb.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const a=new Ca(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(c,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?Qb.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const o=new Ca(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const s=await o.loadAsync(e,n),a=JSON.parse(s),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,i),s=this.parseImages(e.images,function(){n!==void 0&&n(c)}),a=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,o,l,a,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),this.bindLightTargets(c),n!==void 0){let d=!1;for(const p in s)if(s[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),o=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,o),a=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,i,a,s,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const o=new Mc().fromJSON(e[r]);n[o.uuid]=o}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(o){o.isBone&&(i[o.uuid]=o)}),e!==void 0)for(let o=0,s=e.length;o<s;o++){const a=new c1().fromJSON(e[o],i);r[a.uuid]=a}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new vF;for(let o=0,s=e.length;o<s;o++){let a;const l=e[o];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in h3?a=h3[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const o=new M1;o.setTextures(n);for(let s=0,a=e.length;s<a;s++){const l=e[s];r[l.uuid]===void 0&&(r[l.uuid]=o.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],o=Hp.parse(i);n[o.uuid]=o}return n}parseImages(e,n){const r=this,i={};let o;function s(l){return r.manager.itemStart(l),o.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return s(u)}else return l.data?{data:pf(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new FT(n);o=new Vp(l),o.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const d=e[c],p=d.url;if(Array.isArray(p)){const m=[];for(let g=0,v=p.length;g<v;g++){const x=p[g],y=a(x);y!==null&&(y instanceof HTMLImageElement?m.push(y):m.push(new Ls(y.data,y.width,y.height)))}i[d.uuid]=new mc(m)}else{const m=a(d.url);i[d.uuid]=new mc(m)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function o(s){if(typeof s=="string"){const a=s,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await i.loadAsync(l)}else return s.data?{data:pf(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){i=new Vp(this.manager),i.setCrossOrigin(this.crossOrigin);for(let s=0,a=e.length;s<a;s++){const l=e[s],c=l.url;if(Array.isArray(c)){const u=[];for(let d=0,p=c.length;d<p;d++){const m=c[d],g=await o(m);g!==null&&(g instanceof HTMLImageElement?u.push(g):u.push(new Ls(g.data,g.width,g.height)))}r[l.uuid]=new mc(u)}else{const u=await o(l.url);r[l.uuid]=new mc(u)}}}return r}parseTextures(e,n){function r(o,s){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),s[o])}const i={};if(e!==void 0)for(let o=0,s=e.length;o<s;o++){const a=e[o];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],c=l.data;let u;Array.isArray(c)?(u=new fm,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Ls:u=new Nn,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=r(a.mapping,JK)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=r(a.wrap[0],y3),u.wrapT=r(a.wrap[1],y3)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.minFilter!==void 0&&(u.minFilter=r(a.minFilter,v3)),a.magFilter!==void 0&&(u.magFilter=r(a.magFilter,v3)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),i[a.uuid]=u}return i}parseObject(e,n,r,i,o){let s;function a(p){return n[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),n[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let g=0,v=p.length;g<v;g++){const x=p[g];r[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),m.push(r[x])}return m}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function c(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let u,d;switch(e.type){case"Scene":s=new Fv,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new Je(e.background):s.background=c(e.background)),e.environment!==void 0&&(s.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new a1(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new s1(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(s.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new Tn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Fo(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new pF(e.color,e.intensity);break;case"DirectionalLight":s=new hF(e.color,e.intensity),s.target=e.target||"";break;case"PointLight":s=new dF(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new mF(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new fF(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),s.target=e.target||"";break;case"HemisphereLight":s=new uF(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new yF().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),d=l(e.material),s=new NU(u,d),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),d=l(e.material),s=new On(u,d);break;case"InstancedMesh":u=a(e.geometry),d=l(e.material);const p=e.count,m=e.instanceMatrix,g=e.instanceColor;s=new DU(u,d,p),s.instanceMatrix=new jf(new Float32Array(m.array),16),g!==void 0&&(s.instanceColor=new jf(new Float32Array(g.array),g.itemSize));break;case"BatchedMesh":u=a(e.geometry),d=l(e.material),s=new UU(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,d),s.geometry=u,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._visibility=e.visibility,s._active=e.active,s._bounds=e.bounds.map(v=>{const x=new vr;x.min.fromArray(v.boxMin),x.max.fromArray(v.boxMax);const y=new xr;return y.radius=v.sphereRadius,y.center.fromArray(v.sphereCenter),{boxInitialized:v.boxInitialized,box:x,sphereInitialized:v.sphereInitialized,sphere:y}}),s._maxInstanceCount=e.maxInstanceCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._geometryCount=e.geometryCount,s._matricesTexture=c(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(s._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":s=new kU;break;case"Line":s=new wl(a(e.geometry),l(e.material));break;case"LineLoop":s=new FU(a(e.geometry),l(e.material));break;case"LineSegments":s=new Fs(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":s=new zU(a(e.geometry),l(e.material));break;case"Sprite":s=new LU(l(e.material));break;case"Group":s=new gf;break;case"Bone":s=new TT;break;default:s=new jt}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(s.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)s.add(this.parseObject(p[m],n,r,i,o))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const g=p[m];s.animations.push(o[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const g=p[m],v=s.getObjectByProperty("uuid",g.object);v!==void 0&&s.addLevel(v,g.distance,g.hysteresis)}}return s}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(n){if(n.isDirectionalLight||n.isSpotLight){const r=n.target,i=e.getObjectByProperty("uuid",r);i!==void 0?n.target=i:n.target=new jt}})}}const JK={UVMapping:qx,CubeReflectionMapping:Ma,CubeRefractionMapping:Sl,EquirectangularReflectionMapping:wp,EquirectangularRefractionMapping:bp,CubeUVReflectionMapping:ld},y3={RepeatWrapping:Ep,ClampToEdgeWrapping:po,MirroredRepeatWrapping:Mp},v3={NearestFilter:gr,NearestMipmapNearestFilter:oT,NearestMipmapLinearFilter:hf,LinearFilter:tr,LinearMipmapNearestFilter:Vh,LinearMipmapLinearFilter:Es};class QK extends Pi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=da.get(e);if(s!==void 0){if(o.manager.itemStart(e),s.then){s.then(c=>{n&&n(c),o.manager.itemEnd(e)}).catch(c=>{i&&i(c)});return}return setTimeout(function(){n&&n(s),o.manager.itemEnd(e)},0),s}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(c){return da.add(e,c),n&&n(c),o.manager.itemEnd(e),c}).catch(function(c){i&&i(c),da.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)});da.add(e,l),o.manager.itemStart(e)}}let U0;class HT{static getContext(){return U0===void 0&&(U0=new(window.AudioContext||window.webkitAudioContext)),U0}static setContext(e){U0=e}}class eZ extends Pi{constructor(e){super(e)}load(e,n,r,i){const o=this,s=new Ca(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{const c=l.slice(0);HT.getContext().decodeAudioData(c,function(d){n(d)}).catch(a)}catch(c){a(c)}},r,i);function a(l){i?i(l):console.error(l),o.manager.itemError(e)}}}const x3=new St,_3=new St,Jl=new St;class tZ{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Tn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Tn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Jl.copy(e.projectionMatrix);const i=n.eyeSep/2,o=i*n.near/n.focus,s=n.near*Math.tan(bc*n.fov*.5)/n.zoom;let a,l;_3.elements[12]=-i,x3.elements[12]=i,a=-s*n.aspect+o,l=s*n.aspect+o,Jl.elements[0]=2*n.near/(l-a),Jl.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Jl),a=-s*n.aspect-o,l=s*n.aspect-o,Jl.elements[0]=2*n.near/(l-a),Jl.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Jl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(_3),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(x3)}}class VT{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=S3(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=S3();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function S3(){return(typeof performance>"u"?Date:performance).now()}const Ql=new z,w3=new Xr,nZ=new z,ec=new z;class rZ extends jt{constructor(){super(),this.type="AudioListener",this.context=HT.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new VT}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ql,w3,nZ),ec.set(0,0,-1).applyQuaternion(w3),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Ql.x,i),n.positionY.linearRampToValueAtTime(Ql.y,i),n.positionZ.linearRampToValueAtTime(Ql.z,i),n.forwardX.linearRampToValueAtTime(ec.x,i),n.forwardY.linearRampToValueAtTime(ec.y,i),n.forwardZ.linearRampToValueAtTime(ec.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(Ql.x,Ql.y,Ql.z),n.setOrientation(ec.x,ec.y,ec.z,r.x,r.y,r.z)}}class xF extends jt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const tc=new z,b3=new Xr,iZ=new z,nc=new z;class oZ extends xF{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(tc,b3,iZ),nc.set(0,0,1).applyQuaternion(b3);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(tc.x,r),n.positionY.linearRampToValueAtTime(tc.y,r),n.positionZ.linearRampToValueAtTime(tc.z,r),n.orientationX.linearRampToValueAtTime(nc.x,r),n.orientationY.linearRampToValueAtTime(nc.y,r),n.orientationZ.linearRampToValueAtTime(nc.z,r)}else n.setPosition(tc.x,tc.y,tc.z),n.setOrientation(nc.x,nc.y,nc.z)}}class sZ{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class _F{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,o,s;switch(n){case"quaternion":i=this._slerp,o=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,o=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,o=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=o,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,o=e*i+i;let s=this.cumulativeWeight;if(s===0){for(let a=0;a!==i;++a)r[o+a]=r[a];s=n}else{s+=n;const a=n/s;this._mixBufferRegion(r,o,0,a,i)}this.cumulativeWeight=s}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,o=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-o,n)}s>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(r[l]!==r[l+n]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let o=r,s=i;o!==s;++o)n[o]=n[i+o%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,o){if(i>=.5)for(let s=0;s!==o;++s)e[n+s]=e[r+s]}_slerp(e,n,r,i){Xr.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,o){const s=this._workIndex*o;Xr.multiplyQuaternionsFlat(e,s,e,n,e,r),Xr.slerpFlat(e,n,e,n,e,s,i)}_lerp(e,n,r,i,o){const s=1-i;for(let a=0;a!==o;++a){const l=n+a;e[l]=e[l]*s+e[r+a]*i}}_lerpAdditive(e,n,r,i,o){for(let s=0;s!==o;++s){const a=n+s;e[a]=e[a]+e[r+s]*i}}}const $T="\\[\\]\\.:\\/",aZ=new RegExp("["+$T+"]","g"),WT="[^"+$T+"]",lZ="[^"+$T.replace("\\.","")+"]",cZ=/((?:WC+[\/:])*)/.source.replace("WC",WT),uZ=/(WCOD+)?/.source.replace("WCOD",lZ),fZ=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",WT),dZ=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",WT),hZ=new RegExp("^"+cZ+uZ+fZ+dZ+"$"),pZ=["material","materials","bones","map"];class mZ{constructor(e,n,r){const i=r||$t.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,o=r.length;i!==o;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class $t{constructor(e,n,r){this.path=n,this.parsedPath=r||$t.parseTrackName(n),this.node=$t.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new $t.Composite(e,n,r):new $t(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(aZ,"")}static parseTrackName(e){const n=hZ.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const o=r.nodeName.substring(i+1);pZ.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(o){for(let s=0;s<o.length;s++){const a=o[s];if(a.name===n||a.uuid===n)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let o=n.propertyIndex;if(e||(e=$t.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const s=e[i];if(s===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(o!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=o}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}$t.Composite=mZ;$t.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};$t.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};$t.prototype.GetterByBindingType=[$t.prototype._getValue_direct,$t.prototype._getValue_array,$t.prototype._getValue_arrayElement,$t.prototype._getValue_toArray];$t.prototype.SetterByBindingTypeAndVersioning=[[$t.prototype._setValue_direct,$t.prototype._setValue_direct_setNeedsUpdate,$t.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_array,$t.prototype._setValue_array_setNeedsUpdate,$t.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_arrayElement,$t.prototype._setValue_arrayElement_setNeedsUpdate,$t.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_fromArray,$t.prototype._setValue_fromArray_setNeedsUpdate,$t.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class gZ{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Gi(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,o=this._bindings,s=o.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,d=arguments.length;u!==d;++u){const p=arguments[u],m=p.uuid;let g=n[m];if(g===void 0){g=l++,n[m]=g,e.push(p);for(let v=0,x=s;v!==x;++v)o[v].push(new $t(p,r[v],i[v]))}else if(g<c){a=e[g];const v=--c,x=e[v];n[x.uuid]=g,e[g]=x,n[m]=v,e[v]=p;for(let y=0,_=s;y!==_;++y){const w=o[y],M=w[v];let A=w[g];w[g]=M,A===void 0&&(A=new $t(p,r[y],i[y])),w[v]=A}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let o=this.nCachedObjects_;for(let s=0,a=arguments.length;s!==a;++s){const l=arguments[s],c=l.uuid,u=n[c];if(u!==void 0&&u>=o){const d=o++,p=e[d];n[p.uuid]=u,e[u]=p,n[c]=d,e[d]=l;for(let m=0,g=i;m!==g;++m){const v=r[m],x=v[d],y=v[u];v[u]=x,v[d]=y}}}this.nCachedObjects_=o}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let o=this.nCachedObjects_,s=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,d=n[u];if(d!==void 0)if(delete n[u],d<o){const p=--o,m=e[p],g=--s,v=e[g];n[m.uuid]=d,e[d]=m,n[v.uuid]=p,e[p]=v,e.pop();for(let x=0,y=i;x!==y;++x){const _=r[x],w=_[p],M=_[g];_[d]=w,_[p]=M,_.pop()}}else{const p=--s,m=e[p];p>0&&(n[m.uuid]=d),e[d]=m,e.pop();for(let g=0,v=i;g!==v;++g){const x=r[g];x[d]=x[p],x.pop()}}}this.nCachedObjects_=o}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const o=this._bindings;if(i!==void 0)return o[i];const s=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,d=new Array(c);i=o.length,r[e]=i,s.push(e),a.push(n),o.push(d);for(let p=u,m=l.length;p!==m;++p){const g=l[p];d[p]=new $t(g,e,n)}return d}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,o=this._parsedPaths,s=this._bindings,a=s.length-1,l=s[a],c=e[a];n[c]=r,s[r]=l,s.pop(),o[r]=o[a],o.pop(),i[r]=i[a],i.pop()}}}class SF{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const o=n.tracks,s=o.length,a=new Array(s),l={endingStart:hc,endingEnd:hc};for(let c=0;c!==s;++c){const u=o[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=rU,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,o=e._clip.duration,s=o/i,a=i/o;e.warp(1,s,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,o=i.time,s=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=o,l[1]=o+r,c[0]=e/s,c[1]=n/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const l=(e-o)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(e);const s=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case mT:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(s),c[u].accumulateAdditive(a);break;case n1:default:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(s),c[u].accumulate(i,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,o=this._loopCount;const s=r===iU;if(e===0)return o===-1?i:s&&(o&1)===1?n-i:i;if(r===nU){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),i>=n||i<0){const a=Math.floor(i/n);i-=n*a,o+=Math.abs(a);const l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(s&&(o&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=pc,i.endingEnd=pc):(e?i.endingStart=this.zeroSlopeAtStart?pc:hc:i.endingStart=Cp,n?i.endingEnd=this.zeroSlopeAtEnd?pc:hc:i.endingEnd=Cp)}_scheduleFading(e,n,r){const i=this._mixer,o=i.time;let s=this._weightInterpolant;s===null&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,l=s.sampleValues;return a[0]=o,l[0]=n,a[1]=o+e,l[1]=r,this}}const yZ=new Float32Array(1);class vZ extends Ko{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,o=i.length,s=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let d=0;d!==o;++d){const p=i[d],m=p.name;let g=u[m];if(g!==void 0)++g.referenceCount,s[d]=g;else{if(g=s[d],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,m));continue}const v=n&&n._propertyBindings[d].binding.parsedPath;g=new _F($t.create(r,m,v),p.ValueTypeName,p.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,m),s[d]=g}a[d].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,o=this._actionsByClip[i];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,o=this._actionsByClip;let s=o[n];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[n]=s;else{const a=s.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const o=e._clip.uuid,s=this._actionsByClip,a=s[o],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],l.length===0&&delete s[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,o=this._bindings;let s=i[n];s===void 0&&(s={},i[n]=s),s[r]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,o=r.path,s=this._bindingsByRootAndName,a=s[i],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete a[o],Object.keys(a).length===0&&delete s[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new DT(new Float32Array(2),new Float32Array(2),1,yZ),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,o=n[i];e.__cacheIndex=i,n[i]=e,o.__cacheIndex=r,n[r]=o}clipAction(e,n,r){const i=n||this._root,o=i.uuid;let s=typeof e=="string"?Hp.findByName(i,e):e;const a=s!==null?s.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(s!==null?r=s.blendMode:r=n1),l!==void 0){const d=l.actionByRoot[o];if(d!==void 0&&d.blendMode===r)return d;c=l.knownActions[0],s===null&&(s=c._clip)}if(s===null)return null;const u=new SF(this,s,n,r);return this._bindAction(u,c),this._addInactiveAction(u,a,o),u}existingAction(e,n){const r=n||this._root,i=r.uuid,o=typeof e=="string"?Hp.findByName(r,e):e,s=o?o.uuid:e,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,o=Math.sign(e),s=this._accuIndex^=1;for(let c=0;c!==r;++c)n[c]._update(i,e,o,s);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(s);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,o=i[r];if(o!==void 0){const s=o.knownActions;for(let a=0,l=s.length;a!==l;++a){const c=s[a];this._deactivateAction(c);const u=c._cacheIndex,d=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,n[u]=d,n.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const s in r){const a=r[s].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,o=i[n];if(o!==void 0)for(const s in o){const a=o[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class jT{constructor(e){this.value=e}clone(){return new jT(this.value.clone===void 0?this.value:this.value.clone())}}let xZ=0;class _Z extends Ko{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:xZ++}),this.name="",this.usage=Ip,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++){const o=Array.isArray(n[r])?n[r]:[n[r]];for(let s=0;s<o.length;s++)this.uniforms.push(o[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class Vv extends l1{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class SZ{constructor(e,n,r,i,o){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const E3=new St;class wF{constructor(e,n,r=0,i=1/0){this.ray=new jc(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new Ec,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return E3.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(E3),this}intersectObject(e,n=!0,r=[]){return eE(e,this,r,n),r.sort(M3),r}intersectObjects(e,n=!0,r=[]){for(let i=0,o=e.length;i<o;i++)eE(e[i],this,r,n);return r.sort(M3),r}}function M3(t,e){return t.distance-e.distance}function eE(t,e,n,r){let i=!0;if(t.layers.test(e.layers)&&t.raycast(e,n)===!1&&(i=!1),i===!0&&r===!0){const o=t.children;for(let s=0,a=o.length;s<a;s++)eE(o[s],e,n,!0)}}class tE{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos($n(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class wZ{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}class GT{constructor(e,n,r,i){GT.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,n,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,n=0){for(let r=0;r<4;r++)this.elements[r]=e[r+n];return this}set(e,n,r,i){const o=this.elements;return o[0]=e,o[2]=n,o[1]=r,o[3]=i,this}}const T3=new Se;class bZ{constructor(e=new Se(1/0,1/0),n=new Se(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=T3.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,T3).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const C3=new z,F0=new z;class bF{constructor(e=new z,n=new z){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){C3.subVectors(e,this.start),F0.subVectors(this.end,this.start);const r=F0.dot(F0);let o=F0.dot(C3)/r;return n&&(o=$n(o,0,1)),o}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const A3=new z;class EZ extends jt{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new kt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,l=32;s<l;s++,a++){const c=s/l*Math.PI*2,u=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new ct(i,3));const o=new fi({fog:!1,toneMapped:!1});this.cone=new Fs(r,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),A3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(A3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ja=new z,z0=new St,cw=new St;class MZ extends Fs{constructor(e){const n=EF(e),r=new kt,i=[],o=[],s=new Je(0,0,1),a=new Je(0,1,0);for(let c=0;c<n.length;c++){const u=n[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),o.push(s.r,s.g,s.b),o.push(a.r,a.g,a.b))}r.setAttribute("position",new ct(i,3)),r.setAttribute("color",new ct(o,3));const l=new fi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");cw.copy(this.root.matrixWorld).invert();for(let o=0,s=0;o<n.length;o++){const a=n[o];a.parent&&a.parent.isBone&&(z0.multiplyMatrices(cw,a.matrixWorld),Ja.setFromMatrixPosition(z0),i.setXYZ(s,Ja.x,Ja.y,Ja.z),z0.multiplyMatrices(cw,a.parent.matrixWorld),Ja.setFromMatrixPosition(z0),i.setXYZ(s+1,Ja.x,Ja.y,Ja.z),s+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function EF(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,EF(t.children[n]));return e}class TZ extends On{constructor(e,n,r){const i=new mm(n,4,2),o=new Ol({wireframe:!0,fog:!1,toneMapped:!1});super(i,o),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const CZ=new z,P3=new Je,R3=new Je;class AZ extends jt{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new pm(n);i.rotateY(Math.PI*.5),this.material=new Ol({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=i.getAttribute("position"),s=new Float32Array(o.count*3);i.setAttribute("color",new on(s,3)),this.add(new On(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");P3.copy(this.light.color),R3.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const o=r<i/2?P3:R3;n.setXYZ(r,o.r,o.g,o.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(CZ.setFromMatrixPosition(this.light.matrixWorld).negate())}}class PZ extends Fs{constructor(e=10,n=10,r=4473924,i=8947848){r=new Je(r),i=new Je(i);const o=n/2,s=e/n,a=e/2,l=[],c=[];for(let p=0,m=0,g=-a;p<=n;p++,g+=s){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const v=p===o?r:i;v.toArray(c,m),m+=3,v.toArray(c,m),m+=3,v.toArray(c,m),m+=3,v.toArray(c,m),m+=3}const u=new kt;u.setAttribute("position",new ct(l,3)),u.setAttribute("color",new ct(c,3));const d=new fi({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class RZ extends Fs{constructor(e=10,n=16,r=8,i=64,o=4473924,s=8947848){o=new Je(o),s=new Je(s);const a=[],l=[];if(n>1)for(let d=0;d<n;d++){const p=d/n*(Math.PI*2),m=Math.sin(p)*e,g=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,g);const v=d&1?o:s;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let d=0;d<r;d++){const p=d&1?o:s,m=e-e/r*d;for(let g=0;g<i;g++){let v=g/i*(Math.PI*2),x=Math.sin(v)*m,y=Math.cos(v)*m;a.push(x,0,y),l.push(p.r,p.g,p.b),v=(g+1)/i*(Math.PI*2),x=Math.sin(v)*m,y=Math.cos(v)*m,a.push(x,0,y),l.push(p.r,p.g,p.b)}}const c=new kt;c.setAttribute("position",new ct(a,3)),c.setAttribute("color",new ct(l,3));const u=new fi({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const I3=new z,B0=new z,O3=new z;class IZ extends jt{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new kt;i.setAttribute("position",new ct([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const o=new fi({fog:!1,toneMapped:!1});this.lightPlane=new wl(i,o),this.add(this.lightPlane),i=new kt,i.setAttribute("position",new ct([0,0,0,0,0,1],3)),this.targetLine=new wl(i,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),I3.setFromMatrixPosition(this.light.matrixWorld),B0.setFromMatrixPosition(this.light.target.matrixWorld),O3.subVectors(B0,I3),this.lightPlane.lookAt(B0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(B0),this.targetLine.scale.z=O3.length()}}const H0=new z,zn=new um;class OZ extends Fs{constructor(e){const n=new kt,r=new fi({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],o=[],s={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,v){l(g),l(v)}function l(g){i.push(0,0,0),o.push(0,0,0),s[g]===void 0&&(s[g]=[]),s[g].push(i.length/3-1)}n.setAttribute("position",new ct(i,3)),n.setAttribute("color",new ct(o,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const c=new Je(16755200),u=new Je(16711680),d=new Je(43775),p=new Je(16777215),m=new Je(3355443);this.setColors(c,u,d,p,m)}setColors(e,n,r,i,o){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,o.r,o.g,o.b),a.setXYZ(41,o.r,o.g,o.b),a.setXYZ(42,o.r,o.g,o.b),a.setXYZ(43,o.r,o.g,o.b),a.setXYZ(44,o.r,o.g,o.b),a.setXYZ(45,o.r,o.g,o.b),a.setXYZ(46,o.r,o.g,o.b),a.setXYZ(47,o.r,o.g,o.b),a.setXYZ(48,o.r,o.g,o.b),a.setXYZ(49,o.r,o.g,o.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;zn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Gn("c",n,e,zn,0,0,-1),Gn("t",n,e,zn,0,0,1),Gn("n1",n,e,zn,-r,-i,-1),Gn("n2",n,e,zn,r,-i,-1),Gn("n3",n,e,zn,-r,i,-1),Gn("n4",n,e,zn,r,i,-1),Gn("f1",n,e,zn,-r,-i,1),Gn("f2",n,e,zn,r,-i,1),Gn("f3",n,e,zn,-r,i,1),Gn("f4",n,e,zn,r,i,1),Gn("u1",n,e,zn,r*.7,i*1.1,-1),Gn("u2",n,e,zn,-r*.7,i*1.1,-1),Gn("u3",n,e,zn,0,i*2,-1),Gn("cf1",n,e,zn,-r,0,1),Gn("cf2",n,e,zn,r,0,1),Gn("cf3",n,e,zn,0,-i,1),Gn("cf4",n,e,zn,0,i,1),Gn("cn1",n,e,zn,-r,0,-1),Gn("cn2",n,e,zn,r,0,-1),Gn("cn3",n,e,zn,0,-i,-1),Gn("cn4",n,e,zn,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Gn(t,e,n,r,i,o,s){H0.set(i,o,s).unproject(r);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],H0.x,H0.y,H0.z)}}const V0=new vr;class LZ extends Fs{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),o=new kt;o.setIndex(new on(r,1)),o.setAttribute("position",new on(i,3)),super(o,new fi({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&V0.setFromObject(this.object),V0.isEmpty())return;const n=V0.min,r=V0.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class kZ extends Fs{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new kt;o.setIndex(new on(r,1)),o.setAttribute("position",new ct(i,3)),super(o,new fi({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class NZ extends wl{constructor(e,n=1,r=16776960){const i=r,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new kt;s.setAttribute("position",new ct(o,3)),s.computeBoundingSphere(),super(s,new fi({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new kt;l.setAttribute("position",new ct(a,3)),l.computeBoundingSphere(),this.add(new On(l,new Ol({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const L3=new z;let $0,uw;class MF extends jt{constructor(e=new z(0,0,1),n=new z(0,0,0),r=1,i=16776960,o=r*.2,s=o*.2){super(),this.type="ArrowHelper",$0===void 0&&($0=new kt,$0.setAttribute("position",new ct([0,0,0,0,1,0],3)),uw=new Xc(0,.5,1,5,1),uw.translate(0,-.5,0)),this.position.copy(n),this.line=new wl($0,new fi({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new On(uw,new Ol({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,o,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{L3.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(L3,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class DZ extends Fs{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new kt;i.setAttribute("position",new ct(n,3)),i.setAttribute("color",new ct(r,3));const o=new fi({vertexColors:!0,toneMapped:!1});super(i,o),this.type="AxesHelper"}setColors(e,n,r){const i=new Je,o=this.geometry.attributes.color.array;return i.set(e),i.toArray(o,0),i.toArray(o,3),i.set(n),i.toArray(o,6),i.toArray(o,9),i.set(r),i.toArray(o,12),i.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class UZ{constructor(){this.type="ShapePath",this.color=new Je,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new kp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,o,s){return this.currentPath.bezierCurveTo(e,n,r,i,o,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(y){const _=[];for(let w=0,M=y.length;w<M;w++){const A=y[w],C=new Mc;C.curves=A.curves,_.push(C)}return _}function r(y,_){const w=_.length;let M=!1;for(let A=w-1,C=0;C<w;A=C++){let P=_[A],N=_[C],O=N.x-P.x,E=N.y-P.y;if(Math.abs(E)>Number.EPSILON){if(E<0&&(P=_[C],O=-O,N=_[A],E=-E),y.y<P.y||y.y>N.y)continue;if(y.y===P.y){if(y.x===P.x)return!0}else{const L=E*(y.x-P.x)-O*(y.y-P.y);if(L===0)return!0;if(L<0)continue;M=!M}}else{if(y.y!==P.y)continue;if(N.x<=y.x&&y.x<=P.x||P.x<=y.x&&y.x<=N.x)return!0}}return M}const i=ks.isClockWise,o=this.subPaths;if(o.length===0)return[];let s,a,l;const c=[];if(o.length===1)return a=o[0],l=new Mc,l.curves=a.curves,c.push(l),c;let u=!i(o[0].getPoints());u=e?!u:u;const d=[],p=[];let m=[],g=0,v;p[g]=void 0,m[g]=[];for(let y=0,_=o.length;y<_;y++)a=o[y],v=a.getPoints(),s=i(v),s=e?!s:s,s?(!u&&p[g]&&g++,p[g]={s:new Mc,p:v},p[g].s.curves=a.curves,u&&g++,m[g]=[]):m[g].push({h:a,p:v[0]});if(!p[0])return n(o);if(p.length>1){let y=!1,_=0;for(let w=0,M=p.length;w<M;w++)d[w]=[];for(let w=0,M=p.length;w<M;w++){const A=m[w];for(let C=0;C<A.length;C++){const P=A[C];let N=!0;for(let O=0;O<p.length;O++)r(P.p,p[O].p)&&(w!==O&&_++,N?(N=!1,d[O].push(P)):y=!0);N&&d[w].push(P)}}_>0&&y===!1&&(m=d)}let x;for(let y=0,_=p.length;y<_;y++){l=p[y].s,c.push(l),x=m[y];for(let w=0,M=x.length;w<M;w++)l.holes.push(x[w].h)}return c}}class FZ extends Ko{constructor(e,n){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}class zZ extends jo{constructor(e=1,n=1,r=1,i={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,n,{...i,count:r}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ad}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ad);const BZ=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:iT,AddEquation:il,AddOperation:YD,AdditiveAnimationBlendMode:mT,AdditiveBlending:Bb,AgXToneMapping:QD,AlphaFormat:cT,AlwaysCompare:pU,AlwaysDepth:HD,AlwaysStencilFunc:Wb,AmbientLight:pF,AnimationAction:SF,AnimationClip:Hp,AnimationLoader:$K,AnimationMixer:vZ,AnimationObjectGroup:gZ,AnimationUtils:zK,ArcCurve:BU,ArrayCamera:RU,ArrowHelper:MF,AttachedBindMode:$b,Audio:xF,AudioAnalyser:sZ,AudioContext:HT,AudioListener:rZ,AudioLoader:eZ,AxesHelper:DZ,BackSide:li,BasicDepthPacking:oU,BasicShadowMap:SD,BatchedMesh:UU,Bone:TT,BooleanKeyframeTrack:Yc,Box2:bZ,Box3:vr,Box3Helper:kZ,BoxGeometry:Gc,BoxHelper:LZ,BufferAttribute:on,BufferGeometry:kt,BufferGeometryLoader:vF,ByteType:sT,Cache:da,Camera:um,CameraHelper:OZ,CanvasTexture:cK,CapsuleGeometry:d1,CatmullRomCurve3:HU,CineonToneMapping:ZD,CircleGeometry:h1,ClampToEdgeWrapping:po,Clock:VT,Color:Je,ColorKeyframeTrack:UT,ColorManagement:Kt,CompressedArrayTexture:aK,CompressedCubeTexture:lK,CompressedTexture:u1,CompressedTextureLoader:WK,ConeGeometry:p1,ConstantAlphaFactor:FD,ConstantColorFactor:DD,Controls:FZ,CubeCamera:wU,CubeReflectionMapping:Ma,CubeRefractionMapping:Sl,CubeTexture:fm,CubeTextureLoader:jK,CubeUVReflectionMapping:ld,CubicBezierCurve:PT,CubicBezierCurve3:VU,CubicInterpolant:sF,CullFaceBack:zb,CullFaceFront:_D,CullFaceFrontBack:zj,CullFaceNone:xD,Curve:Zo,CurvePath:WU,CustomBlending:wD,CustomToneMapping:JD,CylinderGeometry:Xc,Cylindrical:wZ,Data3DTexture:vT,DataArrayTexture:i1,DataTexture:Ls,DataTextureLoader:GK,DataUtils:Z9,DecrementStencilOp:Qj,DecrementWrapStencilOp:t9,DefaultLoadingManager:cF,DepthFormat:wc,DepthStencilFormat:Uc,DepthTexture:wT,DetachedBindMode:tU,DirectionalLight:hF,DirectionalLightHelper:IZ,DiscreteInterpolant:aF,DisplayP3ColorSpace:r1,DodecahedronGeometry:m1,DoubleSide:xi,DstAlphaFactor:ID,DstColorFactor:LD,DynamicCopyUsage:g9,DynamicDrawUsage:u9,DynamicReadUsage:h9,EdgesGeometry:jU,EllipseCurve:f1,EqualCompare:uU,EqualDepth:$D,EqualStencilFunc:o9,EquirectangularReflectionMapping:wp,EquirectangularRefractionMapping:bp,Euler:Ai,EventDispatcher:Ko,ExtrudeGeometry:y1,FileLoader:Ca,Float16BufferAttribute:rG,Float32BufferAttribute:ct,FloatType:Si,Fog:a1,FogExp2:s1,FramebufferTexture:sK,FrontSide:Ea,Frustum:dm,GLBufferAttribute:SZ,GLSL1:v9,GLSL3:jb,GreaterCompare:fU,GreaterDepth:jD,GreaterEqualCompare:hU,GreaterEqualDepth:WD,GreaterEqualStencilFunc:c9,GreaterStencilFunc:a9,GridHelper:PZ,Group:gf,HalfFloatType:cd,HemisphereLight:uF,HemisphereLightHelper:AZ,IcosahedronGeometry:v1,ImageBitmapLoader:QK,ImageLoader:Vp,ImageUtils:vU,IncrementStencilOp:Jj,IncrementWrapStencilOp:e9,InstancedBufferAttribute:jf,InstancedBufferGeometry:BT,InstancedInterleavedBuffer:Vv,InstancedMesh:DU,Int16BufferAttribute:tG,Int32BufferAttribute:nG,Int8BufferAttribute:J9,IntType:Kx,InterleavedBuffer:l1,InterleavedBufferAttribute:Vi,Interpolant:gm,InterpolateDiscrete:Tp,InterpolateLinear:Dv,InterpolateSmooth:My,InvertStencilOp:n9,KeepStencilOp:ac,KeyframeTrack:Jo,LOD:kU,LatheGeometry:hm,Layers:Ec,LessCompare:cU,LessDepth:VD,LessEqualCompare:gT,LessEqualDepth:Sp,LessEqualStencilFunc:s9,LessStencilFunc:i9,Light:kl,LightProbe:yF,Line:wl,Line3:bF,LineBasicMaterial:fi,LineCurve:RT,LineCurve3:$U,LineDashedMaterial:rF,LineLoop:FU,LineSegments:Fs,LinearDisplayP3ColorSpace:cm,LinearFilter:tr,LinearInterpolant:DT,LinearMipMapLinearFilter:$j,LinearMipMapNearestFilter:Vj,LinearMipmapLinearFilter:Es,LinearMipmapNearestFilter:Vh,LinearSRGBColorSpace:Oa,LinearToneMapping:qD,LinearTransfer:Ap,Loader:Pi,LoaderUtils:Qb,LoadingManager:FT,LoopOnce:nU,LoopPingPong:iU,LoopRepeat:rU,LuminanceAlphaFormat:dT,LuminanceFormat:fT,MOUSE:oc,Material:Ir,MaterialLoader:M1,MathUtils:mU,Matrix2:GT,Matrix3:It,Matrix4:St,MaxEquation:TD,Mesh:On,MeshBasicMaterial:Ol,MeshDepthMaterial:bT,MeshDistanceMaterial:ET,MeshLambertMaterial:tF,MeshMatcapMaterial:nF,MeshNormalMaterial:eF,MeshPhongMaterial:JU,MeshPhysicalMaterial:ZU,MeshStandardMaterial:Fp,MeshToonMaterial:QU,MinEquation:MD,MirroredRepeatWrapping:Mp,MixOperation:XD,MultiplyBlending:Vb,MultiplyOperation:am,NearestFilter:gr,NearestMipMapLinearFilter:Hj,NearestMipMapNearestFilter:Bj,NearestMipmapLinearFilter:hf,NearestMipmapNearestFilter:oT,NeutralToneMapping:eU,NeverCompare:lU,NeverDepth:BD,NeverStencilFunc:r9,NoBlending:ya,NoColorSpace:aa,NoToneMapping:Os,NormalAnimationBlendMode:n1,NormalBlending:Sc,NotEqualCompare:dU,NotEqualDepth:GD,NotEqualStencilFunc:l9,NumberKeyframeTrack:zp,Object3D:jt,ObjectLoader:ZK,ObjectSpaceNormalMap:aU,OctahedronGeometry:pm,OneFactor:AD,OneMinusConstantAlphaFactor:zD,OneMinusConstantColorFactor:UD,OneMinusDstAlphaFactor:OD,OneMinusDstColorFactor:kD,OneMinusSrcAlphaFactor:cv,OneMinusSrcColorFactor:RD,OrthographicCamera:Fo,P3Primaries:Rp,PCFShadowMap:Yx,PCFSoftShadowMap:Hh,PMREMGenerator:Gb,Path:kp,PerspectiveCamera:Tn,Plane:ra,PlaneGeometry:ud,PlaneHelper:NZ,PointLight:dF,PointLightHelper:TZ,Points:zU,PointsMaterial:CT,PolarGridHelper:RZ,PolyhedronGeometry:Ll,PositionalAudio:oZ,PropertyBinding:$t,PropertyMixer:_F,QuadraticBezierCurve:IT,QuadraticBezierCurve3:OT,Quaternion:Xr,QuaternionKeyframeTrack:ym,QuaternionLinearInterpolant:lF,RED_GREEN_RGTC2_Format:kv,RED_RGTC1_Format:pT,REVISION:ad,RGBADepthPacking:sU,RGBAFormat:jr,RGBAIntegerFormat:t1,RGBA_ASTC_10x10_Format:Av,RGBA_ASTC_10x5_Format:Mv,RGBA_ASTC_10x6_Format:Tv,RGBA_ASTC_10x8_Format:Cv,RGBA_ASTC_12x10_Format:Pv,RGBA_ASTC_12x12_Format:Rv,RGBA_ASTC_4x4_Format:yv,RGBA_ASTC_5x4_Format:vv,RGBA_ASTC_5x5_Format:xv,RGBA_ASTC_6x5_Format:_v,RGBA_ASTC_6x6_Format:Sv,RGBA_ASTC_8x5_Format:wv,RGBA_ASTC_8x6_Format:bv,RGBA_ASTC_8x8_Format:Ev,RGBA_BPTC_Format:Xh,RGBA_ETC2_EAC_Format:gv,RGBA_PVRTC_2BPPV1_Format:hv,RGBA_PVRTC_4BPPV1_Format:dv,RGBA_S3TC_DXT1_Format:Wh,RGBA_S3TC_DXT3_Format:jh,RGBA_S3TC_DXT5_Format:Gh,RGBDepthPacking:Yj,RGBFormat:uT,RGBIntegerFormat:Wj,RGB_BPTC_SIGNED_Format:Iv,RGB_BPTC_UNSIGNED_Format:Ov,RGB_ETC1_Format:pv,RGB_ETC2_Format:mv,RGB_PVRTC_2BPPV1_Format:fv,RGB_PVRTC_4BPPV1_Format:uv,RGB_S3TC_DXT1_Format:$h,RGDepthPacking:qj,RGFormat:hT,RGIntegerFormat:e1,RawShaderMaterial:KU,Ray:jc,Raycaster:wF,Rec709Primaries:Pp,RectAreaLight:mF,RedFormat:Qx,RedIntegerFormat:lm,ReinhardToneMapping:KD,RenderTarget:xU,RepeatWrapping:Ep,ReplaceStencilOp:Zj,ReverseSubtractEquation:ED,RingGeometry:x1,SIGNED_RED_GREEN_RGTC2_Format:Nv,SIGNED_RED_RGTC1_Format:Lv,SRGBColorSpace:ao,SRGBTransfer:hn,Scene:Fv,ShaderChunk:Lt,ShaderLib:Do,ShaderMaterial:_o,ShadowMaterial:qU,Shape:Mc,ShapeGeometry:_1,ShapePath:UZ,ShapeUtils:ks,ShortType:aT,Skeleton:c1,SkeletonHelper:MZ,SkinnedMesh:NU,Source:mc,Sphere:xr,SphereGeometry:mm,Spherical:tE,SphericalHarmonics3:gF,SplineCurve:LT,SpotLight:fF,SpotLightHelper:EZ,Sprite:LU,SpriteMaterial:MT,SrcAlphaFactor:lv,SrcAlphaSaturateFactor:ND,SrcColorFactor:PD,StaticCopyUsage:m9,StaticDrawUsage:Ip,StaticReadUsage:d9,StereoCamera:tZ,StreamCopyUsage:y9,StreamDrawUsage:f9,StreamReadUsage:p9,StringKeyframeTrack:qc,SubtractEquation:bD,SubtractiveBlending:Hb,TOUCH:sc,TangentSpaceNormalMap:Il,TetrahedronGeometry:S1,Texture:Nn,TextureLoader:XK,TextureUtils:zq,TorusGeometry:w1,TorusKnotGeometry:b1,Triangle:Bi,TriangleFanDrawMode:Xj,TriangleStripDrawMode:Gj,TrianglesDrawMode:jj,TubeGeometry:E1,UVMapping:qx,Uint16BufferAttribute:xT,Uint32BufferAttribute:_T,Uint8BufferAttribute:Q9,Uint8ClampedBufferAttribute:eG,Uniform:jT,UniformsGroup:_Z,UniformsLib:Ge,UniformsUtils:Uv,UnsignedByteType:Wo,UnsignedInt248Type:Dc,UnsignedInt5999Type:lT,UnsignedIntType:Ta,UnsignedShort4444Type:Zx,UnsignedShort5551Type:Jx,UnsignedShortType:Vf,VSMShadowMap:Oo,Vector2:Se,Vector3:z,Vector4:Bt,VectorKeyframeTrack:Bp,VideoTexture:oK,WebGL3DRenderTarget:H9,WebGLArrayRenderTarget:B9,WebGLCoordinateSystem:Ms,WebGLCubeRenderTarget:bU,WebGLMultipleRenderTargets:zZ,WebGLRenderTarget:jo,WebGLRenderer:IU,WebGLUtils:PU,WebGPUCoordinateSystem:Op,WireframeGeometry:kT,WrapAroundEnding:Cp,ZeroCurvatureEnding:hc,ZeroFactor:CD,ZeroSlopeEnding:pc,ZeroStencilOp:Kj,createCanvasElement:yU},Symbol.toStringTag,{value:"Module"}));var TF={exports:{}},Kc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Kc.ConcurrentRoot=1;Kc.ContinuousEventPriority=4;Kc.DefaultEventPriority=16;Kc.DiscreteEventPriority=1;Kc.IdleEventPriority=536870912;Kc.LegacyRoot=0;TF.exports=Kc;var vf=TF.exports;function HZ(t){let e;const n=new Set,r=(c,u)=>{const d=typeof c=="function"?c(e):c;if(d!==e){const p=e;e=u?d:Object.assign({},e,d),n.forEach(m=>m(e,p))}},i=()=>e,o=(c,u=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=u(e);function m(){const g=u(e);if(!d(p,g)){const v=p;c(p=g,v)}}return n.add(m),()=>n.delete(m)},l={setState:r,getState:i,subscribe:(c,u,d)=>u||d?o(c,u,d):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(r,i,l),l}const VZ=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),k3=VZ?R.useEffect:R.useLayoutEffect;function CF(t){const e=typeof t=="function"?HZ(t):t,n=(r=e.getState,i=Object.is)=>{const[,o]=R.useReducer(x=>x+1,0),s=e.getState(),a=R.useRef(s),l=R.useRef(r),c=R.useRef(i),u=R.useRef(!1),d=R.useRef();d.current===void 0&&(d.current=r(s));let p,m=!1;(a.current!==s||l.current!==r||c.current!==i||u.current)&&(p=r(s),m=!i(d.current,p)),k3(()=>{m&&(d.current=p),a.current=s,l.current=r,c.current=i,u.current=!1});const g=R.useRef(s);k3(()=>{const x=()=>{try{const _=e.getState(),w=l.current(_);c.current(d.current,w)||(a.current=_,d.current=w,o())}catch{u.current=!0,o()}},y=e.subscribe(x);return e.getState()!==g.current&&x(),y},[]);const v=m?p:d.current;return R.useDebugValue(v),v};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}var AF={exports:{}},fw={exports:{}},dw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N3;function $Z(){return N3||(N3=1,function(t){function e(D,G){var X=D.length;D.push(G);e:for(;0<X;){var ne=X-1>>>1,pe=D[ne];if(0<i(pe,G))D[ne]=G,D[X]=pe,X=ne;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var G=D[0],X=D.pop();if(X!==G){D[0]=X;e:for(var ne=0,pe=D.length,De=pe>>>1;ne<De;){var ae=2*(ne+1)-1,_e=D[ae],Re=ae+1,Ae=D[Re];if(0>i(_e,X))Re<pe&&0>i(Ae,_e)?(D[ne]=Ae,D[Re]=X,ne=Re):(D[ne]=_e,D[ae]=X,ne=ae);else if(Re<pe&&0>i(Ae,X))D[ne]=Ae,D[Re]=X,ne=Re;else break e}}return G}function i(D,G){var X=D.sortIndex-G.sortIndex;return X!==0?X:D.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,d=null,p=3,m=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=D)r(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(c)}}function M(D){if(v=!1,w(D),!g)if(n(l)!==null)g=!0,J(A);else{var G=n(c);G!==null&&Q(M,G.startTime-D)}}function A(D,G){g=!1,v&&(v=!1,y(N),N=-1),m=!0;var X=p;try{for(w(G),d=n(l);d!==null&&(!(d.expirationTime>G)||D&&!L());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,p=d.priorityLevel;var pe=ne(d.expirationTime<=G);G=t.unstable_now(),typeof pe=="function"?d.callback=pe:d===n(l)&&r(l),w(G)}else r(l);d=n(l)}if(d!==null)var De=!0;else{var ae=n(c);ae!==null&&Q(M,ae.startTime-G),De=!1}return De}finally{d=null,p=X,m=!1}}var C=!1,P=null,N=-1,O=5,E=-1;function L(){return!(t.unstable_now()-E<O)}function H(){if(P!==null){var D=t.unstable_now();E=D;var G=!0;try{G=P(!0,D)}finally{G?W():(C=!1,P=null)}}else C=!1}var W;if(typeof _=="function")W=function(){_(H)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,K=Y.port2;Y.port1.onmessage=H,W=function(){K.postMessage(null)}}else W=function(){x(H,0)};function J(D){P=D,C||(C=!0,W())}function Q(D,G){N=x(function(){D(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,J(A))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var X=p;p=G;try{return D()}finally{p=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,G){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var X=p;p=D;try{return G()}finally{p=X}},t.unstable_scheduleCallback=function(D,G,X){var ne=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ne+X:ne):X=ne,D){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=X+pe,D={id:u++,callback:G,priorityLevel:D,startTime:X,expirationTime:pe,sortIndex:-1},X>ne?(D.sortIndex=X,e(c,D),n(l)===null&&D===n(c)&&(v?(y(N),N=-1):v=!0,Q(M,X-ne))):(D.sortIndex=pe,e(l,D),g||m||(g=!0,J(A))),D},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(D){var G=p;return function(){var X=p;p=G;try{return D.apply(this,arguments)}finally{p=X}}}}(dw)),dw}var D3;function WZ(){return D3||(D3=1,fw.exports=$Z()),fw.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jZ=function(e){var n={},r=R,i=WZ(),o=Object.assign;function s(f){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+f,S=1;S<arguments.length;S++)h+="&args[]="+encodeURIComponent(arguments[S]);return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),g=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),M=Symbol.for("react.offscreen"),A=Symbol.iterator;function C(f){return f===null||typeof f!="object"?null:(f=A&&f[A]||f["@@iterator"],typeof f=="function"?f:null)}function P(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case u:return"Fragment";case c:return"Portal";case p:return"Profiler";case d:return"StrictMode";case x:return"Suspense";case y:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case g:return(f.displayName||"Context")+".Consumer";case m:return(f._context.displayName||"Context")+".Provider";case v:var h=f.render;return f=f.displayName,f||(f=h.displayName||h.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case _:return h=f.displayName||null,h!==null?h:P(f.type)||"Memo";case w:h=f._payload,f=f._init;try{return P(f(h))}catch{}}return null}function N(f){var h=f.type;switch(f.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=h.render,f=f.displayName||f.name||"",h.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(h);case 8:return h===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function O(f){var h=f,S=f;if(f.alternate)for(;h.return;)h=h.return;else{f=h;do h=f,h.flags&4098&&(S=h.return),f=h.return;while(f)}return h.tag===3?S:null}function E(f){if(O(f)!==f)throw Error(s(188))}function L(f){var h=f.alternate;if(!h){if(h=O(f),h===null)throw Error(s(188));return h!==f?null:f}for(var S=f,b=h;;){var T=S.return;if(T===null)break;var I=T.alternate;if(I===null){if(b=T.return,b!==null){S=b;continue}break}if(T.child===I.child){for(I=T.child;I;){if(I===S)return E(T),f;if(I===b)return E(T),h;I=I.sibling}throw Error(s(188))}if(S.return!==b.return)S=T,b=I;else{for(var j=!1,te=T.child;te;){if(te===S){j=!0,S=T,b=I;break}if(te===b){j=!0,b=T,S=I;break}te=te.sibling}if(!j){for(te=I.child;te;){if(te===S){j=!0,S=I,b=T;break}if(te===b){j=!0,b=I,S=T;break}te=te.sibling}if(!j)throw Error(s(189))}}if(S.alternate!==b)throw Error(s(190))}if(S.tag!==3)throw Error(s(188));return S.stateNode.current===S?f:h}function H(f){return f=L(f),f!==null?W(f):null}function W(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var h=W(f);if(h!==null)return h;f=f.sibling}return null}function Y(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){if(f.tag!==4){var h=Y(f);if(h!==null)return h}f=f.sibling}return null}var K=Array.isArray,J=e.getPublicInstance,Q=e.getRootHostContext,D=e.getChildHostContext,G=e.prepareForCommit,X=e.resetAfterCommit,ne=e.createInstance,pe=e.appendInitialChild,De=e.finalizeInitialChildren,ae=e.prepareUpdate,_e=e.shouldSetTextContent,Re=e.createTextInstance,Ae=e.scheduleTimeout,qe=e.cancelTimeout,ut=e.noTimeout,Ye=e.isPrimaryRenderer,Ve=e.supportsMutation,B=e.supportsPersistence,me=e.supportsHydration,be=e.getInstanceFromNode,ke=e.preparePortalMount,ye=e.getCurrentEventPriority,$e=e.detachDeletedInstance,Ne=e.supportsMicrotasks,ze=e.scheduleMicrotask,V=e.supportsTestSelectors,U=e.findFiberRoot,le=e.getBoundingRect,ee=e.getTextContent,se=e.isHiddenSubtree,he=e.matchAccessibilityRole,je=e.setFocusIfFocusable,Ee=e.setupIntersectionObserver,Oe=e.appendChild,dt=e.appendChildToContainer,Ie=e.commitTextUpdate,We=e.commitMount,Ct=e.commitUpdate,gt=e.insertBefore,Ze=e.insertInContainerBefore,Z=e.removeChild,we=e.removeChildFromContainer,Xe=e.resetTextContent,q=e.hideInstance,Pe=e.hideTextInstance,Me=e.unhideInstance,Te=e.unhideTextInstance,Be=e.clearContainer,vt=e.cloneInstance,Tt=e.createContainerChildSet,Vt=e.appendChildToContainerChildSet,mn=e.finalizeContainerChildren,Dt=e.replaceContainerChildren,ar=e.cloneHiddenInstance,lr=e.cloneHiddenTextInstance,km=e.canHydrateInstance,zs=e.canHydrateTextInstance,wd=e.canHydrateSuspenseInstance,bd=e.isSuspenseInstancePending,Qc=e.isSuspenseInstanceFallback,eu=e.registerSuspenseInstanceRetry,Na=e.getNextHydratableSibling,tu=e.getFirstHydratableChild,Nm=e.getFirstHydratableChildWithinContainer,Dm=e.getFirstHydratableChildWithinSuspenseInstance,H1=e.hydrateInstance,V1=e.hydrateTextInstance,$1=e.hydrateSuspenseInstance,F=e.getNextHydratableInstanceAfterSuspenseInstance,re=e.commitHydratedContainer,ue=e.commitHydratedSuspenseInstance,fe=e.clearSuspenseBoundary,oe=e.clearSuspenseBoundaryFromContainer,Fe=e.shouldDeleteUnhydratedTailInstances,et=e.didNotMatchHydratedContainerTextInstance,at=e.didNotMatchHydratedTextInstance,rt;function yt(f){if(rt===void 0)try{throw Error()}catch(S){var h=S.stack.trim().match(/\n( *(at )?)/);rt=h&&h[1]||""}return`
`+rt+f}var wt=!1;function ft(f,h){if(!f||wt)return"";wt=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Ue){var b=Ue}Reflect.construct(f,[],h)}else{try{h.call()}catch(Ue){b=Ue}f.call(h.prototype)}else{try{throw Error()}catch(Ue){b=Ue}f()}}catch(Ue){if(Ue&&b&&typeof Ue.stack=="string"){for(var T=Ue.stack.split(`
`),I=b.stack.split(`
`),j=T.length-1,te=I.length-1;1<=j&&0<=te&&T[j]!==I[te];)te--;for(;1<=j&&0<=te;j--,te--)if(T[j]!==I[te]){if(j!==1||te!==1)do if(j--,te--,0>te||T[j]!==I[te]){var ge=`
`+T[j].replace(" at new "," at ");return f.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",f.displayName)),ge}while(1<=j&&0<=te);break}}}finally{wt=!1,Error.prepareStackTrace=S}return(f=f?f.displayName||f.name:"")?yt(f):""}var Gt=Object.prototype.hasOwnProperty,un=[],en=-1;function Un(f){return{current:f}}function mt(f){0>en||(f.current=un[en],un[en]=null,en--)}function He(f,h){en++,un[en]=f.current,f.current=h}var fn={},Et=Un(fn),dn=Un(!1),di=fn;function qn(f,h){var S=f.type.contextTypes;if(!S)return fn;var b=f.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===h)return b.__reactInternalMemoizedMaskedChildContext;var T={},I;for(I in S)T[I]=h[I];return b&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=h,f.__reactInternalMemoizedMaskedChildContext=T),T}function cr(f){return f=f.childContextTypes,f!=null}function gn(){mt(dn),mt(Et)}function bo(f,h,S){if(Et.current!==fn)throw Error(s(168));He(Et,h),He(dn,S)}function nu(f,h,S){var b=f.stateNode;if(h=h.childContextTypes,typeof b.getChildContext!="function")return S;b=b.getChildContext();for(var T in b)if(!(T in h))throw Error(s(108,N(f)||"Unknown",T));return o({},S,b)}function Sr(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||fn,di=Et.current,He(Et,f),He(dn,dn.current),!0}function ru(f,h,S){var b=f.stateNode;if(!b)throw Error(s(169));S?(f=nu(f,h,di),b.__reactInternalMemoizedMergedChildContext=f,mt(dn),mt(Et),He(Et,f)):mt(dn),He(dn,S)}var Ri=Math.clz32?Math.clz32:t5,Um=Math.log,e5=Math.LN2;function t5(f){return f>>>=0,f===0?32:31-(Um(f)/e5|0)|0}var Fm=64,zm=4194304;function Ed(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function Bm(f,h){var S=f.pendingLanes;if(S===0)return 0;var b=0,T=f.suspendedLanes,I=f.pingedLanes,j=S&268435455;if(j!==0){var te=j&~T;te!==0?b=Ed(te):(I&=j,I!==0&&(b=Ed(I)))}else j=S&~T,j!==0?b=Ed(j):I!==0&&(b=Ed(I));if(b===0)return 0;if(h!==0&&h!==b&&!(h&T)&&(T=b&-b,I=h&-h,T>=I||T===16&&(I&4194240)!==0))return h;if(b&4&&(b|=S&16),h=f.entangledLanes,h!==0)for(f=f.entanglements,h&=b;0<h;)S=31-Ri(h),T=1<<S,b|=f[S],h&=~T;return b}function n5(f,h){switch(f){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function r5(f,h){for(var S=f.suspendedLanes,b=f.pingedLanes,T=f.expirationTimes,I=f.pendingLanes;0<I;){var j=31-Ri(I),te=1<<j,ge=T[j];ge===-1?(!(te&S)||te&b)&&(T[j]=n5(te,h)):ge<=h&&(f.expiredLanes|=te),I&=~te}}function W1(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function j1(f){for(var h=[],S=0;31>S;S++)h.push(f);return h}function Md(f,h,S){f.pendingLanes|=h,h!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,h=31-Ri(h),f[h]=S}function i5(f,h){var S=f.pendingLanes&~h;f.pendingLanes=h,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=h,f.mutableReadLanes&=h,f.entangledLanes&=h,h=f.entanglements;var b=f.eventTimes;for(f=f.expirationTimes;0<S;){var T=31-Ri(S),I=1<<T;h[T]=0,b[T]=-1,f[T]=-1,S&=~I}}function G1(f,h){var S=f.entangledLanes|=h;for(f=f.entanglements;S;){var b=31-Ri(S),T=1<<b;T&h|f[b]&h&&(f[b]|=h),S&=~T}}var Xt=0;function VC(f){return f&=-f,1<f?4<f?f&268435455?16:536870912:4:1}var X1=i.unstable_scheduleCallback,$C=i.unstable_cancelCallback,o5=i.unstable_shouldYield,s5=i.unstable_requestPaint,ur=i.unstable_now,Y1=i.unstable_ImmediatePriority,a5=i.unstable_UserBlockingPriority,q1=i.unstable_NormalPriority,l5=i.unstable_IdlePriority,Hm=null,ns=null;function c5(f){if(ns&&typeof ns.onCommitFiberRoot=="function")try{ns.onCommitFiberRoot(Hm,f,void 0,(f.current.flags&128)===128)}catch{}}function u5(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var rs=typeof Object.is=="function"?Object.is:u5,Bs=null,Vm=!1,K1=!1;function WC(f){Bs===null?Bs=[f]:Bs.push(f)}function f5(f){Vm=!0,WC(f)}function is(){if(!K1&&Bs!==null){K1=!0;var f=0,h=Xt;try{var S=Bs;for(Xt=1;f<S.length;f++){var b=S[f];do b=b(!0);while(b!==null)}Bs=null,Vm=!1}catch(T){throw Bs!==null&&(Bs=Bs.slice(f+1)),X1(Y1,is),T}finally{Xt=h,K1=!1}}return null}var d5=a.ReactCurrentBatchConfig;function $m(f,h){if(rs(f,h))return!0;if(typeof f!="object"||f===null||typeof h!="object"||h===null)return!1;var S=Object.keys(f),b=Object.keys(h);if(S.length!==b.length)return!1;for(b=0;b<S.length;b++){var T=S[b];if(!Gt.call(h,T)||!rs(f[T],h[T]))return!1}return!0}function h5(f){switch(f.tag){case 5:return yt(f.type);case 16:return yt("Lazy");case 13:return yt("Suspense");case 19:return yt("SuspenseList");case 0:case 2:case 15:return f=ft(f.type,!1),f;case 11:return f=ft(f.type.render,!1),f;case 1:return f=ft(f.type,!0),f;default:return""}}function Eo(f,h){if(f&&f.defaultProps){h=o({},h),f=f.defaultProps;for(var S in f)h[S]===void 0&&(h[S]=f[S]);return h}return h}var Wm=Un(null),jm=null,iu=null,Z1=null;function J1(){Z1=iu=jm=null}function jC(f,h,S){Ye?(He(Wm,h._currentValue),h._currentValue=S):(He(Wm,h._currentValue2),h._currentValue2=S)}function Q1(f){var h=Wm.current;mt(Wm),Ye?f._currentValue=h:f._currentValue2=h}function e_(f,h,S){for(;f!==null;){var b=f.alternate;if((f.childLanes&h)!==h?(f.childLanes|=h,b!==null&&(b.childLanes|=h)):b!==null&&(b.childLanes&h)!==h&&(b.childLanes|=h),f===S)break;f=f.return}}function ou(f,h){jm=f,Z1=iu=null,f=f.dependencies,f!==null&&f.firstContext!==null&&(f.lanes&h&&(Li=!0),f.firstContext=null)}function Ji(f){var h=Ye?f._currentValue:f._currentValue2;if(Z1!==f)if(f={context:f,memoizedValue:h,next:null},iu===null){if(jm===null)throw Error(s(308));iu=f,jm.dependencies={lanes:0,firstContext:f}}else iu=iu.next=f;return h}var os=null,Da=!1;function t_(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GC(f,h){f=f.updateQueue,h.updateQueue===f&&(h.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function Hs(f,h){return{eventTime:f,lane:h,tag:0,payload:null,callback:null,next:null}}function Ua(f,h){var S=f.updateQueue;S!==null&&(S=S.shared,Kn!==null&&f.mode&1&&!(Ut&2)?(f=S.interleaved,f===null?(h.next=h,os===null?os=[S]:os.push(S)):(h.next=f.next,f.next=h),S.interleaved=h):(f=S.pending,f===null?h.next=h:(h.next=f.next,f.next=h),S.pending=h))}function Gm(f,h,S){if(h=h.updateQueue,h!==null&&(h=h.shared,(S&4194240)!==0)){var b=h.lanes;b&=f.pendingLanes,S|=b,h.lanes=S,G1(f,S)}}function XC(f,h){var S=f.updateQueue,b=f.alternate;if(b!==null&&(b=b.updateQueue,S===b)){var T=null,I=null;if(S=S.firstBaseUpdate,S!==null){do{var j={eventTime:S.eventTime,lane:S.lane,tag:S.tag,payload:S.payload,callback:S.callback,next:null};I===null?T=I=j:I=I.next=j,S=S.next}while(S!==null);I===null?T=I=h:I=I.next=h}else T=I=h;S={baseState:b.baseState,firstBaseUpdate:T,lastBaseUpdate:I,shared:b.shared,effects:b.effects},f.updateQueue=S;return}f=S.lastBaseUpdate,f===null?S.firstBaseUpdate=h:f.next=h,S.lastBaseUpdate=h}function Xm(f,h,S,b){var T=f.updateQueue;Da=!1;var I=T.firstBaseUpdate,j=T.lastBaseUpdate,te=T.shared.pending;if(te!==null){T.shared.pending=null;var ge=te,Ue=ge.next;ge.next=null,j===null?I=Ue:j.next=Ue,j=ge;var it=f.alternate;it!==null&&(it=it.updateQueue,te=it.lastBaseUpdate,te!==j&&(te===null?it.firstBaseUpdate=Ue:te.next=Ue,it.lastBaseUpdate=ge))}if(I!==null){var At=T.baseState;j=0,it=Ue=ge=null,te=I;do{var xt=te.lane,an=te.eventTime;if((b&xt)===xt){it!==null&&(it=it.next={eventTime:an,lane:0,tag:te.tag,payload:te.payload,callback:te.callback,next:null});e:{var pt=f,Nr=te;switch(xt=h,an=S,Nr.tag){case 1:if(pt=Nr.payload,typeof pt=="function"){At=pt.call(an,At,xt);break e}At=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=Nr.payload,xt=typeof pt=="function"?pt.call(an,At,xt):pt,xt==null)break e;At=o({},At,xt);break e;case 2:Da=!0}}te.callback!==null&&te.lane!==0&&(f.flags|=64,xt=T.effects,xt===null?T.effects=[te]:xt.push(te))}else an={eventTime:an,lane:xt,tag:te.tag,payload:te.payload,callback:te.callback,next:null},it===null?(Ue=it=an,ge=At):it=it.next=an,j|=xt;if(te=te.next,te===null){if(te=T.shared.pending,te===null)break;xt=te,te=xt.next,xt.next=null,T.lastBaseUpdate=xt,T.shared.pending=null}}while(!0);if(it===null&&(ge=At),T.baseState=ge,T.firstBaseUpdate=Ue,T.lastBaseUpdate=it,h=T.shared.interleaved,h!==null){T=h;do j|=T.lane,T=T.next;while(T!==h)}else I===null&&(T.shared.lanes=0);pu|=j,f.lanes=j,f.memoizedState=At}}function YC(f,h,S){if(f=h.effects,h.effects=null,f!==null)for(h=0;h<f.length;h++){var b=f[h],T=b.callback;if(T!==null){if(b.callback=null,b=S,typeof T!="function")throw Error(s(191,T));T.call(b)}}}var qC=new r.Component().refs;function n_(f,h,S,b){h=f.memoizedState,S=S(b,h),S=S==null?h:o({},h,S),f.memoizedState=S,f.lanes===0&&(f.updateQueue.baseState=S)}var Ym={isMounted:function(f){return(f=f._reactInternals)?O(f)===f:!1},enqueueSetState:function(f,h,S){f=f._reactInternals;var b=Zr(),T=Ba(f),I=Hs(b,T);I.payload=h,S!=null&&(I.callback=S),Ua(f,I),h=ro(f,T,b),h!==null&&Gm(h,f,T)},enqueueReplaceState:function(f,h,S){f=f._reactInternals;var b=Zr(),T=Ba(f),I=Hs(b,T);I.tag=1,I.payload=h,S!=null&&(I.callback=S),Ua(f,I),h=ro(f,T,b),h!==null&&Gm(h,f,T)},enqueueForceUpdate:function(f,h){f=f._reactInternals;var S=Zr(),b=Ba(f),T=Hs(S,b);T.tag=2,h!=null&&(T.callback=h),Ua(f,T),h=ro(f,b,S),h!==null&&Gm(h,f,b)}};function KC(f,h,S,b,T,I,j){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(b,I,j):h.prototype&&h.prototype.isPureReactComponent?!$m(S,b)||!$m(T,I):!0}function ZC(f,h,S){var b=!1,T=fn,I=h.contextType;return typeof I=="object"&&I!==null?I=Ji(I):(T=cr(h)?di:Et.current,b=h.contextTypes,I=(b=b!=null)?qn(f,T):fn),h=new h(S,I),f.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Ym,f.stateNode=h,h._reactInternals=f,b&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=T,f.__reactInternalMemoizedMaskedChildContext=I),h}function JC(f,h,S,b){f=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(S,b),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(S,b),h.state!==f&&Ym.enqueueReplaceState(h,h.state,null)}function r_(f,h,S,b){var T=f.stateNode;T.props=S,T.state=f.memoizedState,T.refs=qC,t_(f);var I=h.contextType;typeof I=="object"&&I!==null?T.context=Ji(I):(I=cr(h)?di:Et.current,T.context=qn(f,I)),T.state=f.memoizedState,I=h.getDerivedStateFromProps,typeof I=="function"&&(n_(f,h,I,S),T.state=f.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(h=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),h!==T.state&&Ym.enqueueReplaceState(T,T.state,null),Xm(f,S,T,b),T.state=f.memoizedState),typeof T.componentDidMount=="function"&&(f.flags|=4194308)}var su=[],au=0,qm=null,Km=0,Qi=[],eo=0,Dl=null,Vs=1,$s="";function Ul(f,h){su[au++]=Km,su[au++]=qm,qm=f,Km=h}function QC(f,h,S){Qi[eo++]=Vs,Qi[eo++]=$s,Qi[eo++]=Dl,Dl=f;var b=Vs;f=$s;var T=32-Ri(b)-1;b&=~(1<<T),S+=1;var I=32-Ri(h)+T;if(30<I){var j=T-T%5;I=(b&(1<<j)-1).toString(32),b>>=j,T-=j,Vs=1<<32-Ri(h)+T|S<<T|b,$s=I+f}else Vs=1<<I|S<<T|b,$s=f}function i_(f){f.return!==null&&(Ul(f,1),QC(f,1,0))}function o_(f){for(;f===qm;)qm=su[--au],su[au]=null,Km=su[--au],su[au]=null;for(;f===Dl;)Dl=Qi[--eo],Qi[eo]=null,$s=Qi[--eo],Qi[eo]=null,Vs=Qi[--eo],Qi[eo]=null}var Ii=null,Oi=null,wn=!1,Td=!1,Mo=null;function eA(f,h){var S=io(5,null,null,0);S.elementType="DELETED",S.stateNode=h,S.return=f,h=f.deletions,h===null?(f.deletions=[S],f.flags|=16):h.push(S)}function tA(f,h){switch(f.tag){case 5:return h=km(h,f.type,f.pendingProps),h!==null?(f.stateNode=h,Ii=f,Oi=tu(h),!0):!1;case 6:return h=zs(h,f.pendingProps),h!==null?(f.stateNode=h,Ii=f,Oi=null,!0):!1;case 13:if(h=wd(h),h!==null){var S=Dl!==null?{id:Vs,overflow:$s}:null;return f.memoizedState={dehydrated:h,treeContext:S,retryLane:1073741824},S=io(18,null,null,0),S.stateNode=h,S.return=f,f.child=S,Ii=f,Oi=null,!0}return!1;default:return!1}}function s_(f){return(f.mode&1)!==0&&(f.flags&128)===0}function a_(f){if(wn){var h=Oi;if(h){var S=h;if(!tA(f,h)){if(s_(f))throw Error(s(418));h=Na(S);var b=Ii;h&&tA(f,h)?eA(b,S):(f.flags=f.flags&-4097|2,wn=!1,Ii=f)}}else{if(s_(f))throw Error(s(418));f.flags=f.flags&-4097|2,wn=!1,Ii=f}}}function nA(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;Ii=f}function Cd(f){if(!me||f!==Ii)return!1;if(!wn)return nA(f),wn=!0,!1;if(f.tag!==3&&(f.tag!==5||Fe(f.type)&&!_e(f.type,f.memoizedProps))){var h=Oi;if(h){if(s_(f)){for(f=Oi;f;)f=Na(f);throw Error(s(418))}for(;h;)eA(f,h),h=Na(h)}}if(nA(f),f.tag===13){if(!me)throw Error(s(316));if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));Oi=F(f)}else Oi=Ii?Na(f.stateNode):null;return!0}function lu(){me&&(Oi=Ii=null,Td=wn=!1)}function l_(f){Mo===null?Mo=[f]:Mo.push(f)}function Ad(f,h,S){if(f=S.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(S._owner){if(S=S._owner,S){if(S.tag!==1)throw Error(s(309));var b=S.stateNode}if(!b)throw Error(s(147,f));var T=b,I=""+f;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===I?h.ref:(h=function(j){var te=T.refs;te===qC&&(te=T.refs={}),j===null?delete te[I]:te[I]=j},h._stringRef=I,h)}if(typeof f!="string")throw Error(s(284));if(!S._owner)throw Error(s(290,f))}return f}function Zm(f,h){throw f=Object.prototype.toString.call(h),Error(s(31,f==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":f))}function rA(f){var h=f._init;return h(f._payload)}function iA(f){function h(ce,ie){if(f){var de=ce.deletions;de===null?(ce.deletions=[ie],ce.flags|=16):de.push(ie)}}function S(ce,ie){if(!f)return null;for(;ie!==null;)h(ce,ie),ie=ie.sibling;return null}function b(ce,ie){for(ce=new Map;ie!==null;)ie.key!==null?ce.set(ie.key,ie):ce.set(ie.index,ie),ie=ie.sibling;return ce}function T(ce,ie){return ce=Va(ce,ie),ce.index=0,ce.sibling=null,ce}function I(ce,ie,de){return ce.index=de,f?(de=ce.alternate,de!==null?(de=de.index,de<ie?(ce.flags|=2,ie):de):(ce.flags|=2,ie)):(ce.flags|=1048576,ie)}function j(ce){return f&&ce.alternate===null&&(ce.flags|=2),ce}function te(ce,ie,de,Qe){return ie===null||ie.tag!==6?(ie=j_(de,ce.mode,Qe),ie.return=ce,ie):(ie=T(ie,de),ie.return=ce,ie)}function ge(ce,ie,de,Qe){var ht=de.type;return ht===u?it(ce,ie,de.props.children,Qe,de.key):ie!==null&&(ie.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===w&&rA(ht)===ie.type)?(Qe=T(ie,de.props),Qe.ref=Ad(ce,ie,de),Qe.return=ce,Qe):(Qe=Ag(de.type,de.key,de.props,null,ce.mode,Qe),Qe.ref=Ad(ce,ie,de),Qe.return=ce,Qe)}function Ue(ce,ie,de,Qe){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==de.containerInfo||ie.stateNode.implementation!==de.implementation?(ie=G_(de,ce.mode,Qe),ie.return=ce,ie):(ie=T(ie,de.children||[]),ie.return=ce,ie)}function it(ce,ie,de,Qe,ht){return ie===null||ie.tag!==7?(ie=Wl(de,ce.mode,Qe,ht),ie.return=ce,ie):(ie=T(ie,de),ie.return=ce,ie)}function At(ce,ie,de){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return ie=j_(""+ie,ce.mode,de),ie.return=ce,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case l:return de=Ag(ie.type,ie.key,ie.props,null,ce.mode,de),de.ref=Ad(ce,null,ie),de.return=ce,de;case c:return ie=G_(ie,ce.mode,de),ie.return=ce,ie;case w:var Qe=ie._init;return At(ce,Qe(ie._payload),de)}if(K(ie)||C(ie))return ie=Wl(ie,ce.mode,de,null),ie.return=ce,ie;Zm(ce,ie)}return null}function xt(ce,ie,de,Qe){var ht=ie!==null?ie.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return ht!==null?null:te(ce,ie,""+de,Qe);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case l:return de.key===ht?ge(ce,ie,de,Qe):null;case c:return de.key===ht?Ue(ce,ie,de,Qe):null;case w:return ht=de._init,xt(ce,ie,ht(de._payload),Qe)}if(K(de)||C(de))return ht!==null?null:it(ce,ie,de,Qe,null);Zm(ce,de)}return null}function an(ce,ie,de,Qe,ht){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number")return ce=ce.get(de)||null,te(ie,ce,""+Qe,ht);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case l:return ce=ce.get(Qe.key===null?de:Qe.key)||null,ge(ie,ce,Qe,ht);case c:return ce=ce.get(Qe.key===null?de:Qe.key)||null,Ue(ie,ce,Qe,ht);case w:var Nt=Qe._init;return an(ce,ie,de,Nt(Qe._payload),ht)}if(K(Qe)||C(Qe))return ce=ce.get(de)||null,it(ie,ce,Qe,ht,null);Zm(ie,Qe)}return null}function pt(ce,ie,de,Qe){for(var ht=null,Nt=null,Pt=ie,Yt=ie=0,dr=null;Pt!==null&&Yt<de.length;Yt++){Pt.index>Yt?(dr=Pt,Pt=null):dr=Pt.sibling;var qt=xt(ce,Pt,de[Yt],Qe);if(qt===null){Pt===null&&(Pt=dr);break}f&&Pt&&qt.alternate===null&&h(ce,Pt),ie=I(qt,ie,Yt),Nt===null?ht=qt:Nt.sibling=qt,Nt=qt,Pt=dr}if(Yt===de.length)return S(ce,Pt),wn&&Ul(ce,Yt),ht;if(Pt===null){for(;Yt<de.length;Yt++)Pt=At(ce,de[Yt],Qe),Pt!==null&&(ie=I(Pt,ie,Yt),Nt===null?ht=Pt:Nt.sibling=Pt,Nt=Pt);return wn&&Ul(ce,Yt),ht}for(Pt=b(ce,Pt);Yt<de.length;Yt++)dr=an(Pt,ce,Yt,de[Yt],Qe),dr!==null&&(f&&dr.alternate!==null&&Pt.delete(dr.key===null?Yt:dr.key),ie=I(dr,ie,Yt),Nt===null?ht=dr:Nt.sibling=dr,Nt=dr);return f&&Pt.forEach(function($a){return h(ce,$a)}),wn&&Ul(ce,Yt),ht}function Nr(ce,ie,de,Qe){var ht=C(de);if(typeof ht!="function")throw Error(s(150));if(de=ht.call(de),de==null)throw Error(s(151));for(var Nt=ht=null,Pt=ie,Yt=ie=0,dr=null,qt=de.next();Pt!==null&&!qt.done;Yt++,qt=de.next()){Pt.index>Yt?(dr=Pt,Pt=null):dr=Pt.sibling;var $a=xt(ce,Pt,qt.value,Qe);if($a===null){Pt===null&&(Pt=dr);break}f&&Pt&&$a.alternate===null&&h(ce,Pt),ie=I($a,ie,Yt),Nt===null?ht=$a:Nt.sibling=$a,Nt=$a,Pt=dr}if(qt.done)return S(ce,Pt),wn&&Ul(ce,Yt),ht;if(Pt===null){for(;!qt.done;Yt++,qt=de.next())qt=At(ce,qt.value,Qe),qt!==null&&(ie=I(qt,ie,Yt),Nt===null?ht=qt:Nt.sibling=qt,Nt=qt);return wn&&Ul(ce,Yt),ht}for(Pt=b(ce,Pt);!qt.done;Yt++,qt=de.next())qt=an(Pt,ce,Yt,qt.value,Qe),qt!==null&&(f&&qt.alternate!==null&&Pt.delete(qt.key===null?Yt:qt.key),ie=I(qt,ie,Yt),Nt===null?ht=qt:Nt.sibling=qt,Nt=qt);return f&&Pt.forEach(function($5){return h(ce,$5)}),wn&&Ul(ce,Yt),ht}function oo(ce,ie,de,Qe){if(typeof de=="object"&&de!==null&&de.type===u&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case l:e:{for(var ht=de.key,Nt=ie;Nt!==null;){if(Nt.key===ht){if(ht=de.type,ht===u){if(Nt.tag===7){S(ce,Nt.sibling),ie=T(Nt,de.props.children),ie.return=ce,ce=ie;break e}}else if(Nt.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===w&&rA(ht)===Nt.type){S(ce,Nt.sibling),ie=T(Nt,de.props),ie.ref=Ad(ce,Nt,de),ie.return=ce,ce=ie;break e}S(ce,Nt);break}else h(ce,Nt);Nt=Nt.sibling}de.type===u?(ie=Wl(de.props.children,ce.mode,Qe,de.key),ie.return=ce,ce=ie):(Qe=Ag(de.type,de.key,de.props,null,ce.mode,Qe),Qe.ref=Ad(ce,ie,de),Qe.return=ce,ce=Qe)}return j(ce);case c:e:{for(Nt=de.key;ie!==null;){if(ie.key===Nt)if(ie.tag===4&&ie.stateNode.containerInfo===de.containerInfo&&ie.stateNode.implementation===de.implementation){S(ce,ie.sibling),ie=T(ie,de.children||[]),ie.return=ce,ce=ie;break e}else{S(ce,ie);break}else h(ce,ie);ie=ie.sibling}ie=G_(de,ce.mode,Qe),ie.return=ce,ce=ie}return j(ce);case w:return Nt=de._init,oo(ce,ie,Nt(de._payload),Qe)}if(K(de))return pt(ce,ie,de,Qe);if(C(de))return Nr(ce,ie,de,Qe);Zm(ce,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,ie!==null&&ie.tag===6?(S(ce,ie.sibling),ie=T(ie,de),ie.return=ce,ce=ie):(S(ce,ie),ie=j_(de,ce.mode,Qe),ie.return=ce,ce=ie),j(ce)):S(ce,ie)}return oo}var cu=iA(!0),oA=iA(!1),Pd={},to=Un(Pd),Rd=Un(Pd),uu=Un(Pd);function ss(f){if(f===Pd)throw Error(s(174));return f}function c_(f,h){He(uu,h),He(Rd,f),He(to,Pd),f=Q(h),mt(to),He(to,f)}function fu(){mt(to),mt(Rd),mt(uu)}function sA(f){var h=ss(uu.current),S=ss(to.current);h=D(S,f.type,h),S!==h&&(He(Rd,f),He(to,h))}function u_(f){Rd.current===f&&(mt(to),mt(Rd))}var Cn=Un(0);function Jm(f){for(var h=f;h!==null;){if(h.tag===13){var S=h.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||bd(S)||Qc(S)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===f)break;for(;h.sibling===null;){if(h.return===null||h.return===f)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var f_=[];function d_(){for(var f=0;f<f_.length;f++){var h=f_[f];Ye?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}f_.length=0}var Qm=a.ReactCurrentDispatcher,no=a.ReactCurrentBatchConfig,du=0,Fn=null,Or=null,fr=null,eg=!1,Id=!1,Od=0,p5=0;function Lr(){throw Error(s(321))}function h_(f,h){if(h===null)return!1;for(var S=0;S<h.length&&S<f.length;S++)if(!rs(f[S],h[S]))return!1;return!0}function p_(f,h,S,b,T,I){if(du=I,Fn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Qm.current=f===null||f.memoizedState===null?v5:x5,f=S(b,T),Id){I=0;do{if(Id=!1,Od=0,25<=I)throw Error(s(301));I+=1,fr=Or=null,h.updateQueue=null,Qm.current=_5,f=S(b,T)}while(Id)}if(Qm.current=og,h=Or!==null&&Or.next!==null,du=0,fr=Or=Fn=null,eg=!1,h)throw Error(s(300));return f}function m_(){var f=Od!==0;return Od=0,f}function Ws(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fr===null?Fn.memoizedState=fr=f:fr=fr.next=f,fr}function as(){if(Or===null){var f=Fn.alternate;f=f!==null?f.memoizedState:null}else f=Or.next;var h=fr===null?Fn.memoizedState:fr.next;if(h!==null)fr=h,Or=f;else{if(f===null)throw Error(s(310));Or=f,f={memoizedState:Or.memoizedState,baseState:Or.baseState,baseQueue:Or.baseQueue,queue:Or.queue,next:null},fr===null?Fn.memoizedState=fr=f:fr=fr.next=f}return fr}function Fl(f,h){return typeof h=="function"?h(f):h}function tg(f){var h=as(),S=h.queue;if(S===null)throw Error(s(311));S.lastRenderedReducer=f;var b=Or,T=b.baseQueue,I=S.pending;if(I!==null){if(T!==null){var j=T.next;T.next=I.next,I.next=j}b.baseQueue=T=I,S.pending=null}if(T!==null){I=T.next,b=b.baseState;var te=j=null,ge=null,Ue=I;do{var it=Ue.lane;if((du&it)===it)ge!==null&&(ge=ge.next={lane:0,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null}),b=Ue.hasEagerState?Ue.eagerState:f(b,Ue.action);else{var At={lane:it,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null};ge===null?(te=ge=At,j=b):ge=ge.next=At,Fn.lanes|=it,pu|=it}Ue=Ue.next}while(Ue!==null&&Ue!==I);ge===null?j=b:ge.next=te,rs(b,h.memoizedState)||(Li=!0),h.memoizedState=b,h.baseState=j,h.baseQueue=ge,S.lastRenderedState=b}if(f=S.interleaved,f!==null){T=f;do I=T.lane,Fn.lanes|=I,pu|=I,T=T.next;while(T!==f)}else T===null&&(S.lanes=0);return[h.memoizedState,S.dispatch]}function ng(f){var h=as(),S=h.queue;if(S===null)throw Error(s(311));S.lastRenderedReducer=f;var b=S.dispatch,T=S.pending,I=h.memoizedState;if(T!==null){S.pending=null;var j=T=T.next;do I=f(I,j.action),j=j.next;while(j!==T);rs(I,h.memoizedState)||(Li=!0),h.memoizedState=I,h.baseQueue===null&&(h.baseState=I),S.lastRenderedState=I}return[I,b]}function aA(){}function lA(f,h){var S=Fn,b=as(),T=h(),I=!rs(b.memoizedState,T);if(I&&(b.memoizedState=T,Li=!0),b=b.queue,kd(fA.bind(null,S,b,f),[f]),b.getSnapshot!==h||I||fr!==null&&fr.memoizedState.tag&1){if(S.flags|=2048,Ld(9,uA.bind(null,S,b,T,h),void 0,null),Kn===null)throw Error(s(349));du&30||cA(S,h,T)}return T}function cA(f,h,S){f.flags|=16384,f={getSnapshot:h,value:S},h=Fn.updateQueue,h===null?(h={lastEffect:null,stores:null},Fn.updateQueue=h,h.stores=[f]):(S=h.stores,S===null?h.stores=[f]:S.push(f))}function uA(f,h,S,b){h.value=S,h.getSnapshot=b,dA(h)&&ro(f,1,-1)}function fA(f,h,S){return S(function(){dA(h)&&ro(f,1,-1)})}function dA(f){var h=f.getSnapshot;f=f.value;try{var S=h();return!rs(f,S)}catch{return!0}}function g_(f){var h=Ws();return typeof f=="function"&&(f=f()),h.memoizedState=h.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fl,lastRenderedState:f},h.queue=f,f=f.dispatch=y5.bind(null,Fn,f),[h.memoizedState,f]}function Ld(f,h,S,b){return f={tag:f,create:h,destroy:S,deps:b,next:null},h=Fn.updateQueue,h===null?(h={lastEffect:null,stores:null},Fn.updateQueue=h,h.lastEffect=f.next=f):(S=h.lastEffect,S===null?h.lastEffect=f.next=f:(b=S.next,S.next=f,f.next=b,h.lastEffect=f)),f}function hA(){return as().memoizedState}function rg(f,h,S,b){var T=Ws();Fn.flags|=f,T.memoizedState=Ld(1|h,S,void 0,b===void 0?null:b)}function ig(f,h,S,b){var T=as();b=b===void 0?null:b;var I=void 0;if(Or!==null){var j=Or.memoizedState;if(I=j.destroy,b!==null&&h_(b,j.deps)){T.memoizedState=Ld(h,S,I,b);return}}Fn.flags|=f,T.memoizedState=Ld(1|h,S,I,b)}function y_(f,h){return rg(8390656,8,f,h)}function kd(f,h){return ig(2048,8,f,h)}function pA(f,h){return ig(4,2,f,h)}function mA(f,h){return ig(4,4,f,h)}function gA(f,h){if(typeof h=="function")return f=f(),h(f),function(){h(null)};if(h!=null)return f=f(),h.current=f,function(){h.current=null}}function yA(f,h,S){return S=S!=null?S.concat([f]):null,ig(4,4,gA.bind(null,h,f),S)}function v_(){}function vA(f,h){var S=as();h=h===void 0?null:h;var b=S.memoizedState;return b!==null&&h!==null&&h_(h,b[1])?b[0]:(S.memoizedState=[f,h],f)}function xA(f,h){var S=as();h=h===void 0?null:h;var b=S.memoizedState;return b!==null&&h!==null&&h_(h,b[1])?b[0]:(f=f(),S.memoizedState=[f,h],f)}function m5(f,h){var S=Xt;Xt=S!==0&&4>S?S:4,f(!0);var b=no.transition;no.transition={};try{f(!1),h()}finally{Xt=S,no.transition=b}}function _A(){return as().memoizedState}function g5(f,h,S){var b=Ba(f);S={lane:b,action:S,hasEagerState:!1,eagerState:null,next:null},SA(f)?wA(h,S):(bA(f,h,S),S=Zr(),f=ro(f,b,S),f!==null&&EA(f,h,b))}function y5(f,h,S){var b=Ba(f),T={lane:b,action:S,hasEagerState:!1,eagerState:null,next:null};if(SA(f))wA(h,T);else{bA(f,h,T);var I=f.alternate;if(f.lanes===0&&(I===null||I.lanes===0)&&(I=h.lastRenderedReducer,I!==null))try{var j=h.lastRenderedState,te=I(j,S);if(T.hasEagerState=!0,T.eagerState=te,rs(te,j))return}catch{}finally{}S=Zr(),f=ro(f,b,S),f!==null&&EA(f,h,b)}}function SA(f){var h=f.alternate;return f===Fn||h!==null&&h===Fn}function wA(f,h){Id=eg=!0;var S=f.pending;S===null?h.next=h:(h.next=S.next,S.next=h),f.pending=h}function bA(f,h,S){Kn!==null&&f.mode&1&&!(Ut&2)?(f=h.interleaved,f===null?(S.next=S,os===null?os=[h]:os.push(h)):(S.next=f.next,f.next=S),h.interleaved=S):(f=h.pending,f===null?S.next=S:(S.next=f.next,f.next=S),h.pending=S)}function EA(f,h,S){if(S&4194240){var b=h.lanes;b&=f.pendingLanes,S|=b,h.lanes=S,G1(f,S)}}var og={readContext:Ji,useCallback:Lr,useContext:Lr,useEffect:Lr,useImperativeHandle:Lr,useInsertionEffect:Lr,useLayoutEffect:Lr,useMemo:Lr,useReducer:Lr,useRef:Lr,useState:Lr,useDebugValue:Lr,useDeferredValue:Lr,useTransition:Lr,useMutableSource:Lr,useSyncExternalStore:Lr,useId:Lr,unstable_isNewReconciler:!1},v5={readContext:Ji,useCallback:function(f,h){return Ws().memoizedState=[f,h===void 0?null:h],f},useContext:Ji,useEffect:y_,useImperativeHandle:function(f,h,S){return S=S!=null?S.concat([f]):null,rg(4194308,4,gA.bind(null,h,f),S)},useLayoutEffect:function(f,h){return rg(4194308,4,f,h)},useInsertionEffect:function(f,h){return rg(4,2,f,h)},useMemo:function(f,h){var S=Ws();return h=h===void 0?null:h,f=f(),S.memoizedState=[f,h],f},useReducer:function(f,h,S){var b=Ws();return h=S!==void 0?S(h):h,b.memoizedState=b.baseState=h,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:h},b.queue=f,f=f.dispatch=g5.bind(null,Fn,f),[b.memoizedState,f]},useRef:function(f){var h=Ws();return f={current:f},h.memoizedState=f},useState:g_,useDebugValue:v_,useDeferredValue:function(f){var h=g_(f),S=h[0],b=h[1];return y_(function(){var T=no.transition;no.transition={};try{b(f)}finally{no.transition=T}},[f]),S},useTransition:function(){var f=g_(!1),h=f[0];return f=m5.bind(null,f[1]),Ws().memoizedState=f,[h,f]},useMutableSource:function(){},useSyncExternalStore:function(f,h,S){var b=Fn,T=Ws();if(wn){if(S===void 0)throw Error(s(407));S=S()}else{if(S=h(),Kn===null)throw Error(s(349));du&30||cA(b,h,S)}T.memoizedState=S;var I={value:S,getSnapshot:h};return T.queue=I,y_(fA.bind(null,b,I,f),[f]),b.flags|=2048,Ld(9,uA.bind(null,b,I,S,h),void 0,null),S},useId:function(){var f=Ws(),h=Kn.identifierPrefix;if(wn){var S=$s,b=Vs;S=(b&~(1<<32-Ri(b)-1)).toString(32)+S,h=":"+h+"R"+S,S=Od++,0<S&&(h+="H"+S.toString(32)),h+=":"}else S=p5++,h=":"+h+"r"+S.toString(32)+":";return f.memoizedState=h},unstable_isNewReconciler:!1},x5={readContext:Ji,useCallback:vA,useContext:Ji,useEffect:kd,useImperativeHandle:yA,useInsertionEffect:pA,useLayoutEffect:mA,useMemo:xA,useReducer:tg,useRef:hA,useState:function(){return tg(Fl)},useDebugValue:v_,useDeferredValue:function(f){var h=tg(Fl),S=h[0],b=h[1];return kd(function(){var T=no.transition;no.transition={};try{b(f)}finally{no.transition=T}},[f]),S},useTransition:function(){var f=tg(Fl)[0],h=as().memoizedState;return[f,h]},useMutableSource:aA,useSyncExternalStore:lA,useId:_A,unstable_isNewReconciler:!1},_5={readContext:Ji,useCallback:vA,useContext:Ji,useEffect:kd,useImperativeHandle:yA,useInsertionEffect:pA,useLayoutEffect:mA,useMemo:xA,useReducer:ng,useRef:hA,useState:function(){return ng(Fl)},useDebugValue:v_,useDeferredValue:function(f){var h=ng(Fl),S=h[0],b=h[1];return kd(function(){var T=no.transition;no.transition={};try{b(f)}finally{no.transition=T}},[f]),S},useTransition:function(){var f=ng(Fl)[0],h=as().memoizedState;return[f,h]},useMutableSource:aA,useSyncExternalStore:lA,useId:_A,unstable_isNewReconciler:!1};function x_(f,h){try{var S="",b=h;do S+=h5(b),b=b.return;while(b);var T=S}catch(I){T=`
Error generating stack: `+I.message+`
`+I.stack}return{value:f,source:h,stack:T}}function __(f,h){try{console.error(h.value)}catch(S){setTimeout(function(){throw S})}}var S5=typeof WeakMap=="function"?WeakMap:Map;function MA(f,h,S){S=Hs(-1,S),S.tag=3,S.payload={element:null};var b=h.value;return S.callback=function(){Sg||(Sg=!0,F_=b),__(f,h)},S}function TA(f,h,S){S=Hs(-1,S),S.tag=3;var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var T=h.value;S.payload=function(){return b(T)},S.callback=function(){__(f,h)}}var I=f.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(S.callback=function(){__(f,h),typeof b!="function"&&(Fa===null?Fa=new Set([this]):Fa.add(this));var j=h.stack;this.componentDidCatch(h.value,{componentStack:j!==null?j:""})}),S}function CA(f,h,S){var b=f.pingCache;if(b===null){b=f.pingCache=new S5;var T=new Set;b.set(h,T)}else T=b.get(h),T===void 0&&(T=new Set,b.set(h,T));T.has(S)||(T.add(S),f=N5.bind(null,f,h,S),h.then(f,f))}function AA(f){do{var h;if((h=f.tag===13)&&(h=f.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return f;f=f.return}while(f!==null);return null}function PA(f,h,S,b,T){return f.mode&1?(f.flags|=65536,f.lanes=T,f):(f===h?f.flags|=65536:(f.flags|=128,S.flags|=131072,S.flags&=-52805,S.tag===1&&(S.alternate===null?S.tag=17:(h=Hs(-1,1),h.tag=2,Ua(S,h))),S.lanes|=1),f)}function ls(f){f.flags|=4}function RA(f,h){if(f!==null&&f.child===h.child)return!0;if(h.flags&16)return!1;for(f=h.child;f!==null;){if(f.flags&12854||f.subtreeFlags&12854)return!1;f=f.sibling}return!0}var Nd,Dd,sg,ag;if(Ve)Nd=function(f,h){for(var S=h.child;S!==null;){if(S.tag===5||S.tag===6)pe(f,S.stateNode);else if(S.tag!==4&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===h)break;for(;S.sibling===null;){if(S.return===null||S.return===h)return;S=S.return}S.sibling.return=S.return,S=S.sibling}},Dd=function(){},sg=function(f,h,S,b,T){if(f=f.memoizedProps,f!==b){var I=h.stateNode,j=ss(to.current);S=ae(I,S,f,b,T,j),(h.updateQueue=S)&&ls(h)}},ag=function(f,h,S,b){S!==b&&ls(h)};else if(B){Nd=function(f,h,S,b){for(var T=h.child;T!==null;){if(T.tag===5){var I=T.stateNode;S&&b&&(I=ar(I,T.type,T.memoizedProps,T)),pe(f,I)}else if(T.tag===6)I=T.stateNode,S&&b&&(I=lr(I,T.memoizedProps,T)),pe(f,I);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)I=T.child,I!==null&&(I.return=T),Nd(f,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===h)break;for(;T.sibling===null;){if(T.return===null||T.return===h)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};var IA=function(f,h,S,b){for(var T=h.child;T!==null;){if(T.tag===5){var I=T.stateNode;S&&b&&(I=ar(I,T.type,T.memoizedProps,T)),Vt(f,I)}else if(T.tag===6)I=T.stateNode,S&&b&&(I=lr(I,T.memoizedProps,T)),Vt(f,I);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)I=T.child,I!==null&&(I.return=T),IA(f,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===h)break;for(;T.sibling===null;){if(T.return===null||T.return===h)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};Dd=function(f,h){var S=h.stateNode;if(!RA(f,h)){f=S.containerInfo;var b=Tt(f);IA(b,h,!1,!1),S.pendingChildren=b,ls(h),mn(f,b)}},sg=function(f,h,S,b,T){var I=f.stateNode,j=f.memoizedProps;if((f=RA(f,h))&&j===b)h.stateNode=I;else{var te=h.stateNode,ge=ss(to.current),Ue=null;j!==b&&(Ue=ae(te,S,j,b,T,ge)),f&&Ue===null?h.stateNode=I:(I=vt(I,Ue,S,j,b,h,f,te),De(I,S,b,T,ge)&&ls(h),h.stateNode=I,f?ls(h):Nd(I,h,!1,!1))}},ag=function(f,h,S,b){S!==b?(f=ss(uu.current),S=ss(to.current),h.stateNode=Re(b,f,S,h),ls(h)):h.stateNode=f.stateNode}}else Dd=function(){},sg=function(){},ag=function(){};function Ud(f,h){if(!wn)switch(f.tailMode){case"hidden":h=f.tail;for(var S=null;h!==null;)h.alternate!==null&&(S=h),h=h.sibling;S===null?f.tail=null:S.sibling=null;break;case"collapsed":S=f.tail;for(var b=null;S!==null;)S.alternate!==null&&(b=S),S=S.sibling;b===null?h||f.tail===null?f.tail=null:f.tail.sibling=null:b.sibling=null}}function kr(f){var h=f.alternate!==null&&f.alternate.child===f.child,S=0,b=0;if(h)for(var T=f.child;T!==null;)S|=T.lanes|T.childLanes,b|=T.subtreeFlags&14680064,b|=T.flags&14680064,T.return=f,T=T.sibling;else for(T=f.child;T!==null;)S|=T.lanes|T.childLanes,b|=T.subtreeFlags,b|=T.flags,T.return=f,T=T.sibling;return f.subtreeFlags|=b,f.childLanes=S,h}function w5(f,h,S){var b=h.pendingProps;switch(o_(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kr(h),null;case 1:return cr(h.type)&&gn(),kr(h),null;case 3:return b=h.stateNode,fu(),mt(dn),mt(Et),d_(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(f===null||f.child===null)&&(Cd(h)?ls(h):f===null||f.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,Mo!==null&&(H_(Mo),Mo=null))),Dd(f,h),kr(h),null;case 5:u_(h),S=ss(uu.current);var T=h.type;if(f!==null&&h.stateNode!=null)sg(f,h,T,b,S),f.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!b){if(h.stateNode===null)throw Error(s(166));return kr(h),null}if(f=ss(to.current),Cd(h)){if(!me)throw Error(s(175));f=H1(h.stateNode,h.type,h.memoizedProps,S,f,h,!Td),h.updateQueue=f,f!==null&&ls(h)}else{var I=ne(T,b,S,f,h);Nd(I,h,!1,!1),h.stateNode=I,De(I,T,b,S,f)&&ls(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return kr(h),null;case 6:if(f&&h.stateNode!=null)ag(f,h,f.memoizedProps,b);else{if(typeof b!="string"&&h.stateNode===null)throw Error(s(166));if(f=ss(uu.current),S=ss(to.current),Cd(h)){if(!me)throw Error(s(176));if(f=h.stateNode,b=h.memoizedProps,(S=V1(f,b,h,!Td))&&(T=Ii,T!==null))switch(I=(T.mode&1)!==0,T.tag){case 3:et(T.stateNode.containerInfo,f,b,I);break;case 5:at(T.type,T.memoizedProps,T.stateNode,f,b,I)}S&&ls(h)}else h.stateNode=Re(b,f,S,h)}return kr(h),null;case 13:if(mt(Cn),b=h.memoizedState,wn&&Oi!==null&&h.mode&1&&!(h.flags&128)){for(f=Oi;f;)f=Na(f);return lu(),h.flags|=98560,h}if(b!==null&&b.dehydrated!==null){if(b=Cd(h),f===null){if(!b)throw Error(s(318));if(!me)throw Error(s(344));if(f=h.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));$1(f,h)}else lu(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;return kr(h),null}return Mo!==null&&(H_(Mo),Mo=null),h.flags&128?(h.lanes=S,h):(b=b!==null,S=!1,f===null?Cd(h):S=f.memoizedState!==null,b&&!S&&(h.child.flags|=8192,h.mode&1&&(f===null||Cn.current&1?nr===0&&(nr=3):$_())),h.updateQueue!==null&&(h.flags|=4),kr(h),null);case 4:return fu(),Dd(f,h),f===null&&ke(h.stateNode.containerInfo),kr(h),null;case 10:return Q1(h.type._context),kr(h),null;case 17:return cr(h.type)&&gn(),kr(h),null;case 19:if(mt(Cn),T=h.memoizedState,T===null)return kr(h),null;if(b=(h.flags&128)!==0,I=T.rendering,I===null)if(b)Ud(T,!1);else{if(nr!==0||f!==null&&f.flags&128)for(f=h.child;f!==null;){if(I=Jm(f),I!==null){for(h.flags|=128,Ud(T,!1),f=I.updateQueue,f!==null&&(h.updateQueue=f,h.flags|=4),h.subtreeFlags=0,f=S,b=h.child;b!==null;)S=b,T=f,S.flags&=14680066,I=S.alternate,I===null?(S.childLanes=0,S.lanes=T,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=I.childLanes,S.lanes=I.lanes,S.child=I.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=I.memoizedProps,S.memoizedState=I.memoizedState,S.updateQueue=I.updateQueue,S.type=I.type,T=I.dependencies,S.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext}),b=b.sibling;return He(Cn,Cn.current&1|2),h.child}f=f.sibling}T.tail!==null&&ur()>U_&&(h.flags|=128,b=!0,Ud(T,!1),h.lanes=4194304)}else{if(!b)if(f=Jm(I),f!==null){if(h.flags|=128,b=!0,f=f.updateQueue,f!==null&&(h.updateQueue=f,h.flags|=4),Ud(T,!0),T.tail===null&&T.tailMode==="hidden"&&!I.alternate&&!wn)return kr(h),null}else 2*ur()-T.renderingStartTime>U_&&S!==1073741824&&(h.flags|=128,b=!0,Ud(T,!1),h.lanes=4194304);T.isBackwards?(I.sibling=h.child,h.child=I):(f=T.last,f!==null?f.sibling=I:h.child=I,T.last=I)}return T.tail!==null?(h=T.tail,T.rendering=h,T.tail=h.sibling,T.renderingStartTime=ur(),h.sibling=null,f=Cn.current,He(Cn,b?f&1|2:f&1),h):(kr(h),null);case 22:case 23:return V_(),b=h.memoizedState!==null,f!==null&&f.memoizedState!==null!==b&&(h.flags|=8192),b&&h.mode&1?ki&1073741824&&(kr(h),Ve&&h.subtreeFlags&6&&(h.flags|=8192)):kr(h),null;case 24:return null;case 25:return null}throw Error(s(156,h.tag))}var b5=a.ReactCurrentOwner,Li=!1;function Kr(f,h,S,b){h.child=f===null?oA(h,null,S,b):cu(h,f.child,S,b)}function OA(f,h,S,b,T){S=S.render;var I=h.ref;return ou(h,T),b=p_(f,h,S,b,I,T),S=m_(),f!==null&&!Li?(h.updateQueue=f.updateQueue,h.flags&=-2053,f.lanes&=~T,js(f,h,T)):(wn&&S&&i_(h),h.flags|=1,Kr(f,h,b,T),h.child)}function LA(f,h,S,b,T){if(f===null){var I=S.type;return typeof I=="function"&&!W_(I)&&I.defaultProps===void 0&&S.compare===null&&S.defaultProps===void 0?(h.tag=15,h.type=I,kA(f,h,I,b,T)):(f=Ag(S.type,null,b,h,h.mode,T),f.ref=h.ref,f.return=h,h.child=f)}if(I=f.child,!(f.lanes&T)){var j=I.memoizedProps;if(S=S.compare,S=S!==null?S:$m,S(j,b)&&f.ref===h.ref)return js(f,h,T)}return h.flags|=1,f=Va(I,b),f.ref=h.ref,f.return=h,h.child=f}function kA(f,h,S,b,T){if(f!==null&&$m(f.memoizedProps,b)&&f.ref===h.ref)if(Li=!1,(f.lanes&T)!==0)f.flags&131072&&(Li=!0);else return h.lanes=f.lanes,js(f,h,T);return S_(f,h,S,b,T)}function NA(f,h,S){var b=h.pendingProps,T=b.children,I=f!==null?f.memoizedState:null;if(b.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null},He(hu,ki),ki|=S;else if(S&1073741824)h.memoizedState={baseLanes:0,cachePool:null},b=I!==null?I.baseLanes:S,He(hu,ki),ki|=b;else return f=I!==null?I.baseLanes|S:S,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:f,cachePool:null},h.updateQueue=null,He(hu,ki),ki|=f,null;else I!==null?(b=I.baseLanes|S,h.memoizedState=null):b=S,He(hu,ki),ki|=b;return Kr(f,h,T,S),h.child}function DA(f,h){var S=h.ref;(f===null&&S!==null||f!==null&&f.ref!==S)&&(h.flags|=512,h.flags|=2097152)}function S_(f,h,S,b,T){var I=cr(S)?di:Et.current;return I=qn(h,I),ou(h,T),S=p_(f,h,S,b,I,T),b=m_(),f!==null&&!Li?(h.updateQueue=f.updateQueue,h.flags&=-2053,f.lanes&=~T,js(f,h,T)):(wn&&b&&i_(h),h.flags|=1,Kr(f,h,S,T),h.child)}function UA(f,h,S,b,T){if(cr(S)){var I=!0;Sr(h)}else I=!1;if(ou(h,T),h.stateNode===null)f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),ZC(h,S,b),r_(h,S,b,T),b=!0;else if(f===null){var j=h.stateNode,te=h.memoizedProps;j.props=te;var ge=j.context,Ue=S.contextType;typeof Ue=="object"&&Ue!==null?Ue=Ji(Ue):(Ue=cr(S)?di:Et.current,Ue=qn(h,Ue));var it=S.getDerivedStateFromProps,At=typeof it=="function"||typeof j.getSnapshotBeforeUpdate=="function";At||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(te!==b||ge!==Ue)&&JC(h,j,b,Ue),Da=!1;var xt=h.memoizedState;j.state=xt,Xm(h,b,j,T),ge=h.memoizedState,te!==b||xt!==ge||dn.current||Da?(typeof it=="function"&&(n_(h,S,it,b),ge=h.memoizedState),(te=Da||KC(h,S,te,b,xt,ge,Ue))?(At||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(h.flags|=4194308)):(typeof j.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=b,h.memoizedState=ge),j.props=b,j.state=ge,j.context=Ue,b=te):(typeof j.componentDidMount=="function"&&(h.flags|=4194308),b=!1)}else{j=h.stateNode,GC(f,h),te=h.memoizedProps,Ue=h.type===h.elementType?te:Eo(h.type,te),j.props=Ue,At=h.pendingProps,xt=j.context,ge=S.contextType,typeof ge=="object"&&ge!==null?ge=Ji(ge):(ge=cr(S)?di:Et.current,ge=qn(h,ge));var an=S.getDerivedStateFromProps;(it=typeof an=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(te!==At||xt!==ge)&&JC(h,j,b,ge),Da=!1,xt=h.memoizedState,j.state=xt,Xm(h,b,j,T);var pt=h.memoizedState;te!==At||xt!==pt||dn.current||Da?(typeof an=="function"&&(n_(h,S,an,b),pt=h.memoizedState),(Ue=Da||KC(h,S,Ue,b,xt,pt,ge)||!1)?(it||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(b,pt,ge),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(b,pt,ge)),typeof j.componentDidUpdate=="function"&&(h.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof j.componentDidUpdate!="function"||te===f.memoizedProps&&xt===f.memoizedState||(h.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||te===f.memoizedProps&&xt===f.memoizedState||(h.flags|=1024),h.memoizedProps=b,h.memoizedState=pt),j.props=b,j.state=pt,j.context=ge,b=Ue):(typeof j.componentDidUpdate!="function"||te===f.memoizedProps&&xt===f.memoizedState||(h.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||te===f.memoizedProps&&xt===f.memoizedState||(h.flags|=1024),b=!1)}return w_(f,h,S,b,I,T)}function w_(f,h,S,b,T,I){DA(f,h);var j=(h.flags&128)!==0;if(!b&&!j)return T&&ru(h,S,!1),js(f,h,I);b=h.stateNode,b5.current=h;var te=j&&typeof S.getDerivedStateFromError!="function"?null:b.render();return h.flags|=1,f!==null&&j?(h.child=cu(h,f.child,null,I),h.child=cu(h,null,te,I)):Kr(f,h,te,I),h.memoizedState=b.state,T&&ru(h,S,!0),h.child}function FA(f){var h=f.stateNode;h.pendingContext?bo(f,h.pendingContext,h.pendingContext!==h.context):h.context&&bo(f,h.context,!1),c_(f,h.containerInfo)}function zA(f,h,S,b,T){return lu(),l_(T),h.flags|=256,Kr(f,h,S,b),h.child}var lg={dehydrated:null,treeContext:null,retryLane:0};function cg(f){return{baseLanes:f,cachePool:null}}function BA(f,h,S){var b=h.pendingProps,T=Cn.current,I=!1,j=(h.flags&128)!==0,te;if((te=j)||(te=f!==null&&f.memoizedState===null?!1:(T&2)!==0),te?(I=!0,h.flags&=-129):(f===null||f.memoizedState!==null)&&(T|=1),He(Cn,T&1),f===null)return a_(h),f=h.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?(h.mode&1?Qc(f)?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(T=b.children,f=b.fallback,I?(b=h.mode,I=h.child,T={mode:"hidden",children:T},!(b&1)&&I!==null?(I.childLanes=0,I.pendingProps=T):I=Pg(T,b,0,null),f=Wl(f,b,S,null),I.return=h,f.return=h,I.sibling=f,h.child=I,h.child.memoizedState=cg(S),h.memoizedState=lg,f):b_(h,T));if(T=f.memoizedState,T!==null){if(te=T.dehydrated,te!==null){if(j)return h.flags&256?(h.flags&=-257,ug(f,h,S,Error(s(422)))):h.memoizedState!==null?(h.child=f.child,h.flags|=128,null):(I=b.fallback,T=h.mode,b=Pg({mode:"visible",children:b.children},T,0,null),I=Wl(I,T,S,null),I.flags|=2,b.return=h,I.return=h,b.sibling=I,h.child=b,h.mode&1&&cu(h,f.child,null,S),h.child.memoizedState=cg(S),h.memoizedState=lg,I);if(!(h.mode&1))h=ug(f,h,S,null);else if(Qc(te))h=ug(f,h,S,Error(s(419)));else if(b=(S&f.childLanes)!==0,Li||b){if(b=Kn,b!==null){switch(S&-S){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}b=I&(b.suspendedLanes|S)?0:I,b!==0&&b!==T.retryLane&&(T.retryLane=b,ro(f,b,-1))}$_(),h=ug(f,h,S,Error(s(421)))}else bd(te)?(h.flags|=128,h.child=f.child,h=D5.bind(null,f),eu(te,h),h=null):(S=T.treeContext,me&&(Oi=Dm(te),Ii=h,wn=!0,Mo=null,Td=!1,S!==null&&(Qi[eo++]=Vs,Qi[eo++]=$s,Qi[eo++]=Dl,Vs=S.id,$s=S.overflow,Dl=h)),h=b_(h,h.pendingProps.children),h.flags|=4096);return h}return I?(b=VA(f,h,b.children,b.fallback,S),I=h.child,T=f.child.memoizedState,I.memoizedState=T===null?cg(S):{baseLanes:T.baseLanes|S,cachePool:null},I.childLanes=f.childLanes&~S,h.memoizedState=lg,b):(S=HA(f,h,b.children,S),h.memoizedState=null,S)}return I?(b=VA(f,h,b.children,b.fallback,S),I=h.child,T=f.child.memoizedState,I.memoizedState=T===null?cg(S):{baseLanes:T.baseLanes|S,cachePool:null},I.childLanes=f.childLanes&~S,h.memoizedState=lg,b):(S=HA(f,h,b.children,S),h.memoizedState=null,S)}function b_(f,h){return h=Pg({mode:"visible",children:h},f.mode,0,null),h.return=f,f.child=h}function HA(f,h,S,b){var T=f.child;return f=T.sibling,S=Va(T,{mode:"visible",children:S}),!(h.mode&1)&&(S.lanes=b),S.return=h,S.sibling=null,f!==null&&(b=h.deletions,b===null?(h.deletions=[f],h.flags|=16):b.push(f)),h.child=S}function VA(f,h,S,b,T){var I=h.mode;f=f.child;var j=f.sibling,te={mode:"hidden",children:S};return!(I&1)&&h.child!==f?(S=h.child,S.childLanes=0,S.pendingProps=te,h.deletions=null):(S=Va(f,te),S.subtreeFlags=f.subtreeFlags&14680064),j!==null?b=Va(j,b):(b=Wl(b,I,T,null),b.flags|=2),b.return=h,S.return=h,S.sibling=b,h.child=S,b}function ug(f,h,S,b){return b!==null&&l_(b),cu(h,f.child,null,S),f=b_(h,h.pendingProps.children),f.flags|=2,h.memoizedState=null,f}function $A(f,h,S){f.lanes|=h;var b=f.alternate;b!==null&&(b.lanes|=h),e_(f.return,h,S)}function E_(f,h,S,b,T){var I=f.memoizedState;I===null?f.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:b,tail:S,tailMode:T}:(I.isBackwards=h,I.rendering=null,I.renderingStartTime=0,I.last=b,I.tail=S,I.tailMode=T)}function WA(f,h,S){var b=h.pendingProps,T=b.revealOrder,I=b.tail;if(Kr(f,h,b.children,S),b=Cn.current,b&2)b=b&1|2,h.flags|=128;else{if(f!==null&&f.flags&128)e:for(f=h.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&$A(f,S,h);else if(f.tag===19)$A(f,S,h);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===h)break e;for(;f.sibling===null;){if(f.return===null||f.return===h)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}b&=1}if(He(Cn,b),!(h.mode&1))h.memoizedState=null;else switch(T){case"forwards":for(S=h.child,T=null;S!==null;)f=S.alternate,f!==null&&Jm(f)===null&&(T=S),S=S.sibling;S=T,S===null?(T=h.child,h.child=null):(T=S.sibling,S.sibling=null),E_(h,!1,T,S,I);break;case"backwards":for(S=null,T=h.child,h.child=null;T!==null;){if(f=T.alternate,f!==null&&Jm(f)===null){h.child=T;break}f=T.sibling,T.sibling=S,S=T,T=f}E_(h,!0,S,null,I);break;case"together":E_(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function js(f,h,S){if(f!==null&&(h.dependencies=f.dependencies),pu|=h.lanes,!(S&h.childLanes))return null;if(f!==null&&h.child!==f.child)throw Error(s(153));if(h.child!==null){for(f=h.child,S=Va(f,f.pendingProps),h.child=S,S.return=h;f.sibling!==null;)f=f.sibling,S=S.sibling=Va(f,f.pendingProps),S.return=h;S.sibling=null}return h.child}function E5(f,h,S){switch(h.tag){case 3:FA(h),lu();break;case 5:sA(h);break;case 1:cr(h.type)&&Sr(h);break;case 4:c_(h,h.stateNode.containerInfo);break;case 10:jC(h,h.type._context,h.memoizedProps.value);break;case 13:var b=h.memoizedState;if(b!==null)return b.dehydrated!==null?(He(Cn,Cn.current&1),h.flags|=128,null):S&h.child.childLanes?BA(f,h,S):(He(Cn,Cn.current&1),f=js(f,h,S),f!==null?f.sibling:null);He(Cn,Cn.current&1);break;case 19:if(b=(S&h.childLanes)!==0,f.flags&128){if(b)return WA(f,h,S);h.flags|=128}var T=h.memoizedState;if(T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),He(Cn,Cn.current),b)break;return null;case 22:case 23:return h.lanes=0,NA(f,h,S)}return js(f,h,S)}function M5(f,h){switch(o_(h),h.tag){case 1:return cr(h.type)&&gn(),f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 3:return fu(),mt(dn),mt(Et),d_(),f=h.flags,f&65536&&!(f&128)?(h.flags=f&-65537|128,h):null;case 5:return u_(h),null;case 13:if(mt(Cn),f=h.memoizedState,f!==null&&f.dehydrated!==null){if(h.alternate===null)throw Error(s(340));lu()}return f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 19:return mt(Cn),null;case 4:return fu(),null;case 10:return Q1(h.type._context),null;case 22:case 23:return V_(),null;case 24:return null;default:return null}}var fg=!1,zl=!1,T5=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function dg(f,h){var S=f.ref;if(S!==null)if(typeof S=="function")try{S(null)}catch(b){mi(f,h,b)}else S.current=null}function M_(f,h,S){try{S()}catch(b){mi(f,h,b)}}var jA=!1;function C5(f,h){for(G(f.containerInfo),Ke=h;Ke!==null;)if(f=Ke,h=f.child,(f.subtreeFlags&1028)!==0&&h!==null)h.return=f,Ke=h;else for(;Ke!==null;){f=Ke;try{var S=f.alternate;if(f.flags&1024)switch(f.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var b=S.memoizedProps,T=S.memoizedState,I=f.stateNode,j=I.getSnapshotBeforeUpdate(f.elementType===f.type?b:Eo(f.type,b),T);I.__reactInternalSnapshotBeforeUpdate=j}break;case 3:Ve&&Be(f.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(te){mi(f,f.return,te)}if(h=f.sibling,h!==null){h.return=f.return,Ke=h;break}Ke=f.return}return S=jA,jA=!1,S}function Bl(f,h,S){var b=h.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var T=b=b.next;do{if((T.tag&f)===f){var I=T.destroy;T.destroy=void 0,I!==void 0&&M_(h,S,I)}T=T.next}while(T!==b)}}function Fd(f,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var S=h=h.next;do{if((S.tag&f)===f){var b=S.create;S.destroy=b()}S=S.next}while(S!==h)}}function T_(f){var h=f.ref;if(h!==null){var S=f.stateNode;switch(f.tag){case 5:f=J(S);break;default:f=S}typeof h=="function"?h(f):h.current=f}}function GA(f,h,S){if(ns&&typeof ns.onCommitFiberUnmount=="function")try{ns.onCommitFiberUnmount(Hm,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(f=h.updateQueue,f!==null&&(f=f.lastEffect,f!==null)){var b=f=f.next;do{var T=b,I=T.destroy;T=T.tag,I!==void 0&&(T&2||T&4)&&M_(h,S,I),b=b.next}while(b!==f)}break;case 1:if(dg(h,S),f=h.stateNode,typeof f.componentWillUnmount=="function")try{f.props=h.memoizedProps,f.state=h.memoizedState,f.componentWillUnmount()}catch(j){mi(h,S,j)}break;case 5:dg(h,S);break;case 4:Ve?JA(f,h,S):B&&B&&(h=h.stateNode.containerInfo,S=Tt(h),Dt(h,S))}}function XA(f,h,S){for(var b=h;;)if(GA(f,b,S),b.child===null||Ve&&b.tag===4){if(b===h)break;for(;b.sibling===null;){if(b.return===null||b.return===h)return;b=b.return}b.sibling.return=b.return,b=b.sibling}else b.child.return=b,b=b.child}function YA(f){var h=f.alternate;h!==null&&(f.alternate=null,YA(h)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(h=f.stateNode,h!==null&&$e(h)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function qA(f){return f.tag===5||f.tag===3||f.tag===4}function KA(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||qA(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function ZA(f){if(Ve){e:{for(var h=f.return;h!==null;){if(qA(h))break e;h=h.return}throw Error(s(160))}var S=h;switch(S.tag){case 5:h=S.stateNode,S.flags&32&&(Xe(h),S.flags&=-33),S=KA(f),A_(f,S,h);break;case 3:case 4:h=S.stateNode.containerInfo,S=KA(f),C_(f,S,h);break;default:throw Error(s(161))}}}function C_(f,h,S){var b=f.tag;if(b===5||b===6)f=f.stateNode,h?Ze(S,f,h):dt(S,f);else if(b!==4&&(f=f.child,f!==null))for(C_(f,h,S),f=f.sibling;f!==null;)C_(f,h,S),f=f.sibling}function A_(f,h,S){var b=f.tag;if(b===5||b===6)f=f.stateNode,h?gt(S,f,h):Oe(S,f);else if(b!==4&&(f=f.child,f!==null))for(A_(f,h,S),f=f.sibling;f!==null;)A_(f,h,S),f=f.sibling}function JA(f,h,S){for(var b=h,T=!1,I,j;;){if(!T){T=b.return;e:for(;;){if(T===null)throw Error(s(160));switch(I=T.stateNode,T.tag){case 5:j=!1;break e;case 3:I=I.containerInfo,j=!0;break e;case 4:I=I.containerInfo,j=!0;break e}T=T.return}T=!0}if(b.tag===5||b.tag===6)XA(f,b,S),j?we(I,b.stateNode):Z(I,b.stateNode);else if(b.tag===18)j?oe(I,b.stateNode):fe(I,b.stateNode);else if(b.tag===4){if(b.child!==null){I=b.stateNode.containerInfo,j=!0,b.child.return=b,b=b.child;continue}}else if(GA(f,b,S),b.child!==null){b.child.return=b,b=b.child;continue}if(b===h)break;for(;b.sibling===null;){if(b.return===null||b.return===h)return;b=b.return,b.tag===4&&(T=!1)}b.sibling.return=b.return,b=b.sibling}}function P_(f,h){if(Ve){switch(h.tag){case 0:case 11:case 14:case 15:Bl(3,h,h.return),Fd(3,h),Bl(5,h,h.return);return;case 1:return;case 5:var S=h.stateNode;if(S!=null){var b=h.memoizedProps;f=f!==null?f.memoizedProps:b;var T=h.type,I=h.updateQueue;h.updateQueue=null,I!==null&&Ct(S,I,T,f,b,h)}return;case 6:if(h.stateNode===null)throw Error(s(162));S=h.memoizedProps,Ie(h.stateNode,f!==null?f.memoizedProps:S,S);return;case 3:me&&f!==null&&f.memoizedState.isDehydrated&&re(h.stateNode.containerInfo);return;case 12:return;case 13:hg(h);return;case 19:hg(h);return;case 17:return}throw Error(s(163))}switch(h.tag){case 0:case 11:case 14:case 15:Bl(3,h,h.return),Fd(3,h),Bl(5,h,h.return);return;case 12:return;case 13:hg(h);return;case 19:hg(h);return;case 3:me&&f!==null&&f.memoizedState.isDehydrated&&re(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(B){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,Dt(h.containerInfo,h.pendingChildren);break e}throw Error(s(163))}}function hg(f){var h=f.updateQueue;if(h!==null){f.updateQueue=null;var S=f.stateNode;S===null&&(S=f.stateNode=new T5),h.forEach(function(b){var T=U5.bind(null,f,b);S.has(b)||(S.add(b),b.then(T,T))})}}function A5(f,h){for(Ke=h;Ke!==null;){h=Ke;var S=h.deletions;if(S!==null)for(var b=0;b<S.length;b++){var T=S[b];try{var I=f;Ve?JA(I,T,h):XA(I,T,h);var j=T.alternate;j!==null&&(j.return=null),T.return=null}catch(ht){mi(T,h,ht)}}if(S=h.child,h.subtreeFlags&12854&&S!==null)S.return=h,Ke=S;else for(;Ke!==null;){h=Ke;try{var te=h.flags;if(te&32&&Ve&&Xe(h.stateNode),te&512){var ge=h.alternate;if(ge!==null){var Ue=ge.ref;Ue!==null&&(typeof Ue=="function"?Ue(null):Ue.current=null)}}if(te&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var it=h.alternate;(it===null||it.memoizedState===null)&&(D_=ur())}break;case 22:var At=h.memoizedState!==null,xt=h.alternate,an=xt!==null&&xt.memoizedState!==null;if(S=h,Ve){e:if(b=S,T=At,I=null,Ve)for(var pt=b;;){if(pt.tag===5){if(I===null){I=pt;var Nr=pt.stateNode;T?q(Nr):Me(pt.stateNode,pt.memoizedProps)}}else if(pt.tag===6){if(I===null){var oo=pt.stateNode;T?Pe(oo):Te(oo,pt.memoizedProps)}}else if((pt.tag!==22&&pt.tag!==23||pt.memoizedState===null||pt===b)&&pt.child!==null){pt.child.return=pt,pt=pt.child;continue}if(pt===b)break;for(;pt.sibling===null;){if(pt.return===null||pt.return===b)break e;I===pt&&(I=null),pt=pt.return}I===pt&&(I=null),pt.sibling.return=pt.return,pt=pt.sibling}}if(At&&!an&&S.mode&1){Ke=S;for(var ce=S.child;ce!==null;){for(S=Ke=ce;Ke!==null;){b=Ke;var ie=b.child;switch(b.tag){case 0:case 11:case 14:case 15:Bl(4,b,b.return);break;case 1:dg(b,b.return);var de=b.stateNode;if(typeof de.componentWillUnmount=="function"){var Qe=b.return;try{de.props=b.memoizedProps,de.state=b.memoizedState,de.componentWillUnmount()}catch(ht){mi(b,Qe,ht)}}break;case 5:dg(b,b.return);break;case 22:if(b.memoizedState!==null){t2(S);continue}}ie!==null?(ie.return=b,Ke=ie):t2(S)}ce=ce.sibling}}}switch(te&4102){case 2:ZA(h),h.flags&=-3;break;case 6:ZA(h),h.flags&=-3,P_(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,P_(h.alternate,h);break;case 4:P_(h.alternate,h)}}catch(ht){mi(h,h.return,ht)}if(S=h.sibling,S!==null){S.return=h.return,Ke=S;break}Ke=h.return}}}function P5(f,h,S){Ke=f,QA(f)}function QA(f,h,S){for(var b=(f.mode&1)!==0;Ke!==null;){var T=Ke,I=T.child;if(T.tag===22&&b){var j=T.memoizedState!==null||fg;if(!j){var te=T.alternate,ge=te!==null&&te.memoizedState!==null||zl;te=fg;var Ue=zl;if(fg=j,(zl=ge)&&!Ue)for(Ke=T;Ke!==null;)j=Ke,ge=j.child,j.tag===22&&j.memoizedState!==null?n2(T):ge!==null?(ge.return=j,Ke=ge):n2(T);for(;I!==null;)Ke=I,QA(I),I=I.sibling;Ke=T,fg=te,zl=Ue}e2(f)}else T.subtreeFlags&8772&&I!==null?(I.return=T,Ke=I):e2(f)}}function e2(f){for(;Ke!==null;){var h=Ke;if(h.flags&8772){var S=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:zl||Fd(5,h);break;case 1:var b=h.stateNode;if(h.flags&4&&!zl)if(S===null)b.componentDidMount();else{var T=h.elementType===h.type?S.memoizedProps:Eo(h.type,S.memoizedProps);b.componentDidUpdate(T,S.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var I=h.updateQueue;I!==null&&YC(h,I,b);break;case 3:var j=h.updateQueue;if(j!==null){if(S=null,h.child!==null)switch(h.child.tag){case 5:S=J(h.child.stateNode);break;case 1:S=h.child.stateNode}YC(h,j,S)}break;case 5:var te=h.stateNode;S===null&&h.flags&4&&We(te,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(me&&h.memoizedState===null){var ge=h.alternate;if(ge!==null){var Ue=ge.memoizedState;if(Ue!==null){var it=Ue.dehydrated;it!==null&&ue(it)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(s(163))}zl||h.flags&512&&T_(h)}catch(At){mi(h,h.return,At)}}if(h===f){Ke=null;break}if(S=h.sibling,S!==null){S.return=h.return,Ke=S;break}Ke=h.return}}function t2(f){for(;Ke!==null;){var h=Ke;if(h===f){Ke=null;break}var S=h.sibling;if(S!==null){S.return=h.return,Ke=S;break}Ke=h.return}}function n2(f){for(;Ke!==null;){var h=Ke;try{switch(h.tag){case 0:case 11:case 15:var S=h.return;try{Fd(4,h)}catch(ge){mi(h,S,ge)}break;case 1:var b=h.stateNode;if(typeof b.componentDidMount=="function"){var T=h.return;try{b.componentDidMount()}catch(ge){mi(h,T,ge)}}var I=h.return;try{T_(h)}catch(ge){mi(h,I,ge)}break;case 5:var j=h.return;try{T_(h)}catch(ge){mi(h,j,ge)}}}catch(ge){mi(h,h.return,ge)}if(h===f){Ke=null;break}var te=h.sibling;if(te!==null){te.return=h.return,Ke=te;break}Ke=h.return}}var pg=0,mg=1,gg=2,yg=3,vg=4;if(typeof Symbol=="function"&&Symbol.for){var zd=Symbol.for;pg=zd("selector.component"),mg=zd("selector.has_pseudo_class"),gg=zd("selector.role"),yg=zd("selector.test_id"),vg=zd("selector.text")}function R_(f){var h=be(f);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(s(364));return h}if(f=U(f),f===null)throw Error(s(362));return f.stateNode.current}function I_(f,h){switch(h.$$typeof){case pg:if(f.type===h.value)return!0;break;case mg:e:{h=h.value,f=[f,0];for(var S=0;S<f.length;){var b=f[S++],T=f[S++],I=h[T];if(b.tag!==5||!se(b)){for(;I!=null&&I_(b,I);)T++,I=h[T];if(T===h.length){h=!0;break e}else for(b=b.child;b!==null;)f.push(b,T),b=b.sibling}}h=!1}return h;case gg:if(f.tag===5&&he(f.stateNode,h.value))return!0;break;case vg:if((f.tag===5||f.tag===6)&&(f=ee(f),f!==null&&0<=f.indexOf(h.value)))return!0;break;case yg:if(f.tag===5&&(f=f.memoizedProps["data-testname"],typeof f=="string"&&f.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function O_(f){switch(f.$$typeof){case pg:return"<"+(P(f.value)||"Unknown")+">";case mg:return":has("+(O_(f)||"")+")";case gg:return'[role="'+f.value+'"]';case vg:return'"'+f.value+'"';case yg:return'[data-testname="'+f.value+'"]';default:throw Error(s(365))}}function r2(f,h){var S=[];f=[f,0];for(var b=0;b<f.length;){var T=f[b++],I=f[b++],j=h[I];if(T.tag!==5||!se(T)){for(;j!=null&&I_(T,j);)I++,j=h[I];if(I===h.length)S.push(T);else for(T=T.child;T!==null;)f.push(T,I),T=T.sibling}}return S}function L_(f,h){if(!V)throw Error(s(363));f=R_(f),f=r2(f,h),h=[],f=Array.from(f);for(var S=0;S<f.length;){var b=f[S++];if(b.tag===5)se(b)||h.push(b.stateNode);else for(b=b.child;b!==null;)f.push(b),b=b.sibling}return h}var R5=Math.ceil,xg=a.ReactCurrentDispatcher,k_=a.ReactCurrentOwner,jn=a.ReactCurrentBatchConfig,Ut=0,Kn=null,Zn=null,wr=0,ki=0,hu=Un(0),nr=0,Bd=null,pu=0,_g=0,N_=0,Hd=null,hi=null,D_=0,U_=1/0;function mu(){U_=ur()+500}var Sg=!1,F_=null,Fa=null,wg=!1,za=null,bg=0,Vd=0,z_=null,Eg=-1,Mg=0;function Zr(){return Ut&6?ur():Eg!==-1?Eg:Eg=ur()}function Ba(f){return f.mode&1?Ut&2&&wr!==0?wr&-wr:d5.transition!==null?(Mg===0&&(f=Fm,Fm<<=1,!(Fm&4194240)&&(Fm=64),Mg=f),Mg):(f=Xt,f!==0?f:ye()):1}function ro(f,h,S){if(50<Vd)throw Vd=0,z_=null,Error(s(185));var b=Tg(f,h);return b===null?null:(Md(b,h,S),(!(Ut&2)||b!==Kn)&&(b===Kn&&(!(Ut&2)&&(_g|=h),nr===4&&Ha(b,wr)),pi(b,S),h===1&&Ut===0&&!(f.mode&1)&&(mu(),Vm&&is())),b)}function Tg(f,h){f.lanes|=h;var S=f.alternate;for(S!==null&&(S.lanes|=h),S=f,f=f.return;f!==null;)f.childLanes|=h,S=f.alternate,S!==null&&(S.childLanes|=h),S=f,f=f.return;return S.tag===3?S.stateNode:null}function pi(f,h){var S=f.callbackNode;r5(f,h);var b=Bm(f,f===Kn?wr:0);if(b===0)S!==null&&$C(S),f.callbackNode=null,f.callbackPriority=0;else if(h=b&-b,f.callbackPriority!==h){if(S!=null&&$C(S),h===1)f.tag===0?f5(o2.bind(null,f)):WC(o2.bind(null,f)),Ne?ze(function(){Ut===0&&is()}):X1(Y1,is),S=null;else{switch(VC(b)){case 1:S=Y1;break;case 4:S=a5;break;case 16:S=q1;break;case 536870912:S=l5;break;default:S=q1}S=p2(S,i2.bind(null,f))}f.callbackPriority=h,f.callbackNode=S}}function i2(f,h){if(Eg=-1,Mg=0,Ut&6)throw Error(s(327));var S=f.callbackNode;if($l()&&f.callbackNode!==S)return null;var b=Bm(f,f===Kn?wr:0);if(b===0)return null;if(b&30||b&f.expiredLanes||h)h=Cg(f,b);else{h=b;var T=Ut;Ut|=2;var I=l2();(Kn!==f||wr!==h)&&(mu(),Hl(f,h));do try{L5();break}catch(te){a2(f,te)}while(!0);J1(),xg.current=I,Ut=T,Zn!==null?h=0:(Kn=null,wr=0,h=nr)}if(h!==0){if(h===2&&(T=W1(f),T!==0&&(b=T,h=B_(f,T))),h===1)throw S=Bd,Hl(f,0),Ha(f,b),pi(f,ur()),S;if(h===6)Ha(f,b);else{if(T=f.current.alternate,!(b&30)&&!I5(T)&&(h=Cg(f,b),h===2&&(I=W1(f),I!==0&&(b=I,h=B_(f,I))),h===1))throw S=Bd,Hl(f,0),Ha(f,b),pi(f,ur()),S;switch(f.finishedWork=T,f.finishedLanes=b,h){case 0:case 1:throw Error(s(345));case 2:Vl(f,hi);break;case 3:if(Ha(f,b),(b&130023424)===b&&(h=D_+500-ur(),10<h)){if(Bm(f,0)!==0)break;if(T=f.suspendedLanes,(T&b)!==b){Zr(),f.pingedLanes|=f.suspendedLanes&T;break}f.timeoutHandle=Ae(Vl.bind(null,f,hi),h);break}Vl(f,hi);break;case 4:if(Ha(f,b),(b&4194240)===b)break;for(h=f.eventTimes,T=-1;0<b;){var j=31-Ri(b);I=1<<j,j=h[j],j>T&&(T=j),b&=~I}if(b=T,b=ur()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*R5(b/1960))-b,10<b){f.timeoutHandle=Ae(Vl.bind(null,f,hi),b);break}Vl(f,hi);break;case 5:Vl(f,hi);break;default:throw Error(s(329))}}}return pi(f,ur()),f.callbackNode===S?i2.bind(null,f):null}function B_(f,h){var S=Hd;return f.current.memoizedState.isDehydrated&&(Hl(f,h).flags|=256),f=Cg(f,h),f!==2&&(h=hi,hi=S,h!==null&&H_(h)),f}function H_(f){hi===null?hi=f:hi.push.apply(hi,f)}function I5(f){for(var h=f;;){if(h.flags&16384){var S=h.updateQueue;if(S!==null&&(S=S.stores,S!==null))for(var b=0;b<S.length;b++){var T=S[b],I=T.getSnapshot;T=T.value;try{if(!rs(I(),T))return!1}catch{return!1}}}if(S=h.child,h.subtreeFlags&16384&&S!==null)S.return=h,h=S;else{if(h===f)break;for(;h.sibling===null;){if(h.return===null||h.return===f)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Ha(f,h){for(h&=~N_,h&=~_g,f.suspendedLanes|=h,f.pingedLanes&=~h,f=f.expirationTimes;0<h;){var S=31-Ri(h),b=1<<S;f[S]=-1,h&=~b}}function o2(f){if(Ut&6)throw Error(s(327));$l();var h=Bm(f,0);if(!(h&1))return pi(f,ur()),null;var S=Cg(f,h);if(f.tag!==0&&S===2){var b=W1(f);b!==0&&(h=b,S=B_(f,b))}if(S===1)throw S=Bd,Hl(f,0),Ha(f,h),pi(f,ur()),S;if(S===6)throw Error(s(345));return f.finishedWork=f.current.alternate,f.finishedLanes=h,Vl(f,hi),pi(f,ur()),null}function s2(f){za!==null&&za.tag===0&&!(Ut&6)&&$l();var h=Ut;Ut|=1;var S=jn.transition,b=Xt;try{if(jn.transition=null,Xt=1,f)return f()}finally{Xt=b,jn.transition=S,Ut=h,!(Ut&6)&&is()}}function V_(){ki=hu.current,mt(hu)}function Hl(f,h){f.finishedWork=null,f.finishedLanes=0;var S=f.timeoutHandle;if(S!==ut&&(f.timeoutHandle=ut,qe(S)),Zn!==null)for(S=Zn.return;S!==null;){var b=S;switch(o_(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&gn();break;case 3:fu(),mt(dn),mt(Et),d_();break;case 5:u_(b);break;case 4:fu();break;case 13:mt(Cn);break;case 19:mt(Cn);break;case 10:Q1(b.type._context);break;case 22:case 23:V_()}S=S.return}if(Kn=f,Zn=f=Va(f.current,null),wr=ki=h,nr=0,Bd=null,N_=_g=pu=0,hi=Hd=null,os!==null){for(h=0;h<os.length;h++)if(S=os[h],b=S.interleaved,b!==null){S.interleaved=null;var T=b.next,I=S.pending;if(I!==null){var j=I.next;I.next=T,b.next=j}S.pending=b}os=null}return f}function a2(f,h){do{var S=Zn;try{if(J1(),Qm.current=og,eg){for(var b=Fn.memoizedState;b!==null;){var T=b.queue;T!==null&&(T.pending=null),b=b.next}eg=!1}if(du=0,fr=Or=Fn=null,Id=!1,Od=0,k_.current=null,S===null||S.return===null){nr=1,Bd=h,Zn=null;break}e:{var I=f,j=S.return,te=S,ge=h;if(h=wr,te.flags|=32768,ge!==null&&typeof ge=="object"&&typeof ge.then=="function"){var Ue=ge,it=te,At=it.tag;if(!(it.mode&1)&&(At===0||At===11||At===15)){var xt=it.alternate;xt?(it.updateQueue=xt.updateQueue,it.memoizedState=xt.memoizedState,it.lanes=xt.lanes):(it.updateQueue=null,it.memoizedState=null)}var an=AA(j);if(an!==null){an.flags&=-257,PA(an,j,te,I,h),an.mode&1&&CA(I,Ue,h),h=an,ge=Ue;var pt=h.updateQueue;if(pt===null){var Nr=new Set;Nr.add(ge),h.updateQueue=Nr}else pt.add(ge);break e}else{if(!(h&1)){CA(I,Ue,h),$_();break e}ge=Error(s(426))}}else if(wn&&te.mode&1){var oo=AA(j);if(oo!==null){!(oo.flags&65536)&&(oo.flags|=256),PA(oo,j,te,I,h),l_(ge);break e}}I=ge,nr!==4&&(nr=2),Hd===null?Hd=[I]:Hd.push(I),ge=x_(ge,te),te=j;do{switch(te.tag){case 3:te.flags|=65536,h&=-h,te.lanes|=h;var ce=MA(te,ge,h);XC(te,ce);break e;case 1:I=ge;var ie=te.type,de=te.stateNode;if(!(te.flags&128)&&(typeof ie.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(Fa===null||!Fa.has(de)))){te.flags|=65536,h&=-h,te.lanes|=h;var Qe=TA(te,I,h);XC(te,Qe);break e}}te=te.return}while(te!==null)}u2(S)}catch(ht){h=ht,Zn===S&&S!==null&&(Zn=S=S.return);continue}break}while(!0)}function l2(){var f=xg.current;return xg.current=og,f===null?og:f}function $_(){(nr===0||nr===3||nr===2)&&(nr=4),Kn===null||!(pu&268435455)&&!(_g&268435455)||Ha(Kn,wr)}function Cg(f,h){var S=Ut;Ut|=2;var b=l2();Kn===f&&wr===h||Hl(f,h);do try{O5();break}catch(T){a2(f,T)}while(!0);if(J1(),Ut=S,xg.current=b,Zn!==null)throw Error(s(261));return Kn=null,wr=0,nr}function O5(){for(;Zn!==null;)c2(Zn)}function L5(){for(;Zn!==null&&!o5();)c2(Zn)}function c2(f){var h=h2(f.alternate,f,ki);f.memoizedProps=f.pendingProps,h===null?u2(f):Zn=h,k_.current=null}function u2(f){var h=f;do{var S=h.alternate;if(f=h.return,h.flags&32768){if(S=M5(S,h),S!==null){S.flags&=32767,Zn=S;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{nr=6,Zn=null;return}}else if(S=w5(S,h,ki),S!==null){Zn=S;return}if(h=h.sibling,h!==null){Zn=h;return}Zn=h=f}while(h!==null);nr===0&&(nr=5)}function Vl(f,h){var S=Xt,b=jn.transition;try{jn.transition=null,Xt=1,k5(f,h,S)}finally{jn.transition=b,Xt=S}return null}function k5(f,h,S){do $l();while(za!==null);if(Ut&6)throw Error(s(327));var b=f.finishedWork,T=f.finishedLanes;if(b===null)return null;if(f.finishedWork=null,f.finishedLanes=0,b===f.current)throw Error(s(177));f.callbackNode=null,f.callbackPriority=0;var I=b.lanes|b.childLanes;if(i5(f,I),f===Kn&&(Zn=Kn=null,wr=0),!(b.subtreeFlags&2064)&&!(b.flags&2064)||wg||(wg=!0,p2(q1,function(){return $l(),null})),I=(b.flags&15990)!==0,b.subtreeFlags&15990||I){I=jn.transition,jn.transition=null;var j=Xt;Xt=1;var te=Ut;Ut|=4,k_.current=null,C5(f,b),A5(f,b),X(f.containerInfo),f.current=b,P5(b),s5(),Ut=te,Xt=j,jn.transition=I}else f.current=b;if(wg&&(wg=!1,za=f,bg=T),I=f.pendingLanes,I===0&&(Fa=null),c5(b.stateNode),pi(f,ur()),h!==null)for(S=f.onRecoverableError,b=0;b<h.length;b++)S(h[b]);if(Sg)throw Sg=!1,f=F_,F_=null,f;return bg&1&&f.tag!==0&&$l(),I=f.pendingLanes,I&1?f===z_?Vd++:(Vd=0,z_=f):Vd=0,is(),null}function $l(){if(za!==null){var f=VC(bg),h=jn.transition,S=Xt;try{if(jn.transition=null,Xt=16>f?16:f,za===null)var b=!1;else{if(f=za,za=null,bg=0,Ut&6)throw Error(s(331));var T=Ut;for(Ut|=4,Ke=f.current;Ke!==null;){var I=Ke,j=I.child;if(Ke.flags&16){var te=I.deletions;if(te!==null){for(var ge=0;ge<te.length;ge++){var Ue=te[ge];for(Ke=Ue;Ke!==null;){var it=Ke;switch(it.tag){case 0:case 11:case 15:Bl(8,it,I)}var At=it.child;if(At!==null)At.return=it,Ke=At;else for(;Ke!==null;){it=Ke;var xt=it.sibling,an=it.return;if(YA(it),it===Ue){Ke=null;break}if(xt!==null){xt.return=an,Ke=xt;break}Ke=an}}}var pt=I.alternate;if(pt!==null){var Nr=pt.child;if(Nr!==null){pt.child=null;do{var oo=Nr.sibling;Nr.sibling=null,Nr=oo}while(Nr!==null)}}Ke=I}}if(I.subtreeFlags&2064&&j!==null)j.return=I,Ke=j;else e:for(;Ke!==null;){if(I=Ke,I.flags&2048)switch(I.tag){case 0:case 11:case 15:Bl(9,I,I.return)}var ce=I.sibling;if(ce!==null){ce.return=I.return,Ke=ce;break e}Ke=I.return}}var ie=f.current;for(Ke=ie;Ke!==null;){j=Ke;var de=j.child;if(j.subtreeFlags&2064&&de!==null)de.return=j,Ke=de;else e:for(j=ie;Ke!==null;){if(te=Ke,te.flags&2048)try{switch(te.tag){case 0:case 11:case 15:Fd(9,te)}}catch(ht){mi(te,te.return,ht)}if(te===j){Ke=null;break e}var Qe=te.sibling;if(Qe!==null){Qe.return=te.return,Ke=Qe;break e}Ke=te.return}}if(Ut=T,is(),ns&&typeof ns.onPostCommitFiberRoot=="function")try{ns.onPostCommitFiberRoot(Hm,f)}catch{}b=!0}return b}finally{Xt=S,jn.transition=h}}return!1}function f2(f,h,S){h=x_(S,h),h=MA(f,h,1),Ua(f,h),h=Zr(),f=Tg(f,1),f!==null&&(Md(f,1,h),pi(f,h))}function mi(f,h,S){if(f.tag===3)f2(f,f,S);else for(;h!==null;){if(h.tag===3){f2(h,f,S);break}else if(h.tag===1){var b=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Fa===null||!Fa.has(b))){f=x_(S,f),f=TA(h,f,1),Ua(h,f),f=Zr(),h=Tg(h,1),h!==null&&(Md(h,1,f),pi(h,f));break}}h=h.return}}function N5(f,h,S){var b=f.pingCache;b!==null&&b.delete(h),h=Zr(),f.pingedLanes|=f.suspendedLanes&S,Kn===f&&(wr&S)===S&&(nr===4||nr===3&&(wr&130023424)===wr&&500>ur()-D_?Hl(f,0):N_|=S),pi(f,h)}function d2(f,h){h===0&&(f.mode&1?(h=zm,zm<<=1,!(zm&130023424)&&(zm=4194304)):h=1);var S=Zr();f=Tg(f,h),f!==null&&(Md(f,h,S),pi(f,S))}function D5(f){var h=f.memoizedState,S=0;h!==null&&(S=h.retryLane),d2(f,S)}function U5(f,h){var S=0;switch(f.tag){case 13:var b=f.stateNode,T=f.memoizedState;T!==null&&(S=T.retryLane);break;case 19:b=f.stateNode;break;default:throw Error(s(314))}b!==null&&b.delete(h),d2(f,S)}var h2;h2=function(f,h,S){if(f!==null)if(f.memoizedProps!==h.pendingProps||dn.current)Li=!0;else{if(!(f.lanes&S)&&!(h.flags&128))return Li=!1,E5(f,h,S);Li=!!(f.flags&131072)}else Li=!1,wn&&h.flags&1048576&&QC(h,Km,h.index);switch(h.lanes=0,h.tag){case 2:var b=h.type;f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),f=h.pendingProps;var T=qn(h,Et.current);ou(h,S),T=p_(null,h,b,f,T,S);var I=m_();return h.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,cr(b)?(I=!0,Sr(h)):I=!1,h.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,t_(h),T.updater=Ym,h.stateNode=T,T._reactInternals=h,r_(h,b,f,S),h=w_(null,h,b,!0,I,S)):(h.tag=0,wn&&I&&i_(h),Kr(null,h,T,S),h=h.child),h;case 16:b=h.elementType;e:{switch(f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),f=h.pendingProps,T=b._init,b=T(b._payload),h.type=b,T=h.tag=z5(b),f=Eo(b,f),T){case 0:h=S_(null,h,b,f,S);break e;case 1:h=UA(null,h,b,f,S);break e;case 11:h=OA(null,h,b,f,S);break e;case 14:h=LA(null,h,b,Eo(b.type,f),S);break e}throw Error(s(306,b,""))}return h;case 0:return b=h.type,T=h.pendingProps,T=h.elementType===b?T:Eo(b,T),S_(f,h,b,T,S);case 1:return b=h.type,T=h.pendingProps,T=h.elementType===b?T:Eo(b,T),UA(f,h,b,T,S);case 3:e:{if(FA(h),f===null)throw Error(s(387));b=h.pendingProps,I=h.memoizedState,T=I.element,GC(f,h),Xm(h,b,null,S);var j=h.memoizedState;if(b=j.element,me&&I.isDehydrated)if(I={element:b,isDehydrated:!1,cache:j.cache,transitions:j.transitions},h.updateQueue.baseState=I,h.memoizedState=I,h.flags&256){T=Error(s(423)),h=zA(f,h,b,S,T);break e}else if(b!==T){T=Error(s(424)),h=zA(f,h,b,S,T);break e}else for(me&&(Oi=Nm(h.stateNode.containerInfo),Ii=h,wn=!0,Mo=null,Td=!1),S=oA(h,null,b,S),h.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(lu(),b===T){h=js(f,h,S);break e}Kr(f,h,b,S)}h=h.child}return h;case 5:return sA(h),f===null&&a_(h),b=h.type,T=h.pendingProps,I=f!==null?f.memoizedProps:null,j=T.children,_e(b,T)?j=null:I!==null&&_e(b,I)&&(h.flags|=32),DA(f,h),Kr(f,h,j,S),h.child;case 6:return f===null&&a_(h),null;case 13:return BA(f,h,S);case 4:return c_(h,h.stateNode.containerInfo),b=h.pendingProps,f===null?h.child=cu(h,null,b,S):Kr(f,h,b,S),h.child;case 11:return b=h.type,T=h.pendingProps,T=h.elementType===b?T:Eo(b,T),OA(f,h,b,T,S);case 7:return Kr(f,h,h.pendingProps,S),h.child;case 8:return Kr(f,h,h.pendingProps.children,S),h.child;case 12:return Kr(f,h,h.pendingProps.children,S),h.child;case 10:e:{if(b=h.type._context,T=h.pendingProps,I=h.memoizedProps,j=T.value,jC(h,b,j),I!==null)if(rs(I.value,j)){if(I.children===T.children&&!dn.current){h=js(f,h,S);break e}}else for(I=h.child,I!==null&&(I.return=h);I!==null;){var te=I.dependencies;if(te!==null){j=I.child;for(var ge=te.firstContext;ge!==null;){if(ge.context===b){if(I.tag===1){ge=Hs(-1,S&-S),ge.tag=2;var Ue=I.updateQueue;if(Ue!==null){Ue=Ue.shared;var it=Ue.pending;it===null?ge.next=ge:(ge.next=it.next,it.next=ge),Ue.pending=ge}}I.lanes|=S,ge=I.alternate,ge!==null&&(ge.lanes|=S),e_(I.return,S,h),te.lanes|=S;break}ge=ge.next}}else if(I.tag===10)j=I.type===h.type?null:I.child;else if(I.tag===18){if(j=I.return,j===null)throw Error(s(341));j.lanes|=S,te=j.alternate,te!==null&&(te.lanes|=S),e_(j,S,h),j=I.sibling}else j=I.child;if(j!==null)j.return=I;else for(j=I;j!==null;){if(j===h){j=null;break}if(I=j.sibling,I!==null){I.return=j.return,j=I;break}j=j.return}I=j}Kr(f,h,T.children,S),h=h.child}return h;case 9:return T=h.type,b=h.pendingProps.children,ou(h,S),T=Ji(T),b=b(T),h.flags|=1,Kr(f,h,b,S),h.child;case 14:return b=h.type,T=Eo(b,h.pendingProps),T=Eo(b.type,T),LA(f,h,b,T,S);case 15:return kA(f,h,h.type,h.pendingProps,S);case 17:return b=h.type,T=h.pendingProps,T=h.elementType===b?T:Eo(b,T),f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,cr(b)?(f=!0,Sr(h)):f=!1,ou(h,S),ZC(h,b,T),r_(h,b,T,S),w_(null,h,b,!0,f,S);case 19:return WA(f,h,S);case 22:return NA(f,h,S)}throw Error(s(156,h.tag))};function p2(f,h){return X1(f,h)}function F5(f,h,S,b){this.tag=f,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function io(f,h,S,b){return new F5(f,h,S,b)}function W_(f){return f=f.prototype,!(!f||!f.isReactComponent)}function z5(f){if(typeof f=="function")return W_(f)?1:0;if(f!=null){if(f=f.$$typeof,f===v)return 11;if(f===_)return 14}return 2}function Va(f,h){var S=f.alternate;return S===null?(S=io(f.tag,h,f.key,f.mode),S.elementType=f.elementType,S.type=f.type,S.stateNode=f.stateNode,S.alternate=f,f.alternate=S):(S.pendingProps=h,S.type=f.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=f.flags&14680064,S.childLanes=f.childLanes,S.lanes=f.lanes,S.child=f.child,S.memoizedProps=f.memoizedProps,S.memoizedState=f.memoizedState,S.updateQueue=f.updateQueue,h=f.dependencies,S.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},S.sibling=f.sibling,S.index=f.index,S.ref=f.ref,S}function Ag(f,h,S,b,T,I){var j=2;if(b=f,typeof f=="function")W_(f)&&(j=1);else if(typeof f=="string")j=5;else e:switch(f){case u:return Wl(S.children,T,I,h);case d:j=8,T|=8;break;case p:return f=io(12,S,h,T|2),f.elementType=p,f.lanes=I,f;case x:return f=io(13,S,h,T),f.elementType=x,f.lanes=I,f;case y:return f=io(19,S,h,T),f.elementType=y,f.lanes=I,f;case M:return Pg(S,T,I,h);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case m:j=10;break e;case g:j=9;break e;case v:j=11;break e;case _:j=14;break e;case w:j=16,b=null;break e}throw Error(s(130,f==null?f:typeof f,""))}return h=io(j,S,h,T),h.elementType=f,h.type=b,h.lanes=I,h}function Wl(f,h,S,b){return f=io(7,f,b,h),f.lanes=S,f}function Pg(f,h,S,b){return f=io(22,f,b,h),f.elementType=M,f.lanes=S,f.stateNode={},f}function j_(f,h,S){return f=io(6,f,null,h),f.lanes=S,f}function G_(f,h,S){return h=io(4,f.children!==null?f.children:[],f.key,h),h.lanes=S,h.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},h}function B5(f,h,S,b,T){this.tag=h,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ut,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=j1(0),this.expirationTimes=j1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=j1(0),this.identifierPrefix=b,this.onRecoverableError=T,me&&(this.mutableSourceEagerHydrationData=null)}function m2(f,h,S,b,T,I,j,te,ge){return f=new B5(f,h,S,te,ge),h===1?(h=1,I===!0&&(h|=8)):h=0,I=io(3,null,null,h),f.current=I,I.stateNode=f,I.memoizedState={element:b,isDehydrated:S,cache:null,transitions:null},t_(I),f}function g2(f){if(!f)return fn;f=f._reactInternals;e:{if(O(f)!==f||f.tag!==1)throw Error(s(170));var h=f;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(cr(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(s(171))}if(f.tag===1){var S=f.type;if(cr(S))return nu(f,S,h)}return h}function y2(f){var h=f._reactInternals;if(h===void 0)throw typeof f.render=="function"?Error(s(188)):(f=Object.keys(f).join(","),Error(s(268,f)));return f=H(h),f===null?null:f.stateNode}function v2(f,h){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var S=f.retryLane;f.retryLane=S!==0&&S<h?S:h}}function X_(f,h){v2(f,h),(f=f.alternate)&&v2(f,h)}function H5(f){return f=H(f),f===null?null:f.stateNode}function V5(){return null}return n.attemptContinuousHydration=function(f){if(f.tag===13){var h=Zr();ro(f,134217728,h),X_(f,134217728)}},n.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13){var h=Zr(),S=Ba(f);ro(f,S,h),X_(f,S)}},n.attemptSynchronousHydration=function(f){switch(f.tag){case 3:var h=f.stateNode;if(h.current.memoizedState.isDehydrated){var S=Ed(h.pendingLanes);S!==0&&(G1(h,S|1),pi(h,ur()),!(Ut&6)&&(mu(),is()))}break;case 13:var b=Zr();s2(function(){return ro(f,1,b)}),X_(f,1)}},n.batchedUpdates=function(f,h){var S=Ut;Ut|=1;try{return f(h)}finally{Ut=S,Ut===0&&(mu(),Vm&&is())}},n.createComponentSelector=function(f){return{$$typeof:pg,value:f}},n.createContainer=function(f,h,S,b,T,I,j){return m2(f,h,!1,null,S,b,T,I,j)},n.createHasPseudoClassSelector=function(f){return{$$typeof:mg,value:f}},n.createHydrationContainer=function(f,h,S,b,T,I,j,te,ge){return f=m2(S,b,!0,f,T,I,j,te,ge),f.context=g2(null),S=f.current,b=Zr(),T=Ba(S),I=Hs(b,T),I.callback=h??null,Ua(S,I),f.current.lanes=T,Md(f,T,b),pi(f,b),f},n.createPortal=function(f,h,S){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:b==null?null:""+b,children:f,containerInfo:h,implementation:S}},n.createRoleSelector=function(f){return{$$typeof:gg,value:f}},n.createTestNameSelector=function(f){return{$$typeof:yg,value:f}},n.createTextSelector=function(f){return{$$typeof:vg,value:f}},n.deferredUpdates=function(f){var h=Xt,S=jn.transition;try{return jn.transition=null,Xt=16,f()}finally{Xt=h,jn.transition=S}},n.discreteUpdates=function(f,h,S,b,T){var I=Xt,j=jn.transition;try{return jn.transition=null,Xt=1,f(h,S,b,T)}finally{Xt=I,jn.transition=j,Ut===0&&mu()}},n.findAllNodes=L_,n.findBoundingRects=function(f,h){if(!V)throw Error(s(363));h=L_(f,h),f=[];for(var S=0;S<h.length;S++)f.push(le(h[S]));for(h=f.length-1;0<h;h--){S=f[h];for(var b=S.x,T=b+S.width,I=S.y,j=I+S.height,te=h-1;0<=te;te--)if(h!==te){var ge=f[te],Ue=ge.x,it=Ue+ge.width,At=ge.y,xt=At+ge.height;if(b>=Ue&&I>=At&&T<=it&&j<=xt){f.splice(h,1);break}else if(b!==Ue||S.width!==ge.width||xt<I||At>j){if(!(I!==At||S.height!==ge.height||it<b||Ue>T)){Ue>b&&(ge.width+=Ue-b,ge.x=b),it<T&&(ge.width=T-Ue),f.splice(h,1);break}}else{At>I&&(ge.height+=At-I,ge.y=I),xt<j&&(ge.height=j-At),f.splice(h,1);break}}}return f},n.findHostInstance=y2,n.findHostInstanceWithNoPortals=function(f){return f=L(f),f=f!==null?Y(f):null,f===null?null:f.stateNode},n.findHostInstanceWithWarning=function(f){return y2(f)},n.flushControlled=function(f){var h=Ut;Ut|=1;var S=jn.transition,b=Xt;try{jn.transition=null,Xt=1,f()}finally{Xt=b,jn.transition=S,Ut=h,Ut===0&&(mu(),is())}},n.flushPassiveEffects=$l,n.flushSync=s2,n.focusWithin=function(f,h){if(!V)throw Error(s(363));for(f=R_(f),h=r2(f,h),h=Array.from(h),f=0;f<h.length;){var S=h[f++];if(!se(S)){if(S.tag===5&&je(S.stateNode))return!0;for(S=S.child;S!==null;)h.push(S),S=S.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Xt},n.getFindAllNodesFailureDescription=function(f,h){if(!V)throw Error(s(363));var S=0,b=[];f=[R_(f),0];for(var T=0;T<f.length;){var I=f[T++],j=f[T++],te=h[j];if((I.tag!==5||!se(I))&&(I_(I,te)&&(b.push(O_(te)),j++,j>S&&(S=j)),j<h.length))for(I=I.child;I!==null;)f.push(I,j),I=I.sibling}if(S<h.length){for(f=[];S<h.length;S++)f.push(O_(h[S]));return`findAllNodes was able to match part of the selector:
  `+(b.join(" > ")+`

No matching component was found for:
  `)+f.join(" > ")}return null},n.getPublicRootInstance=function(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return J(f.child.stateNode);default:return f.child.stateNode}},n.injectIntoDevTools=function(f){if(f={bundleType:f.bundleType,version:f.version,rendererPackageName:f.rendererPackageName,rendererConfig:f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:H5,findFiberByHostInstance:f.findFiberByHostInstance||V5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)f=!0;else{try{Hm=h.inject(f),ns=h}catch{}f=!!h.checkDCE}}return f},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(f,h,S,b){if(!V)throw Error(s(363));f=L_(f,h);var T=Ee(f,S,b).disconnect;return{disconnect:function(){T()}}},n.registerMutableSourceForHydration=function(f,h){var S=h._getVersion;S=S(h._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[h,S]:f.mutableSourceEagerHydrationData.push(h,S)},n.runWithPriority=function(f,h){var S=Xt;try{return Xt=f,h()}finally{Xt=S}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(f,h,S,b){var T=h.current,I=Zr(),j=Ba(T);return S=g2(S),h.context===null?h.context=S:h.pendingContext=S,h=Hs(I,j),h.payload={element:f},b=b===void 0?null:b,b!==null&&(h.callback=b),Ua(T,h),f=ro(T,j,I),f!==null&&Gm(f,T,j),j},n};AF.exports=jZ;var GZ=AF.exports;const XZ=Us(GZ);var PF={exports:{}},RF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,G){var X=D.length;D.push(G);e:for(;0<X;){var ne=X-1>>>1,pe=D[ne];if(0<i(pe,G))D[ne]=G,D[X]=pe,X=ne;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var G=D[0],X=D.pop();if(X!==G){D[0]=X;e:for(var ne=0,pe=D.length,De=pe>>>1;ne<De;){var ae=2*(ne+1)-1,_e=D[ae],Re=ae+1,Ae=D[Re];if(0>i(_e,X))Re<pe&&0>i(Ae,_e)?(D[ne]=Ae,D[Re]=X,ne=Re):(D[ne]=_e,D[ae]=X,ne=ae);else if(Re<pe&&0>i(Ae,X))D[ne]=Ae,D[Re]=X,ne=Re;else break e}}return G}function i(D,G){var X=D.sortIndex-G.sortIndex;return X!==0?X:D.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,d=null,p=3,m=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=D)r(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(c)}}function M(D){if(v=!1,w(D),!g)if(n(l)!==null)g=!0,J(A);else{var G=n(c);G!==null&&Q(M,G.startTime-D)}}function A(D,G){g=!1,v&&(v=!1,y(N),N=-1),m=!0;var X=p;try{for(w(G),d=n(l);d!==null&&(!(d.expirationTime>G)||D&&!L());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,p=d.priorityLevel;var pe=ne(d.expirationTime<=G);G=t.unstable_now(),typeof pe=="function"?d.callback=pe:d===n(l)&&r(l),w(G)}else r(l);d=n(l)}if(d!==null)var De=!0;else{var ae=n(c);ae!==null&&Q(M,ae.startTime-G),De=!1}return De}finally{d=null,p=X,m=!1}}var C=!1,P=null,N=-1,O=5,E=-1;function L(){return!(t.unstable_now()-E<O)}function H(){if(P!==null){var D=t.unstable_now();E=D;var G=!0;try{G=P(!0,D)}finally{G?W():(C=!1,P=null)}}else C=!1}var W;if(typeof _=="function")W=function(){_(H)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,K=Y.port2;Y.port1.onmessage=H,W=function(){K.postMessage(null)}}else W=function(){x(H,0)};function J(D){P=D,C||(C=!0,W())}function Q(D,G){N=x(function(){D(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,J(A))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var X=p;p=G;try{return D()}finally{p=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,G){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var X=p;p=D;try{return G()}finally{p=X}},t.unstable_scheduleCallback=function(D,G,X){var ne=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ne+X:ne):X=ne,D){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=X+pe,D={id:u++,callback:G,priorityLevel:D,startTime:X,expirationTime:pe,sortIndex:-1},X>ne?(D.sortIndex=X,e(c,D),n(l)===null&&D===n(c)&&(v?(y(N),N=-1):v=!0,Q(M,X-ne))):(D.sortIndex=pe,e(l,D),g||m||(g=!0,J(A))),D},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(D){var G=p;return function(){var X=p;p=G;try{return D.apply(this,arguments)}finally{p=X}}}})(RF);PF.exports=RF;var U3=PF.exports;const XT={},YZ=t=>void Object.assign(XT,t);function qZ(t,e){function n(u,{args:d=[],attach:p,...m},g){let v=`${u[0].toUpperCase()}${u.slice(1)}`,x;if(u==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const y=m.object;x=Ju(y,{type:u,root:g,attach:p,primitive:!0})}else{const y=XT[v];if(!y)throw new Error(`R3F: ${v} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");x=Ju(new y(...d),{type:u,root:g,attach:p,memoizedProps:{args:d}})}return x.__r3f.attach===void 0&&(x instanceof kt?x.__r3f.attach="geometry":x instanceof Ir&&(x.__r3f.attach="material")),v!=="inject"&&mw(x,m),x}function r(u,d){let p=!1;if(d){var m,g;(m=d.__r3f)!=null&&m.attach?pw(u,d,d.__r3f.attach):d.isObject3D&&u.isObject3D&&(u.add(d),p=!0),p||(g=u.__r3f)==null||g.objects.push(d),d.__r3f||Ju(d,{}),d.__r3f.parent=u,rE(d),Qu(d)}}function i(u,d,p){let m=!1;if(d){var g,v;if((g=d.__r3f)!=null&&g.attach)pw(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){d.parent=u,d.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:d});const x=u.children.filter(_=>_!==d),y=x.indexOf(p);u.children=[...x.slice(0,y),d,...x.slice(y)],m=!0}m||(v=u.__r3f)==null||v.objects.push(d),d.__r3f||Ju(d,{}),d.__r3f.parent=u,rE(d),Qu(d)}}function o(u,d,p=!1){u&&[...u].forEach(m=>s(d,m,p))}function s(u,d,p){if(d){var m,g,v;if(d.__r3f&&(d.__r3f.parent=null),(m=u.__r3f)!=null&&m.objects&&(u.__r3f.objects=u.__r3f.objects.filter(M=>M!==d)),(g=d.__r3f)!=null&&g.attach)V3(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){var x;u.remove(d),(x=d.__r3f)!=null&&x.root&&rJ(Cy(d),d)}const _=(v=d.__r3f)==null?void 0:v.primitive,w=!_&&(p===void 0?d.dispose!==null:p);if(!_){var y;o((y=d.__r3f)==null?void 0:y.objects,d,w),o(d.children,d,w)}if(delete d.__r3f,w&&d.dispose&&d.type!=="Scene"){const M=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?U3.unstable_scheduleCallback(U3.unstable_IdlePriority,M):M()}Qu(u)}}function a(u,d,p,m){var g;const v=(g=u.__r3f)==null?void 0:g.parent;if(!v)return;const x=n(d,p,u.__r3f.root);if(u.children){for(const y of u.children)y.__r3f&&r(x,y);u.children=u.children.filter(y=>!y.__r3f)}u.__r3f.objects.forEach(y=>r(x,y)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||s(v,u),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),r(v,x),x.raycast&&x.__r3f.eventCount&&Cy(x).getState().internal.interaction.push(x),[m,m.alternate].forEach(y=>{y!==null&&(y.stateNode=x,y.ref&&(typeof y.ref=="function"?y.ref(x):y.ref.current=x))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:XZ({createInstance:n,removeChild:s,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,d)=>{if(!d)return;const p=u.getState().scene;p.__r3f&&(p.__r3f.root=u,r(p,d))},removeChildFromContainer:(u,d)=>{d&&s(u.getState().scene,d)},insertInContainerBefore:(u,d,p)=>{if(!d||!p)return;const m=u.getState().scene;m.__r3f&&i(m,d,p)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var d;return!!((d=u==null?void 0:u.__r3f)!=null?d:{}).handlers},prepareUpdate(u,d,p,m){var g;if(((g=u==null?void 0:u.__r3f)!=null?g:{}).primitive&&m.object&&m.object!==u)return[!0];{const{args:x=[],children:y,..._}=m,{args:w=[],children:M,...A}=p;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((P,N)=>P!==w[N]))return[!0];const C=UF(u,_,A,!0);return C.changes.length?[!1,C]:null}},commitUpdate(u,[d,p],m,g,v,x){d?a(u,m,v,x):mw(u,p)},commitMount(u,d,p,m){var g;const v=(g=u.__r3f)!=null?g:{};u.raycast&&v.handlers&&v.eventCount&&Cy(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>Ju(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var d;const{attach:p,parent:m}=(d=u.__r3f)!=null?d:{};p&&m&&V3(m,u,p),u.isObject3D&&(u.visible=!1),Qu(u)},unhideInstance(u,d){var p;const{attach:m,parent:g}=(p=u.__r3f)!=null?p:{};m&&g&&pw(g,u,m),(u.isObject3D&&d.visible==null||d.visible)&&(u.visible=!0),Qu(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():vf.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&_n.fun(performance.now)?performance.now:_n.fun(Date.now)?Date.now:()=>0,scheduleTimeout:_n.fun(setTimeout)?setTimeout:void 0,cancelTimeout:_n.fun(clearTimeout)?clearTimeout:void 0}),applyProps:mw}}var F3,z3;const hw=t=>"colorSpace"in t||"outputColorSpace"in t,IF=()=>{var t;return(t=XT.ColorManagement)!=null?t:null},OF=t=>t&&t.isOrthographicCamera,KZ=t=>t&&t.hasOwnProperty("current"),vm=typeof window<"u"&&((F3=window.document)!=null&&F3.createElement||((z3=window.navigator)==null?void 0:z3.product)==="ReactNative")?R.useLayoutEffect:R.useEffect;function LF(t){const e=R.useRef(t);return vm(()=>void(e.current=t),[t]),e}function ZZ({set:t}){return vm(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}let kF=class extends R.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}};kF.getDerivedStateFromError=()=>({error:!0});const NF="__default",B3=new Map,JZ=t=>t&&!!t.memoized&&!!t.changes;function DF(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const dh=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()};function Cy(t){let e=t.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const _n={obj:t=>t===Object(t)&&!_n.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(_n.str(t)||_n.num(t)||_n.boo(t))return t===e;const o=_n.obj(t);if(o&&r==="reference")return t===e;const s=_n.arr(t);if(s&&n==="reference")return t===e;if((s||o)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(o&&n==="shallow"&&r==="shallow"){for(a in i?e:t)if(!_n.equ(t[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:t)if(t[a]!==e[a])return!1;if(_n.und(a)){if(s&&t.length===0&&e.length===0||o&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function QZ(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function Ju(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function nE(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((o,s)=>o[s],t),{target:n,key:i}}else return{target:n,key:e}}const H3=/-\d+$/;function pw(t,e,n){if(_n.str(n)){if(H3.test(n)){const o=n.replace(H3,""),{target:s,key:a}=nE(t,o);Array.isArray(s[a])||(s[a]=[])}const{target:r,key:i}=nE(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function V3(t,e,n){var r,i;if(_n.str(n)){const{target:o,key:s}=nE(t,n),a=e.__r3f.previousAttach;a===void 0?delete o[s]:o[s]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function UF(t,{children:e,key:n,ref:r,...i},{children:o,key:s,ref:a,...l}={},c=!1){const u=t.__r3f,d=Object.entries(i),p=[];if(c){const g=Object.keys(l);for(let v=0;v<g.length;v++)i.hasOwnProperty(g[v])||d.unshift([g[v],NF+"remove"])}d.forEach(([g,v])=>{var x;if((x=t.__r3f)!=null&&x.primitive&&g==="object"||_n.equ(v,l[g]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(g))return p.push([g,v,!0,[]]);let y=[];g.includes("-")&&(y=g.split("-")),p.push([g,v,!1,y]);for(const _ in i){const w=i[_];_.startsWith(`${g}-`)&&p.push([_,w,!1,_.split("-")])}});const m={...i};return u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.args&&(m.args=u.memoizedProps.args),u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.attach&&(m.attach=u.memoizedProps.attach),{memoized:m,changes:p}}const eJ=typeof process<"u"&&!1;function mw(t,e){var n;const r=t.__r3f,i=r==null?void 0:r.root,o=i==null||i.getState==null?void 0:i.getState(),{memoized:s,changes:a}=JZ(e)?e:UF(t,e),l=r==null?void 0:r.eventCount;t.__r3f&&(t.__r3f.memoizedProps=s);for(let u=0;u<a.length;u++){let[d,p,m,g]=a[u];if(hw(t)){const _="srgb",w="srgb-linear";d==="encoding"?(d="colorSpace",p=p===3001?_:w):d==="outputEncoding"&&(d="outputColorSpace",p=p===3001?_:w)}let v=t,x=v[d];if(g.length&&(x=g.reduce((y,_)=>y[_],t),!(x&&x.set))){const[y,..._]=g.reverse();v=_.reverse().reduce((w,M)=>w[M],t),d=y}if(p===NF+"remove")if(v.constructor){let y=B3.get(v.constructor);y||(y=new v.constructor,B3.set(v.constructor,y)),p=y[d]}else p=0;if(m&&r)p?r.handlers[d]=p:delete r.handlers[d],r.eventCount=Object.keys(r.handlers).length;else if(x&&x.set&&(x.copy||x instanceof Ec)){if(Array.isArray(p))x.fromArray?x.fromArray(p):x.set(...p);else if(x.copy&&p&&p.constructor&&(eJ?x.constructor.name===p.constructor.name:x.constructor===p.constructor))x.copy(p);else if(p!==void 0){const y=x instanceof Je;!y&&x.setScalar?x.setScalar(p):x instanceof Ec&&p instanceof Ec?x.mask=p.mask:x.set(p),!IF()&&o&&!o.linear&&y&&x.convertSRGBToLinear()}}else if(v[d]=p,v[d]instanceof Nn&&v[d].format===jr&&v[d].type===Wo&&o){const y=v[d];hw(y)&&hw(o.gl)?y.colorSpace=o.gl.outputColorSpace:y.encoding=o.gl.outputEncoding}Qu(t)}if(r&&r.parent&&t.raycast&&l!==r.eventCount){const u=Cy(t).getState().internal,d=u.interaction.indexOf(t);d>-1&&u.interaction.splice(d,1),r.eventCount&&u.interaction.push(t)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(n=t.__r3f)!=null&&n.parent&&rE(t),t}function Qu(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function rE(t){t.onUpdate==null||t.onUpdate(t)}function tJ(t,e){t.manual||(OF(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function W0(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function nJ(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return vf.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return vf.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return vf.ContinuousEventPriority;default:return vf.DefaultEventPriority}}function FF(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function rJ(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{FF(n.capturedMap,e,r,i)})}function iJ(t){function e(l){const{internal:c}=t.getState(),u=l.offsetX-c.initialClick[0],d=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+d*d))}function n(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var d;return(d=c.__r3f)==null?void 0:d.handlers["onPointer"+u]}))}function r(l,c){const u=t.getState(),d=new Set,p=[],m=c?c(u.internal.interaction):u.internal.interaction;for(let y=0;y<m.length;y++){const _=dh(m[y]);_&&(_.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function g(y){const _=dh(y);if(!_||!_.events.enabled||_.raycaster.camera===null)return[];if(_.raycaster.camera===void 0){var w;_.events.compute==null||_.events.compute(l,_,(w=_.previousRoot)==null?void 0:w.getState()),_.raycaster.camera===void 0&&(_.raycaster.camera=null)}return _.raycaster.camera?_.raycaster.intersectObject(y,!0):[]}let v=m.flatMap(g).sort((y,_)=>{const w=dh(y.object),M=dh(_.object);return!w||!M?y.distance-_.distance:M.events.priority-w.events.priority||y.distance-_.distance}).filter(y=>{const _=W0(y);return d.has(_)?!1:(d.add(_),!0)});u.events.filter&&(v=u.events.filter(v,u));for(const y of v){let _=y.object;for(;_;){var x;(x=_.__r3f)!=null&&x.eventCount&&p.push({...y,eventObject:_}),_=_.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let y of u.internal.capturedMap.get(l.pointerId).values())d.has(W0(y.intersection))||p.push(y.intersection);return p}function i(l,c,u,d){const p=t.getState();if(l.length){const m={stopped:!1};for(const g of l){const v=dh(g.object)||p,{raycaster:x,pointer:y,camera:_,internal:w}=v,M=new z(y.x,y.y,0).unproject(_),A=E=>{var L,H;return(L=(H=w.capturedMap.get(E))==null?void 0:H.has(g.eventObject))!=null?L:!1},C=E=>{const L={intersection:g,target:c.target};w.capturedMap.has(E)?w.capturedMap.get(E).set(g.eventObject,L):w.capturedMap.set(E,new Map([[g.eventObject,L]])),c.target.setPointerCapture(E)},P=E=>{const L=w.capturedMap.get(E);L&&FF(w.capturedMap,g.eventObject,L,E)};let N={};for(let E in c){let L=c[E];typeof L!="function"&&(N[E]=L)}let O={...g,...N,pointer:y,intersections:l,stopped:m.stopped,delta:u,unprojectedPoint:M,ray:x.ray,camera:_,stopPropagation(){const E="pointerId"in c&&w.capturedMap.get(c.pointerId);if((!E||E.has(g.eventObject))&&(O.stopped=m.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(L=>L.eventObject===g.eventObject))){const L=l.slice(0,l.indexOf(g));o([...L,g])}},target:{hasPointerCapture:A,setPointerCapture:C,releasePointerCapture:P},currentTarget:{hasPointerCapture:A,setPointerCapture:C,releasePointerCapture:P},nativeEvent:c};if(d(O),m.stopped===!0)break}}return l}function o(l){const{internal:c}=t.getState();for(const u of c.hovered.values())if(!l.length||!l.find(d=>d.object===u.object&&d.index===u.index&&d.instanceId===u.instanceId)){const p=u.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(W0(u)),p!=null&&p.eventCount){const g={...u,intersections:l};m.onPointerOut==null||m.onPointerOut(g),m.onPointerLeave==null||m.onPointerLeave(g)}}}function s(l,c){for(let u=0;u<c.length;u++){const d=c[u].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return c=>{const{internal:u}=t.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),o([]))})}}return function(u){const{onPointerMissed:d,internal:p}=t.getState();p.lastEvent.current=u;const m=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=r(u,m?n:void 0),y=g?e(u):0;l==="onPointerDown"&&(p.initialClick=[u.offsetX,u.offsetY],p.initialHits=x.map(w=>w.eventObject)),g&&!x.length&&y<=2&&(s(u,p.interaction),d&&d(u)),m&&o(x);function _(w){const M=w.eventObject,A=M.__r3f,C=A==null?void 0:A.handlers;if(A!=null&&A.eventCount)if(m){if(C.onPointerOver||C.onPointerEnter||C.onPointerOut||C.onPointerLeave){const P=W0(w),N=p.hovered.get(P);N?N.stopped&&w.stopPropagation():(p.hovered.set(P,w),C.onPointerOver==null||C.onPointerOver(w),C.onPointerEnter==null||C.onPointerEnter(w))}C.onPointerMove==null||C.onPointerMove(w)}else{const P=C[l];P?(!g||p.initialHits.includes(M))&&(s(u,p.interaction.filter(N=>!p.initialHits.includes(N))),P(w)):g&&p.initialHits.includes(M)&&s(u,p.interaction.filter(N=>!p.initialHits.includes(N)))}}i(x,u,y,_)}}return{handlePointer:a}}const zF=t=>!!(t!=null&&t.render),BF=R.createContext(null),oJ=(t,e)=>{const n=CF((a,l)=>{const c=new z,u=new z,d=new z;function p(y=l().camera,_=u,w=l().size){const{width:M,height:A,top:C,left:P}=w,N=M/A;_ instanceof z?d.copy(_):d.set(..._);const O=y.getWorldPosition(c).distanceTo(d);if(OF(y))return{width:M/y.zoom,height:A/y.zoom,top:C,left:P,factor:1,distance:O,aspect:N};{const E=y.fov*Math.PI/180,L=2*Math.tan(E/2)*O,H=L*(M/A);return{width:H,height:L,top:C,left:P,factor:M/H,distance:O,aspect:N}}}let m;const g=y=>a(_=>({performance:{..._.performance,current:y}})),v=new Se;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(y=1)=>t(l(),y),advance:(y,_)=>e(y,_,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new VT,pointer:v,mouse:v,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const y=l();m&&clearTimeout(m),y.performance.current!==y.performance.min&&g(y.performance.min),m=setTimeout(()=>g(l().performance.max),y.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:y=>a(_=>({..._,events:{..._.events,...y}})),setSize:(y,_,w,M,A)=>{const C=l().camera,P={width:y,height:_,top:M||0,left:A||0,updateStyle:w};a(N=>({size:P,viewport:{...N.viewport,...p(C,u,P)}}))},setDpr:y=>a(_=>{const w=DF(y);return{viewport:{..._.viewport,dpr:w,initialDpr:_.viewport.initialDpr||w}}}),setFrameloop:(y="always")=>{const _=l().clock;_.stop(),_.elapsedTime=0,y!=="never"&&(_.start(),_.elapsedTime=0),a(()=>({frameloop:y}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:R.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(y,_,w)=>{const M=l().internal;return M.priority=M.priority+(_>0?1:0),M.subscribers.push({ref:y,priority:_,store:w}),M.subscribers=M.subscribers.sort((A,C)=>A.priority-C.priority),()=>{const A=l().internal;A!=null&&A.subscribers&&(A.priority=A.priority-(_>0?1:0),A.subscribers=A.subscribers.filter(C=>C.ref!==y))}}}}}),r=n.getState();let i=r.size,o=r.viewport.dpr,s=r.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:d}=n.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==o){var p;i=l,o=c.dpr,tJ(a,l),u.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,m)}a!==s&&(s=a,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};let j0,sJ=new Set,aJ=new Set,lJ=new Set;function gw(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function hh(t,e){switch(t){case"before":return gw(sJ,e);case"after":return gw(aJ,e);case"tail":return gw(lJ,e)}}let yw,vw;function xw(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),yw=e.internal.subscribers,j0=0;j0<yw.length;j0++)vw=yw[j0],vw.ref.current(vw.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function cJ(t){let e=!1,n=!1,r,i,o;function s(c){i=requestAnimationFrame(s),e=!0,r=0,hh("before",c),n=!0;for(const d of t.values()){var u;o=d.store.getState(),o.internal.active&&(o.frameloop==="always"||o.internal.frames>0)&&!((u=o.gl.xr)!=null&&u.isPresenting)&&(r+=xw(c,o))}if(n=!1,hh("after",c),r===0)return hh("tail",c),e=!1,cancelAnimationFrame(i)}function a(c,u=1){var d;if(!c)return t.forEach(p=>a(p.store.getState(),u));(d=c.gl.xr)!=null&&d.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):n?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(s)))}function l(c,u=!0,d,p){if(u&&hh("before",c),d)xw(c,d,p);else for(const m of t.values())xw(c,m.store.getState());u&&hh("after",c)}return{loop:s,invalidate:a,advance:l}}function HF(){const t=R.useContext(BF);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function gs(t=n=>n,e){return HF()(t,e)}function VF(t,e=0){const n=HF(),r=n.getState().internal.subscribe,i=LF(t);return vm(()=>r(i,e,n),[e,r,n]),null}const Gf=new Map,{invalidate:$3,advance:W3}=cJ(Gf),{reconciler:$v,applyProps:$u}=qZ(Gf,nJ),Wu={objects:"shallow",strict:!1},uJ=(t,e)=>{const n=typeof t=="function"?t(e):t;return zF(n)?n:new IU({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function fJ(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:o,left:s,updateStyle:a=n}=e;return{width:r,height:i,top:o,left:s,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:r,height:i,top:o,left:s}=t.parentElement.getBoundingClientRect();return{width:r,height:i,top:o,left:s,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function dJ(t){const e=Gf.get(t),n=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,o=r||oJ($3,W3),s=n||$v.createContainer(o,vf.ConcurrentRoot,null,!1,null,"",i,null);e||Gf.set(t,{fiber:s,store:o});let a,l=!1,c;return{configure(u={}){let{gl:d,size:p,scene:m,events:g,onCreated:v,shadows:x=!1,linear:y=!1,flat:_=!1,legacy:w=!1,orthographic:M=!1,frameloop:A="always",dpr:C=[1,2],performance:P,raycaster:N,camera:O,onPointerMissed:E}=u,L=o.getState(),H=L.gl;L.gl||L.set({gl:H=uJ(d,t)});let W=L.raycaster;W||L.set({raycaster:W=new wF});const{params:Y,...K}=N||{};if(_n.equ(K,W,Wu)||$u(W,{...K}),_n.equ(Y,W.params,Wu)||$u(W,{params:{...W.params,...Y}}),!L.camera||L.camera===c&&!_n.equ(c,O,Wu)){c=O;const X=O instanceof um,ne=X?O:M?new Fo(0,0,0,0,.1,1e3):new Tn(75,0,.1,1e3);X||(ne.position.z=5,O&&($u(ne,O),("aspect"in O||"left"in O||"right"in O||"bottom"in O||"top"in O)&&(ne.manual=!0,ne.updateProjectionMatrix())),!L.camera&&!(O!=null&&O.rotation)&&ne.lookAt(0,0,0)),L.set({camera:ne}),W.camera=ne}if(!L.scene){let X;m instanceof Fv?X=m:(X=new Fv,m&&$u(X,m)),L.set({scene:Ju(X)})}if(!L.xr){var J;const X=(De,ae)=>{const _e=o.getState();_e.frameloop!=="never"&&W3(De,!0,_e,ae)},ne=()=>{const De=o.getState();De.gl.xr.enabled=De.gl.xr.isPresenting,De.gl.xr.setAnimationLoop(De.gl.xr.isPresenting?X:null),De.gl.xr.isPresenting||$3(De)},pe={connect(){const De=o.getState().gl;De.xr.addEventListener("sessionstart",ne),De.xr.addEventListener("sessionend",ne)},disconnect(){const De=o.getState().gl;De.xr.removeEventListener("sessionstart",ne),De.xr.removeEventListener("sessionend",ne)}};typeof((J=H.xr)==null?void 0:J.addEventListener)=="function"&&pe.connect(),L.set({xr:pe})}if(H.shadowMap){const X=H.shadowMap.enabled,ne=H.shadowMap.type;if(H.shadowMap.enabled=!!x,_n.boo(x))H.shadowMap.type=Hh;else if(_n.str(x)){var Q;const pe={basic:SD,percentage:Yx,soft:Hh,variance:Oo};H.shadowMap.type=(Q=pe[x])!=null?Q:Hh}else _n.obj(x)&&Object.assign(H.shadowMap,x);(X!==H.shadowMap.enabled||ne!==H.shadowMap.type)&&(H.shadowMap.needsUpdate=!0)}const D=IF();D&&("enabled"in D?D.enabled=!w:"legacyMode"in D&&(D.legacyMode=w)),l||$u(H,{outputEncoding:y?3e3:3001,toneMapping:_?Os:iT}),L.legacy!==w&&L.set(()=>({legacy:w})),L.linear!==y&&L.set(()=>({linear:y})),L.flat!==_&&L.set(()=>({flat:_})),d&&!_n.fun(d)&&!zF(d)&&!_n.equ(d,H,Wu)&&$u(H,d),g&&!L.events.handlers&&L.set({events:g(o)});const G=fJ(t,p);return _n.equ(G,L.size,Wu)||L.setSize(G.width,G.height,G.updateStyle,G.top,G.left),C&&L.viewport.dpr!==DF(C)&&L.setDpr(C),L.frameloop!==A&&L.setFrameloop(A),L.onPointerMissed||L.set({onPointerMissed:E}),P&&!_n.equ(P,L.performance,Wu)&&L.set(X=>({performance:{...X.performance,...P}})),a=v,l=!0,this},render(u){return l||this.configure(),$v.updateContainer(k.jsx(hJ,{store:o,children:u,onCreated:a,rootElement:t}),s,null,()=>{}),o},unmount(){$F(t)}}}function hJ({store:t,children:e,onCreated:n,rootElement:r}){return vm(()=>{const i=t.getState();i.set(o=>({internal:{...o.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),k.jsx(BF.Provider,{value:t,children:e})}function $F(t,e){const n=Gf.get(t),r=n==null?void 0:n.fiber;if(r){const i=n==null?void 0:n.store.getState();i&&(i.internal.active=!1),$v.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var o,s,a,l;i.events.disconnect==null||i.events.disconnect(),(o=i.gl)==null||(s=o.renderLists)==null||s.dispose==null||s.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),QZ(i),Gf.delete(t)}catch{}},500)})}}$v.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:R.version});const _w={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function pJ(t){const{handlePointer:e}=iJ(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(_w).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:o}=t.getState();o.disconnect==null||o.disconnect(),i(s=>({events:{...s.events,connected:n}})),Object.entries((r=o.handlers)!=null?r:[]).forEach(([s,a])=>{const[l,c]=_w[s];n.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([o,s])=>{if(r&&r.connected instanceof HTMLElement){const[a]=_w[o];r.connected.removeEventListener(a,s)}}),n(o=>({events:{...o.events,connected:void 0}}))}}}}function iE(t,e,n){var r,i,o,s,a;e==null&&(e=100);function l(){var u=Date.now()-s;u<e&&u>=0?r=setTimeout(l,e-u):(r=null,n||(a=t.apply(o,i),o=i=null))}var c=function(){o=this,i=arguments,s=Date.now();var u=n&&!r;return r||(r=setTimeout(l,e)),u&&(a=t.apply(o,i),o=i=null),a};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(a=t.apply(o,i),o=i=null,clearTimeout(r),r=null)},c}iE.debounce=iE;var mJ=iE;const j3=Us(mJ);var gJ=Object.defineProperty,yJ=Object.defineProperties,vJ=Object.getOwnPropertyDescriptors,G3=Object.getOwnPropertySymbols,xJ=Object.prototype.hasOwnProperty,_J=Object.prototype.propertyIsEnumerable,X3=(t,e,n)=>e in t?gJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Y3=(t,e)=>{for(var n in e||(e={}))xJ.call(e,n)&&X3(t,n,e[n]);if(G3)for(var n of G3(e))_J.call(e,n)&&X3(t,n,e[n]);return t},SJ=(t,e)=>yJ(t,vJ(e)),q3,K3;typeof window<"u"&&((q3=window.document)!=null&&q3.createElement||((K3=window.navigator)==null?void 0:K3.product)==="ReactNative")?R.useLayoutEffect:R.useEffect;function WF(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=t.child;for(;r;){const i=WF(r,e,n);if(i)return i;r=r.sibling}}function jF(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const Z3=console.error;console.error=function(){const t=[...arguments].join("");if(t!=null&&t.startsWith("Warning:")&&t.includes("useContext")){console.error=Z3;return}return Z3.apply(this,arguments)};const YT=jF(R.createContext(null));class GF extends R.Component{render(){return R.createElement(YT.Provider,{value:this._reactInternals},this.props.children)}}function wJ(){const t=R.useContext(YT);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=R.useId();return R.useMemo(()=>{for(const r of[t,t==null?void 0:t.alternate]){if(!r)continue;const i=WF(r,!1,o=>{let s=o.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[t,e])}function bJ(){const t=wJ(),[e]=R.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&typeof n.type=="object"){const i=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;i&&i!==YT&&!e.has(i)&&e.set(i,R.useContext(jF(i)))}n=n.return}return e}function EJ(){const t=bJ();return R.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>R.createElement(e,null,R.createElement(n.Provider,SJ(Y3({},r),{value:t.get(n)}))),e=>R.createElement(GF,Y3({},e))),[t])}function MJ({debounce:t,scroll:e,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=n||typeof window<"u"&&window.ResizeObserver,[o,s]=R.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!i)return o.width=1280,o.height=800,[()=>{},o,()=>{}];const a=R.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),l=t?typeof t=="number"?t:t.scroll:null,c=t?typeof t=="number"?t:t.resize:null,u=R.useRef(!1);R.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[d,p,m]=R.useMemo(()=>{const y=()=>{if(!a.current.element)return;const{left:_,top:w,width:M,height:A,bottom:C,right:P,x:N,y:O}=a.current.element.getBoundingClientRect(),E={left:_,top:w,width:M,height:A,bottom:C,right:P,x:N,y:O};a.current.element instanceof HTMLElement&&r&&(E.height=a.current.element.offsetHeight,E.width=a.current.element.offsetWidth),Object.freeze(E),u.current&&!PJ(a.current.lastBounds,E)&&s(a.current.lastBounds=E)};return[y,c?j3(y,c):y,l?j3(y,l):y]},[s,r,l,c]);function g(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(y=>y.removeEventListener("scroll",m,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null)}function v(){a.current.element&&(a.current.resizeObserver=new i(m),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(y=>y.addEventListener("scroll",m,{capture:!0,passive:!0})))}const x=y=>{!y||y===a.current.element||(g(),a.current.element=y,a.current.scrollContainers=XF(y),v())};return CJ(m,!!e),TJ(p),R.useEffect(()=>{g(),v()},[e,m,p]),R.useEffect(()=>g,[]),[x,o,d]}function TJ(t){R.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function CJ(t,e){R.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function XF(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(o=>o==="auto"||o==="scroll")&&e.push(t),[...e,...XF(t.parentElement)]}const AJ=["x","y","top","bottom","left","right","width","height"],PJ=(t,e)=>AJ.every(n=>t[n]===e[n]),RJ=R.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:o,events:s=pJ,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:d,legacy:p,orthographic:m,frameloop:g,dpr:v,performance:x,raycaster:y,camera:_,scene:w,onPointerMissed:M,onCreated:A,...C},P){R.useMemo(()=>YZ(BZ),[]);const N=EJ(),[O,E]=MJ({scroll:!0,debounce:{scroll:50,resize:0},...r}),L=R.useRef(null),H=R.useRef(null);R.useImperativeHandle(P,()=>L.current);const W=LF(M),[Y,K]=R.useState(!1),[J,Q]=R.useState(!1);if(Y)throw Y;if(J)throw J;const D=R.useRef(null);vm(()=>{const X=L.current;E.width>0&&E.height>0&&X&&(D.current||(D.current=dJ(X)),D.current.configure({gl:o,events:s,shadows:c,linear:u,flat:d,legacy:p,orthographic:m,frameloop:g,dpr:v,performance:x,raycaster:y,camera:_,scene:w,size:E,onPointerMissed:(...ne)=>W.current==null?void 0:W.current(...ne),onCreated:ne=>{ne.events.connect==null||ne.events.connect(a?KZ(a)?a.current:a:H.current),l&&ne.setEvents({compute:(pe,De)=>{const ae=pe[l+"X"],_e=pe[l+"Y"];De.pointer.set(ae/De.size.width*2-1,-(_e/De.size.height)*2+1),De.raycaster.setFromCamera(De.pointer,De.camera)}}),A==null||A(ne)}}),D.current.render(k.jsx(N,{children:k.jsx(kF,{set:Q,children:k.jsx(R.Suspense,{fallback:k.jsx(ZZ,{set:K}),children:e})})})))}),R.useEffect(()=>{const X=L.current;if(X)return()=>$F(X)},[]);const G=a?"none":"auto";return k.jsx("div",{ref:H,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:G,...i},...C,children:k.jsx("div",{ref:O,style:{width:"100%",height:"100%"},children:k.jsx("canvas",{ref:L,style:{display:"block"},children:n})})})}),IJ=R.forwardRef(function(e,n){return k.jsx(GF,{children:k.jsx(RJ,{...e,ref:n})})});function OJ(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function YF(...t){return e=>t.forEach(n=>OJ(n,e))}function Zc(...t){return R.useCallback(YF(...t),t)}var qF=R.forwardRef((t,e)=>{const{children:n,...r}=t,i=R.Children.toArray(n),o=i.find(LJ);if(o){const s=o.props.children,a=i.map(l=>l===o?R.Children.count(s)>1?R.Children.only(null):R.isValidElement(s)?s.props.children:null:l);return k.jsx(oE,{...r,ref:e,children:R.isValidElement(s)?R.cloneElement(s,void 0,a):null})}return k.jsx(oE,{...r,ref:e,children:n})});qF.displayName="Slot";var oE=R.forwardRef((t,e)=>{const{children:n,...r}=t;if(R.isValidElement(n)){const i=NJ(n);return R.cloneElement(n,{...kJ(r,n.props),ref:e?YF(e,i):i})}return R.Children.count(n)>1?R.Children.only(null):null});oE.displayName="SlotClone";var KF=({children:t})=>k.jsx(k.Fragment,{children:t});function LJ(t){return R.isValidElement(t)&&t.type===KF}function kJ(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{o(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function NJ(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var DJ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Nl=DJ.reduce((t,e)=>{const n=R.forwardRef((r,i)=>{const{asChild:o,...s}=r,a=o?qF:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),k.jsx(a,{...s,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function UJ(t,e){t&&ma.flushSync(()=>t.dispatchEvent(e))}var zc=globalThis!=null&&globalThis.document?R.useLayoutEffect:()=>{},FJ="Portal",ZF=R.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,o]=R.useState(!1);zc(()=>o(!0),[]);const s=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return s?Tf.createPortal(k.jsx(Nl.div,{...r,ref:e}),s):null});ZF.displayName=FJ;var zJ=ZF,J3=Object.prototype.hasOwnProperty;function $p(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&$p(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(J3.call(t,n)&&++r&&!J3.call(e,n)||!(n in e)||!$p(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}function T1(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}var C1=function(e,n,r,i){this.name=e,this.fn=n,this.args=r,this.modifiers=i};C1.prototype._test=function(e){var n=this.fn;try{If(this.modifiers.slice(),n,this)(e)}catch{n=function(){return!1}}try{return If(this.modifiers.slice(),n,this)(e)}catch{return!1}};C1.prototype._check=function(e){try{If(this.modifiers.slice(),this.fn,this)(e)}catch{if(If(this.modifiers.slice(),function(r){return r},this)(!1))return}if(!If(this.modifiers.slice(),this.fn,this)(e))throw null};C1.prototype._testAsync=function(e){var n=this;return new Promise(function(r,i){QF(n.modifiers.slice(),n.fn,n)(e).then(function(o){o?r(e):i(null)}).catch(function(o){return i(o)})})};function JF(t,e){return e===void 0&&(e="simple"),typeof t=="object"?t[e]:t}function If(t,e,n){if(t.length){var r=t.shift(),i=If(t,e,n);return r.perform(i,n)}else return JF(e)}function QF(t,e,n){if(t.length){var r=t.shift(),i=QF(t,e,n);return r.performAsync(i,n)}else return function(o){return Promise.resolve(JF(e,"async")(o))}}var BJ=function(e,n,r){this.name=e,this.perform=n,this.performAsync=r},qT=function(t){function e(n,r,i,o){for(var s=[],a=arguments.length-4;a-- >0;)s[a]=arguments[a+4];t.call(this,s),t.captureStackTrace&&t.captureStackTrace(this,e),this.rule=n,this.value=r,this.cause=i,this.target=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Ns=function(e,n){e===void 0&&(e=[]),n===void 0&&(n=[]),this.chain=e,this.nextRuleModifiers=n};Ns.prototype._applyRule=function(e,n){var r=this;return function(){for(var i=[],o=arguments.length;o--;)i[o]=arguments[o];return r.chain.push(new C1(n,e.apply(r,i),i,r.nextRuleModifiers)),r.nextRuleModifiers=[],r}};Ns.prototype._applyModifier=function(e,n){return this.nextRuleModifiers.push(new BJ(n,e.simple,e.async)),this};Ns.prototype._clone=function(){return new Ns(this.chain.slice(),this.nextRuleModifiers.slice())};Ns.prototype.test=function(e){return this.chain.every(function(n){return n._test(e)})};Ns.prototype.testAll=function(e){var n=[];return this.chain.forEach(function(r){try{r._check(e)}catch(i){n.push(new qT(r,e,i))}}),n};Ns.prototype.check=function(e){this.chain.forEach(function(n){try{n._check(e)}catch(r){throw new qT(n,e,r)}})};Ns.prototype.testAsync=function(e){var n=this;return new Promise(function(r,i){e4(e,n.chain.slice(),r,i)})};function e4(t,e,n,r){if(e.length){var i=e.shift();i._testAsync(t).then(function(){e4(t,e,n,r)},function(o){r(new qT(i,t,o))})}else n(t)}var Q3=function(t,e){return e&&typeof t=="string"&&t.trim().length===0?!0:t==null};function HJ(t,e){return e===void 0&&(e=!1),{simple:function(n){return Q3(n,e)||t.check(n)===void 0},async:function(n){return Q3(n,e)||t.testAsync(n)}}}function wi(){return typeof Proxy<"u"?t4(new Ns):sE(new Ns)}var Wp={};wi.extend=function(t){Object.assign(Wp,t)};wi.clearCustomRules=function(){Wp={}};function t4(t){return new Proxy(t,{get:function(n,r){if(r in n)return n[r];var i=t4(t._clone());if(r in Wv)return i._applyModifier(Wv[r],r);if(r in Wp)return i._applyRule(Wp[r],r);if(r in aE)return i._applyRule(aE[r],r)}})}function sE(t){var e=function(i,o){return Object.keys(i).forEach(function(s){o[s]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var c=sE(o._clone()),u=c._applyRule(i[s],s).apply(void 0,a);return u}}),o},n=e(aE,t),r=e(Wp,n);return Object.keys(Wv).forEach(function(i){Object.defineProperty(r,i,{get:function(){var o=sE(r._clone());return o._applyModifier(Wv[i],i)}})}),r}var Wv={not:{simple:function(t){return function(e){return!t(e)}},async:function(t){return function(e){return Promise.resolve(t(e)).then(function(n){return!n}).catch(function(){return!0})}}},some:{simple:function(t){return function(e){return G0(e).some(function(n){try{return t(n)}catch{return!1}})}},async:function(t){return function(e){return Promise.all(G0(e).map(function(n){try{return t(n).catch(function(){return!1})}catch{return!1}})).then(function(n){return n.some(Boolean)})}}},every:{simple:function(t){return function(e){return e!==!1&&G0(e).every(t)}},async:function(t){return function(e){return Promise.all(G0(e).map(t)).then(function(n){return n.every(Boolean)})}}},strict:{simple:function(t,e){return function(n){return eI(e)&&n&&typeof n=="object"?Object.keys(e.args[0]).length===Object.keys(n).length&&t(n):t(n)}},async:function(t,e){return function(n){return Promise.resolve(t(n)).then(function(r){return eI(e)&&n&&typeof n=="object"?Object.keys(e.args[0]).length===Object.keys(n).length&&r:r}).catch(function(){return!1})}}}};function eI(t){return t&&t.name==="schema"&&t.args.length>0&&typeof t.args[0]=="object"}function G0(t){return typeof t=="string"?t.split(""):t}var aE={equal:function(t){return function(e){return e==t}},exact:function(t){return function(e){return e===t}},number:function(t){return t===void 0&&(t=!0),function(e){return typeof e=="number"&&(t||isFinite(e))}},integer:function(){return function(t){var e=Number.isInteger||VJ;return e(t)}},numeric:function(){return function(t){return!isNaN(parseFloat(t))&&isFinite(t)}},string:function(){return ju("string")},boolean:function(){return ju("boolean")},undefined:function(){return ju("undefined")},null:function(){return ju("null")},array:function(){return ju("array")},object:function(){return ju("object")},instanceOf:function(t){return function(e){return e instanceof t}},pattern:function(t){return function(e){return t.test(e)}},lowercase:function(){return function(t){return typeof t=="boolean"||t===t.toLowerCase()&&t.trim()!==""}},uppercase:function(){return function(t){return t===t.toUpperCase()&&t.trim()!==""}},vowel:function(){return function(t){return/^[aeiou]+$/i.test(t)}},consonant:function(){return function(t){return/^(?=[^aeiou])([a-z]+)$/i.test(t)}},first:function(t){return function(e){return e[0]==t}},last:function(t){return function(e){return e[e.length-1]==t}},empty:function(){return function(t){return t.length===0}},length:function(t,e){return function(n){return n.length>=t&&n.length<=(e||t)}},minLength:function(t){return function(e){return e.length>=t}},maxLength:function(t){return function(e){return e.length<=t}},negative:function(){return function(t){return t<0}},positive:function(){return function(t){return t>=0}},between:function(t,e){return function(n){return n>=t&&n<=e}},range:function(t,e){return function(n){return n>=t&&n<=e}},lessThan:function(t){return function(e){return e<t}},lessThanOrEqual:function(t){return function(e){return e<=t}},greaterThan:function(t){return function(e){return e>t}},greaterThanOrEqual:function(t){return function(e){return e>=t}},even:function(){return function(t){return t%2===0}},odd:function(){return function(t){return t%2!==0}},includes:function(t){return function(e){return~e.indexOf(t)}},schema:function(t){return $J(t)},passesAnyOf:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function(n){return t.some(function(r){return r.test(n)})}},optional:HJ};function ju(t){return function(e){return Array.isArray(e)&&t==="array"||e===null&&t==="null"||typeof e===t}}function VJ(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function $J(t){return{simple:function(e){var n=[];if(Object.keys(t).forEach(function(r){var i=t[r];try{i.check((e||{})[r])}catch(o){o.target=r,n.push(o)}}),n.length>0)throw n;return!0},async:function(e){var n=[],r=Object.keys(t).map(function(i){var o=t[i];return o.testAsync((e||{})[i]).catch(function(s){s.target=i,n.push(s)})});return Promise.all(r).then(function(){if(n.length>0)throw n;return!0})}}}var rn="colors",Qr="sizes",ot="space",WJ={gap:ot,gridGap:ot,columnGap:ot,gridColumnGap:ot,rowGap:ot,gridRowGap:ot,inset:ot,insetBlock:ot,insetBlockEnd:ot,insetBlockStart:ot,insetInline:ot,insetInlineEnd:ot,insetInlineStart:ot,margin:ot,marginTop:ot,marginRight:ot,marginBottom:ot,marginLeft:ot,marginBlock:ot,marginBlockEnd:ot,marginBlockStart:ot,marginInline:ot,marginInlineEnd:ot,marginInlineStart:ot,padding:ot,paddingTop:ot,paddingRight:ot,paddingBottom:ot,paddingLeft:ot,paddingBlock:ot,paddingBlockEnd:ot,paddingBlockStart:ot,paddingInline:ot,paddingInlineEnd:ot,paddingInlineStart:ot,top:ot,right:ot,bottom:ot,left:ot,scrollMargin:ot,scrollMarginTop:ot,scrollMarginRight:ot,scrollMarginBottom:ot,scrollMarginLeft:ot,scrollMarginX:ot,scrollMarginY:ot,scrollMarginBlock:ot,scrollMarginBlockEnd:ot,scrollMarginBlockStart:ot,scrollMarginInline:ot,scrollMarginInlineEnd:ot,scrollMarginInlineStart:ot,scrollPadding:ot,scrollPaddingTop:ot,scrollPaddingRight:ot,scrollPaddingBottom:ot,scrollPaddingLeft:ot,scrollPaddingX:ot,scrollPaddingY:ot,scrollPaddingBlock:ot,scrollPaddingBlockEnd:ot,scrollPaddingBlockStart:ot,scrollPaddingInline:ot,scrollPaddingInlineEnd:ot,scrollPaddingInlineStart:ot,fontSize:"fontSizes",background:rn,backgroundColor:rn,backgroundImage:rn,borderImage:rn,border:rn,borderBlock:rn,borderBlockEnd:rn,borderBlockStart:rn,borderBottom:rn,borderBottomColor:rn,borderColor:rn,borderInline:rn,borderInlineEnd:rn,borderInlineStart:rn,borderLeft:rn,borderLeftColor:rn,borderRight:rn,borderRightColor:rn,borderTop:rn,borderTopColor:rn,caretColor:rn,color:rn,columnRuleColor:rn,fill:rn,outline:rn,outlineColor:rn,stroke:rn,textDecorationColor:rn,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Qr,minBlockSize:Qr,maxBlockSize:Qr,inlineSize:Qr,minInlineSize:Qr,maxInlineSize:Qr,width:Qr,minWidth:Qr,maxWidth:Qr,height:Qr,minHeight:Qr,maxHeight:Qr,flexBasis:Qr,gridTemplateColumns:Qr,gridTemplateRows:Qr,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},jJ=(t,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,dd=()=>{const t=Object.create(null);return(e,n,...r)=>{const i=(o=>JSON.stringify(o,jJ))(e);return i in t?t[i]:t[i]=n(e,...r)}},Tc=Symbol.for("sxs.internal"),KT=(t,e)=>Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)),tI=t=>{for(const e in t)return!0;return!1},{hasOwnProperty:GJ}=Object.prototype,lE=t=>t.includes("-")?t:t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),XJ=/\s+(?![^()]*\))/,Gu=t=>e=>t(...typeof e=="string"?String(e).split(XJ):[e]),nI={appearance:t=>({WebkitAppearance:t,appearance:t}),backfaceVisibility:t=>({WebkitBackfaceVisibility:t,backfaceVisibility:t}),backdropFilter:t=>({WebkitBackdropFilter:t,backdropFilter:t}),backgroundClip:t=>({WebkitBackgroundClip:t,backgroundClip:t}),boxDecorationBreak:t=>({WebkitBoxDecorationBreak:t,boxDecorationBreak:t}),clipPath:t=>({WebkitClipPath:t,clipPath:t}),content:t=>({content:t.includes('"')||t.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(t)?t:`"${t}"`}),hyphens:t=>({WebkitHyphens:t,hyphens:t}),maskImage:t=>({WebkitMaskImage:t,maskImage:t}),maskSize:t=>({WebkitMaskSize:t,maskSize:t}),tabSize:t=>({MozTabSize:t,tabSize:t}),textSizeAdjust:t=>({WebkitTextSizeAdjust:t,textSizeAdjust:t}),userSelect:t=>({WebkitUserSelect:t,userSelect:t}),marginBlock:Gu((t,e)=>({marginBlockStart:t,marginBlockEnd:e||t})),marginInline:Gu((t,e)=>({marginInlineStart:t,marginInlineEnd:e||t})),maxSize:Gu((t,e)=>({maxBlockSize:t,maxInlineSize:e||t})),minSize:Gu((t,e)=>({minBlockSize:t,minInlineSize:e||t})),paddingBlock:Gu((t,e)=>({paddingBlockStart:t,paddingBlockEnd:e||t})),paddingInline:Gu((t,e)=>({paddingInlineStart:t,paddingInlineEnd:e||t}))},Sw=/([\d.]+)([^]*)/,YJ=(t,e)=>t.length?t.reduce((n,r)=>(n.push(...e.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(i)?`:is(${r})`:r):r+" "+i)),n),[]):e,qJ=(t,e)=>t in KJ&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(n,r,i,o)=>r+(i==="stretch"?`-moz-available${o};${lE(t)}:${r}-webkit-fill-available`:`-moz-fit-content${o};${lE(t)}:${r}fit-content`)+o):String(e),KJ={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Aa=t=>t?t+"-":"",n4=(t,e,n)=>t.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,i,o,s,a)=>s=="$"==!!o?r:(i||s=="--"?"calc(":"")+"var(--"+(s==="$"?Aa(e)+(a.includes("$")?"":Aa(n))+a.replace(/\$/g,"-"):a)+")"+(i||s=="--"?"*"+(i||"")+(o||"1")+")":"")),ZJ=/\s*,\s*(?![^()]*\))/,JJ=Object.prototype.toString,xf=(t,e,n,r,i)=>{let o,s,a;const l=(c,u,d)=>{let p,m;const g=v=>{for(p in v){const _=p.charCodeAt(0)===64,w=_&&Array.isArray(v[p])?v[p]:[v[p]];for(m of w){const M=/[A-Z]/.test(y=p)?y:y.replace(/-[^]/g,C=>C[1].toUpperCase()),A=typeof m=="object"&&m&&m.toString===JJ&&(!r.utils[M]||!u.length);if(M in r.utils&&!A){const C=r.utils[M];if(C!==s){s=C,g(C(m)),s=null;continue}}else if(M in nI){const C=nI[M];if(C!==a){a=C,g(C(m)),a=null;continue}}if(_&&(x=p.slice(1)in r.media?"@media "+r.media[p.slice(1)]:p,p=x.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(C,P,N,O,E,L)=>{const H=Sw.test(P),W=.0625*(H?-1:1),[Y,K]=H?[O,P]:[P,O];return"("+(N[0]==="="?"":N[0]===">"===H?"max-":"min-")+Y+":"+(N[0]!=="="&&N.length===1?K.replace(Sw,(J,Q,D)=>Number(Q)+W*(N===">"?1:-1)+D):K)+(E?") and ("+(E[0]===">"?"min-":"max-")+Y+":"+(E.length===1?L.replace(Sw,(J,Q,D)=>Number(Q)+W*(E===">"?-1:1)+D):L):"")+")"})),A){const C=_?d.concat(p):[...d],P=_?[...u]:YJ(u,p.split(ZJ));o!==void 0&&i(rI(...o)),o=void 0,l(m,P,C)}else o===void 0&&(o=[[],u,d]),p=_||p.charCodeAt(0)!==36?p:`--${Aa(r.prefix)}${p.slice(1).replace(/\$/g,"-")}`,m=A?m:typeof m=="number"?m&&M in QJ?String(m)+"px":String(m):n4(qJ(M,m??""),r.prefix,r.themeMap[M]),o[0].push(`${_?`${p} `:`${lE(p)}:`}${m}`)}}var x,y};g(c),o!==void 0&&i(rI(...o)),o=void 0};l(t,e,n)},rI=(t,e,n)=>`${n.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${t.join(";")}${e.length?"}":""}${Array(n.length?n.length+1:0).join("}")}`,QJ={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},iI=t=>String.fromCharCode(t+(t>25?39:97)),Cc=t=>(e=>{let n,r="";for(n=Math.abs(e);n>52;n=n/52|0)r=iI(n%52)+r;return iI(n%52)+r})(((e,n)=>{let r=n.length;for(;r;)e=33*e^n.charCodeAt(--r);return e})(5381,JSON.stringify(t))>>>0),Rh=["themed","global","styled","onevar","resonevar","allvar","inline"],eQ=t=>{if(t.href&&!t.href.startsWith(location.origin))return!1;try{return!!t.cssRules}catch{return!1}},tQ=t=>{let e;const n=()=>{const{cssRules:i}=e.sheet;return[].map.call(i,(o,s)=>{const{cssText:a}=o;let l="";if(a.startsWith("--sxs"))return"";if(i[s-1]&&(l=i[s-1].cssText).startsWith("--sxs")){if(!o.cssRules.length)return"";for(const c in e.rules)if(e.rules[c].group===o)return`--sxs{--sxs:${[...e.rules[c].cache].join(" ")}}${a}`;return o.cssRules.length?`${l}${a}`:""}return a}).join("")},r=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const c in a)delete a[c]}const i=Object(t).styleSheets||[];for(const a of i)if(eQ(a)){for(let l=0,c=a.cssRules;c[l];++l){const u=Object(c[l]);if(u.type!==1)continue;const d=Object(c[l+1]);if(d.type!==4)continue;++l;const{cssText:p}=u;if(!p.startsWith("--sxs"))continue;const m=p.slice(14,-3).trim().split(/\s+/),g=Rh[m[0]];g&&(e||(e={sheet:a,reset:r,rules:{},toString:n}),e.rules[g]={group:d,index:l,cache:new Set(m)})}if(e)break}if(!e){const a=(l,c)=>({type:c,cssRules:[],insertRule(u,d){this.cssRules.splice(d,0,a(u,{import:3,undefined:1}[(u.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,u=>u.cssText).join("")}}`:l}});e={sheet:t?(t.head||t).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:r,toString:n}}const{sheet:o,rules:s}=e;for(let a=Rh.length-1;a>=0;--a){const l=Rh[a];if(!s[l]){const c=Rh[a+1],u=s[c]?s[c].index:o.cssRules.length;o.insertRule("@media{}",u),o.insertRule(`--sxs{--sxs:${a}}`,u),s[l]={group:o.cssRules[u+1],index:u,cache:new Set([a])}}nQ(s[l])}};return r(),e},nQ=t=>{const e=t.group;let n=e.cssRules.length;t.apply=r=>{try{e.insertRule(r,n),++n}catch{}}},ph=Symbol(),rQ=dd(),oI=(t,e)=>rQ(t,()=>(...n)=>{let r={type:null,composers:new Set};for(const i of n)if(i!=null)if(i[Tc]){r.type==null&&(r.type=i[Tc].type);for(const o of i[Tc].composers)r.composers.add(o)}else i.constructor!==Object||i.$$typeof?r.type==null&&(r.type=i):r.composers.add(iQ(i,t));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),oQ(t,r,e)}),iQ=({variants:t,compoundVariants:e,defaultVariants:n,...r},i)=>{const o=`${Aa(i.prefix)}c-${Cc(r)}`,s=[],a=[],l=Object.create(null),c=[];for(const p in n)l[p]=String(n[p]);if(typeof t=="object"&&t)for(const p in t){u=l,d=p,GJ.call(u,d)||(l[p]="undefined");const m=t[p];for(const g in m){const v={[p]:String(g)};String(g)==="undefined"&&c.push(p);const x=m[g],y=[v,x,!tI(x)];s.push(y)}}var u,d;if(typeof e=="object"&&e)for(const p of e){let{css:m,...g}=p;m=typeof m=="object"&&m||{};for(const x in g)g[x]=String(g[x]);const v=[g,m,!tI(m)];a.push(v)}return[o,r,s,a,l,c]},oQ=(t,e,n)=>{const[r,i,o,s]=sQ(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(d=>{function p(){for(let m=0;m<p[ph].length;m++){const[g,v]=p[ph][m];d.rules[g].apply(v)}return p[ph]=[],null}return p[ph]=[],p.rules={},Rh.forEach(m=>p.rules[m]={apply:g=>p[ph].push([m,g])}),p})(n):null,l=(a||n).rules,c=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,u=d=>{d=typeof d=="object"&&d||aQ;const{css:p,...m}=d,g={};for(const y in o)if(delete m[y],y in d){let _=d[y];typeof _=="object"&&_?g[y]={"@initial":o[y],..._}:(_=String(_),g[y]=_!=="undefined"||s.has(y)?_:o[y])}else g[y]=o[y];const v=new Set([...i]);for(const[y,_,w,M]of e.composers){n.rules.styled.cache.has(y)||(n.rules.styled.cache.add(y),xf(_,[`.${y}`],[],t,P=>{l.styled.apply(P)}));const A=sI(w,g,t.media),C=sI(M,g,t.media,!0);for(const P of A)if(P!==void 0)for(const[N,O,E]of P){const L=`${y}-${Cc(O)}-${N}`;v.add(L);const H=(E?n.rules.resonevar:n.rules.onevar).cache,W=E?l.resonevar:l.onevar;H.has(L)||(H.add(L),xf(O,[`.${L}`],[],t,Y=>{W.apply(Y)}))}for(const P of C)if(P!==void 0)for(const[N,O]of P){const E=`${y}-${Cc(O)}-${N}`;v.add(E),n.rules.allvar.cache.has(E)||(n.rules.allvar.cache.add(E),xf(O,[`.${E}`],[],t,L=>{l.allvar.apply(L)}))}}if(typeof p=="object"&&p){const y=`${r}-i${Cc(p)}-css`;v.add(y),n.rules.inline.cache.has(y)||(n.rules.inline.cache.add(y),xf(p,[`.${y}`],[],t,_=>{l.inline.apply(_)}))}for(const y of String(d.className||"").trim().split(/\s+/))y&&v.add(y);const x=m.className=[...v].join(" ");return{type:e.type,className:x,selector:c,props:m,toString:()=>x,deferredInjector:a}};return KT(u,{className:r,selector:c,[Tc]:e,toString:()=>(n.rules.styled.cache.has(r)||u(),r)})},sQ=t=>{let e="";const n=[],r={},i=[];for(const[o,,,,s,a]of t){e===""&&(e=o),n.push(o),i.push(...a);for(const l in s){const c=s[l];(r[l]===void 0||c!=="undefined"||a.includes(c))&&(r[l]=c)}}return[e,n,r,new Set(i)]},sI=(t,e,n,r)=>{const i=[];e:for(let[o,s,a]of t){if(a)continue;let l,c=0,u=!1;for(l in o){const d=o[l];let p=e[l];if(p!==d){if(typeof p!="object"||!p)continue e;{let m,g,v=0;for(const x in p){if(d===String(p[x])){if(x!=="@initial"){const y=x.slice(1);(g=g||[]).push(y in n?n[y]:x.replace(/^@media ?/,"")),u=!0}c+=v,m=!0}++v}if(g&&g.length&&(s={["@media "+g.join(", ")]:s}),!m)continue e}}}(i[c]=i[c]||[]).push([r?"cv":`${l}-${o[l]}`,s,u])}return i},aQ={},lQ=dd(),cQ=(t,e)=>lQ(t,()=>(...n)=>{const r=()=>{for(let i of n){i=typeof i=="object"&&i||{};let o=Cc(i);if(!e.rules.global.cache.has(o)){if(e.rules.global.cache.add(o),"@import"in i){let s=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(i["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,s++);delete i["@import"]}xf(i,[],[],t,s=>{e.rules.global.apply(s)})}}return""};return KT(r,{toString:r})}),uQ=dd(),fQ=(t,e)=>uQ(t,()=>n=>{const r=`${Aa(t.prefix)}k-${Cc(n)}`,i=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const o=[];xf(n,[],[],t,a=>o.push(a));const s=`@keyframes ${r}{${o.join("")}}`;e.rules.global.apply(s)}return r};return KT(i,{get name(){return i()},toString:i})}),dQ=class{constructor(t,e,n,r){this.token=t==null?"":String(t),this.value=e==null?"":String(e),this.scale=n==null?"":String(n),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Aa(this.prefix)+Aa(this.scale)+this.token}toString(){return this.computedValue}},hQ=dd(),pQ=(t,e)=>hQ(t,()=>(n,r)=>{r=typeof n=="object"&&n||Object(r);const i=`.${n=(n=typeof n=="string"?n:"")||`${Aa(t.prefix)}t-${Cc(r)}`}`,o={},s=[];for(const l in r){o[l]={};for(const c in r[l]){const u=`--${Aa(t.prefix)}${l}-${c}`,d=n4(String(r[l][c]),t.prefix,l);o[l][c]=new dQ(c,d,l,t.prefix),s.push(`${u}:${d}`)}}const a=()=>{if(s.length&&!e.rules.themed.cache.has(n)){e.rules.themed.cache.add(n);const l=`${r===t.theme?":root,":""}.${n}{${s.join(";")}}`;e.rules.themed.apply(l)}return n};return{...o,get className(){return a()},selector:i,toString:a}}),mQ=dd(),gQ=dd(),yQ=t=>{const e=(n=>{let r=!1;const i=mQ(n,o=>{r=!0;const s="prefix"in(o=typeof o=="object"&&o||{})?String(o.prefix):"",a=typeof o.media=="object"&&o.media||{},l=typeof o.root=="object"?o.root||null:globalThis.document||null,c=typeof o.theme=="object"&&o.theme||{},u={prefix:s,media:a,theme:c,themeMap:typeof o.themeMap=="object"&&o.themeMap||{...WJ},utils:typeof o.utils=="object"&&o.utils||{}},d=tQ(l),p={css:oI(u,d),globalCss:cQ(u,d),keyframes:fQ(u,d),createTheme:pQ(u,d),reset(){d.reset(),p.theme.toString()},theme:{},sheet:d,config:u,prefix:s,getCssText:d.toString,toString:d.toString};return String(p.theme=p.createTheme(c)),p});return r||i.reset(),i})(t);return e.styled=(({config:n,sheet:r})=>gQ(n,()=>{const i=oI(n,r);return(...o)=>{const s=i(...o),a=s[Tc].type,l=$.forwardRef((c,u)=>{const d=c&&c.as||a,{props:p,deferredInjector:m}=s(c);return delete p.as,p.ref=u,m?$.createElement($.Fragment,null,$.createElement(d,p),$.createElement(m,null)):$.createElement(d,p)});return l.className=s.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=s.selector,l.toString=()=>s.selector,l[Tc]=s[Tc],l}}))(e),e};function vQ(t,e,n){return Math.max(e,Math.min(t,n))}const Gr={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function aI(t,e,n){return e===0||Math.abs(e)===1/0?Math.pow(t,n*5):t*e*n/(e+n*t)}function lI(t,e,n,r=.15){return r===0?vQ(t,e,n):t<e?-aI(e-t,n-e,r)+e:t>n?+aI(t-n,n-e,r)+n:t}function xQ(t,[e,n],[r,i]){const[[o,s],[a,l]]=t;return[lI(e,o,s,r),lI(n,a,l,i)]}function _Q(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function SQ(t){var e=_Q(t,"string");return typeof e=="symbol"?e:String(e)}function yi(t,e,n){return e=SQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ln(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cI(Object(n),!0).forEach(function(r){yi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const r4={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function uI(t){return t?t[0].toUpperCase()+t.slice(1):""}const wQ=["enter","leave"];function bQ(t=!1,e){return t&&!wQ.includes(e)}function EQ(t,e="",n=!1){const r=r4[t],i=r&&r[e]||e;return"on"+uI(t)+uI(i)+(bQ(n,i)?"Capture":"")}const MQ=["gotpointercapture","lostpointercapture"];function TQ(t){let e=t.substring(2).toLowerCase();const n=!!~e.indexOf("passive");n&&(e=e.replace("passive",""));const r=MQ.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:n}}function CQ(t,e=""){const n=r4[t],r=n&&n[e]||e;return t+r}function A1(t){return"touches"in t}function i4(t){return A1(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function AQ(t){return Array.from(t.touches).filter(e=>{var n,r;return e.target===t.currentTarget||((n=t.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,e.target))})}function PQ(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function o4(t){return A1(t)?PQ(t)[0]:t}function RQ(t){return AQ(t).map(e=>e.identifier)}function ww(t){const e=o4(t);return A1(t)?e.identifier:e.pointerId}function fI(t){const e=o4(t);return[e.clientX,e.clientY]}function IQ(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:n,altKey:r,metaKey:i,ctrlKey:o}=t;Object.assign(e,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:o})}return e}function jv(t,...e){return typeof t=="function"?t(...e):t}function OQ(){}function LQ(...t){return t.length===0?OQ:t.length===1?t[0]:function(){let e;for(const n of t)e=n.apply(this,arguments)||e;return e}}function dI(t,e){return Object.assign({},e,t||{})}const kQ=32;class NQ{constructor(e,n,r){this.ctrl=e,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:n,ingKey:r,args:i}=this;n[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=e.target,n.currentTarget=e.currentTarget,n.lastOffset=r.from?jv(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=e.timeStamp)}computeValues(e){const n=this.state;n._values=e,n.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:n,config:r,shared:i}=this;n.args=this.args;let o=0;if(e&&(n.event=e,r.preventDefault&&e.cancelable&&n.event.preventDefault(),n.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,IQ(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,o=e.timeStamp-n.timeStamp,n.timeStamp=e.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const C=n._delta.map(Math.abs);Gr.addTo(n._distance,C)}this.axisIntent&&this.axisIntent(e);const[s,a]=n._movement,[l,c]=r.threshold,{_step:u,values:d}=n;if(r.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(s)>=l&&d[0]),u[1]===!1&&(u[1]=Math.abs(a)>=c&&d[1])):(u[0]===!1&&(u[0]=Math.abs(s)>=l&&Math.sign(s)*l),u[1]===!1&&(u[1]=Math.abs(a)>=c&&Math.sign(a)*c)),n.intentional=u[0]!==!1||u[1]!==!1,!n.intentional)return;const p=[0,0];if(r.hasCustomTransform){const[C,P]=d;p[0]=u[0]!==!1?C-u[0]:0,p[1]=u[1]!==!1?P-u[1]:0}else p[0]=u[0]!==!1?s-u[0]:0,p[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(p);const m=n.offset,g=n._active&&!n._blocked||n.active;g&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=i[this.ingKey]=n._active,e&&(n.first&&("bounds"in r&&(n._bounds=jv(r.bounds,n)),this.setup&&this.setup()),n.movement=p,this.computeOffset()));const[v,x]=n.offset,[[y,_],[w,M]]=n._bounds;n.overflow=[v<y?-1:v>_?1:0,x<w?-1:x>M?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const A=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=xQ(n._bounds,n.offset,A),n.delta=Gr.sub(n.offset,m),this.computeMovement(),g&&(!n.last||o>kQ)){n.delta=Gr.sub(n.offset,m);const C=n.delta.map(Math.abs);Gr.addTo(n.distance,C),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&o>0&&(n.velocity=[C[0]/o,C[1]/o],n.timeDelta=o)}}emit(){const e=this.state,n=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(Ln(Ln(Ln({},n),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function DQ([t,e],n){const r=Math.abs(t),i=Math.abs(e);if(r>i&&r>n)return"x";if(i>r&&i>n)return"y"}class UQ extends NQ{constructor(...e){super(...e),yi(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Gr.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Gr.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const n=this.state,r=this.config;if(!n.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[i4(e)]:r.axisThreshold;n.axis=DQ(n._movement,i)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const FQ=t=>t,hI=.15,s4={enabled(t=!0){return t},eventOptions(t,e,n){return Ln(Ln({},n.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[hI,hI];case!1:return[0,0];default:return Gr.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return Gr.toVector(t)},transform(t,e,n){const r=t||n.shared.transform;return this.hasCustomTransform=!!r,r||FQ},threshold(t){return Gr.toVector(t,0)}},zQ=0,xm=Ln(Ln({},s4),{},{axis(t,e,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(t=zQ){return t},bounds(t={}){if(typeof t=="function")return o=>xm.bounds(t(o));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:n=1/0,top:r=-1/0,bottom:i=1/0}=t;return[[e,n],[r,i]]}}),pI={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]};class BQ extends UQ{constructor(...e){super(...e),yi(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const n=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:n.left-r.left+e.offset[0],right:n.right-r.right+e.offset[0],top:n.top-r.top+e.offset[1],bottom:n.bottom-r.bottom+e.offset[1]};e._bounds=xm.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const n=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(e.buttons):n.pointerButtons!==-1&&n.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);n.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=ww(e),r._pointerActive=!0,this.computeValues(fI(e)),this.computeInitial(),n.preventScrollAxis&&i4(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):n.delay>0?(this.setupDelayTrigger(e),n.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const n=this.state,r=this.config;if(!n._pointerActive)return;const i=ww(e);if(n._pointerId!==void 0&&i!==n._pointerId)return;const o=fI(e);if(document.pointerLockElement===e.target?n._delta=[e.movementX,e.movementY]:(n._delta=Gr.sub(o,n._values),this.computeValues(o)),Gr.addTo(n._movement,n._delta),this.compute(e),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;const i=ww(e);if(n._pointerId!==void 0&&i!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[o,s]=n._distance;if(n.tap=o<=r.tapsThreshold&&s<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{const[a,l]=n._delta,[c,u]=n._movement,[d,p]=r.swipe.velocity,[m,g]=r.swipe.distance,v=r.swipe.duration;if(n.elapsedTime<v){const x=Math.abs(a/n.timeDelta),y=Math.abs(l/n.timeDelta);x>d&&Math.abs(c)>m&&(n.swipe[0]=Math.sign(a)),y>p&&Math.abs(u)>g&&(n.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const n=this.config,r=n.device;n.pointerLock&&e.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,HQ(e);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const n=pI[e.key];if(n){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=n(this.config.keyboardDisplacement,i),r._keyboardActive=!0,Gr.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in pI&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const n=this.config.device;e(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(n,"change",this.pointerMove.bind(this)),e(n,"end",this.pointerUp.bind(this)),e(n,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function HQ(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const _m=typeof window<"u"&&window.document&&window.document.createElement;function a4(){return _m&&"ontouchstart"in window}function VQ(){return a4()||_m&&window.navigator.maxTouchPoints>1}function $Q(){return _m&&"onpointerdown"in window}function WQ(){return _m&&"exitPointerLock"in window.document}function jQ(){try{return"constructor"in GestureEvent}catch{return!1}}const fo={isBrowser:_m,gesture:jQ(),touch:a4(),touchscreen:VQ(),pointer:$Q(),pointerLock:WQ()},GQ=250,XQ=180,YQ=.5,qQ=50,KQ=250,ZQ=10,mI={mouse:0,touch:0,pen:8},JQ=Ln(Ln({},xm),{},{device(t,e,{pointer:{touch:n=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&fo.pointerLock,fo.touch&&n?"touch":this.pointerLock?"mouse":fo.pointer&&!i?"pointer":fo.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&t?GQ:void 0,!(!fo.touchscreen||n===!1))return t||(n!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:n=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&n},threshold(t,e,{filterTaps:n=!1,tapsThreshold:r=3,axis:i=void 0}){const o=Gr.toVector(t,n?r:i?1:0);return this.filterTaps=n,this.tapsThreshold=r,o},swipe({velocity:t=YQ,distance:e=qQ,duration:n=KQ}={}){return{velocity:this.transform(Gr.toVector(t)),distance:this.transform(Gr.toVector(e)),duration:n}},delay(t=0){switch(t){case!0:return XQ;case!1:return 0;default:return t}},axisThreshold(t){return t?Ln(Ln({},mI),t):mI},keyboardDisplacement(t=ZQ){return t}});Ln(Ln({},s4),{},{device(t,e,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!fo.touch&&fo.gesture)return"gesture";if(fo.touch&&r)return"touch";if(fo.touchscreen){if(fo.pointer)return"pointer";if(fo.touch)return"touch"}},bounds(t,e,{scaleBounds:n={},angleBounds:r={}}){const i=s=>{const a=dI(jv(n,s),{min:-1/0,max:1/0});return[a.min,a.max]},o=s=>{const a=dI(jv(r,s),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof n!="function"&&typeof r!="function"?[i(),o()]:s=>[i(s),o(s)]},threshold(t,e,n){return this.lockDirection=n.axis==="lock",Gr.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});Ln(Ln({},xm),{},{mouseOnly:(t=!0)=>t});Ln(Ln({},xm),{},{mouseOnly:(t=!0)=>t});const l4=new Map,cE=new Map;function QQ(t){l4.set(t.key,t.engine),cE.set(t.key,t.resolver)}const eee={key:"drag",engine:BQ,resolver:JQ};function tee(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function nee(t,e){if(t==null)return{};var n=tee(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}const ree={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=fo.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},iee=["target","eventOptions","window","enabled","transform"];function Ay(t={},e){const n={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":n[r]=i.call(n,t[r],r,t);break;case"object":n[r]=Ay(t[r],i);break;case"boolean":i&&(n[r]=t[r]);break}return n}function oee(t,e,n={}){const r=t,{target:i,eventOptions:o,window:s,enabled:a,transform:l}=r,c=nee(r,iee);if(n.shared=Ay({target:i,eventOptions:o,window:s,enabled:a,transform:l},ree),e){const u=cE.get(e);n[e]=Ay(Ln({shared:n.shared},c),u)}else for(const u in c){const d=cE.get(u);d&&(n[u]=Ay(Ln({shared:n.shared},c[u]),d))}return n}class c4{constructor(e,n){yi(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=n}add(e,n,r,i,o){const s=this._listeners,a=CQ(n,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=Ln(Ln({},l),o);e.addEventListener(a,i,c);const u=()=>{e.removeEventListener(a,i,c),s.delete(u)};return s.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class see{constructor(){yi(this,"_timeouts",new Map)}add(e,n,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(n,r,...i))}remove(e){const n=this._timeouts.get(e);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class aee{constructor(e){yi(this,"gestures",new Set),yi(this,"_targetEventStore",new c4(this)),yi(this,"gestureEventStores",{}),yi(this,"gestureTimeoutStores",{}),yi(this,"handlers",{}),yi(this,"config",{}),yi(this,"pointerIds",new Set),yi(this,"touchIds",new Set),yi(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),lee(this,e)}setEventIds(e){if(A1(e))return this.touchIds=new Set(RQ(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,n){this.handlers=e,this.nativeHandlers=n}applyConfig(e,n){this.config=oee(e,n,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const n=this.config.shared,r={};let i;if(!(n.target&&(i=n.target(),!i))){if(n.enabled){for(const s of this.gestures){const a=this.config[s],l=gI(r,a.eventOptions,!!i);if(a.enabled){const c=l4.get(s);new c(this,e,s).bind(l)}}const o=gI(r,n.eventOptions,!!i);for(const s in this.nativeHandlers)o(s,"",a=>this.nativeHandlers[s](Ln(Ln({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const o in r)r[o]=LQ(...r[o]);if(!i)return r;for(const o in r){const{device:s,capture:a,passive:l}=TQ(o);this._targetEventStore.add(i,s,"",r[o],{capture:a,passive:l})}}}}function Xu(t,e){t.gestures.add(e),t.gestureEventStores[e]=new c4(t,e),t.gestureTimeoutStores[e]=new see}function lee(t,e){e.drag&&Xu(t,"drag"),e.wheel&&Xu(t,"wheel"),e.scroll&&Xu(t,"scroll"),e.move&&Xu(t,"move"),e.pinch&&Xu(t,"pinch"),e.hover&&Xu(t,"hover")}const gI=(t,e,n)=>(r,i,o,s={},a=!1)=>{var l,c;const u=(l=s.capture)!==null&&l!==void 0?l:e.capture,d=(c=s.passive)!==null&&c!==void 0?c:e.passive;let p=a?r:EQ(r,i,u);n&&d&&(p+="Passive"),t[p]=t[p]||[],t[p].push(o)};function cee(t,e={},n,r){const i=$.useMemo(()=>new aee(t),[]);if(i.applyHandlers(t,r),i.applyConfig(e,n),$.useEffect(i.effect.bind(i)),$.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function uee(t,e){return QQ(eee),cee({drag:t},e||{},"drag")}function ia(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function u4(t,e=[]){let n=[];function r(o,s){const a=R.createContext(s),l=n.length;n=[...n,s];function c(d){const{scope:p,children:m,...g}=d,v=(p==null?void 0:p[t][l])||a,x=R.useMemo(()=>g,Object.values(g));return k.jsx(v.Provider,{value:x,children:m})}function u(d,p){const m=(p==null?void 0:p[t][l])||a,g=R.useContext(m);if(g)return g;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${o}\``)}return c.displayName=o+"Provider",[c,u]}const i=()=>{const o=n.map(s=>R.createContext(s));return function(a){const l=(a==null?void 0:a[t])||o;return R.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,fee(i,...e)]}function fee(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(o)[`__scope${c}`];return{...a,...d}},{});return R.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}function hd(t){const e=R.useRef(t);return R.useEffect(()=>{e.current=t}),R.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function dee(t,e=globalThis==null?void 0:globalThis.document){const n=hd(t);R.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var hee="DismissableLayer",uE="dismissableLayer.update",pee="dismissableLayer.pointerDownOutside",mee="dismissableLayer.focusOutside",yI,f4=R.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),d4=R.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:a,...l}=t,c=R.useContext(f4),[u,d]=R.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=R.useState({}),g=Zc(e,P=>d(P)),v=Array.from(c.layers),[x]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(x),_=u?v.indexOf(u):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,M=_>=y,A=vee(P=>{const N=P.target,O=[...c.branches].some(E=>E.contains(N));!M||O||(i==null||i(P),s==null||s(P),P.defaultPrevented||a==null||a())},p),C=xee(P=>{const N=P.target;[...c.branches].some(E=>E.contains(N))||(o==null||o(P),s==null||s(P),P.defaultPrevented||a==null||a())},p);return dee(P=>{_===c.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&a&&(P.preventDefault(),a()))},p),R.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(yI=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),vI(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=yI)}},[u,p,n,c]),R.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),vI())},[u,c]),R.useEffect(()=>{const P=()=>m({});return document.addEventListener(uE,P),()=>document.removeEventListener(uE,P)},[]),k.jsx(Nl.div,{...l,ref:g,style:{pointerEvents:w?M?"auto":"none":void 0,...t.style},onFocusCapture:ia(t.onFocusCapture,C.onFocusCapture),onBlurCapture:ia(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:ia(t.onPointerDownCapture,A.onPointerDownCapture)})});d4.displayName=hee;var gee="DismissableLayerBranch",yee=R.forwardRef((t,e)=>{const n=R.useContext(f4),r=R.useRef(null),i=Zc(e,r);return R.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),k.jsx(Nl.div,{...t,ref:i})});yee.displayName=gee;function vee(t,e=globalThis==null?void 0:globalThis.document){const n=hd(t),r=R.useRef(!1),i=R.useRef(()=>{});return R.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let l=function(){h4(pee,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function xee(t,e=globalThis==null?void 0:globalThis.document){const n=hd(t),r=R.useRef(!1);return R.useEffect(()=>{const i=o=>{o.target&&!r.current&&h4(mee,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function vI(){const t=new CustomEvent(uE);document.dispatchEvent(t)}function h4(t,e,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?UJ(i,o):i.dispatchEvent(o)}var _ee=Bw.useId||(()=>{}),See=0;function wee(t){const[e,n]=R.useState(_ee());return zc(()=>{n(r=>r??String(See++))},[t]),e?`radix-${e}`:""}const bee=["top","right","bottom","left"],Ts=Math.min,Fi=Math.max,Gv=Math.round,X0=Math.floor,bl=t=>({x:t,y:t}),Eee={left:"right",right:"left",bottom:"top",top:"bottom"},Mee={start:"end",end:"start"};function fE(t,e,n){return Fi(t,Ts(e,n))}function Pa(t,e){return typeof t=="function"?t(e):t}function Ra(t){return t.split("-")[0]}function pd(t){return t.split("-")[1]}function ZT(t){return t==="x"?"y":"x"}function JT(t){return t==="y"?"height":"width"}function El(t){return["top","bottom"].includes(Ra(t))?"y":"x"}function QT(t){return ZT(El(t))}function Tee(t,e,n){n===void 0&&(n=!1);const r=pd(t),i=QT(t),o=JT(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=Xv(s)),[s,Xv(s)]}function Cee(t){const e=Xv(t);return[dE(t),e,dE(e)]}function dE(t){return t.replace(/start|end/g,e=>Mee[e])}function Aee(t,e,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?o:s;default:return[]}}function Pee(t,e,n,r){const i=pd(t);let o=Aee(Ra(t),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),e&&(o=o.concat(o.map(dE)))),o}function Xv(t){return t.replace(/left|right|bottom|top/g,e=>Eee[e])}function Ree(t){return{top:0,right:0,bottom:0,left:0,...t}}function p4(t){return typeof t!="number"?Ree(t):{top:t,right:t,bottom:t,left:t}}function Yv(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function xI(t,e,n){let{reference:r,floating:i}=t;const o=El(e),s=QT(e),a=JT(s),l=Ra(e),c=o==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-i.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-i.width,y:d};break;default:m={x:r.x,y:r.y}}switch(pd(e)){case"start":m[s]-=p*(n&&c?-1:1);break;case"end":m[s]+=p*(n&&c?-1:1);break}return m}const Iee=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let c=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=xI(c,r,l),p=r,m={},g=0;for(let v=0;v<a.length;v++){const{name:x,fn:y}=a[v],{x:_,y:w,data:M,reset:A}=await y({x:u,y:d,initialPlacement:r,placement:p,strategy:i,middlewareData:m,rects:c,platform:s,elements:{reference:t,floating:e}});u=_??u,d=w??d,m={...m,[x]:{...m[x],...M}},A&&g<=50&&(g++,typeof A=="object"&&(A.placement&&(p=A.placement),A.rects&&(c=A.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:i}):A.rects),{x:u,y:d}=xI(c,p,l)),v=-1)}return{x:u,y:d,placement:p,strategy:i,middlewareData:m}};async function jp(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:p=!1,padding:m=0}=Pa(e,t),g=p4(m),x=a[p?d==="floating"?"reference":"floating":d],y=Yv(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(x)))==null||n?x:x.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),_=d==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),M=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},A=Yv(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:w,strategy:l}):_);return{top:(y.top-A.top+g.top)/M.y,bottom:(A.bottom-y.bottom+g.bottom)/M.y,left:(y.left-A.left+g.left)/M.x,right:(A.right-y.right+g.right)/M.x}}const Oee=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:s,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Pa(t,e)||{};if(c==null)return{};const d=p4(u),p={x:n,y:r},m=QT(i),g=JT(m),v=await s.getDimensions(c),x=m==="y",y=x?"top":"left",_=x?"bottom":"right",w=x?"clientHeight":"clientWidth",M=o.reference[g]+o.reference[m]-p[m]-o.floating[g],A=p[m]-o.reference[m],C=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let P=C?C[w]:0;(!P||!await(s.isElement==null?void 0:s.isElement(C)))&&(P=a.floating[w]||o.floating[g]);const N=M/2-A/2,O=P/2-v[g]/2-1,E=Ts(d[y],O),L=Ts(d[_],O),H=E,W=P-v[g]-L,Y=P/2-v[g]/2+N,K=fE(H,Y,W),J=!l.arrow&&pd(i)!=null&&Y!==K&&o.reference[g]/2-(Y<H?E:L)-v[g]/2<0,Q=J?Y<H?Y-H:Y-W:0;return{[m]:p[m]+Q,data:{[m]:K,centerOffset:Y-K-Q,...J&&{alignmentOffset:Q}},reset:J}}}),Lee=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...x}=Pa(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const y=Ra(i),_=El(a),w=Ra(a)===a,M=await(l.isRTL==null?void 0:l.isRTL(c.floating)),A=p||(w||!v?[Xv(a)]:Cee(a)),C=g!=="none";!p&&C&&A.push(...Pee(a,v,g,M));const P=[a,...A],N=await jp(e,x),O=[];let E=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&O.push(N[y]),d){const Y=Tee(i,s,M);O.push(N[Y[0]],N[Y[1]])}if(E=[...E,{placement:i,overflows:O}],!O.every(Y=>Y<=0)){var L,H;const Y=(((L=o.flip)==null?void 0:L.index)||0)+1,K=P[Y];if(K)return{data:{index:Y,overflows:E},reset:{placement:K}};let J=(H=E.filter(Q=>Q.overflows[0]<=0).sort((Q,D)=>Q.overflows[1]-D.overflows[1])[0])==null?void 0:H.placement;if(!J)switch(m){case"bestFit":{var W;const Q=(W=E.filter(D=>{if(C){const G=El(D.placement);return G===_||G==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(G=>G>0).reduce((G,X)=>G+X,0)]).sort((D,G)=>D[1]-G[1])[0])==null?void 0:W[0];Q&&(J=Q);break}case"initialPlacement":J=a;break}if(i!==J)return{reset:{placement:J}}}return{}}}};function _I(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function SI(t){return bee.some(e=>t[e]>=0)}const kee=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Pa(t,e);switch(r){case"referenceHidden":{const o=await jp(e,{...i,elementContext:"reference"}),s=_I(o,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:SI(s)}}}case"escaped":{const o=await jp(e,{...i,altBoundary:!0}),s=_I(o,n.floating);return{data:{escapedOffsets:s,escaped:SI(s)}}}default:return{}}}}};async function Nee(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=Ra(n),a=pd(n),l=El(n)==="y",c=["left","top"].includes(s)?-1:1,u=o&&l?-1:1,d=Pa(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof g=="number"&&(m=a==="end"?g*-1:g),l?{x:m*u,y:p*c}:{x:p*c,y:m*u}}const Dee=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=e,l=await Nee(e,t);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},Uee=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:x=>{let{x:y,y:_}=x;return{x:y,y:_}}},...l}=Pa(t,e),c={x:n,y:r},u=await jp(e,l),d=El(Ra(i)),p=ZT(d);let m=c[p],g=c[d];if(o){const x=p==="y"?"top":"left",y=p==="y"?"bottom":"right",_=m+u[x],w=m-u[y];m=fE(_,m,w)}if(s){const x=d==="y"?"top":"left",y=d==="y"?"bottom":"right",_=g+u[x],w=g-u[y];g=fE(_,g,w)}const v=a.fn({...e,[p]:m,[d]:g});return{...v,data:{x:v.x-n,y:v.y-r}}}}},Fee=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:o,middlewareData:s}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Pa(t,e),u={x:n,y:r},d=El(i),p=ZT(d);let m=u[p],g=u[d];const v=Pa(a,e),x=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const w=p==="y"?"height":"width",M=o.reference[p]-o.floating[w]+x.mainAxis,A=o.reference[p]+o.reference[w]-x.mainAxis;m<M?m=M:m>A&&(m=A)}if(c){var y,_;const w=p==="y"?"width":"height",M=["top","left"].includes(Ra(i)),A=o.reference[d]-o.floating[w]+(M&&((y=s.offset)==null?void 0:y[d])||0)+(M?0:x.crossAxis),C=o.reference[d]+o.reference[w]+(M?0:((_=s.offset)==null?void 0:_[d])||0)-(M?x.crossAxis:0);g<A?g=A:g>C&&(g=C)}return{[p]:m,[d]:g}}}},zee=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:r,platform:i,elements:o}=e,{apply:s=()=>{},...a}=Pa(t,e),l=await jp(e,a),c=Ra(n),u=pd(n),d=El(n)==="y",{width:p,height:m}=r.floating;let g,v;c==="top"||c==="bottom"?(g=c,v=u===(await(i.isRTL==null?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(v=c,g=u==="end"?"top":"bottom");const x=m-l.top-l.bottom,y=p-l.left-l.right,_=Ts(m-l[g],x),w=Ts(p-l[v],y),M=!e.middlewareData.shift;let A=_,C=w;if(d?C=u||M?Ts(w,y):y:A=u||M?Ts(_,x):x,M&&!u){const N=Fi(l.left,0),O=Fi(l.right,0),E=Fi(l.top,0),L=Fi(l.bottom,0);d?C=p-2*(N!==0||O!==0?N+O:Fi(l.left,l.right)):A=m-2*(E!==0||L!==0?E+L:Fi(l.top,l.bottom))}await s({...e,availableWidth:C,availableHeight:A});const P=await i.getDimensions(o.floating);return p!==P.width||m!==P.height?{reset:{rects:!0}}:{}}}};function md(t){return m4(t)?(t.nodeName||"").toLowerCase():"#document"}function Xi(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function La(t){var e;return(e=(m4(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function m4(t){return t instanceof Node||t instanceof Xi(t).Node}function Go(t){return t instanceof Element||t instanceof Xi(t).Element}function Ds(t){return t instanceof HTMLElement||t instanceof Xi(t).HTMLElement}function wI(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Xi(t).ShadowRoot}function Sm(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Xo(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function Bee(t){return["table","td","th"].includes(md(t))}function P1(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function eC(t){const e=tC(),n=Go(t)?Xo(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Hee(t){let e=Ml(t);for(;Ds(e)&&!Xf(e);){if(eC(e))return e;if(P1(e))return null;e=Ml(e)}return null}function tC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Xf(t){return["html","body","#document"].includes(md(t))}function Xo(t){return Xi(t).getComputedStyle(t)}function R1(t){return Go(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ml(t){if(md(t)==="html")return t;const e=t.assignedSlot||t.parentNode||wI(t)&&t.host||La(t);return wI(e)?e.host:e}function g4(t){const e=Ml(t);return Xf(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ds(e)&&Sm(e)?e:g4(e)}function Gp(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=g4(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),s=Xi(i);if(o){const a=hE(s);return e.concat(s,s.visualViewport||[],Sm(i)?i:[],a&&n?Gp(a):[])}return e.concat(i,Gp(i,[],n))}function hE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function y4(t){const e=Xo(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Ds(t),o=i?t.offsetWidth:n,s=i?t.offsetHeight:r,a=Gv(n)!==o||Gv(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function nC(t){return Go(t)?t:t.contextElement}function Of(t){const e=nC(t);if(!Ds(e))return bl(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=y4(e);let s=(o?Gv(n.width):n.width)/r,a=(o?Gv(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const Vee=bl(0);function v4(t){const e=Xi(t);return!tC()||!e.visualViewport?Vee:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function $ee(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Xi(t)?!1:e}function Bc(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=nC(t);let s=bl(1);e&&(r?Go(r)&&(s=Of(r)):s=Of(t));const a=$ee(o,n,r)?v4(o):bl(0);let l=(i.left+a.x)/s.x,c=(i.top+a.y)/s.y,u=i.width/s.x,d=i.height/s.y;if(o){const p=Xi(o),m=r&&Go(r)?Xi(r):r;let g=p,v=hE(g);for(;v&&r&&m!==g;){const x=Of(v),y=v.getBoundingClientRect(),_=Xo(v),w=y.left+(v.clientLeft+parseFloat(_.paddingLeft))*x.x,M=y.top+(v.clientTop+parseFloat(_.paddingTop))*x.y;l*=x.x,c*=x.y,u*=x.x,d*=x.y,l+=w,c+=M,g=Xi(v),v=hE(g)}}return Yv({width:u,height:d,x:l,y:c})}function Wee(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",s=La(r),a=e?P1(e.floating):!1;if(r===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},c=bl(1);const u=bl(0),d=Ds(r);if((d||!d&&!o)&&((md(r)!=="body"||Sm(s))&&(l=R1(r)),Ds(r))){const p=Bc(r);c=Of(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x,y:n.y*c.y-l.scrollTop*c.y+u.y}}function jee(t){return Array.from(t.getClientRects())}function x4(t){return Bc(La(t)).left+R1(t).scrollLeft}function Gee(t){const e=La(t),n=R1(t),r=t.ownerDocument.body,i=Fi(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Fi(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+x4(t);const a=-n.scrollTop;return Xo(r).direction==="rtl"&&(s+=Fi(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function Xee(t,e){const n=Xi(t),r=La(t),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const c=tC();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}function Yee(t,e){const n=Bc(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=Ds(t)?Of(t):bl(1),s=t.clientWidth*o.x,a=t.clientHeight*o.y,l=i*o.x,c=r*o.y;return{width:s,height:a,x:l,y:c}}function bI(t,e,n){let r;if(e==="viewport")r=Xee(t,n);else if(e==="document")r=Gee(La(t));else if(Go(e))r=Yee(e,n);else{const i=v4(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return Yv(r)}function _4(t,e){const n=Ml(t);return n===e||!Go(n)||Xf(n)?!1:Xo(n).position==="fixed"||_4(n,e)}function qee(t,e){const n=e.get(t);if(n)return n;let r=Gp(t,[],!1).filter(a=>Go(a)&&md(a)!=="body"),i=null;const o=Xo(t).position==="fixed";let s=o?Ml(t):t;for(;Go(s)&&!Xf(s);){const a=Xo(s),l=eC(s);!l&&a.position==="fixed"&&(i=null),(o?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Sm(s)&&!l&&_4(t,s))?r=r.filter(u=>u!==s):i=a,s=Ml(s)}return e.set(t,r),r}function Kee(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[...n==="clippingAncestors"?P1(e)?[]:qee(e,this._c):[].concat(n),r],a=s[0],l=s.reduce((c,u)=>{const d=bI(e,u,i);return c.top=Fi(d.top,c.top),c.right=Ts(d.right,c.right),c.bottom=Ts(d.bottom,c.bottom),c.left=Fi(d.left,c.left),c},bI(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Zee(t){const{width:e,height:n}=y4(t);return{width:e,height:n}}function Jee(t,e,n){const r=Ds(e),i=La(e),o=n==="fixed",s=Bc(t,!0,o,e);let a={scrollLeft:0,scrollTop:0};const l=bl(0);if(r||!r&&!o)if((md(e)!=="body"||Sm(i))&&(a=R1(e)),r){const d=Bc(e,!0,o,e);l.x=d.x+e.clientLeft,l.y=d.y+e.clientTop}else i&&(l.x=x4(i));const c=s.left+a.scrollLeft-l.x,u=s.top+a.scrollTop-l.y;return{x:c,y:u,width:s.width,height:s.height}}function bw(t){return Xo(t).position==="static"}function EI(t,e){return!Ds(t)||Xo(t).position==="fixed"?null:e?e(t):t.offsetParent}function S4(t,e){const n=Xi(t);if(P1(t))return n;if(!Ds(t)){let i=Ml(t);for(;i&&!Xf(i);){if(Go(i)&&!bw(i))return i;i=Ml(i)}return n}let r=EI(t,e);for(;r&&Bee(r)&&bw(r);)r=EI(r,e);return r&&Xf(r)&&bw(r)&&!eC(r)?n:r||Hee(t)||n}const Qee=async function(t){const e=this.getOffsetParent||S4,n=this.getDimensions,r=await n(t.floating);return{reference:Jee(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function ete(t){return Xo(t).direction==="rtl"}const tte={convertOffsetParentRelativeRectToViewportRelativeRect:Wee,getDocumentElement:La,getClippingRect:Kee,getOffsetParent:S4,getElementRects:Qee,getClientRects:jee,getDimensions:Zee,getScale:Of,isElement:Go,isRTL:ete};function nte(t,e){let n=null,r;const i=La(t);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const{left:c,top:u,width:d,height:p}=t.getBoundingClientRect();if(a||e(),!d||!p)return;const m=X0(u),g=X0(i.clientWidth-(c+d)),v=X0(i.clientHeight-(u+p)),x=X0(c),_={rootMargin:-m+"px "+-g+"px "+-v+"px "+-x+"px",threshold:Fi(0,Ts(1,l))||1};let w=!0;function M(A){const C=A[0].intersectionRatio;if(C!==l){if(!w)return s();C?s(!1,C):r=setTimeout(()=>{s(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(M,{..._,root:i.ownerDocument})}catch{n=new IntersectionObserver(M,_)}n.observe(t)}return s(!0),o}function rte(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=nC(t),u=i||o?[...c?Gp(c):[],...Gp(e)]:[];u.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),o&&y.addEventListener("resize",n)});const d=c&&a?nte(c,n):null;let p=-1,m=null;s&&(m=new ResizeObserver(y=>{let[_]=y;_&&_.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let g,v=l?Bc(t):null;l&&x();function x(){const y=Bc(t);v&&(y.x!==v.x||y.y!==v.y||y.width!==v.width||y.height!==v.height)&&n(),v=y,g=requestAnimationFrame(x)}return n(),()=>{var y;u.forEach(_=>{i&&_.removeEventListener("scroll",n),o&&_.removeEventListener("resize",n)}),d==null||d(),(y=m)==null||y.disconnect(),m=null,l&&cancelAnimationFrame(g)}}const ite=Dee,ote=Uee,ste=Lee,ate=zee,lte=kee,MI=Oee,cte=Fee,ute=(t,e,n)=>{const r=new Map,i={platform:tte,...n},o={...i.platform,_c:r};return Iee(t,e,{...i,platform:o})};var Py=typeof document<"u"?R.useLayoutEffect:R.useEffect;function qv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!qv(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&t.$$typeof)&&!qv(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function w4(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function TI(t,e){const n=w4(t);return Math.round(e*n)/n}function CI(t){const e=R.useRef(t);return Py(()=>{e.current=t}),e}function fte(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=R.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=R.useState(r);qv(p,r)||m(r);const[g,v]=R.useState(null),[x,y]=R.useState(null),_=R.useCallback(Q=>{Q!==C.current&&(C.current=Q,v(Q))},[]),w=R.useCallback(Q=>{Q!==P.current&&(P.current=Q,y(Q))},[]),M=o||g,A=s||x,C=R.useRef(null),P=R.useRef(null),N=R.useRef(u),O=l!=null,E=CI(l),L=CI(i),H=R.useCallback(()=>{if(!C.current||!P.current)return;const Q={placement:e,strategy:n,middleware:p};L.current&&(Q.platform=L.current),ute(C.current,P.current,Q).then(D=>{const G={...D,isPositioned:!0};W.current&&!qv(N.current,G)&&(N.current=G,ma.flushSync(()=>{d(G)}))})},[p,e,n,L]);Py(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,d(Q=>({...Q,isPositioned:!1})))},[c]);const W=R.useRef(!1);Py(()=>(W.current=!0,()=>{W.current=!1}),[]),Py(()=>{if(M&&(C.current=M),A&&(P.current=A),M&&A){if(E.current)return E.current(M,A,H);H()}},[M,A,H,E,O]);const Y=R.useMemo(()=>({reference:C,floating:P,setReference:_,setFloating:w}),[_,w]),K=R.useMemo(()=>({reference:M,floating:A}),[M,A]),J=R.useMemo(()=>{const Q={position:n,left:0,top:0};if(!K.floating)return Q;const D=TI(K.floating,u.x),G=TI(K.floating,u.y);return a?{...Q,transform:"translate("+D+"px, "+G+"px)",...w4(K.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:D,top:G}},[n,a,K.floating,u.x,u.y]);return R.useMemo(()=>({...u,update:H,refs:Y,elements:K,floatingStyles:J}),[u,H,Y,K,J])}const dte=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?MI({element:r.current,padding:i}).fn(n):{}:r?MI({element:r,padding:i}).fn(n):{}}}},hte=(t,e)=>({...ite(t),options:[t,e]}),pte=(t,e)=>({...ote(t),options:[t,e]}),mte=(t,e)=>({...cte(t),options:[t,e]}),gte=(t,e)=>({...ste(t),options:[t,e]}),yte=(t,e)=>({...ate(t),options:[t,e]}),vte=(t,e)=>({...lte(t),options:[t,e]}),xte=(t,e)=>({...dte(t),options:[t,e]});var _te="Arrow",b4=R.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...o}=t;return k.jsx(Nl.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:k.jsx("polygon",{points:"0,0 30,0 15,10"})})});b4.displayName=_te;var Ste=b4;function wte(t){const[e,n]=R.useState(void 0);return zc(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let s,a;if("borderBoxSize"in o){const l=o.borderBoxSize,c=Array.isArray(l)?l[0]:l;s=c.inlineSize,a=c.blockSize}else s=t.offsetWidth,a=t.offsetHeight;n({width:s,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var rC="Popper",[E4,M4]=u4(rC),[bte,T4]=E4(rC),C4=t=>{const{__scopePopper:e,children:n}=t,[r,i]=R.useState(null);return k.jsx(bte,{scope:e,anchor:r,onAnchorChange:i,children:n})};C4.displayName=rC;var A4="PopperAnchor",P4=R.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,o=T4(A4,n),s=R.useRef(null),a=Zc(e,s);return R.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:k.jsx(Nl.div,{...i,ref:a})});P4.displayName=A4;var iC="PopperContent",[Ete,Mte]=E4(iC),R4=R.forwardRef((t,e)=>{var Ae,qe,ut,Ye,Ve,B;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:g,...v}=t,x=T4(iC,n),[y,_]=R.useState(null),w=Zc(e,me=>_(me)),[M,A]=R.useState(null),C=wte(M),P=(C==null?void 0:C.width)??0,N=(C==null?void 0:C.height)??0,O=r+(o!=="center"?"-"+o:""),E=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},L=Array.isArray(c)?c:[c],H=L.length>0,W={padding:E,boundary:L.filter(Cte),altBoundary:H},{refs:Y,floatingStyles:K,placement:J,isPositioned:Q,middlewareData:D}=fte({strategy:"fixed",placement:O,whileElementsMounted:(...me)=>rte(...me,{animationFrame:m==="always"}),elements:{reference:x.anchor},middleware:[hte({mainAxis:i+N,alignmentAxis:s}),l&&pte({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?mte():void 0,...W}),l&&gte({...W}),yte({...W,apply:({elements:me,rects:be,availableWidth:ke,availableHeight:ye})=>{const{width:$e,height:Ne}=be.reference,ze=me.floating.style;ze.setProperty("--radix-popper-available-width",`${ke}px`),ze.setProperty("--radix-popper-available-height",`${ye}px`),ze.setProperty("--radix-popper-anchor-width",`${$e}px`),ze.setProperty("--radix-popper-anchor-height",`${Ne}px`)}}),M&&xte({element:M,padding:a}),Ate({arrowWidth:P,arrowHeight:N}),p&&vte({strategy:"referenceHidden",...W})]}),[G,X]=L4(J),ne=hd(g);zc(()=>{Q&&(ne==null||ne())},[Q,ne]);const pe=(Ae=D.arrow)==null?void 0:Ae.x,De=(qe=D.arrow)==null?void 0:qe.y,ae=((ut=D.arrow)==null?void 0:ut.centerOffset)!==0,[_e,Re]=R.useState();return zc(()=>{y&&Re(window.getComputedStyle(y).zIndex)},[y]),k.jsx("div",{ref:Y.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:Q?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:_e,"--radix-popper-transform-origin":[(Ye=D.transformOrigin)==null?void 0:Ye.x,(Ve=D.transformOrigin)==null?void 0:Ve.y].join(" "),...((B=D.hide)==null?void 0:B.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:k.jsx(Ete,{scope:n,placedSide:G,onArrowChange:A,arrowX:pe,arrowY:De,shouldHideArrow:ae,children:k.jsx(Nl.div,{"data-side":G,"data-align":X,...v,ref:w,style:{...v.style,animation:Q?void 0:"none"}})})})});R4.displayName=iC;var I4="PopperArrow",Tte={top:"bottom",right:"left",bottom:"top",left:"right"},O4=R.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,o=Mte(I4,r),s=Tte[o.placedSide];return k.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:k.jsx(Ste,{...i,ref:n,style:{...i.style,display:"block"}})})});O4.displayName=I4;function Cte(t){return t!==null}var Ate=t=>({name:"transformOrigin",options:t,fn(e){var x,y,_;const{placement:n,rects:r,middlewareData:i}=e,s=((x=i.arrow)==null?void 0:x.centerOffset)!==0,a=s?0:t.arrowWidth,l=s?0:t.arrowHeight,[c,u]=L4(n),d={start:"0%",center:"50%",end:"100%"}[u],p=(((y=i.arrow)==null?void 0:y.x)??0)+a/2,m=(((_=i.arrow)==null?void 0:_.y)??0)+l/2;let g="",v="";return c==="bottom"?(g=s?d:`${p}px`,v=`${-l}px`):c==="top"?(g=s?d:`${p}px`,v=`${r.floating.height+l}px`):c==="right"?(g=`${-l}px`,v=s?d:`${m}px`):c==="left"&&(g=`${r.floating.width+l}px`,v=s?d:`${m}px`),{data:{x:g,y:v}}}});function L4(t){const[e,n="center"]=t.split("-");return[e,n]}var Pte=C4,Rte=P4,Ite=R4,Ote=O4;function Lte(t,e){return R.useReducer((n,r)=>e[n][r]??n,t)}var k4=t=>{const{present:e,children:n}=t,r=kte(e),i=typeof n=="function"?n({present:r.isPresent}):R.Children.only(n),o=Zc(r.ref,Nte(i));return typeof n=="function"||r.isPresent?R.cloneElement(i,{ref:o}):null};k4.displayName="Presence";function kte(t){const[e,n]=R.useState(),r=R.useRef({}),i=R.useRef(t),o=R.useRef("none"),s=t?"mounted":"unmounted",[a,l]=Lte(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return R.useEffect(()=>{const c=Y0(r.current);o.current=a==="mounted"?c:"none"},[a]),zc(()=>{const c=r.current,u=i.current;if(u!==t){const p=o.current,m=Y0(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&p!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),zc(()=>{if(e){const c=d=>{const m=Y0(r.current).includes(d.animationName);d.target===e&&m&&ma.flushSync(()=>l("ANIMATION_END"))},u=d=>{d.target===e&&(o.current=Y0(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:R.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Y0(t){return(t==null?void 0:t.animationName)||"none"}function Nte(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Dte({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=Ute({defaultProp:e,onChange:n}),o=t!==void 0,s=o?t:r,a=hd(n),l=R.useCallback(c=>{if(o){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else i(c)},[o,t,i,a]);return[s,l]}function Ute({defaultProp:t,onChange:e}){const n=R.useState(t),[r]=n,i=R.useRef(r),o=hd(e);return R.useEffect(()=>{i.current!==r&&(o(r),i.current=r)},[r,i,o]),n}var Fte="VisuallyHidden",N4=R.forwardRef((t,e)=>k.jsx(Nl.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));N4.displayName=Fte;var zte=N4,[I1,qde]=u4("Tooltip",[M4]),O1=M4(),Bte="TooltipProvider",pE="tooltip.open",[Kde,oC]=I1(Bte),L1="Tooltip",[Hte,k1]=I1(L1),D4=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i=!1,onOpenChange:o,disableHoverableContent:s,delayDuration:a}=t,l=oC(L1,t.__scopeTooltip),c=O1(e),[u,d]=R.useState(null),p=wee(),m=R.useRef(0),g=s??l.disableHoverableContent,v=a??l.delayDuration,x=R.useRef(!1),[y=!1,_]=Dte({prop:r,defaultProp:i,onChange:P=>{P?(l.onOpen(),document.dispatchEvent(new CustomEvent(pE))):l.onClose(),o==null||o(P)}}),w=R.useMemo(()=>y?x.current?"delayed-open":"instant-open":"closed",[y]),M=R.useCallback(()=>{window.clearTimeout(m.current),x.current=!1,_(!0)},[_]),A=R.useCallback(()=>{window.clearTimeout(m.current),_(!1)},[_]),C=R.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{x.current=!0,_(!0)},v)},[v,_]);return R.useEffect(()=>()=>window.clearTimeout(m.current),[]),k.jsx(Pte,{...c,children:k.jsx(Hte,{scope:e,contentId:p,open:y,stateAttribute:w,trigger:u,onTriggerChange:d,onTriggerEnter:R.useCallback(()=>{l.isOpenDelayed?C():M()},[l.isOpenDelayed,C,M]),onTriggerLeave:R.useCallback(()=>{g?A():window.clearTimeout(m.current)},[A,g]),onOpen:M,onClose:A,disableHoverableContent:g,children:n})})};D4.displayName=L1;var mE="TooltipTrigger",U4=R.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=k1(mE,n),o=oC(mE,n),s=O1(n),a=R.useRef(null),l=Zc(e,a,i.onTriggerChange),c=R.useRef(!1),u=R.useRef(!1),d=R.useCallback(()=>c.current=!1,[]);return R.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),k.jsx(Rte,{asChild:!0,...s,children:k.jsx(Nl.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:ia(t.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:ia(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:ia(t.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:ia(t.onFocus,()=>{c.current||i.onOpen()}),onBlur:ia(t.onBlur,i.onClose),onClick:ia(t.onClick,i.onClose)})})});U4.displayName=mE;var Vte="TooltipPortal",[Zde,$te]=I1(Vte,{forceMount:void 0}),Yf="TooltipContent",F4=R.forwardRef((t,e)=>{const n=$te(Yf,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...o}=t,s=k1(Yf,t.__scopeTooltip);return k.jsx(k4,{present:r||s.open,children:s.disableHoverableContent?k.jsx(z4,{side:i,...o,ref:e}):k.jsx(Wte,{side:i,...o,ref:e})})}),Wte=R.forwardRef((t,e)=>{const n=k1(Yf,t.__scopeTooltip),r=oC(Yf,t.__scopeTooltip),i=R.useRef(null),o=Zc(e,i),[s,a]=R.useState(null),{trigger:l,onClose:c}=n,u=i.current,{onPointerInTransitChange:d}=r,p=R.useCallback(()=>{a(null),d(!1)},[d]),m=R.useCallback((g,v)=>{const x=g.currentTarget,y={x:g.clientX,y:g.clientY},_=Xte(y,x.getBoundingClientRect()),w=Yte(y,_),M=qte(v.getBoundingClientRect()),A=Zte([...w,...M]);a(A),d(!0)},[d]);return R.useEffect(()=>()=>p(),[p]),R.useEffect(()=>{if(l&&u){const g=x=>m(x,u),v=x=>m(x,l);return l.addEventListener("pointerleave",g),u.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",v)}}},[l,u,m,p]),R.useEffect(()=>{if(s){const g=v=>{const x=v.target,y={x:v.clientX,y:v.clientY},_=(l==null?void 0:l.contains(x))||(u==null?void 0:u.contains(x)),w=!Kte(y,s);_?p():w&&(p(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,u,s,c,p]),k.jsx(z4,{...t,ref:o})}),[jte,Gte]=I1(L1,{isInside:!1}),z4=R.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:s,...a}=t,l=k1(Yf,n),c=O1(n),{onClose:u}=l;return R.useEffect(()=>(document.addEventListener(pE,u),()=>document.removeEventListener(pE,u)),[u]),R.useEffect(()=>{if(l.trigger){const d=p=>{const m=p.target;m!=null&&m.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),k.jsx(d4,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:k.jsxs(Ite,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[k.jsx(KF,{children:r}),k.jsx(jte,{scope:n,isInside:!0,children:k.jsx(zte,{id:l.contentId,role:"tooltip",children:i||r})})]})})});F4.displayName=Yf;var B4="TooltipArrow",H4=R.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=O1(n);return Gte(B4,n).isInside?null:k.jsx(Ote,{...i,...r,ref:e})});H4.displayName=B4;function Xte(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(n,r,i,o)){case o:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Yte(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function qte(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function Kte(t,e){const{x:n,y:r}=t;let i=!1;for(let o=0,s=e.length-1;o<e.length;s=o++){const a=e[o].x,l=e[o].y,c=e[s].x,u=e[s].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function Zte(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Jte(e)}function Jte(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const o=e[e.length-1],s=e[e.length-2];if((o.x-s.x)*(i.y-s.y)>=(o.y-s.y)*(i.x-s.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const o=n[n.length-1],s=n[n.length-2];if((o.x-s.x)*(i.y-s.y)>=(o.y-s.y)*(i.x-s.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Qte=D4,ene=U4,tne=F4,nne=H4;function rne(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function sn(t,e){if(t==null)return{};var n=rne(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}let Pn;(function(t){t[t.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",t[t.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",t[t.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",t[t.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",t[t.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",t[t.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",t[t.THEME_ERROR=6]="THEME_ERROR",t[t.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",t[t.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",t[t.EMPTY_KEY=9]="EMPTY_KEY"})(Pn||(Pn={}));const ine={[Pn.UNSUPPORTED_INPUT]:(t,e)=>[`An input with type \`${t}\` input was found at path \`${e}\` but it's not supported yet.`],[Pn.NO_COMPONENT_FOR_TYPE]:(t,e)=>[`Type \`${t}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[Pn.UNKNOWN_INPUT]:(t,e)=>[`input at path \`${t}\` is not recognized.`,e],[Pn.DUPLICATE_KEYS]:(t,e,n)=>[`Key \`${t}\` of path \`${e}\` already exists at path \`${n}\`. Even nested keys need to be unique. Rename one of the keys.`],[Pn.ALREADY_REGISTERED_TYPE]:t=>[`Type ${t} has already been registered. You can't register a component with the same type.`],[Pn.CLIPBOARD_ERROR]:t=>["Error copying the value",t],[Pn.THEME_ERROR]:(t,e)=>[`Error accessing the theme \`${t}.${e}\` value.`],[Pn.PATH_DOESNT_EXIST]:t=>[`Error getting the value at path \`${t}\`. There is probably an error in your \`render\` function.`],[Pn.PATH_DOESNT_EXIST]:t=>[`Error accessing the value at path \`${t}\``],[Pn.INPUT_TYPE_OVERRIDE]:(t,e,n)=>[`Input at path \`${t}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${n}\`.`],[Pn.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function V4(t,e,...n){const[r,...i]=ine[e](...n);console[t]("LEVA: "+r,...i)}const ca=V4.bind(null,"warn"),one=V4.bind(null,"log"),sne=["value"],ane=["schema"],lne=["value"],$4=[],Hc={};function AI(t){let{value:e}=t,n=sn(t,sne);for(let r of $4){const i=r(e,n);if(i)return i}}function ka(t,e){let{schema:n}=e,r=sn(e,ane);if(t in Hc){ca(Pn.ALREADY_REGISTERED_TYPE,t);return}$4.push((i,o)=>n(i,o)&&t),Hc[t]=r}function Ew(t,e,n,r){const{normalize:i}=Hc[t];if(i)return i(e,n,r);if(typeof e!="object"||!("value"in e))return{value:e};const{value:o}=e,s=sn(e,lne);return{value:o,settings:s}}function cne(t,e,n,r,i,o){const{sanitize:s}=Hc[t];return s?s(e,n,r,i,o):e}function PI(t,e,n){const{format:r}=Hc[t];return r?r(e,n):e}function une(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RI(Object(n),!0).forEach(function(r){une(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Tl=(t,e,n)=>t>n?n:t<e?e:t,fne=t=>{if(t===""||typeof t=="number")return t;try{const e=Qa(t);if(!isNaN(e))return e}catch{}return parseFloat(t)},dne=Math.log(10);function II(t){let e=Math.abs(+String(t).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const n=Math.floor(Math.log(e)/dne)+1,r=Math.floor(Math.log10(Math.abs(t))),i=Math.pow(10,r-n);return Math.max(i,.001)}const Kv=(t,e,n)=>n===e?0:(Tl(t,e,n)-e)/(n-e),Zv=(t,e,n)=>t*(n-e)+e,hne=()=>"_"+Math.random().toString(36).substr(2,9),OI=/\(([0-9+\-*/^ .]+)\)/,LI=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,kI=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,NI=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,DI=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,UI=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function Qa(t){if(isNaN(Number(t)))if(OI.test(t)){const e=t.replace(OI,(n,r)=>String(Qa(r)));return Qa(e)}else if(LI.test(t)){const e=t.replace(LI,(n,r,i)=>String(Math.pow(Number(r),Number(i))));return Qa(e)}else if(kI.test(t)){const e=t.replace(kI,(n,r,i)=>String(Number(r)*Number(i)));return Qa(e)}else if(NI.test(t)){const e=t.replace(NI,(n,r,i)=>{if(i!=0)return String(Number(r)/Number(i));throw new Error("Division by zero")});return Qa(e)}else if(DI.test(t)){const e=t.replace(DI,(n,r,i)=>String(Number(r)+Number(i)));return Qa(e)}else if(UI.test(t)){const e=t.replace(UI,(n,r,i)=>String(Number(r)-Number(i)));return Qa(e)}else return Number(t);return Number(t)}function pne(t,e){return e.reduce((n,r)=>(t&&t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}function mne(t,e){const n=bt({},t);return e.forEach(r=>r in t&&delete n[r]),n}function gne(t,e){return t.reduce((n,r,i)=>Object.assign(n,{[e[i]]:r}),{})}function W4(t){return Object.prototype.toString.call(t)==="[object Object]"}const yne=t=>W4(t)&&Object.keys(t).length===0;let Vo;(function(t){t.BUTTON="BUTTON",t.BUTTON_GROUP="BUTTON_GROUP",t.MONITOR="MONITOR",t.FOLDER="FOLDER"})(Vo||(Vo={}));let Yo;(function(t){t.SELECT="SELECT",t.IMAGE="IMAGE",t.NUMBER="NUMBER",t.COLOR="COLOR",t.STRING="STRING",t.BOOLEAN="BOOLEAN",t.INTERVAL="INTERVAL",t.VECTOR3D="VECTOR3D",t.VECTOR2D="VECTOR2D"})(Yo||(Yo={}));const vne=["type","__customInput"],xne=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],_ne=["type"];function j4(t,e,n={},r){var i,o;if(typeof t!="object"||Array.isArray(t))return{type:r,input:t,options:bt({key:e,label:e,optional:!1,disabled:!1,order:0},n)};if("__customInput"in t){const{type:A,__customInput:C}=t,P=sn(t,vne);return j4(C,e,P,A)}const{render:s,label:a,optional:l,order:c=0,disabled:u,hint:d,onChange:p,onEditStart:m,onEditEnd:g,transient:v}=t,x=sn(t,xne),y=bt({render:s,key:e,label:a??e,hint:d,transient:v??!!p,onEditStart:m,onEditEnd:g,disabled:u,optional:l,order:c},n);let{type:_}=x,w=sn(x,_ne);if(_=r??_,_ in Vo)return{type:_,input:w,options:y};let M;return r&&W4(w)&&"value"in w?M=w.value:M=yne(w)?void 0:w,{type:_,input:M,options:bt(bt({},y),{},{onChange:p,optional:(i=y.optional)!==null&&i!==void 0?i:!1,disabled:(o=y.disabled)!==null&&o!==void 0?o:!1})}}function Sne(t,e,n,r){const i=j4(t,e),{type:o,input:s,options:a}=i;if(o)return o in Vo?i:{type:o,input:Ew(o,s,n,r),options:a};let l=AI(s);return l?{type:l,input:Ew(l,s,n,r),options:a}:(l=AI({value:s}),l?{type:l,input:Ew(l,{value:s},n,r),options:a}:!1)}function FI(t,e,n,r,i){const{value:o,type:s,settings:a}=t;t.value=G4({type:s,value:o,settings:a},e,n,r),t.fromPanel=i}const wne=function(e,n,r){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=n,this.error=r};function G4({type:t,value:e,settings:n},r,i,o){const s=t!=="SELECT"&&typeof r=="function"?r(e):r;let a;try{a=cne(t,s,n,e,i,o)}catch(l){throw new wne(`The value \`${r}\` did not result in a correct value.`,e,l)}return $p(a,e)?e:a}const X4=(t,e,n=!1)=>{let r=0;return function(){const i=arguments,o=n&&!r,s=()=>t.apply(this,i);window.clearTimeout(r),r=window.setTimeout(s,e),o&&s()}},Y4=t=>t.shiftKey?5:t.altKey?1/5:1;function bne(t,e){const n=console.error;console.error=()=>{},Tf.render(t,e),console.error=n}const Ene=["value"],Mne=["min","max"],Tne=t=>{if(typeof t=="number")return!0;if(typeof t=="string"){const e=parseFloat(t);return isNaN(e)?!1:t.substring((""+e).length).trim().length<4}return!1},q4=(t,{min:e=-1/0,max:n=1/0,suffix:r})=>{const i=parseFloat(t);if(t===""||isNaN(i))throw Error("Invalid number");const o=Tl(i,e,n);return r?o+r:o},Cne=(t,{pad:e=0,suffix:n})=>{const r=parseFloat(t).toFixed(e);return n?r+n:r},K4=t=>{let{value:e}=t,n=sn(t,Ene);const{min:r=-1/0,max:i=1/0}=n,o=sn(n,Mne);let s=parseFloat(e);const a=typeof e=="string"?e.substring((""+s).length):void 0;s=Tl(s,r,i);let l=n.step;l||(Number.isFinite(r)?Number.isFinite(i)?l=+(Math.abs(i-r)/100).toPrecision(1):l=+(Math.abs(s-r)/100).toPrecision(1):Number.isFinite(i)&&(l=+(Math.abs(i-s)/100).toPrecision(1)));const c=l?II(l)*10:II(s);l=l||c/10;const u=Math.round(Tl(Math.log10(1/c),0,2));return{value:a?s+a:s,settings:bt({initialValue:s,step:l,pad:u,min:r,max:i,suffix:a},o)}},Z4=(t,{step:e,initialValue:n})=>{const r=Math.round((t-n)/e);return n+r*e};var J4=Object.freeze({__proto__:null,schema:Tne,sanitize:q4,format:Cne,normalize:K4,sanitizeStep:Z4});function Wn(){return Wn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wn.apply(this,arguments)}const Q4=R.createContext({});function qr(){return R.useContext(Q4)}const sC=R.createContext(null),ez=R.createContext(null),tz=R.createContext(null);function wm(){return R.useContext(ez)}function Ane(){return R.useContext(tz)}const nz=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function q0(t,e){const[n,r]=t.split(" "),i={};return n!=="none"&&(i.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${n!=="default"&&n||e.borderColor}`),r&&(i.backgroundColor=r),i}const mh={$inputStyle:()=>t=>q0(t,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>t=>q0(t,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>t=>q0(t,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>t=>q0(t,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:_t,css:Jde,createTheme:Pne,globalCss:Rne,keyframes:Qde}=yQ({prefix:"leva",theme:nz(),utils:bt(bt({},mh),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:t=>({"&:focus":mh.$focusStyle()(t)}),$focusWithin:t=>({"&:focus-within":mh.$focusStyle()(t)}),$hover:t=>({"&:hover":mh.$hoverStyle()(t)}),$active:t=>({"&:active":mh.$activeStyle()(t)})})}),Ine=Rne({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function One(t){const e=nz();if(!t)return{theme:e,className:""};Object.keys(t).forEach(r=>{Object.assign(e[r],t[r])});const n=Pne(e);return{theme:e,className:n.className}}function va(t,e){const{theme:n}=R.useContext(sC);if(!(t in n)||!(e in n[t]))return ca(Pn.THEME_ERROR,t,e),"";let r=e;for(;;){let i=n[t][r];if(typeof i=="string"&&i.charAt(0)==="$")r=i.substr(1);else return i}}const rz=_t("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),iz=_t("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${rz}`]:{paddingLeft:0}}),Lne=_t(iz,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),kne=_t("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),Nne=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],Dne=["onUpdate"];function aC(t){let{innerLabel:e,value:n,onUpdate:r,onChange:i,onKeyDown:o,type:s,id:a,inputType:l="text",rows:c=0}=t,u=sn(t,Nne);const{id:d,emitOnEditStart:p,emitOnEditEnd:m,disabled:g}=qr(),v=a||d,x=R.useRef(null),y=c>0,_=y?"textarea":"input",w=R.useCallback(C=>P=>{const N=P.currentTarget.value;C(N)},[]);$.useEffect(()=>{const C=x.current,P=w(N=>{r(N),m()});return C==null||C.addEventListener("blur",P),()=>C==null?void 0:C.removeEventListener("blur",P)},[w,r,m]);const M=R.useCallback(C=>{C.key==="Enter"&&w(r)(C)},[w,r]),A=Object.assign({as:_},y?{rows:c}:{},u);return $.createElement(kne,{textArea:y},e&&typeof e=="string"?$.createElement(iz,null,e):e,$.createElement(rz,Wn({levaType:s,ref:x,id:v,type:l,autoComplete:"off",spellCheck:"false",value:n,onChange:w(i),onFocus:()=>p(),onKeyPress:M,onKeyDown:o,disabled:g},A)))}function Une(t){let{onUpdate:e}=t,n=sn(t,Dne);const r=R.useCallback(o=>e(fne(o)),[e]),i=R.useCallback(o=>{const s=o.key==="ArrowUp"?1:o.key==="ArrowDown"?-1:0;if(s){o.preventDefault();const a=o.altKey?.1:o.shiftKey?10:1;e(l=>parseFloat(l)+s*a)}},[e]);return $.createElement(aC,Wn({},n,{onUpdate:r,onKeyDown:i,type:"number"}))}const Jv=_t("div",{}),gE=_t("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),Fne=_t("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${gE}::after`]:{opacity:.6},[`${Jv}:hover > & + ${gE}::after`]:{opacity:.6},[`${Jv}:hover > & > svg`]:{opacity:1}}),oz=_t("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${Jv}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),sz=_t("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${oz} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),az=_t(sz,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),zne=_t("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),Bne=_t("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),yE=_t("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),Hne=_t("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${yE}`]:{pointerEvents:"auto"}}}}}),lz=_t("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),Vne=_t("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),$ne=_t(nne,{fill:"$toolTipBackground"});function lC({children:t}){const{className:e}=R.useContext(sC);return $.createElement(zJ,{className:e},t)}const Wne=["align"];function jne(){const{id:t,disable:e,disabled:n}=qr();return $.createElement($.Fragment,null,$.createElement(Bne,{id:t+"__disable",type:"checkbox",checked:!n,onChange:()=>e(!n)}),$.createElement("label",{htmlFor:t+"__disable"}))}function Gne(t){const{id:e,optional:n,hint:r}=qr(),i=t.htmlFor||(e?{htmlFor:e}:null),o=!r&&typeof t.children=="string"?{title:t.children}:null;return $.createElement($.Fragment,null,n&&$.createElement(jne,null),r!==void 0?$.createElement(Qte,null,$.createElement(ene,{asChild:!0},$.createElement(yE,Wn({},i,t))),$.createElement(tne,{side:"top",sideOffset:2},$.createElement(Vne,null,r,$.createElement($ne,null)))):$.createElement(yE,Wn({},i,o,t)))}function Qo(t){let{align:e}=t,n=sn(t,Wne);const{value:r,label:i,key:o,disabled:s}=qr(),{hideCopyButton:a}=Ane(),l=!a&&o!==void 0,[c,u]=R.useState(!1),d=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[o]:r??""})),u(!0)}catch{ca(Pn.CLIPBOARD_ERROR,{[o]:r})}};return $.createElement(zne,{align:e,onPointerLeave:()=>u(!1)},$.createElement(Gne,n),l&&!s&&$.createElement("div",{title:`Click to copy ${typeof i=="string"?i:o} value`},c?$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},$.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),$.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):$.createElement("svg",{onClick:d,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},$.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),$.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const Xne=["toggled"],Yne=_t("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function cC(t){let{toggled:e}=t,n=sn(t,Xne);return $.createElement(Yne,Wn({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},n),$.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const qne=["input"];function wo(t){let{input:e}=t,n=sn(t,qne);return e?$.createElement(az,n):$.createElement(sz,n)}function cz({value:t,type:e,settings:n,setValue:r}){const[i,o]=R.useState(PI(e,t,n)),s=R.useRef(t),a=R.useRef(n);a.current=n;const l=R.useCallback(u=>o(PI(e,u,a.current)),[e]),c=R.useCallback(u=>{try{r(u)}catch(d){const{type:p,previousValue:m}=d;if(p!=="LEVA_ERROR")throw d;l(m)}},[l,r]);return R.useEffect(()=>{$p(t,s.current)||l(t),s.current=t},[t,l]),{displayValue:i,onChange:o,onUpdate:c}}function bm(t,e){const{emitOnEditStart:n,emitOnEditEnd:r}=qr();return uee(i=>{i.first&&(document.body.classList.add("leva__panel__dragged"),n==null||n());const o=t(i);return i.last&&(document.body.classList.remove("leva__panel__dragged"),r==null||r()),o},e)}function Kne(t){const e=R.useRef(null),n=R.useRef(null),r=R.useRef(!1);return R.useEffect(()=>{const i=X4(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,t(e.current,n.current)},250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),()=>window.removeEventListener("resize",i)},[t]),R.useEffect(()=>{n.current=e.current.getContext("2d")},[]),[e,n]}function uz(){const t=R.useRef(null),e=R.useRef({x:0,y:0}),n=R.useCallback(r=>{Object.assign(e.current,r),t.current&&(t.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[t,n]}const Zne=["__refCount"],Mw=(t,e)=>{if(!t[e])return null;const n=t[e];return sn(n,Zne)};function Jne(t){const e=wm(),[n,r]=R.useState(Mw(e.getData(),t)),i=R.useCallback(c=>e.setValueAtPath(t,c,!0),[t,e]),o=R.useCallback(c=>e.setSettingsAtPath(t,c),[t,e]),s=R.useCallback(c=>e.disableInputAtPath(t,c),[t,e]),a=R.useCallback(()=>e.emitOnEditStart(t),[t,e]),l=R.useCallback(()=>e.emitOnEditEnd(t),[t,e]);return R.useEffect(()=>{r(Mw(e.getData(),t));const c=e.useStore.subscribe(u=>Mw(u.data,t),r,{equalityFn:T1});return()=>c()},[e,t]),[n,{set:i,setSettings:o,disable:s,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:l}]}const Qne=_t("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),fz=_t("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),vE=_t("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),dz=_t("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),hz=_t("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function ere({value:t,min:e,max:n,onDrag:r,step:i,initialValue:o}){const s=R.useRef(null),a=R.useRef(null),l=R.useRef(0),c=va("sizes","scrubberWidth"),u=bm(({event:p,first:m,xy:[g],movement:[v],memo:x})=>{if(m){const{width:_,left:w}=s.current.getBoundingClientRect();l.current=_-parseFloat(c),x=(p==null?void 0:p.target)===a.current?t:Zv((g-w)/_,e,n)}const y=x+Zv(v/l.current,0,n-e);return r(Z4(y,{step:i,initialValue:o})),x}),d=Kv(t,e,n);return $.createElement(dz,Wn({ref:s},u()),$.createElement(fz,null,$.createElement(hz,{style:{left:0,right:`${(1-d)*100}%`}})),$.createElement(vE,{ref:a,style:{left:`calc(${d} * (100% - ${c}))`}}))}const tre=$.memo(({label:t,onUpdate:e,step:n,innerLabelTrim:r})=>{const[i,o]=R.useState(!1),s=bm(({active:a,delta:[l],event:c,memo:u=0})=>(o(a),u+=l/2,Math.abs(u)>=1&&(e(d=>parseFloat(d)+Math.floor(u)*n*Y4(c)),u=0),u));return $.createElement(Lne,Wn({dragging:i,title:t.length>1?t:""},s()),t.slice(0,r))});function pz({label:t,id:e,displayValue:n,onUpdate:r,onChange:i,settings:o,innerLabelTrim:s=1}){const a=s>0&&$.createElement(tre,{label:t,step:o.step,onUpdate:r,innerLabelTrim:s});return $.createElement(Une,{id:e,value:String(n),onUpdate:r,onChange:i,innerLabel:a})}function nre(){const t=qr(),{label:e,value:n,onUpdate:r,settings:i,id:o}=t,{min:s,max:a}=i,l=a!==1/0&&s!==-1/0;return $.createElement(wo,{input:!0},$.createElement(Qo,null,e),$.createElement(Qne,{hasRange:l},l&&$.createElement(ere,Wn({value:parseFloat(n),onDrag:r},i)),$.createElement(pz,Wn({},t,{id:o,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:rre}=J4,ire=sn(J4,["sanitizeStep"]);var ore=bt({component:nre},ire);const sre=(t,e)=>wi().schema({options:wi().passesAnyOf(wi().object(),wi().array())}).test(e),are=(t,{values:e})=>{if(e.indexOf(t)<0)throw Error("Selected value doesn't match Select options");return t},lre=(t,{values:e})=>e.indexOf(t),cre=t=>{let{value:e,options:n}=t,r,i;return Array.isArray(n)?(i=n,r=n.map(o=>String(o))):(i=Object.values(n),r=Object.keys(n)),"value"in t?i.includes(e)||(r.unshift(String(e)),i.unshift(e)):e=i[0],Object.values(n).includes(e)||(n[String(e)]=e),{value:e,settings:{keys:r,values:i}}};var ure=Object.freeze({__proto__:null,schema:sre,sanitize:are,format:lre,normalize:cre});const fre=_t("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),xE=_t("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),dre=_t("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${xE}:focus + &`]:{$focusStyle:""},[`${xE}:hover + &`]:{$hoverStyle:""}});function hre({displayValue:t,value:e,onUpdate:n,id:r,settings:i,disabled:o}){const{keys:s,values:a}=i,l=R.useRef();return e===a[t]&&(l.current=s[t]),$.createElement(fre,null,$.createElement(xE,{id:r,value:t,onChange:c=>n(a[Number(c.currentTarget.value)]),disabled:o},s.map((c,u)=>$.createElement("option",{key:c,value:u},c))),$.createElement(dre,null,l.current),$.createElement(cC,{toggled:!0}))}function pre(){const{label:t,value:e,displayValue:n,onUpdate:r,id:i,disabled:o,settings:s}=qr();return $.createElement(wo,{input:!0},$.createElement(Qo,null,t),$.createElement(hre,{id:i,value:e,displayValue:n,onUpdate:r,settings:s,disabled:o}))}var mre=bt({component:pre},ure);const gre=t=>wi().string().test(t),yre=t=>{if(typeof t!="string")throw Error("Invalid string");return t},vre=({value:t,editable:e=!0,rows:n=!1})=>({value:t,settings:{editable:e,rows:typeof n=="number"?n:n?5:0}});var xre=Object.freeze({__proto__:null,schema:gre,sanitize:yre,normalize:vre});const _re=["displayValue","onUpdate","onChange","editable"],Sre=_t("div",{whiteSpace:"pre-wrap"});function wre(t){let{displayValue:e,onUpdate:n,onChange:r,editable:i=!0}=t,o=sn(t,_re);return i?$.createElement(aC,Wn({value:e,onUpdate:n,onChange:r},o)):$.createElement(Sre,null,e)}function bre(){const{label:t,settings:e,displayValue:n,onUpdate:r,onChange:i}=qr();return $.createElement(wo,{input:!0},$.createElement(Qo,null,t),$.createElement(wre,Wn({displayValue:n,onUpdate:r,onChange:i},e)))}var Ere=bt({component:bre},xre);const Mre=t=>wi().boolean().test(t),Tre=t=>{if(typeof t!="boolean")throw Error("Invalid boolean");return t};var Cre=Object.freeze({__proto__:null,schema:Mre,sanitize:Tre});const Are=_t("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function Pre({value:t,onUpdate:e,id:n,disabled:r}){return $.createElement(Are,null,$.createElement("input",{id:n,type:"checkbox",checked:t,onChange:i=>e(i.currentTarget.checked),disabled:r}),$.createElement("label",{htmlFor:n},$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function Rre(){const{label:t,value:e,onUpdate:n,disabled:r,id:i}=qr();return $.createElement(wo,{input:!0},$.createElement(Qo,null,t),$.createElement(Pre,{value:e,onUpdate:n,id:i,disabled:r}))}var Ire=bt({component:Rre},Cre);const Ore=["locked"];function Lre({value:t,id:e,valueKey:n,settings:r,onUpdate:i,innerLabelTrim:o}){const s=R.useRef(t[n]);s.current=t[n];const a=R.useCallback(c=>i({[n]:G4({type:"NUMBER",value:s.current,settings:r},c)}),[i,r,n]),l=cz({type:"NUMBER",value:t[n],settings:r,setValue:a});return $.createElement(pz,{id:e,label:n,value:t[n],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:r,innerLabelTrim:o})}const kre=_t("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function Nre(t){let{locked:e}=t,n=sn(t,Ore);return $.createElement("svg",Wn({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),e?$.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):$.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function uC({value:t,onUpdate:e,settings:n,innerLabelTrim:r}){const{id:i,setSettings:o}=qr(),{lock:s,locked:a}=n;return $.createElement(kre,{withLock:s},s&&$.createElement(Nre,{locked:a,onClick:()=>o({locked:!a})}),Object.keys(t).map((l,c)=>$.createElement(Lre,{id:c===0?i:`${i}.${l}`,key:l,valueKey:l,value:t,settings:n[l],onUpdate:e,innerLabelTrim:r})))}const mz=(t,e)=>{const n={};let r=0,i=1/0;Object.entries(t).forEach(([o,s])=>{n[o]=K4(bt({value:s},e[o])).settings,r=Math.max(r,n[o].step),i=Math.min(i,n[o].pad)});for(let o in n){const{step:s,min:a,max:l}=e[o]||{};!isFinite(s)&&(!isFinite(a)||!isFinite(l))&&(n[o].step=r,n[o].pad=i)}return n},Dre=["lock"],Ure=["value"];function Fre(t){const e=wi().array().length(t).every.number(),n=r=>{if(!r||typeof r!="object")return!1;const i=Object.values(r);return i.length===t&&i.every(o=>isFinite(o))};return r=>e.test(r)||n(r)}function zre(t){return Array.isArray(t)?"array":"object"}function Zh(t,e,n){return zre(t)===e?t:e==="array"?Object.values(t):gne(t,n)}const Bre=(t,e,n)=>{const r=Zh(t,"object",e.keys);for(let s in r)r[s]=q4(r[s],e[s]);const i=Object.keys(r);let o={};if(i.length===e.keys.length)o=r;else{const s=Zh(n,"object",e.keys);if(i.length===1&&e.locked){const a=i[0],l=r[a],c=s[a],u=c!==0?l/c:1;for(let d in s)d===a?o[a]=l:o[d]=s[d]*u}else o=bt(bt({},s),r)}return Zh(o,e.format,e.keys)},Hre=(t,e)=>Zh(t,"object",e.keys),Vre=t=>!!t&&("step"in t||"min"in t||"max"in t);function $re(t,e,n=[]){const{lock:r=!1}=e,i=sn(e,Dre),o=Array.isArray(t)?"array":"object",s=o==="object"?Object.keys(t):n,a=Zh(t,"object",s),l=Vre(i)?s.reduce((u,d)=>Object.assign(u,{[d]:i}),{}):i,c=mz(a,l);return{value:o==="array"?t:a,settings:bt(bt({},c),{},{format:o,keys:s,lock:r,locked:!1})}}function gz(t){return{schema:Fre(t.length),normalize:e=>{let{value:n}=e,r=sn(e,Ure);return $re(n,r,t)},format:(e,n)=>Hre(e,n),sanitize:(e,n,r)=>Bre(e,n,r)}}var Wre={grad:.9,turn:360,rad:360/(2*Math.PI)},Qs=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},mr=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},mo=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},yz=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},zI=function(t){return{r:mo(t.r,0,255),g:mo(t.g,0,255),b:mo(t.b,0,255),a:mo(t.a)}},Tw=function(t){return{r:mr(t.r),g:mr(t.g),b:mr(t.b),a:mr(t.a,3)}},jre=/^#([0-9a-f]{3,8})$/i,K0=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},vz=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,o=Math.max(e,n,r),s=o-Math.min(e,n,r),a=s?o===e?(n-r)/s:o===n?2+(r-e)/s:4+(e-n)/s:0;return{h:60*(a<0?a+6:a),s:o?s/o*100:0,v:o/255*100,a:i}},xz=function(t){var e=t.h,n=t.s,r=t.v,i=t.a;e=e/360*6,n/=100,r/=100;var o=Math.floor(e),s=r*(1-n),a=r*(1-(e-o)*n),l=r*(1-(1-e+o)*n),c=o%6;return{r:255*[r,a,s,s,l,r][c],g:255*[l,r,r,a,s,s][c],b:255*[s,s,l,r,r,a][c],a:i}},BI=function(t){return{h:yz(t.h),s:mo(t.s,0,100),l:mo(t.l,0,100),a:mo(t.a)}},HI=function(t){return{h:mr(t.h),s:mr(t.s),l:mr(t.l),a:mr(t.a,3)}},VI=function(t){return xz((n=(e=t).s,{h:e.h,s:(n*=((r=e.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:e.a}));var e,n,r},Jh=function(t){return{h:(e=vz(t)).h,s:(i=(200-(n=e.s))*(r=e.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,n,r,i},Gre=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Xre=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Yre=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,qre=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_E={string:[[function(t){var e=jre.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?mr(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?mr(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=Yre.exec(t)||qre.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:zI({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=Gre.exec(t)||Xre.exec(t);if(!e)return null;var n,r,i=BI({h:(n=e[1],r=e[2],r===void 0&&(r="deg"),Number(n)*(Wre[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return VI(i)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,r=t.b,i=t.a,o=i===void 0?1:i;return Qs(e)&&Qs(n)&&Qs(r)?zI({r:Number(e),g:Number(n),b:Number(r),a:Number(o)}):null},"rgb"],[function(t){var e=t.h,n=t.s,r=t.l,i=t.a,o=i===void 0?1:i;if(!Qs(e)||!Qs(n)||!Qs(r))return null;var s=BI({h:Number(e),s:Number(n),l:Number(r),a:Number(o)});return VI(s)},"hsl"],[function(t){var e=t.h,n=t.s,r=t.v,i=t.a,o=i===void 0?1:i;if(!Qs(e)||!Qs(n)||!Qs(r))return null;var s=function(a){return{h:yz(a.h),s:mo(a.s,0,100),v:mo(a.v,0,100),a:mo(a.a)}}({h:Number(e),s:Number(n),v:Number(r),a:Number(o)});return xz(s)},"hsv"]]},$I=function(t,e){for(var n=0;n<e.length;n++){var r=e[n][0](t);if(r)return[r,e[n][1]]}return[null,void 0]},_z=function(t){return typeof t=="string"?$I(t.trim(),_E.string):typeof t=="object"&&t!==null?$I(t,_E.object):[null,void 0]},Kre=function(t){return _z(t)[1]},Cw=function(t,e){var n=Jh(t);return{h:n.h,s:mo(n.s+100*e,0,100),l:n.l,a:n.a}},Aw=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},WI=function(t,e){var n=Jh(t);return{h:n.h,s:n.s,l:mo(n.l+100*e,0,100),a:n.a}},SE=function(){function t(e){this.parsed=_z(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return mr(Aw(this.rgba),2)},t.prototype.isDark=function(){return Aw(this.rgba)<.5},t.prototype.isLight=function(){return Aw(this.rgba)>=.5},t.prototype.toHex=function(){return e=Tw(this.rgba),n=e.r,r=e.g,i=e.b,s=(o=e.a)<1?K0(mr(255*o)):"","#"+K0(n)+K0(r)+K0(i)+s;var e,n,r,i,o,s},t.prototype.toRgb=function(){return Tw(this.rgba)},t.prototype.toRgbString=function(){return e=Tw(this.rgba),n=e.r,r=e.g,i=e.b,(o=e.a)<1?"rgba("+n+", "+r+", "+i+", "+o+")":"rgb("+n+", "+r+", "+i+")";var e,n,r,i,o},t.prototype.toHsl=function(){return HI(Jh(this.rgba))},t.prototype.toHslString=function(){return e=HI(Jh(this.rgba)),n=e.h,r=e.s,i=e.l,(o=e.a)<1?"hsla("+n+", "+r+"%, "+i+"%, "+o+")":"hsl("+n+", "+r+"%, "+i+"%)";var e,n,r,i,o},t.prototype.toHsv=function(){return e=vz(this.rgba),{h:mr(e.h),s:mr(e.s),v:mr(e.v),a:mr(e.a,3)};var e},t.prototype.invert=function(){return ri({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),ri(Cw(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),ri(Cw(this.rgba,-e))},t.prototype.grayscale=function(){return ri(Cw(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),ri(WI(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),ri(WI(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?ri({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):mr(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=Jh(this.rgba);return typeof e=="number"?ri({h:e,s:n.s,l:n.l,a:n.a}):mr(n.h)},t.prototype.isEqual=function(e){return this.toHex()===ri(e).toHex()},t}(),ri=function(t){return t instanceof SE?t:new SE(t)},jI=[],Zre=function(t){t.forEach(function(e){jI.indexOf(e)<0&&(e(SE,_E),jI.push(e))})};function Jre(t,e){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var o={};t.prototype.toName=function(s){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=r[this.toHex()];if(c)return c;if(s!=null&&s.closest){var u=this.toRgb(),d=1/0,p="black";if(!o.length)for(var m in n)o[m]=new t(n[m]).toRgb();for(var g in n){var v=(a=u,l=o[g],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));v<d&&(d=v,p=g)}return p}},e.string.push([function(s){var a=s.toLowerCase(),l=a==="transparent"?"#0000":n[a];return l?new t(l).toRgb():null},"name"])}function gd(){return(gd=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function fC(t,e){if(t==null)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)e.indexOf(n=o[r])>=0||(i[n]=t[n]);return i}function wE(t){var e=R.useRef(t),n=R.useRef(function(r){e.current&&e.current(r)});return e.current=t,n.current}var qf=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t<e?e:t},Qh=function(t){return"touches"in t},bE=function(t){return t&&t.ownerDocument.defaultView||self},GI=function(t,e,n){var r=t.getBoundingClientRect(),i=Qh(e)?function(o,s){for(var a=0;a<o.length;a++)if(o[a].identifier===s)return o[a];return o[0]}(e.touches,n):e;return{left:qf((i.pageX-(r.left+bE(t).pageXOffset))/r.width),top:qf((i.pageY-(r.top+bE(t).pageYOffset))/r.height)}},XI=function(t){!Qh(t)&&t.preventDefault()},dC=$.memo(function(t){var e=t.onMove,n=t.onKey,r=fC(t,["onMove","onKey"]),i=R.useRef(null),o=wE(e),s=wE(n),a=R.useRef(null),l=R.useRef(!1),c=R.useMemo(function(){var m=function(x){XI(x),(Qh(x)?x.touches.length>0:x.buttons>0)&&i.current?o(GI(i.current,x,a.current)):v(!1)},g=function(){return v(!1)};function v(x){var y=l.current,_=bE(i.current),w=x?_.addEventListener:_.removeEventListener;w(y?"touchmove":"mousemove",m),w(y?"touchend":"mouseup",g)}return[function(x){var y=x.nativeEvent,_=i.current;if(_&&(XI(y),!function(M,A){return A&&!Qh(M)}(y,l.current)&&_)){if(Qh(y)){l.current=!0;var w=y.changedTouches||[];w.length&&(a.current=w[0].identifier)}_.focus(),o(GI(_,y,a.current)),v(!0)}},function(x){var y=x.which||x.keyCode;y<37||y>40||(x.preventDefault(),s({left:y===39?.05:y===37?-.05:0,top:y===40?.05:y===38?-.05:0}))},v]},[s,o]),u=c[0],d=c[1],p=c[2];return R.useEffect(function(){return p},[p]),$.createElement("div",gd({},r,{onTouchStart:u,onMouseDown:u,className:"react-colorful__interactive",ref:i,onKeyDown:d,tabIndex:0,role:"slider"}))}),Em=function(t){return t.filter(Boolean).join(" ")},hC=function(t){var e=t.color,n=t.left,r=t.top,i=r===void 0?.5:r,o=Em(["react-colorful__pointer",t.className]);return $.createElement("div",{className:o,style:{top:100*i+"%",left:100*n+"%"}},$.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},oi=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n},Sz=function(t){var e=t.s,n=t.v,r=t.a,i=(200-e)*n/100;return{h:oi(t.h),s:oi(i>0&&i<200?e*n/100/(i<=100?i:200-i)*100:0),l:oi(i/2),a:oi(r,2)}},EE=function(t){var e=Sz(t);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},Pw=function(t){var e=Sz(t);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},wz=function(t){var e=t.h,n=t.s,r=t.v,i=t.a;e=e/360*6,n/=100,r/=100;var o=Math.floor(e),s=r*(1-n),a=r*(1-(e-o)*n),l=r*(1-(1-e+o)*n),c=o%6;return{r:oi(255*[r,a,s,s,l,r][c]),g:oi(255*[l,r,r,a,s,s][c]),b:oi(255*[s,s,l,r,r,a][c]),a:oi(i,2)}},bz=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,o=Math.max(e,n,r),s=o-Math.min(e,n,r),a=s?o===e?(n-r)/s:o===n?2+(r-e)/s:4+(e-n)/s:0;return{h:oi(60*(a<0?a+6:a)),s:oi(o?s/o*100:0),v:oi(o/255*100),a:i}},Ez=$.memo(function(t){var e=t.hue,n=t.onChange,r=Em(["react-colorful__hue",t.className]);return $.createElement("div",{className:r},$.createElement(dC,{onMove:function(i){n({h:360*i.left})},onKey:function(i){n({h:qf(e+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":oi(e),"aria-valuemax":"360","aria-valuemin":"0"},$.createElement(hC,{className:"react-colorful__hue-pointer",left:e/360,color:EE({h:e,s:100,v:100,a:1})})))}),Mz=$.memo(function(t){var e=t.hsva,n=t.onChange,r={backgroundColor:EE({h:e.h,s:100,v:100,a:1})};return $.createElement("div",{className:"react-colorful__saturation",style:r},$.createElement(dC,{onMove:function(i){n({s:100*i.left,v:100-100*i.top})},onKey:function(i){n({s:qf(e.s+100*i.left,0,100),v:qf(e.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+oi(e.s)+"%, Brightness "+oi(e.v)+"%"},$.createElement(hC,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:EE(e)})))}),pC=function(t,e){if(t===e)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0};function Tz(t,e,n){var r=wE(n),i=R.useState(function(){return t.toHsva(e)}),o=i[0],s=i[1],a=R.useRef({color:e,hsva:o});R.useEffect(function(){if(!t.equal(e,a.current.color)){var c=t.toHsva(e);a.current={hsva:c,color:e},s(c)}},[e,t]),R.useEffect(function(){var c;pC(o,a.current.hsva)||t.equal(c=t.fromHsva(o),a.current.color)||(a.current={hsva:o,color:c},r(c))},[o,t,r]);var l=R.useCallback(function(c){s(function(u){return Object.assign({},u,c)})},[]);return[o,l]}var Qre=typeof window<"u"?R.useLayoutEffect:R.useEffect,eie=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},YI=new Map,Cz=function(t){Qre(function(){var e=t.current?t.current.ownerDocument:document;if(e!==void 0&&!YI.has(e)){var n=e.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,YI.set(e,n);var r=eie();r&&n.setAttribute("nonce",r),e.head.appendChild(n)}},[])},tie=function(t){var e=t.className,n=t.colorModel,r=t.color,i=r===void 0?n.defaultColor:r,o=t.onChange,s=fC(t,["className","colorModel","color","onChange"]),a=R.useRef(null);Cz(a);var l=Tz(n,i,o),c=l[0],u=l[1],d=Em(["react-colorful",e]);return $.createElement("div",gd({},s,{ref:a,className:d}),$.createElement(Mz,{hsva:c,onChange:u}),$.createElement(Ez,{hue:c.h,onChange:u,className:"react-colorful__last-control"}))},nie=function(t){var e=t.className,n=t.hsva,r=t.onChange,i={backgroundImage:"linear-gradient(90deg, "+Pw(Object.assign({},n,{a:0}))+", "+Pw(Object.assign({},n,{a:1}))+")"},o=Em(["react-colorful__alpha",e]),s=oi(100*n.a);return $.createElement("div",{className:o},$.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),$.createElement(dC,{onMove:function(a){r({a:a.left})},onKey:function(a){r({a:qf(n.a+a.left)})},"aria-label":"Alpha","aria-valuetext":s+"%","aria-valuenow":s,"aria-valuemin":"0","aria-valuemax":"100"},$.createElement(hC,{className:"react-colorful__alpha-pointer",left:n.a,color:Pw(n)})))},rie=function(t){var e=t.className,n=t.colorModel,r=t.color,i=r===void 0?n.defaultColor:r,o=t.onChange,s=fC(t,["className","colorModel","color","onChange"]),a=R.useRef(null);Cz(a);var l=Tz(n,i,o),c=l[0],u=l[1],d=Em(["react-colorful",e]);return $.createElement("div",gd({},s,{ref:a,className:d}),$.createElement(Mz,{hsva:c,onChange:u}),$.createElement(Ez,{hue:c.h,onChange:u}),$.createElement(nie,{hsva:c,onChange:u,className:"react-colorful__last-control"}))},iie={defaultColor:{r:0,g:0,b:0,a:1},toHsva:bz,fromHsva:wz,equal:pC},oie=function(t){return $.createElement(rie,gd({},t,{colorModel:iie}))},sie={defaultColor:{r:0,g:0,b:0},toHsva:function(t){return bz({r:t.r,g:t.g,b:t.b,a:1})},fromHsva:function(t){return{r:(e=wz(t)).r,g:e.g,b:e.b};var e},equal:pC},aie=function(t){return $.createElement(tie,gd({},t,{colorModel:sie}))};function yd(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function vd(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function lie(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function cie(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(lie(arguments[e]));return t}var uie=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Mm(t,e){var n=fie(t);if(typeof n.path!="string"){var r=t.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:t.name,writable:!1,configurable:!1,enumerable:!0})}return n}function fie(t){var e=t.name,n=e&&e.lastIndexOf(".")!==-1;if(n&&!t.type){var r=e.split(".").pop().toLowerCase(),i=uie.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}var die=[".DS_Store","Thumbs.db"];function hie(t){return yd(this,void 0,void 0,function(){return vd(this,function(e){return Qv(t)&&pie(t)?[2,vie(t.dataTransfer,t.type)]:mie(t)?[2,gie(t)]:Array.isArray(t)&&t.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,yie(t)]:[2,[]]})})}function pie(t){return Qv(t.dataTransfer)}function mie(t){return Qv(t)&&Qv(t.target)}function Qv(t){return typeof t=="object"&&t!==null}function gie(t){return ME(t.target.files).map(function(e){return Mm(e)})}function yie(t){return yd(this,void 0,void 0,function(){var e;return vd(this,function(n){switch(n.label){case 0:return[4,Promise.all(t.map(function(r){return r.getFile()}))];case 1:return e=n.sent(),[2,e.map(function(r){return Mm(r)})]}})})}function vie(t,e){return yd(this,void 0,void 0,function(){var n,r;return vd(this,function(i){switch(i.label){case 0:return t===null?[2,[]]:t.items?(n=ME(t.items).filter(function(o){return o.kind==="file"}),e!=="drop"?[2,n]:[4,Promise.all(n.map(xie))]):[3,2];case 1:return r=i.sent(),[2,qI(Az(r))];case 2:return[2,qI(ME(t.files).map(function(o){return Mm(o)}))]}})})}function qI(t){return t.filter(function(e){return die.indexOf(e.name)===-1})}function ME(t){if(t===null)return[];for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r)}return e}function xie(t){if(typeof t.webkitGetAsEntry!="function")return KI(t);var e=t.webkitGetAsEntry();return e&&e.isDirectory?Pz(e):KI(t)}function Az(t){return t.reduce(function(e,n){return cie(e,Array.isArray(n)?Az(n):[n])},[])}function KI(t){var e=t.getAsFile();if(!e)return Promise.reject(t+" is not a File");var n=Mm(e);return Promise.resolve(n)}function _ie(t){return yd(this,void 0,void 0,function(){return vd(this,function(e){return[2,t.isDirectory?Pz(t):Sie(t)]})})}function Pz(t){var e=t.createReader();return new Promise(function(n,r){var i=[];function o(){var s=this;e.readEntries(function(a){return yd(s,void 0,void 0,function(){var l,c,u;return vd(this,function(d){switch(d.label){case 0:if(a.length)return[3,5];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=d.sent(),n(l),[3,4];case 3:return c=d.sent(),r(c),[3,4];case 4:return[3,6];case 5:u=Promise.all(a.map(_ie)),i.push(u),o(),d.label=6;case 6:return[2]}})})},function(a){r(a)})}o()})}function Sie(t){return yd(this,void 0,void 0,function(){return vd(this,function(e){return[2,new Promise(function(n,r){t.file(function(i){var o=Mm(i,t.fullPath);n(o)},function(i){r(i)})})]})})}var wie=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(","),r=t.name||"",i=(t.type||"").toLowerCase(),o=i.replace(/\/.*$/,"");return n.some(function(s){var a=s.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?o===a.replace(/\/.*$/,""):i===a})}return!0};function ZI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZI(Object(n),!0).forEach(function(r){Rz(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rz(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QI(t,e){return Tie(t)||Mie(t,e)||Eie(t,e)||bie()}function bie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eie(t,e){if(t){if(typeof t=="string")return eO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eO(t,e)}}function eO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Mie(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,s,a;try{for(n=n.call(t);!(i=(s=n.next()).done)&&(r.push(s.value),!(e&&r.length===e));i=!0);}catch(l){o=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw a}}return r}}function Tie(t){if(Array.isArray(t))return t}var Cie="file-invalid-type",Aie="file-too-large",Pie="file-too-small",Rie="too-many-files",Iie=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var n=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:Cie,message:"File type must be ".concat(n)}},tO=function(e){return{code:Aie,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},nO=function(e){return{code:Pie,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},Oie={code:Rie,message:"Too many files"};function Iz(t,e){var n=t.type==="application/x-moz-file"||wie(t,e);return[n,n?null:Iie(e)]}function Oz(t,e,n){if(gh(t.size))if(gh(e)&&gh(n)){if(t.size>n)return[!1,tO(n)];if(t.size<e)return[!1,nO(e)]}else{if(gh(e)&&t.size<e)return[!1,nO(e)];if(gh(n)&&t.size>n)return[!1,tO(n)]}return[!0,null]}function gh(t){return t!=null}function Lie(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,o=t.multiple,s=t.maxFiles;return!o&&e.length>1||o&&s>=1&&e.length>s?!1:e.every(function(a){var l=Iz(a,n),c=QI(l,1),u=c[0],d=Oz(a,r,i),p=QI(d,1),m=p[0];return u&&m})}function ex(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Z0(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function rO(t){t.preventDefault()}function kie(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function Nie(t){return t.indexOf("Edge/")!==-1}function Die(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return kie(t)||Nie(t)}function fs(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return e.some(function(a){return!ex(r)&&a&&a.apply(void 0,[r].concat(o)),ex(r)})}}function Uie(){return"showOpenFilePicker"in window}function Fie(t){return t=typeof t=="string"?t.split(","):t,[{description:"everything",accept:Array.isArray(t)?t.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,n){return JI(JI({},e),{},Rz({},n,[]))},{}):{}}]}function zie(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function Bie(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}var Hie=["children"],Vie=["open"],$ie=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Wie=["refKey","onChange","onClick"];function jie(t){return Yie(t)||Xie(t)||Lz(t)||Gie()}function Gie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xie(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Yie(t){if(Array.isArray(t))return TE(t)}function Rw(t,e){return Zie(t)||Kie(t,e)||Lz(t,e)||qie()}function qie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lz(t,e){if(t){if(typeof t=="string")return TE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TE(t,e)}}function TE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Kie(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,s,a;try{for(n=n.call(t);!(i=(s=n.next()).done)&&(r.push(s.value),!(e&&r.length===e));i=!0);}catch(l){o=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw a}}return r}}function Zie(t){if(Array.isArray(t))return t}function iO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function An(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iO(Object(n),!0).forEach(function(r){CE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CE(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tx(t,e){if(t==null)return{};var n=Jie(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Jie(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var mC=R.forwardRef(function(t,e){var n=t.children,r=tx(t,Hie),i=Nz(r),o=i.open,s=tx(i,Vie);return R.useImperativeHandle(e,function(){return{open:o}},[o]),$.createElement(R.Fragment,null,n(An(An({},s),{},{open:o})))});mC.displayName="Dropzone";var kz={disabled:!1,getFilesFromEvent:hie,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};mC.defaultProps=kz;mC.propTypes={children:Ce.func,accept:Ce.oneOfType([Ce.string,Ce.arrayOf(Ce.string)]),multiple:Ce.bool,preventDropOnDocument:Ce.bool,noClick:Ce.bool,noKeyboard:Ce.bool,noDrag:Ce.bool,noDragEventsBubbling:Ce.bool,minSize:Ce.number,maxSize:Ce.number,maxFiles:Ce.number,disabled:Ce.bool,getFilesFromEvent:Ce.func,onFileDialogCancel:Ce.func,onFileDialogOpen:Ce.func,useFsAccessApi:Ce.bool,onDragEnter:Ce.func,onDragLeave:Ce.func,onDragOver:Ce.func,onDrop:Ce.func,onDropAccepted:Ce.func,onDropRejected:Ce.func,validator:Ce.func};var AE={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function Nz(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=An(An({},kz),t),n=e.accept,r=e.disabled,i=e.getFilesFromEvent,o=e.maxSize,s=e.minSize,a=e.multiple,l=e.maxFiles,c=e.onDragEnter,u=e.onDragLeave,d=e.onDragOver,p=e.onDrop,m=e.onDropAccepted,g=e.onDropRejected,v=e.onFileDialogCancel,x=e.onFileDialogOpen,y=e.useFsAccessApi,_=e.preventDropOnDocument,w=e.noClick,M=e.noKeyboard,A=e.noDrag,C=e.noDragEventsBubbling,P=e.validator,N=R.useMemo(function(){return typeof x=="function"?x:oO},[x]),O=R.useMemo(function(){return typeof v=="function"?v:oO},[v]),E=R.useRef(null),L=R.useRef(null),H=R.useReducer(Qie,AE),W=Rw(H,2),Y=W[0],K=W[1],J=Y.isFocused,Q=Y.isFileDialogActive,D=Y.draggedFiles,G=R.useRef(typeof window<"u"&&window.isSecureContext&&y&&Uie()),X=function(){!G.current&&Q&&setTimeout(function(){if(L.current){var se=L.current.files;se.length||(K({type:"closeDialog"}),O())}},300)};R.useEffect(function(){return window.addEventListener("focus",X,!1),function(){window.removeEventListener("focus",X,!1)}},[L,Q,O,G]);var ne=R.useRef([]),pe=function(se){E.current&&E.current.contains(se.target)||(se.preventDefault(),ne.current=[])};R.useEffect(function(){return _&&(document.addEventListener("dragover",rO,!1),document.addEventListener("drop",pe,!1)),function(){_&&(document.removeEventListener("dragover",rO),document.removeEventListener("drop",pe))}},[E,_]);var De=R.useCallback(function(ee){ee.preventDefault(),ee.persist(),ye(ee),ne.current=[].concat(jie(ne.current),[ee.target]),Z0(ee)&&Promise.resolve(i(ee)).then(function(se){ex(ee)&&!C||(K({draggedFiles:se,isDragActive:!0,type:"setDraggedFiles"}),c&&c(ee))})},[i,c,C]),ae=R.useCallback(function(ee){ee.preventDefault(),ee.persist(),ye(ee);var se=Z0(ee);if(se&&ee.dataTransfer)try{ee.dataTransfer.dropEffect="copy"}catch{}return se&&d&&d(ee),!1},[d,C]),_e=R.useCallback(function(ee){ee.preventDefault(),ee.persist(),ye(ee);var se=ne.current.filter(function(je){return E.current&&E.current.contains(je)}),he=se.indexOf(ee.target);he!==-1&&se.splice(he,1),ne.current=se,!(se.length>0)&&(K({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),Z0(ee)&&u&&u(ee))},[E,u,C]),Re=R.useCallback(function(ee,se){var he=[],je=[];ee.forEach(function(Ee){var Oe=Iz(Ee,n),dt=Rw(Oe,2),Ie=dt[0],We=dt[1],Ct=Oz(Ee,s,o),gt=Rw(Ct,2),Ze=gt[0],Z=gt[1],we=P?P(Ee):null;if(Ie&&Ze&&!we)he.push(Ee);else{var Xe=[We,Z];we&&(Xe=Xe.concat(we)),je.push({file:Ee,errors:Xe.filter(function(q){return q})})}}),(!a&&he.length>1||a&&l>=1&&he.length>l)&&(he.forEach(function(Ee){je.push({file:Ee,errors:[Oie]})}),he.splice(0)),K({acceptedFiles:he,fileRejections:je,type:"setFiles"}),p&&p(he,je,se),je.length>0&&g&&g(je,se),he.length>0&&m&&m(he,se)},[K,a,n,s,o,l,p,m,g,P]),Ae=R.useCallback(function(ee){ee.preventDefault(),ee.persist(),ye(ee),ne.current=[],Z0(ee)&&Promise.resolve(i(ee)).then(function(se){ex(ee)&&!C||Re(se,ee)}),K({type:"reset"})},[i,Re,C]),qe=R.useCallback(function(){if(G.current){K({type:"openDialog"}),N();var ee={multiple:a,types:Fie(n)};window.showOpenFilePicker(ee).then(function(se){return i(se)}).then(function(se){Re(se,null),K({type:"closeDialog"})}).catch(function(se){zie(se)?(O(se),K({type:"closeDialog"})):Bie(se)&&(G.current=!1,L.current&&(L.current.value=null,L.current.click()))});return}L.current&&(K({type:"openDialog"}),N(),L.current.value=null,L.current.click())},[K,N,O,y,Re,n,a]),ut=R.useCallback(function(ee){!E.current||!E.current.isEqualNode(ee.target)||(ee.key===" "||ee.key==="Enter"||ee.keyCode===32||ee.keyCode===13)&&(ee.preventDefault(),qe())},[E,qe]),Ye=R.useCallback(function(){K({type:"focus"})},[]),Ve=R.useCallback(function(){K({type:"blur"})},[]),B=R.useCallback(function(){w||(Die()?setTimeout(qe,0):qe())},[w,qe]),me=function(se){return r?null:se},be=function(se){return M?null:me(se)},ke=function(se){return A?null:me(se)},ye=function(se){C&&se.stopPropagation()},$e=R.useMemo(function(){return function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},se=ee.refKey,he=se===void 0?"ref":se,je=ee.role,Ee=ee.onKeyDown,Oe=ee.onFocus,dt=ee.onBlur,Ie=ee.onClick,We=ee.onDragEnter,Ct=ee.onDragOver,gt=ee.onDragLeave,Ze=ee.onDrop,Z=tx(ee,$ie);return An(An(CE({onKeyDown:be(fs(Ee,ut)),onFocus:be(fs(Oe,Ye)),onBlur:be(fs(dt,Ve)),onClick:me(fs(Ie,B)),onDragEnter:ke(fs(We,De)),onDragOver:ke(fs(Ct,ae)),onDragLeave:ke(fs(gt,_e)),onDrop:ke(fs(Ze,Ae)),role:typeof je=="string"&&je!==""?je:"button"},he,E),!r&&!M?{tabIndex:0}:{}),Z)}},[E,ut,Ye,Ve,B,De,ae,_e,Ae,M,A,r]),Ne=R.useCallback(function(ee){ee.stopPropagation()},[]),ze=R.useMemo(function(){return function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},se=ee.refKey,he=se===void 0?"ref":se,je=ee.onChange,Ee=ee.onClick,Oe=tx(ee,Wie),dt=CE({accept:n,multiple:a,type:"file",style:{display:"none"},onChange:me(fs(je,Ae)),onClick:me(fs(Ee,Ne)),tabIndex:-1},he,L);return An(An({},dt),Oe)}},[L,n,a,Ae,r]),V=D.length,U=V>0&&Lie({files:D,accept:n,minSize:s,maxSize:o,multiple:a,maxFiles:l}),le=V>0&&!U;return An(An({},Y),{},{isDragAccept:U,isDragReject:le,isFocused:J&&!r,getRootProps:$e,getInputProps:ze,rootRef:E,inputRef:L,open:me(qe)})}function Qie(t,e){switch(e.type){case"focus":return An(An({},t),{},{isFocused:!0});case"blur":return An(An({},t),{},{isFocused:!1});case"openDialog":return An(An({},AE),{},{isFileDialogActive:!0});case"closeDialog":return An(An({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":var n=e.isDragActive,r=e.draggedFiles;return An(An({},t),{},{draggedFiles:r,isDragActive:n});case"setFiles":return An(An({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return An({},AE);default:return t}}function oO(){}const eoe=t=>(e,n,r)=>{const i=r.subscribe;return r.subscribe=(s,a,l)=>{let c=s;if(a){const u=(l==null?void 0:l.equalityFn)||Object.is;let d=s(r.getState());c=p=>{const m=s(p);if(!u(d,m)){const g=d;a(d=m,g)}},l!=null&&l.fireImmediately&&a(d,d)}return i(c)},t(e,n,r)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var toe=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var noe=toe;function sO(t){return noe(t)===!0&&Object.prototype.toString.call(t)==="[object Object]"}var Dz=function(e){var n,r;return!(sO(e)===!1||(n=e.constructor,typeof n!="function")||(r=n.prototype,sO(r)===!1)||r.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var roe=Dz,gC=function(e){return roe(e)||typeof e=="function"||Array.isArray(e)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var ioe=function(e,n,r){for(var i in e)if(n.call(r,e[i],i,e)===!1)break},ooe=gC,soe=ioe;function Uz(t,e){for(var n=arguments.length,r=0;++r<n;){var i=arguments[r];PE(i)&&soe(i,aoe,t)}return t}function aoe(t,e){if(loe(e)){var n=this[e];PE(t)&&PE(n)?Uz(n,t):this[e]=t}}function PE(t){return ooe(t)&&!Array.isArray(t)}function loe(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"}var coe=Uz;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var uoe=function(t,e,n,r,i){if(!foe(t)||!e)return t;if(e=J0(e),n&&(e+="."+J0(n)),r&&(e+="."+J0(r)),i&&(e+="."+J0(i)),e in t)return t[e];for(var o=e.split("."),s=o.length,a=-1;t&&++a<s;){for(var l=o[a];l[l.length-1]==="\\";)l=l.slice(0,-1)+"."+o[++a];t=t[l]}return t};function foe(t){return t!==null&&(typeof t=="object"||typeof t=="function")}function J0(t){return t?Array.isArray(t)?t.join("."):t:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var doe=function(t,e){if(t===null||typeof t>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return t;for(var n=Object.prototype.propertyIsEnumerable,r=Object(t),i=arguments.length,o=0;++o<i;)for(var s=Object(arguments[o]),a=Object.getOwnPropertySymbols(s),l=0;l<a.length;l++){var c=a[l];n.call(s,c)&&(r[c]=s[c])}return r},hoe=gC,poe=doe,moe=Object.assign||function(t){if(t===null||typeof t>"u")throw new TypeError("Cannot convert undefined or null to object");aO(t)||(t={});for(var e=1;e<arguments.length;e++){var n=arguments[e];yoe(n)&&(n=voe(n)),aO(n)&&(goe(t,n),poe(t,n))}return t};function goe(t,e){for(var n in e)xoe(e,n)&&(t[n]=e[n])}function yoe(t){return t&&typeof t=="string"}function voe(t){var e={};for(var n in t)e[n]=t[n];return e}function aO(t){return t&&typeof t=="object"||hoe(t)}function xoe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var _oe=moe,Soe=function(t,e,n){if(typeof t!="string")throw new TypeError("expected a string");typeof e=="function"&&(n=e,e=null),typeof e=="string"&&(e={sep:e});var r=_oe({sep:"."},e),i=r.quotes||['"',"'","`"],o;r.brackets===!0?o={"<":">","(":")","[":"]","{":"}"}:r.brackets&&(o=r.brackets);var s=[],a=[],l=[""],c=r.sep,u=t.length,d=-1,p;function m(){if(o&&a.length)return o[a[a.length-1]]}for(;++d<u;){var g=t[d],v=t[d+1],x={val:g,idx:d,arr:l,str:t};if(s.push(x),g==="\\"){x.val=boe(r,t,d)===!0?g+v:v,x.escaped=!0,typeof n=="function"&&n(x),l[l.length-1]+=x.val,d++;continue}if(o&&o[g]){a.push(g);var y=m(),_=d+1;if(t.indexOf(y,_+1)!==-1)for(;a.length&&_<u;){var w=t[++_];if(w==="\\"){w++;continue}if(i.indexOf(w)!==-1){_=RE(t,w,_+1);continue}if(y=m(),a.length&&t.indexOf(y,_+1)===-1)break;if(o[w]){a.push(w);continue}y===w&&a.pop()}if(p=_,p===-1){l[l.length-1]+=g;continue}g=t.slice(d,p+1),x.val=g,x.idx=d=p}if(i.indexOf(g)!==-1){if(p=RE(t,g,d+1),p===-1){l[l.length-1]+=g;continue}woe(g,r)===!0?g=t.slice(d,p+1):g=t.slice(d+1,p),x.val=g,x.idx=d=p}if(typeof n=="function"&&(n(x,s),g=x.val,d=x.idx),x.val===c&&x.split!==!1){l.push("");continue}l[l.length-1]+=x.val}return l};function RE(t,e,n,r){var i=t.indexOf(e,n);return t.charAt(i-1)==="\\"?RE(t,e,i+1):i}function woe(t,e){return e.keepDoubleQuotes===!0&&t==='"'||e.keepSingleQuotes===!0&&t==="'"?!0:e.keepQuotes}function boe(t,e,n){return typeof t.keepEscaping=="function"?t.keepEscaping(e,n):t.keepEscaping===!0||e[n+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Eoe=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},lO=Eoe,Moe=function(e){lO(e)||(e={});for(var n=arguments.length,r=1;r<n;r++){var i=arguments[r];lO(i)&&Toe(e,i)}return e};function Toe(t,e){for(var n in e)Coe(e,n)&&(t[n]=e[n])}function Coe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Aoe=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Poe=Soe,Roe=Moe,cO=Dz,uO=Aoe,Ioe=function(t,e,n){if(!uO(t)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return t;for(var r=Poe(e,{sep:".",brackets:!0}).filter(Ooe),i=r.length,o=-1,s=t;++o<i;){var a=r[o];if(o!==i-1){uO(s[a])||(s[a]={}),s=s[a];continue}cO(s[a])&&cO(n)?s[a]=Roe({},s[a],n):s[a]=n}return t};function Ooe(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"}var Iw=gC,fO=coe,Loe=uoe,dO=Ioe,koe=function(e,n,r){if(!Iw(e))throw new TypeError("expected an object");if(typeof n!="string"||r==null)return fO.apply(null,arguments);if(typeof r=="string")return dO(e,n,r),e;var i=Loe(e,n);return Iw(r)&&Iw(i)&&(r=fO({},i,r)),dO(e,n,r),e};const Noe=Us(koe),yC=(...t)=>t.filter(Boolean).join(".");function Doe(t){const e=t.split(".");return[e.pop(),e.join(".")||void 0]}function Uoe(t,e){return Object.entries(pne(t,e)).reduce((n,[,{value:r,disabled:i,key:o}])=>(n[o]=i?void 0:r,n),{})}function Foe(t,e){const n=R.useRef();return $p(t,n.current)||(n.current=t),n.current}function Fz(t,e){return R.useMemo(t,Foe(e))}function zoe(t){const e=R.useRef(null),n=R.useRef(null),r=R.useRef(!0);return R.useLayoutEffect(()=>{t||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),R.useEffect(()=>{if(r.current){r.current=!1;return}let i;const o=e.current,s=()=>{t&&(o.style.removeProperty("height"),o.style.removeProperty("overflow"),n.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};o.addEventListener("transitionend",s,{once:!0});const{height:a}=n.current.getBoundingClientRect();return o.style.height=a+"px",t||(o.style.overflow="hidden",i=window.setTimeout(()=>o.style.height="0px",50)),()=>{o.removeEventListener("transitionend",s),clearTimeout(i)}},[t]),{wrapperRef:e,contentRef:n}}const Boe=t=>{const[e,n]=R.useState(t.getVisiblePaths());return R.useEffect(()=>{n(t.getVisiblePaths());const r=t.useStore.subscribe(t.getVisiblePaths,n,{equalityFn:T1});return()=>r()},[t]),e};function Hoe(t,e,n){return t.useStore(i=>{const o=bt(bt({},n),i.data);return Uoe(o,e)},T1)}function zz(t=3){const e=R.useRef(null),n=R.useRef(null),[r,i]=R.useState(!1),o=R.useCallback(()=>i(!0),[]),s=R.useCallback(()=>i(!1),[]);return R.useLayoutEffect(()=>{if(r){const{bottom:a,top:l,left:c}=e.current.getBoundingClientRect(),{height:u}=n.current.getBoundingClientRect(),d=a+u>window.innerHeight-40?"up":"down";n.current.style.position="fixed",n.current.style.zIndex="10000",n.current.style.left=c+"px",d==="down"?n.current.style.top=a+t+"px":n.current.style.bottom=window.innerHeight-l+t+"px"}},[t,r]),{popinRef:e,wrapperRef:n,shown:r,show:o,hide:s}}Zre([Jre]);const Voe={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};wi.extend({color:()=>t=>ri(t).isValid()});const $oe=t=>wi().color().test(t);function Bz(t,{format:e,hasAlpha:n,isString:r}){const i=Voe[e]+(r&&e!=="hex"?"String":""),o=t[i]();return typeof o=="object"&&!n?mne(o,["a"]):o}const Hz=(t,e)=>{const n=ri(t);if(!n.isValid())throw Error("Invalid color");return Bz(n,e)},Woe=(t,e)=>Bz(ri(t),bt(bt({},e),{},{isString:!0,format:"hex"})),joe=({value:t})=>{const e=Kre(t),n=e==="name"?"hex":e,r=typeof t=="object"?"a"in t:e==="hex"&&t.length===8||/^(rgba)|(hsla)|(hsva)/.test(t),i={format:n,hasAlpha:r,isString:typeof t=="string"};return{value:Hz(t,i),settings:i}};var Goe=Object.freeze({__proto__:null,schema:$oe,sanitize:Hz,format:Woe,normalize:joe});const Xoe=_t("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),Yoe=_t("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),qoe=_t("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function hO(t,e){return e!=="rgb"?ri(t).toRgb():t}function Koe({value:t,displayValue:e,settings:n,onUpdate:r}){const{emitOnEditStart:i,emitOnEditEnd:o}=qr(),{format:s,hasAlpha:a}=n,{popinRef:l,wrapperRef:c,shown:u,show:d,hide:p}=zz(),m=R.useRef(0),[g,v]=R.useState(()=>hO(t,s)),x=a?oie:aie,y=()=>{v(hO(t,s)),d(),i()},_=()=>{p(),o(),window.clearTimeout(m.current)},w=()=>{m.current=window.setTimeout(_,500)};return R.useEffect(()=>()=>window.clearTimeout(m.current),[]),$.createElement($.Fragment,null,$.createElement(Xoe,{ref:l,active:u,onClick:()=>y(),style:{color:e}}),u&&$.createElement(lC,null,$.createElement(lz,{onPointerUp:_}),$.createElement(qoe,{ref:c,onMouseEnter:()=>window.clearTimeout(m.current),onMouseLeave:M=>M.buttons===0&&w()},$.createElement(x,{color:g,onChange:r}))))}function Zoe(){const{value:t,displayValue:e,label:n,onChange:r,onUpdate:i,settings:o}=qr();return $.createElement(wo,{input:!0},$.createElement(Qo,null,n),$.createElement(Yoe,null,$.createElement(Koe,{value:t,displayValue:e,onChange:r,onUpdate:i,settings:o}),$.createElement(aC,{value:e,onChange:r,onUpdate:i})))}var Joe=bt({component:Zoe},Goe);function Qoe(){const{label:t,displayValue:e,onUpdate:n,settings:r}=qr();return $.createElement(wo,{input:!0},$.createElement(Qo,null,t),$.createElement(uC,{value:e,settings:r,onUpdate:n}))}var ese=bt({component:Qoe},gz(["x","y","z"]));const tse=_t("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),nse=_t("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function rse({value:t,settings:e,onUpdate:n}){const r=R.useRef(),i=R.useRef(0),o=R.useRef(0),s=R.useRef(1),[a,l]=R.useState(!1),[c,u]=R.useState(!1),[d,p]=uz(),m=R.useRef(null),g=R.useRef(null);R.useLayoutEffect(()=>{if(a){const{top:H,left:W,width:Y,height:K}=m.current.getBoundingClientRect();g.current.style.left=W+Y/2+"px",g.current.style.top=H+K/2+"px"}},[a]);const{keys:[v,x],joystick:y}=e,_=y==="invertY"?1:-1,{[v]:{step:w},[x]:{step:M}}=e,A=va("sizes","joystickWidth"),C=va("sizes","joystickHeight"),P=parseFloat(A)*.8/2,N=parseFloat(C)*.8/2,O=R.useCallback(()=>{r.current||(u(!0),i.current&&p({x:i.current*P}),o.current&&p({y:o.current*-N}),r.current=window.setInterval(()=>{n(H=>{const W=w*i.current*s.current,Y=_*M*o.current*s.current;return Array.isArray(H)?{[v]:H[0]+W,[x]:H[1]+Y}:{[v]:H[v]+W,[x]:H[x]+Y}})},16))},[P,N,n,p,w,M,v,x,_]),E=R.useCallback(()=>{window.clearTimeout(r.current),r.current=void 0,u(!1)},[]);R.useEffect(()=>{function H(W){s.current=Y4(W)}return window.addEventListener("keydown",H),window.addEventListener("keyup",H),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",H),window.removeEventListener("keyup",H)}},[]);const L=bm(({first:H,active:W,delta:[Y,K],movement:[J,Q]})=>{H&&l(!0);const D=Tl(J,-P,P),G=Tl(Q,-N,N);i.current=Math.abs(J)>Math.abs(D)?Math.sign(J-D):0,o.current=Math.abs(Q)>Math.abs(G)?Math.sign(G-Q):0;let X=t[v],ne=t[x];W?(i.current||(X+=Y*w*s.current,p({x:D})),o.current||(ne-=_*K*M*s.current,p({y:G})),i.current||o.current?O():E(),n({[v]:X,[x]:ne})):(l(!1),i.current=0,o.current=0,p({x:0,y:0}),E())});return $.createElement(tse,Wn({ref:m},L()),a&&$.createElement(lC,null,$.createElement(nse,{ref:g,isOutOfBounds:c},$.createElement("div",null),$.createElement("span",{ref:d}))))}const ise=_t("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function ose(){const{label:t,displayValue:e,onUpdate:n,settings:r}=qr();return $.createElement(wo,{input:!0},$.createElement(Qo,null,t),$.createElement(ise,{withJoystick:!!r.joystick},r.joystick&&$.createElement(rse,{value:e,settings:r,onUpdate:n}),$.createElement(uC,{value:e,settings:r,onUpdate:n})))}const sse=["joystick"],Vz=gz(["x","y"]),ase=t=>{let{joystick:e=!0}=t,n=sn(t,sse);const{value:r,settings:i}=Vz.normalize(n);return{value:r,settings:bt(bt({},i),{},{joystick:e})}};var lse=bt(bt({component:ose},Vz),{},{normalize:ase});const cse=t=>{if(t!==void 0){if(t instanceof File)try{return URL.createObjectURL(t)}catch{return}if(typeof t=="string"&&t.indexOf("blob:")===0)return t;throw Error("Invalid image format [undefined | blob |File].")}},use=(t,e)=>typeof e=="object"&&"image"in e,fse=({image:t})=>({value:t});var dse=Object.freeze({__proto__:null,sanitize:cse,schema:use,normalize:fse});const hse=_t("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),pse=_t("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),mse=_t("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),gse=_t("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),yse=_t("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),vse=_t("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function xse(){const{label:t,value:e,onUpdate:n,disabled:r}=qr(),{popinRef:i,wrapperRef:o,shown:s,show:a,hide:l}=zz(),c=R.useCallback(g=>{g.length&&n(g[0])},[n]),u=R.useCallback(g=>{g.stopPropagation(),n(void 0)},[n]),{getRootProps:d,getInputProps:p,isDragAccept:m}=Nz({maxFiles:1,accept:"image/*",onDrop:c,disabled:r});return $.createElement(wo,{input:!0},$.createElement(Qo,null,t),$.createElement(hse,null,$.createElement(mse,{ref:i,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),s&&!!e&&$.createElement(lC,null,$.createElement(lz,{onPointerUp:l,style:{cursor:"pointer"}}),$.createElement(gse,{ref:o,style:{backgroundImage:`url(${e})`}})),$.createElement(pse,d({isDragAccept:m}),$.createElement("input",p()),$.createElement(yse,null,m?"drop image":"click or drop")),$.createElement(vse,{onClick:u,disabled:!e})))}var _se=bt({component:xse},dse);const pO=wi().number(),Sse=(t,e)=>wi().array().length(2).every.number().test(t)&&wi().schema({min:pO,max:pO}).test(e),nx=t=>({min:t[0],max:t[1]}),$z=(t,{bounds:[e,n]},r)=>{const i=Array.isArray(t)?nx(t):t,o={min:r[0],max:r[1]},{min:s,max:a}=bt(bt({},o),i);return[Tl(Number(s),e,Math.max(e,a)),Tl(Number(a),Math.min(n,s),n)]},wse=({value:t,min:e,max:n})=>{const r={min:e,max:n},i=mz(nx(t),{min:r,max:r}),o=[e,n],s=bt(bt({},i),{},{bounds:o});return{value:$z(nx(t),s,t),settings:s}};var bse=Object.freeze({__proto__:null,schema:Sse,format:nx,sanitize:$z,normalize:wse});const Ese=["value","bounds","onDrag"],Mse=["bounds"],Tse=_t("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function Cse(t){let{value:e,bounds:[n,r],onDrag:i}=t,o=sn(t,Ese);const s=R.useRef(null),a=R.useRef(null),l=R.useRef(null),c=R.useRef(0),u=va("sizes","scrubberWidth"),d=bm(({event:g,first:v,xy:[x],movement:[y],memo:_={}})=>{if(v){const{width:M,left:A}=s.current.getBoundingClientRect();c.current=M-parseFloat(u);const C=(g==null?void 0:g.target)===a.current||(g==null?void 0:g.target)===l.current;_.pos=Zv((x-A)/M,n,r);const P=Math.abs(_.pos-e.min)-Math.abs(_.pos-e.max);_.key=P<0||P===0&&_.pos<=e.min?"min":"max",C&&(_.pos=e[_.key])}const w=_.pos+Zv(y/c.current,0,r-n);return i({[_.key]:rre(w,o[_.key])}),_}),p=`calc(${Kv(e.min,n,r)} * (100% - ${u} - 8px) + 4px)`,m=`calc(${1-Kv(e.max,n,r)} * (100% - ${u} - 8px) + 4px)`;return $.createElement(dz,Wn({ref:s},d()),$.createElement(fz,null,$.createElement(hz,{style:{left:p,right:m}})),$.createElement(vE,{position:"left",ref:a,style:{left:p}}),$.createElement(vE,{position:"right",ref:l,style:{right:m}}))}function Ase(){const{label:t,displayValue:e,onUpdate:n,settings:r}=qr(),i=sn(r,Mse);return $.createElement($.Fragment,null,$.createElement(wo,{input:!0},$.createElement(Qo,null,t),$.createElement(Tse,null,$.createElement(Cse,Wn({value:e},r,{onDrag:n})),$.createElement(uC,{value:e,settings:i,onUpdate:n,innerLabelTrim:0}))))}var Pse=bt({component:Ase},bse);const Rse=()=>{const t=new Map;return{on:(e,n)=>{let r=t.get(e);r===void 0&&(r=new Set,t.set(e,r)),r.add(n)},off:(e,n)=>{const r=t.get(e);r!==void 0&&(r.delete(n),r.size===0&&t.delete(e))},emit:(e,...n)=>{const r=t.get(e);if(r!==void 0)for(const i of r)i(...n)}}},Ise=["type","value"],Ose=["onChange","transient","onEditStart","onEditEnd"],Lse=function(){const e=CF(eoe(()=>({data:{}}))),n=Rse();this.storeId=hne(),this.useStore=e;const r={},i=new Set;this.getVisiblePaths=()=>{const s=this.getData(),a=Object.keys(s),l=[];Object.entries(r).forEach(([u,d])=>{d.render&&a.some(p=>p.indexOf(u)===0)&&!d.render(this.get)&&l.push(u+".")});const c=[];return i.forEach(u=>{u in s&&s[u].__refCount>0&&l.every(d=>u.indexOf(d)===-1)&&(!s[u].render||s[u].render(this.get))&&c.push(u)}),c},this.setOrderedPaths=s=>{s.forEach(a=>i.add(a))},this.orderPaths=s=>(this.setOrderedPaths(s),s),this.disposePaths=s=>{e.setState(a=>{const l=a.data;return s.forEach(c=>{if(c in l){const u=l[c];u.__refCount--,u.__refCount===0&&u.type in Vo&&delete l[c]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=s=>r[s]||{},this.getData=()=>e.getState().data,this.addData=(s,a)=>{e.setState(l=>{const c=l.data;return Object.entries(s).forEach(([u,d])=>{let p=c[u];if(p){const{type:m,value:g}=d,v=sn(d,Ise);m!==p.type?ca(Pn.INPUT_TYPE_OVERRIDE,m):((p.__refCount===0||a)&&Object.assign(p,v),p.__refCount++)}else c[u]=bt(bt({},d),{},{__refCount:1})}),{data:c}})},this.setValueAtPath=(s,a,l)=>{e.setState(c=>{const u=c.data;return FI(u[s],a,s,this,l),{data:u}})},this.setSettingsAtPath=(s,a)=>{e.setState(l=>{const c=l.data;return c[s].settings=bt(bt({},c[s].settings),a),{data:c}})},this.disableInputAtPath=(s,a)=>{e.setState(l=>{const c=l.data;return c[s].disabled=a,{data:c}})},this.set=(s,a)=>{e.setState(l=>{const c=l.data;return Object.entries(s).forEach(([u,d])=>{try{FI(c[u],d,void 0,void 0,a)}catch{}}),{data:c}})},this.getInput=s=>{try{return this.getData()[s]}catch{ca(Pn.PATH_DOESNT_EXIST,s)}},this.get=s=>{var a;return(a=this.getInput(s))===null||a===void 0?void 0:a.value},this.emitOnEditStart=s=>{n.emit(`onEditStart:${s}`,this.get(s),s,bt(bt({},this.getInput(s)),{},{get:this.get}))},this.emitOnEditEnd=s=>{n.emit(`onEditEnd:${s}`,this.get(s),s,bt(bt({},this.getInput(s)),{},{get:this.get}))},this.subscribeToEditStart=(s,a)=>{const l=`onEditStart:${s}`;return n.on(l,a),()=>n.off(l,a)},this.subscribeToEditEnd=(s,a)=>{const l=`onEditEnd:${s}`;return n.on(l,a),()=>n.off(l,a)};const o=(s,a,l)=>{const c={};return Object.entries(s).forEach(([u,d])=>{if(u==="")return ca(Pn.EMPTY_KEY);let p=yC(a,u);if(d.type===Vo.FOLDER){const m=o(d.schema,p,l);Object.assign(c,m),p in r||(r[p]=d.settings)}else if(u in l)ca(Pn.DUPLICATE_KEYS,u,p,l[u].path);else{const m=Sne(d,u,p,c);if(m){const{type:g,options:v,input:x}=m,{onChange:y,transient:_,onEditStart:w,onEditEnd:M}=v,A=sn(v,Ose);c[p]=bt(bt(bt({type:g},A),x),{},{fromPanel:!0}),l[u]={path:p,onChange:y,transient:_,onEditStart:w,onEditEnd:M}}else ca(Pn.UNKNOWN_INPUT,p,d)}}),c};this.getDataFromSchema=s=>{const a={};return[o(s,"",a),a]}},Wz=new Lse,kse={collapsed:!1};function Nse(t,e){return{type:Vo.FOLDER,schema:t,settings:bt(bt({},kse),e)}}const mO=t=>"__levaInput"in t,Dse=(t,e)=>{const n={},r=e?e.toLowerCase():null;return t.forEach(i=>{const[o,s]=Doe(i);(!r||o.toLowerCase().indexOf(r)>-1)&&Noe(n,s,{[o]:{__levaInput:!0,path:i}})}),n},Use=["type","label","path","valueKey","value","settings","setValue","disabled"];function Fse(t){let{type:e,label:n,path:r,valueKey:i,value:o,settings:s,setValue:a,disabled:l}=t,c=sn(t,Use);const{displayValue:u,onChange:d,onUpdate:p}=cz({type:e,value:o,settings:s,setValue:a}),m=Hc[e].component;return m?$.createElement(Q4.Provider,{value:bt({key:i,path:r,id:""+r,label:n,displayValue:u,value:o,onChange:d,onUpdate:p,settings:s,setValue:a,disabled:l},c)},$.createElement(Hne,{disabled:l},$.createElement(m,null))):(ca(Pn.NO_COMPONENT_FOR_TYPE,e,r),null)}const zse=_t("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function Bse({onClick:t,settings:e,label:n}){const r=wm();return $.createElement(wo,null,$.createElement(zse,{disabled:e.disabled,onClick:()=>t(r.get)},n))}const Hse=_t("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),Vse=_t("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),$se=({label:t,opts:e})=>{let n=typeof t=="string"&&t.trim()===""?null:t,r=e;return typeof e.opts=="object"&&(r.label!==void 0&&(n=e.label),r=e.opts),{label:n,opts:r}};function Wse(t){const{label:e,opts:n}=$se(t),r=wm();return $.createElement(wo,{input:!!e},e&&$.createElement(Qo,null,e),$.createElement(Hse,null,Object.entries(n).map(([i,o])=>$.createElement(Vse,{key:i,onClick:()=>o(r.get)},i))))}const jse=_t("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),jz=100;function Gse(t,e){t.push(e),t.length>jz&&t.shift()}const Xse=R.forwardRef(function({initialValue:t},e){const n=va("colors","highlight3"),r=va("colors","elevation2"),i=va("colors","highlight1"),[o,s]=R.useMemo(()=>[ri(i).alpha(.4).toRgbString(),ri(i).alpha(.1).toRgbString()],[i]),a=R.useRef([t]),l=R.useRef(t),c=R.useRef(t),u=R.useRef(),d=R.useCallback((g,v)=>{if(!g)return;const{width:x,height:y}=g,_=new Path2D,w=x/jz,M=y*.05;for(let P=0;P<a.current.length;P++){const N=Kv(a.current[P],l.current,c.current),O=w*P,E=y-N*(y-M*2)-M;_.lineTo(O,E)}v.clearRect(0,0,x,y);const A=new Path2D(_);A.lineTo(w*(a.current.length+1),y),A.lineTo(0,y),A.lineTo(0,0);const C=v.createLinearGradient(0,0,0,y);C.addColorStop(0,o),C.addColorStop(1,s),v.fillStyle=C,v.fill(A),v.strokeStyle=r,v.lineJoin="round",v.lineWidth=14,v.stroke(_),v.strokeStyle=n,v.lineWidth=2,v.stroke(_)},[n,r,o,s]),[p,m]=Kne(d);return R.useImperativeHandle(e,()=>({frame:g=>{(l.current===void 0||g<l.current)&&(l.current=g),(c.current===void 0||g>c.current)&&(c.current=g),Gse(a.current,g),u.current=requestAnimationFrame(()=>d(p.current,m.current))}}),[p,m,d]),R.useEffect(()=>()=>cancelAnimationFrame(u.current),[]),$.createElement(jse,{ref:p})}),gO=t=>Number.isFinite(t)?t.toPrecision(2):t.toString(),Yse=R.forwardRef(function({initialValue:t},e){const[n,r]=R.useState(gO(t));return R.useImperativeHandle(e,()=>({frame:i=>r(gO(i))}),[]),$.createElement("div",null,n)});function yO(t){return typeof t=="function"?t():t.current}function qse({label:t,objectOrFn:e,settings:n}){const r=R.useRef(),i=R.useRef(yO(e));return R.useEffect(()=>{const o=window.setInterval(()=>{var s;document.hidden||(s=r.current)===null||s===void 0||s.frame(yO(e))},n.interval);return()=>window.clearInterval(o)},[e,n.interval]),$.createElement(wo,{input:!0},$.createElement(Qo,{align:"top"},t),n.graph?$.createElement(Xse,{ref:r,initialValue:i.current}):$.createElement(Yse,{ref:r,initialValue:i.current}))}const Kse=["type","label","key"],Zse={[Vo.BUTTON]:Bse,[Vo.BUTTON_GROUP]:Wse,[Vo.MONITOR]:qse},Jse=$.memo(({path:t})=>{const[e,{set:n,setSettings:r,disable:i,storeId:o,emitOnEditStart:s,emitOnEditEnd:a}]=Jne(t);if(!e)return null;const{type:l,label:c,key:u}=e,d=sn(e,Kse);if(l in Vo){const p=Zse[l];return $.createElement(p,Wn({label:c,path:t},d))}return l in Hc?$.createElement(Fse,Wn({key:o+t,type:l,label:c,storeId:o,path:t,valueKey:u,setValue:n,setSettings:r,disable:i,emitOnEditStart:s,emitOnEditEnd:a},d)):(one(Pn.UNSUPPORTED_INPUT,l,t),null)});function Qse({toggle:t,toggled:e,name:n}){return $.createElement(Fne,{onClick:()=>t()},$.createElement(cC,{toggled:e}),$.createElement("div",null,n))}const eae=({name:t,path:e,tree:n})=>{const r=wm(),i=yC(e,t),{collapsed:o,color:s}=r.getFolderSettings(i),[a,l]=R.useState(!o),c=R.useRef(null),u=va("colors","folderWidgetColor"),d=va("colors","folderTextColor");return R.useLayoutEffect(()=>{c.current.style.setProperty("--leva-colors-folderWidgetColor",s||u),c.current.style.setProperty("--leva-colors-folderTextColor",s||d)},[s,u,d]),$.createElement(Jv,{ref:c},$.createElement(Qse,{name:t,toggled:a,toggle:()=>l(p=>!p)}),$.createElement(Gz,{parent:i,tree:n,toggled:a}))},Gz=$.memo(({isRoot:t=!1,fill:e=!1,flat:n=!1,parent:r,tree:i,toggled:o})=>{const{wrapperRef:s,contentRef:a}=zoe(o),l=wm(),c=([d,p])=>{var m;return(mO(p)?(m=l.getInput(p.path))===null||m===void 0?void 0:m.order:l.getFolderSettings(yC(r,d)).order)||0},u=Object.entries(i).sort((d,p)=>c(d)-c(p));return $.createElement(gE,{ref:s,isRoot:t,fill:e,flat:n},$.createElement(oz,{ref:a,isRoot:t,toggled:o},u.map(([d,p])=>mO(p)?$.createElement(Jse,{key:p.path,valueKey:p.valueKey,path:p.path}):$.createElement(eae,{key:d,name:d,path:r,tree:p}))))}),tae=_t("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${az}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),Xz=40,rx=_t("i",{$flexCenter:"",width:Xz,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),nae=_t("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),rae=_t("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${rx}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),iae=_t("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),oae=_t("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:Xz}}}}),sae=$.forwardRef(({setFilter:t,toggle:e},n)=>{const[r,i]=R.useState(""),o=R.useMemo(()=>X4(t,250),[t]),s=()=>{t(""),i("")},a=l=>{const c=l.currentTarget.value;e(!0),i(c)};return R.useEffect(()=>{o(r)},[r,o]),$.createElement($.Fragment,null,$.createElement(iae,{ref:n,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:a}),$.createElement(rx,{onClick:()=>s(),style:{visibility:r?"visible":"hidden"}},$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},$.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function aae({setFilter:t,onDrag:e,onDragStart:n,onDragEnd:r,toggle:i,toggled:o,title:s,drag:a,filterEnabled:l,from:c}){const[u,d]=R.useState(!1),p=R.useRef(null);R.useEffect(()=>{var g,v;u?(g=p.current)===null||g===void 0||g.focus():(v=p.current)===null||v===void 0||v.blur()},[u]);const m=bm(({offset:[g,v],first:x,last:y})=>{e({x:g,y:v}),x&&n({x:g,y:v}),y&&r({x:g,y:v})},{filterTaps:!0,from:({offset:[g,v]})=>[(c==null?void 0:c.x)||g,(c==null?void 0:c.y)||v]});return R.useEffect(()=>{const g=v=>{v.key==="L"&&v.shiftKey&&v.metaKey&&d(x=>!x)};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[]),$.createElement($.Fragment,null,$.createElement(nae,{mode:a?"drag":void 0},$.createElement(rx,{active:!o,onClick:()=>i()},$.createElement(cC,{toggled:o,width:12,height:8})),$.createElement(oae,Wn({},a?m():{},{drag:a,filterEnabled:l}),s===void 0&&a?$.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},$.createElement("circle",{cx:"2",cy:"2",r:"2"}),$.createElement("circle",{cx:"14",cy:"2",r:"2"}),$.createElement("circle",{cx:"26",cy:"2",r:"2"}),$.createElement("circle",{cx:"2",cy:"12",r:"2"}),$.createElement("circle",{cx:"14",cy:"12",r:"2"}),$.createElement("circle",{cx:"26",cy:"12",r:"2"})):s),l&&$.createElement(rx,{active:u,onClick:()=>d(g=>!g)},$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},$.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),$.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),$.createElement(rae,{toggled:u},$.createElement(sae,{ref:p,setFilter:t,toggle:i})))}const lae=["store","hidden","theme","collapsed"];function cae(t){let{store:e,hidden:n=!1,theme:r,collapsed:i=!1}=t,o=sn(t,lae);const s=Fz(()=>One(r),[r]),[a,l]=R.useState(!i),c=typeof i=="object"?!i.collapsed:a,u=R.useMemo(()=>typeof i=="object"?d=>{typeof d=="function"?i.onChange(!d(!i.collapsed)):i.onChange(!d)}:l,[i]);return!e||n?null:$.createElement(sC.Provider,{value:s},$.createElement(uae,Wn({store:e},o,{toggled:c,setToggle:u,rootClass:s.className})))}const uae=$.memo(({store:t,rootClass:e,fill:n=!1,flat:r=!1,neverHide:i=!1,oneLineLabels:o=!1,titleBar:s={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:l,setToggle:c})=>{var u,d;const p=Boe(t),[m,g]=R.useState(""),v=R.useMemo(()=>Dse(p,m),[p,m]),[x,y]=uz(),_=i||p.length>0,w=typeof s=="object"&&s.title||void 0,M=typeof s=="object"&&(u=s.drag)!==null&&u!==void 0?u:!0,A=typeof s=="object"&&(d=s.filter)!==null&&d!==void 0?d:!0,C=typeof s=="object"&&s.position||void 0,P=typeof s=="object"&&s.onDrag||void 0,N=typeof s=="object"&&s.onDragStart||void 0,O=typeof s=="object"&&s.onDragEnd||void 0;return $.useEffect(()=>{y({x:C==null?void 0:C.x,y:C==null?void 0:C.y})},[C,y]),Ine(),$.createElement(tz.Provider,{value:{hideCopyButton:a}},$.createElement(tae,{ref:x,className:e,fill:n,flat:r,oneLineLabels:o,hideTitleBar:!s,style:{display:_?"block":"none"}},s&&$.createElement(aae,{onDrag:E=>{y(E),P==null||P(E)},onDragStart:E=>N==null?void 0:N(E),onDragEnd:E=>O==null?void 0:O(E),setFilter:g,toggle:E=>c(L=>E??!L),toggled:l,title:w,drag:M,filterEnabled:A,from:C}),_&&$.createElement(ez.Provider,{value:t},$.createElement(Gz,{isRoot:!0,fill:n,flat:r,tree:v,toggled:l}))))}),fae=["isRoot"];let ix=!1,yc=null;function Yz(t){let{isRoot:e=!1}=t,n=sn(t,fae);return R.useEffect(()=>(ix=!0,!e&&yc&&(yc.remove(),yc=null),()=>{e||(ix=!1)}),[e]),$.createElement(cae,Wn({store:Wz},n))}function dae(t){R.useEffect(()=>{t&&!ix&&(yc||(yc=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(yc),bne($.createElement(Yz,{isRoot:!0}),yc))),ix=!0)},[t])}function hae(t,e,n,r,i){let o,s,a,l,c;return typeof t=="string"?(s=t,o=e,Array.isArray(n)&&(c=n)):(o=t,Array.isArray(e)?c=e:(l=e,c=n)),{schema:o,folderName:s,folderSettings:a,hookSettings:l,deps:c||[]}}function vC(t,e,n,r,i){const{folderName:o,schema:s,folderSettings:a,hookSettings:l,deps:c}=hae(t,e,n),u=typeof s=="function",d=R.useRef(!1),p=R.useRef(!0),m=Fz(()=>{d.current=!0;const L=typeof s=="function"?s():s;return o?{[o]:Nse(L,a)}:L},c),g=!(l!=null&&l.store);dae(g);const[v]=R.useState(()=>(l==null?void 0:l.store)||Wz),[x,y]=R.useMemo(()=>v.getDataFromSchema(m),[v,m]),[_,w,M,A,C]=R.useMemo(()=>{const L=[],H=[],W={},Y={},K={};return Object.values(y).forEach(({path:J,onChange:Q,onEditStart:D,onEditEnd:G,transient:X})=>{L.push(J),Q?(W[J]=Q,X||H.push(J)):H.push(J),D&&(Y[J]=D),G&&(K[J]=G)}),[L,H,W,Y,K]},[y]),P=R.useMemo(()=>v.orderPaths(_),[_,v]),N=Hoe(v,w,x),O=R.useCallback(L=>{const H=Object.entries(L).reduce((W,[Y,K])=>Object.assign(W,{[y[Y].path]:K}),{});v.set(H,!1)},[v,y]),E=R.useCallback(L=>v.get(y[L].path),[v,y]);return R.useEffect(()=>{const L=!p.current&&d.current;return v.addData(x,L),p.current=!1,d.current=!1,()=>v.disposePaths(P)},[v,P,x]),R.useEffect(()=>{const L=[];return Object.entries(M).forEach(([H,W])=>{W(v.get(H),H,bt({initial:!0,get:v.get},v.getInput(H)));const Y=v.useStore.subscribe(K=>{const J=K.data[H];return[J.disabled?void 0:J.value,J]},([K,J])=>W(K,H,bt({initial:!1,get:v.get},J)),{equalityFn:T1});L.push(Y)}),()=>L.forEach(H=>H())},[v,M]),R.useEffect(()=>{const L=[];return Object.entries(A).forEach(([H,W])=>L.push(v.subscribeToEditStart(H,W))),Object.entries(C).forEach(([H,W])=>L.push(v.subscribeToEditEnd(H,W))),()=>L.forEach(H=>H())},[A,C,v]),u?[N,O,E]:N}ka(Yo.SELECT,mre);ka(Yo.IMAGE,_se);ka(Yo.NUMBER,ore);ka(Yo.COLOR,Joe);ka(Yo.STRING,Ere);ka(Yo.BOOLEAN,Ire);ka(Yo.INTERVAL,Pse);ka(Yo.VECTOR3D,ese);ka(Yo.VECTOR2D,lse);class qz extends R.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){this.setState({hasError:!0,error:e})}render(){var e,n;return this.state.hasError?k.jsxs("div",{children:[k.jsxs("h1",{children:["Something went wrong: ",(e=this.state.error)==null?void 0:e.message]}),k.jsx("pre",{children:(n=this.state.error)==null?void 0:n.stack})]}):this.props.children}}const Tm=new z,xC=new z,pae=new z,vO=new Se;function mae(t,e,n){const r=Tm.setFromMatrixPosition(t.matrixWorld);r.project(e);const i=n.width/2,o=n.height/2;return[r.x*i+i,-(r.y*o)+o]}function gae(t,e){const n=Tm.setFromMatrixPosition(t.matrixWorld),r=xC.setFromMatrixPosition(e.matrixWorld),i=n.sub(r),o=e.getWorldDirection(pae);return i.angleTo(o)>Math.PI/2}function yae(t,e,n,r){const i=Tm.setFromMatrixPosition(t.matrixWorld),o=i.clone();o.project(e),vO.set(o.x,o.y),n.setFromCamera(vO,e);const s=n.intersectObjects(r,!0);if(s.length){const a=s[0].distance;return i.distanceTo(n.ray.origin)<a}return!0}function vae(t,e){if(e instanceof Fo)return e.zoom;if(e instanceof Tn){const n=Tm.setFromMatrixPosition(t.matrixWorld),r=xC.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,o=n.distanceTo(r);return 1/(2*Math.tan(i/2)*o)}else return 1}function xae(t,e,n){if(e instanceof Tn||e instanceof Fo){const r=Tm.setFromMatrixPosition(t.matrixWorld),i=xC.setFromMatrixPosition(e.matrixWorld),o=r.distanceTo(i),s=(n[1]-n[0])/(e.far-e.near),a=n[1]-s*e.far;return Math.round(s*o+a)}}const IE=t=>Math.abs(t)<1e-10?0:t;function Kz(t,e,n=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=IE(e[i]*t.elements[i])+(i!==15?",":")");return n+r}const _ae=(t=>e=>Kz(e,t))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Sae=(t=>(e,n)=>Kz(e,t(n),"translate(-50%,-50%)"))(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1]);function wae(t){return t&&typeof t=="object"&&"current"in t}const bae=R.forwardRef(({children:t,eps:e=.001,style:n,className:r,prepend:i,center:o,fullscreen:s,portal:a,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:d,onOcclude:p,castShadow:m,receiveShadow:g,material:v,geometry:x,zIndexRange:y=[16777271,0],calculatePosition:_=mae,as:w="div",wrapperClass:M,pointerEvents:A="auto",...C},P)=>{const{gl:N,camera:O,scene:E,size:L,raycaster:H,events:W,viewport:Y}=gs(),[K]=R.useState(()=>document.createElement(w)),J=R.useRef(),Q=R.useRef(null),D=R.useRef(0),G=R.useRef([0,0]),X=R.useRef(null),ne=R.useRef(null),pe=(a==null?void 0:a.current)||W.connected||N.domElement.parentNode,De=R.useRef(null),ae=R.useRef(!1),_e=R.useMemo(()=>d&&d!=="blending"||Array.isArray(d)&&d.length&&wae(d[0]),[d]);R.useLayoutEffect(()=>{const Ye=N.domElement;d&&d==="blending"?(Ye.style.zIndex=`${Math.floor(y[0]/2)}`,Ye.style.position="absolute",Ye.style.pointerEvents="none"):(Ye.style.zIndex=null,Ye.style.position=null,Ye.style.pointerEvents=null)},[d]),R.useLayoutEffect(()=>{if(Q.current){const Ye=J.current=DM(K);if(E.updateMatrixWorld(),u)K.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Ve=_(Q.current,O,L);K.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Ve[0]}px,${Ve[1]}px,0);transform-origin:0 0;`}return pe&&(i?pe.prepend(K):pe.appendChild(K)),()=>{pe&&pe.removeChild(K),Ye.unmount()}}},[pe,u]),R.useLayoutEffect(()=>{M&&(K.className=M)},[M]);const Re=R.useMemo(()=>u?{position:"absolute",top:0,left:0,width:L.width,height:L.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:o?"translate3d(-50%,-50%,0)":"none",...s&&{top:-L.height/2,left:-L.width/2,width:L.width,height:L.height},...n},[n,o,s,L,u]),Ae=R.useMemo(()=>({position:"absolute",pointerEvents:A}),[A]);R.useLayoutEffect(()=>{if(ae.current=!1,u){var Ye;(Ye=J.current)==null||Ye.render(R.createElement("div",{ref:X,style:Re},R.createElement("div",{ref:ne,style:Ae},R.createElement("div",{ref:P,className:r,style:n,children:t}))))}else{var Ve;(Ve=J.current)==null||Ve.render(R.createElement("div",{ref:P,style:Re,className:r,children:t}))}});const qe=R.useRef(!0);VF(Ye=>{if(Q.current){O.updateMatrixWorld(),Q.current.updateWorldMatrix(!0,!1);const Ve=u?G.current:_(Q.current,O,L);if(u||Math.abs(D.current-O.zoom)>e||Math.abs(G.current[0]-Ve[0])>e||Math.abs(G.current[1]-Ve[1])>e){const B=gae(Q.current,O);let me=!1;_e&&(Array.isArray(d)?me=d.map($e=>$e.current):d!=="blending"&&(me=[E]));const be=qe.current;if(me){const $e=yae(Q.current,O,H,me);qe.current=$e&&!B}else qe.current=!B;be!==qe.current&&(p?p(!qe.current):K.style.display=qe.current?"block":"none");const ke=Math.floor(y[0]/2),ye=d?_e?[y[0],ke]:[ke-1,0]:y;if(K.style.zIndex=`${xae(Q.current,O,ye)}`,u){const[$e,Ne]=[L.width/2,L.height/2],ze=O.projectionMatrix.elements[5]*Ne,{isOrthographicCamera:V,top:U,left:le,bottom:ee,right:se}=O,he=_ae(O.matrixWorldInverse),je=V?`scale(${ze})translate(${IE(-(se+le)/2)}px,${IE((U+ee)/2)}px)`:`translateZ(${ze}px)`;let Ee=Q.current.matrixWorld;c&&(Ee=O.matrixWorldInverse.clone().transpose().copyPosition(Ee).scale(Q.current.scale),Ee.elements[3]=Ee.elements[7]=Ee.elements[11]=0,Ee.elements[15]=1),K.style.width=L.width+"px",K.style.height=L.height+"px",K.style.perspective=V?"":`${ze}px`,X.current&&ne.current&&(X.current.style.transform=`${je}${he}translate(${$e}px,${Ne}px)`,ne.current.style.transform=Sae(Ee,1/((l||10)/400)))}else{const $e=l===void 0?1:vae(Q.current,O)*l;K.style.transform=`translate3d(${Ve[0]}px,${Ve[1]}px,0) scale(${$e})`}G.current=Ve,D.current=O.zoom}}if(!_e&&De.current&&!ae.current)if(u){if(X.current){const Ve=X.current.children[0];if(Ve!=null&&Ve.clientWidth&&Ve!=null&&Ve.clientHeight){const{isOrthographicCamera:B}=O;if(B||x)C.scale&&(Array.isArray(C.scale)?C.scale instanceof z?De.current.scale.copy(C.scale.clone().divideScalar(1)):De.current.scale.set(1/C.scale[0],1/C.scale[1],1/C.scale[2]):De.current.scale.setScalar(1/C.scale));else{const me=(l||10)/400,be=Ve.clientWidth*me,ke=Ve.clientHeight*me;De.current.scale.set(be,ke,1)}ae.current=!0}}}else{const Ve=K.children[0];if(Ve!=null&&Ve.clientWidth&&Ve!=null&&Ve.clientHeight){const B=1/Y.factor,me=Ve.clientWidth*B,be=Ve.clientHeight*B;De.current.scale.set(me,be,1),ae.current=!0}De.current.lookAt(Ye.camera.position)}});const ut=R.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return R.createElement("group",xl({},C,{ref:Q}),d&&!_e&&R.createElement("mesh",{castShadow:m,receiveShadow:g,ref:De},x||R.createElement("planeGeometry",null),v||R.createElement("shaderMaterial",{side:xi,vertexShader:ut.vertexShader,fragmentShader:ut.fragmentShader})))}),Eae=parseInt(ad.replace(/\D+/g,"")),Zz=Eae>=125?"uv1":"uv2";var Mae=Object.defineProperty,Tae=(t,e,n)=>e in t?Mae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mt=(t,e,n)=>(Tae(t,typeof e!="symbol"?e+"":e,n),n);const Q0=new jc,xO=new ra,Cae=Math.cos(70*(Math.PI/180)),_O=(t,e)=>(t%e+e)%e;let Aae=class extends Ko{constructor(e,n){super(),Mt(this,"object"),Mt(this,"domElement"),Mt(this,"enabled",!0),Mt(this,"target",new z),Mt(this,"minDistance",0),Mt(this,"maxDistance",1/0),Mt(this,"minZoom",0),Mt(this,"maxZoom",1/0),Mt(this,"minPolarAngle",0),Mt(this,"maxPolarAngle",Math.PI),Mt(this,"minAzimuthAngle",-1/0),Mt(this,"maxAzimuthAngle",1/0),Mt(this,"enableDamping",!1),Mt(this,"dampingFactor",.05),Mt(this,"enableZoom",!0),Mt(this,"zoomSpeed",1),Mt(this,"enableRotate",!0),Mt(this,"rotateSpeed",1),Mt(this,"enablePan",!0),Mt(this,"panSpeed",1),Mt(this,"screenSpacePanning",!0),Mt(this,"keyPanSpeed",7),Mt(this,"zoomToCursor",!1),Mt(this,"autoRotate",!1),Mt(this,"autoRotateSpeed",2),Mt(this,"reverseOrbit",!1),Mt(this,"reverseHorizontalOrbit",!1),Mt(this,"reverseVerticalOrbit",!1),Mt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Mt(this,"mouseButtons",{LEFT:oc.ROTATE,MIDDLE:oc.DOLLY,RIGHT:oc.PAN}),Mt(this,"touches",{ONE:sc.ROTATE,TWO:sc.DOLLY_PAN}),Mt(this,"target0"),Mt(this,"position0"),Mt(this,"zoom0"),Mt(this,"_domElementKeyEvents",null),Mt(this,"getPolarAngle"),Mt(this,"getAzimuthalAngle"),Mt(this,"setPolarAngle"),Mt(this,"setAzimuthalAngle"),Mt(this,"getDistance"),Mt(this,"listenToKeyEvents"),Mt(this,"stopListenToKeyEvents"),Mt(this,"saveState"),Mt(this,"reset"),Mt(this,"update"),Mt(this,"connect"),Mt(this,"dispose"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=Z=>{let we=_O(Z,2*Math.PI),Xe=u.phi;Xe<0&&(Xe+=2*Math.PI),we<0&&(we+=2*Math.PI);let q=Math.abs(we-Xe);2*Math.PI-q<q&&(we<Xe?we+=2*Math.PI:Xe+=2*Math.PI),d.phi=we-Xe,r.update()},this.setAzimuthalAngle=Z=>{let we=_O(Z,2*Math.PI),Xe=u.theta;Xe<0&&(Xe+=2*Math.PI),we<0&&(we+=2*Math.PI);let q=Math.abs(we-Xe);2*Math.PI-q<q&&(we<Xe?we+=2*Math.PI:Xe+=2*Math.PI),d.theta=we-Xe,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=Z=>{Z.addEventListener("keydown",Ee),this._domElementKeyEvents=Z},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ee),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const Z=new z,we=new z(0,1,0),Xe=new Xr().setFromUnitVectors(e.up,we),q=Xe.clone().invert(),Pe=new z,Me=new Xr,Te=2*Math.PI;return function(){const vt=r.object.position;Xe.setFromUnitVectors(e.up,we),q.copy(Xe).invert(),Z.copy(vt).sub(r.target),Z.applyQuaternion(Xe),u.setFromVector3(Z),r.autoRotate&&l===a.NONE&&Y(H()),r.enableDamping?(u.theta+=d.theta*r.dampingFactor,u.phi+=d.phi*r.dampingFactor):(u.theta+=d.theta,u.phi+=d.phi);let Tt=r.minAzimuthAngle,Vt=r.maxAzimuthAngle;isFinite(Tt)&&isFinite(Vt)&&(Tt<-Math.PI?Tt+=Te:Tt>Math.PI&&(Tt-=Te),Vt<-Math.PI?Vt+=Te:Vt>Math.PI&&(Vt-=Te),Tt<=Vt?u.theta=Math.max(Tt,Math.min(Vt,u.theta)):u.theta=u.theta>(Tt+Vt)/2?Math.max(Tt,u.theta):Math.min(Vt,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(m,r.dampingFactor):r.target.add(m),r.zoomToCursor&&O||r.object.isOrthographicCamera?u.radius=pe(u.radius):u.radius=pe(u.radius*p),Z.setFromSpherical(u),Z.applyQuaternion(q),vt.copy(r.target).add(Z),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(d.theta*=1-r.dampingFactor,d.phi*=1-r.dampingFactor,m.multiplyScalar(1-r.dampingFactor)):(d.set(0,0,0),m.set(0,0,0));let mn=!1;if(r.zoomToCursor&&O){let Dt=null;if(r.object instanceof Tn&&r.object.isPerspectiveCamera){const ar=Z.length();Dt=pe(ar*p);const lr=ar-Dt;r.object.position.addScaledVector(P,lr),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const ar=new z(N.x,N.y,0);ar.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix(),mn=!0;const lr=new z(N.x,N.y,0);lr.unproject(r.object),r.object.position.sub(lr).add(ar),r.object.updateMatrixWorld(),Dt=Z.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Dt!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Dt).add(r.object.position):(Q0.origin.copy(r.object.position),Q0.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(Q0.direction))<Cae?e.lookAt(r.target):(xO.setFromNormalAndCoplanarPoint(r.object.up,r.target),Q0.intersectPlane(xO,r.target))))}else r.object instanceof Fo&&r.object.isOrthographicCamera&&(mn=p!==1,mn&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix()));return p=1,O=!1,mn||Pe.distanceToSquared(r.object.position)>c||8*(1-Me.dot(r.object.quaternion))>c?(r.dispatchEvent(i),Pe.copy(r.object.position),Me.copy(r.object.quaternion),mn=!1,!0):!1}})(),this.connect=Z=>{r.domElement=Z,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Ie),r.domElement.addEventListener("pointerdown",U),r.domElement.addEventListener("pointercancel",ee),r.domElement.addEventListener("wheel",je)},this.dispose=()=>{var Z,we,Xe,q,Pe,Me;r.domElement&&(r.domElement.style.touchAction="auto"),(Z=r.domElement)==null||Z.removeEventListener("contextmenu",Ie),(we=r.domElement)==null||we.removeEventListener("pointerdown",U),(Xe=r.domElement)==null||Xe.removeEventListener("pointercancel",ee),(q=r.domElement)==null||q.removeEventListener("wheel",je),(Pe=r.domElement)==null||Pe.ownerDocument.removeEventListener("pointermove",le),(Me=r.domElement)==null||Me.ownerDocument.removeEventListener("pointerup",ee),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Ee)};const r=this,i={type:"change"},o={type:"start"},s={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new tE,d=new tE;let p=1;const m=new z,g=new Se,v=new Se,x=new Se,y=new Se,_=new Se,w=new Se,M=new Se,A=new Se,C=new Se,P=new z,N=new Se;let O=!1;const E=[],L={};function H(){return 2*Math.PI/60/60*r.autoRotateSpeed}function W(){return Math.pow(.95,r.zoomSpeed)}function Y(Z){r.reverseOrbit||r.reverseHorizontalOrbit?d.theta+=Z:d.theta-=Z}function K(Z){r.reverseOrbit||r.reverseVerticalOrbit?d.phi+=Z:d.phi-=Z}const J=(()=>{const Z=new z;return function(Xe,q){Z.setFromMatrixColumn(q,0),Z.multiplyScalar(-Xe),m.add(Z)}})(),Q=(()=>{const Z=new z;return function(Xe,q){r.screenSpacePanning===!0?Z.setFromMatrixColumn(q,1):(Z.setFromMatrixColumn(q,0),Z.crossVectors(r.object.up,Z)),Z.multiplyScalar(Xe),m.add(Z)}})(),D=(()=>{const Z=new z;return function(Xe,q){const Pe=r.domElement;if(Pe&&r.object instanceof Tn&&r.object.isPerspectiveCamera){const Me=r.object.position;Z.copy(Me).sub(r.target);let Te=Z.length();Te*=Math.tan(r.object.fov/2*Math.PI/180),J(2*Xe*Te/Pe.clientHeight,r.object.matrix),Q(2*q*Te/Pe.clientHeight,r.object.matrix)}else Pe&&r.object instanceof Fo&&r.object.isOrthographicCamera?(J(Xe*(r.object.right-r.object.left)/r.object.zoom/Pe.clientWidth,r.object.matrix),Q(q*(r.object.top-r.object.bottom)/r.object.zoom/Pe.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function G(Z){r.object instanceof Tn&&r.object.isPerspectiveCamera||r.object instanceof Fo&&r.object.isOrthographicCamera?p/=Z:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function X(Z){r.object instanceof Tn&&r.object.isPerspectiveCamera||r.object instanceof Fo&&r.object.isOrthographicCamera?p*=Z:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function ne(Z){if(!r.zoomToCursor||!r.domElement)return;O=!0;const we=r.domElement.getBoundingClientRect(),Xe=Z.clientX-we.left,q=Z.clientY-we.top,Pe=we.width,Me=we.height;N.x=Xe/Pe*2-1,N.y=-(q/Me)*2+1,P.set(N.x,N.y,1).unproject(r.object).sub(r.object.position).normalize()}function pe(Z){return Math.max(r.minDistance,Math.min(r.maxDistance,Z))}function De(Z){g.set(Z.clientX,Z.clientY)}function ae(Z){ne(Z),M.set(Z.clientX,Z.clientY)}function _e(Z){y.set(Z.clientX,Z.clientY)}function Re(Z){v.set(Z.clientX,Z.clientY),x.subVectors(v,g).multiplyScalar(r.rotateSpeed);const we=r.domElement;we&&(Y(2*Math.PI*x.x/we.clientHeight),K(2*Math.PI*x.y/we.clientHeight)),g.copy(v),r.update()}function Ae(Z){A.set(Z.clientX,Z.clientY),C.subVectors(A,M),C.y>0?G(W()):C.y<0&&X(W()),M.copy(A),r.update()}function qe(Z){_.set(Z.clientX,Z.clientY),w.subVectors(_,y).multiplyScalar(r.panSpeed),D(w.x,w.y),y.copy(_),r.update()}function ut(Z){ne(Z),Z.deltaY<0?X(W()):Z.deltaY>0&&G(W()),r.update()}function Ye(Z){let we=!1;switch(Z.code){case r.keys.UP:D(0,r.keyPanSpeed),we=!0;break;case r.keys.BOTTOM:D(0,-r.keyPanSpeed),we=!0;break;case r.keys.LEFT:D(r.keyPanSpeed,0),we=!0;break;case r.keys.RIGHT:D(-r.keyPanSpeed,0),we=!0;break}we&&(Z.preventDefault(),r.update())}function Ve(){if(E.length==1)g.set(E[0].pageX,E[0].pageY);else{const Z=.5*(E[0].pageX+E[1].pageX),we=.5*(E[0].pageY+E[1].pageY);g.set(Z,we)}}function B(){if(E.length==1)y.set(E[0].pageX,E[0].pageY);else{const Z=.5*(E[0].pageX+E[1].pageX),we=.5*(E[0].pageY+E[1].pageY);y.set(Z,we)}}function me(){const Z=E[0].pageX-E[1].pageX,we=E[0].pageY-E[1].pageY,Xe=Math.sqrt(Z*Z+we*we);M.set(0,Xe)}function be(){r.enableZoom&&me(),r.enablePan&&B()}function ke(){r.enableZoom&&me(),r.enableRotate&&Ve()}function ye(Z){if(E.length==1)v.set(Z.pageX,Z.pageY);else{const Xe=Ze(Z),q=.5*(Z.pageX+Xe.x),Pe=.5*(Z.pageY+Xe.y);v.set(q,Pe)}x.subVectors(v,g).multiplyScalar(r.rotateSpeed);const we=r.domElement;we&&(Y(2*Math.PI*x.x/we.clientHeight),K(2*Math.PI*x.y/we.clientHeight)),g.copy(v)}function $e(Z){if(E.length==1)_.set(Z.pageX,Z.pageY);else{const we=Ze(Z),Xe=.5*(Z.pageX+we.x),q=.5*(Z.pageY+we.y);_.set(Xe,q)}w.subVectors(_,y).multiplyScalar(r.panSpeed),D(w.x,w.y),y.copy(_)}function Ne(Z){const we=Ze(Z),Xe=Z.pageX-we.x,q=Z.pageY-we.y,Pe=Math.sqrt(Xe*Xe+q*q);A.set(0,Pe),C.set(0,Math.pow(A.y/M.y,r.zoomSpeed)),G(C.y),M.copy(A)}function ze(Z){r.enableZoom&&Ne(Z),r.enablePan&&$e(Z)}function V(Z){r.enableZoom&&Ne(Z),r.enableRotate&&ye(Z)}function U(Z){var we,Xe;r.enabled!==!1&&(E.length===0&&((we=r.domElement)==null||we.ownerDocument.addEventListener("pointermove",le),(Xe=r.domElement)==null||Xe.ownerDocument.addEventListener("pointerup",ee)),We(Z),Z.pointerType==="touch"?Oe(Z):se(Z))}function le(Z){r.enabled!==!1&&(Z.pointerType==="touch"?dt(Z):he(Z))}function ee(Z){var we,Xe,q;Ct(Z),E.length===0&&((we=r.domElement)==null||we.releasePointerCapture(Z.pointerId),(Xe=r.domElement)==null||Xe.ownerDocument.removeEventListener("pointermove",le),(q=r.domElement)==null||q.ownerDocument.removeEventListener("pointerup",ee)),r.dispatchEvent(s),l=a.NONE}function se(Z){let we;switch(Z.button){case 0:we=r.mouseButtons.LEFT;break;case 1:we=r.mouseButtons.MIDDLE;break;case 2:we=r.mouseButtons.RIGHT;break;default:we=-1}switch(we){case oc.DOLLY:if(r.enableZoom===!1)return;ae(Z),l=a.DOLLY;break;case oc.ROTATE:if(Z.ctrlKey||Z.metaKey||Z.shiftKey){if(r.enablePan===!1)return;_e(Z),l=a.PAN}else{if(r.enableRotate===!1)return;De(Z),l=a.ROTATE}break;case oc.PAN:if(Z.ctrlKey||Z.metaKey||Z.shiftKey){if(r.enableRotate===!1)return;De(Z),l=a.ROTATE}else{if(r.enablePan===!1)return;_e(Z),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(o)}function he(Z){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;Re(Z);break;case a.DOLLY:if(r.enableZoom===!1)return;Ae(Z);break;case a.PAN:if(r.enablePan===!1)return;qe(Z);break}}function je(Z){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(Z.preventDefault(),r.dispatchEvent(o),ut(Z),r.dispatchEvent(s))}function Ee(Z){r.enabled===!1||r.enablePan===!1||Ye(Z)}function Oe(Z){switch(gt(Z),E.length){case 1:switch(r.touches.ONE){case sc.ROTATE:if(r.enableRotate===!1)return;Ve(),l=a.TOUCH_ROTATE;break;case sc.PAN:if(r.enablePan===!1)return;B(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case sc.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;be(),l=a.TOUCH_DOLLY_PAN;break;case sc.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;ke(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(o)}function dt(Z){switch(gt(Z),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;ye(Z),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;$e(Z),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ze(Z),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;V(Z),r.update();break;default:l=a.NONE}}function Ie(Z){r.enabled!==!1&&Z.preventDefault()}function We(Z){E.push(Z)}function Ct(Z){delete L[Z.pointerId];for(let we=0;we<E.length;we++)if(E[we].pointerId==Z.pointerId){E.splice(we,1);return}}function gt(Z){let we=L[Z.pointerId];we===void 0&&(we=new Se,L[Z.pointerId]=we),we.set(Z.pageX,Z.pageY)}function Ze(Z){const we=Z.pointerId===E[0].pointerId?E[1]:E[0];return L[we.pointerId]}n!==void 0&&this.connect(n),this.update()}};const SO=new vr,ey=new z;class _C extends BT{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],n=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],r=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(r),this.setAttribute("position",new ct(e,3)),this.setAttribute("uv",new ct(n,2))}applyMatrix4(e){const n=this.attributes.instanceStart,r=this.attributes.instanceEnd;return n!==void 0&&(n.applyMatrix4(e),r.applyMatrix4(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));const r=new Vv(n,6,1);return this.setAttribute("instanceStart",new Vi(r,3,0)),this.setAttribute("instanceEnd",new Vi(r,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e,n=3){let r;e instanceof Float32Array?r=e:Array.isArray(e)&&(r=new Float32Array(e));const i=new Vv(r,n*2,1);return this.setAttribute("instanceColorStart",new Vi(i,n,0)),this.setAttribute("instanceColorEnd",new Vi(i,n,n)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new kT(e.geometry)),this}fromLineSegments(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vr);const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;e!==void 0&&n!==void 0&&(this.boundingBox.setFromBufferAttribute(e),SO.setFromBufferAttribute(n),this.boundingBox.union(SO))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xr),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;if(e!==void 0&&n!==void 0){const r=this.boundingSphere.center;this.boundingBox.getCenter(r);let i=0;for(let o=0,s=e.count;o<s;o++)ey.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared(ey)),ey.fromBufferAttribute(n,o),i=Math.max(i,r.distanceToSquared(ey));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class Jz extends _C{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const n=e.length-3,r=new Float32Array(2*n);for(let i=0;i<n;i+=3)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5];return super.setPositions(r),this}setColors(e,n=3){const r=e.length-n,i=new Float32Array(2*r);if(n===3)for(let o=0;o<r;o+=n)i[2*o]=e[o],i[2*o+1]=e[o+1],i[2*o+2]=e[o+2],i[2*o+3]=e[o+3],i[2*o+4]=e[o+4],i[2*o+5]=e[o+5];else for(let o=0;o<r;o+=n)i[2*o]=e[o],i[2*o+1]=e[o+1],i[2*o+2]=e[o+2],i[2*o+3]=e[o+3],i[2*o+4]=e[o+4],i[2*o+5]=e[o+5],i[2*o+6]=e[o+6],i[2*o+7]=e[o+7];return super.setColors(i,n),this}fromLine(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}}class SC extends _o{constructor(e){super({type:"LineMaterial",uniforms:Uv.clone(Uv.merge([Ge.common,Ge.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Se(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
						attribute vec4 instanceColorStart;
						attribute vec4 instanceColorEnd;
					#else
						varying vec3 vLineColor;
						attribute vec3 instanceColorStart;
						attribute vec3 instanceColorEnd;
					#endif
				#endif

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
					#else
						varying vec3 vLineColor;
					#endif
				#endif

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );
					#ifdef USE_COLOR
						#ifdef USE_LINE_COLOR_ALPHA
							diffuseColor *= vLineColor;
						#else
							diffuseColor.rgb *= vLineColor;
						#endif
					#endif

					#include <logdepthbuf_fragment>

					gl_FragColor = diffuseColor;

					#include <tonemapping_fragment>
					#include <${parseInt(ad.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(n){this.uniforms.diffuse.value=n}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(n){n===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(n){this.uniforms.linewidth.value=n}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(n){!!n!="USE_DASH"in this.defines&&(this.needsUpdate=!0),n===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(n){this.uniforms.dashScale.value=n}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(n){this.uniforms.dashSize.value=n}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(n){this.uniforms.dashOffset.value=n}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(n){this.uniforms.gapSize.value=n}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(n){this.uniforms.opacity.value=n}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(n){this.uniforms.resolution.value.copy(n)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(n){!!n!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),n===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const Ow=new Bt,wO=new z,bO=new z,br=new Bt,Er=new Bt,ds=new Bt,Lw=new z,kw=new St,Cr=new bF,EO=new z,ty=new vr,ny=new xr,hs=new Bt;let ws,Ac;function MO(t,e,n){return hs.set(0,0,-e,1).applyMatrix4(t.projectionMatrix),hs.multiplyScalar(1/hs.w),hs.x=Ac/n.width,hs.y=Ac/n.height,hs.applyMatrix4(t.projectionMatrixInverse),hs.multiplyScalar(1/hs.w),Math.abs(Math.max(hs.x,hs.y))}function Pae(t,e){const n=t.matrixWorld,r=t.geometry,i=r.attributes.instanceStart,o=r.attributes.instanceEnd,s=Math.min(r.instanceCount,i.count);for(let a=0,l=s;a<l;a++){Cr.start.fromBufferAttribute(i,a),Cr.end.fromBufferAttribute(o,a),Cr.applyMatrix4(n);const c=new z,u=new z;ws.distanceSqToSegment(Cr.start,Cr.end,u,c),u.distanceTo(c)<Ac*.5&&e.push({point:u,pointOnLine:c,distance:ws.origin.distanceTo(u),object:t,face:null,faceIndex:a,uv:null,[Zz]:null})}}function Rae(t,e,n){const r=e.projectionMatrix,o=t.material.resolution,s=t.matrixWorld,a=t.geometry,l=a.attributes.instanceStart,c=a.attributes.instanceEnd,u=Math.min(a.instanceCount,l.count),d=-e.near;ws.at(1,ds),ds.w=1,ds.applyMatrix4(e.matrixWorldInverse),ds.applyMatrix4(r),ds.multiplyScalar(1/ds.w),ds.x*=o.x/2,ds.y*=o.y/2,ds.z=0,Lw.copy(ds),kw.multiplyMatrices(e.matrixWorldInverse,s);for(let p=0,m=u;p<m;p++){if(br.fromBufferAttribute(l,p),Er.fromBufferAttribute(c,p),br.w=1,Er.w=1,br.applyMatrix4(kw),Er.applyMatrix4(kw),br.z>d&&Er.z>d)continue;if(br.z>d){const w=br.z-Er.z,M=(br.z-d)/w;br.lerp(Er,M)}else if(Er.z>d){const w=Er.z-br.z,M=(Er.z-d)/w;Er.lerp(br,M)}br.applyMatrix4(r),Er.applyMatrix4(r),br.multiplyScalar(1/br.w),Er.multiplyScalar(1/Er.w),br.x*=o.x/2,br.y*=o.y/2,Er.x*=o.x/2,Er.y*=o.y/2,Cr.start.copy(br),Cr.start.z=0,Cr.end.copy(Er),Cr.end.z=0;const v=Cr.closestPointToPointParameter(Lw,!0);Cr.at(v,EO);const x=mU.lerp(br.z,Er.z,v),y=x>=-1&&x<=1,_=Lw.distanceTo(EO)<Ac*.5;if(y&&_){Cr.start.fromBufferAttribute(l,p),Cr.end.fromBufferAttribute(c,p),Cr.start.applyMatrix4(s),Cr.end.applyMatrix4(s);const w=new z,M=new z;ws.distanceSqToSegment(Cr.start,Cr.end,M,w),n.push({point:M,pointOnLine:w,distance:ws.origin.distanceTo(M),object:t,face:null,faceIndex:p,uv:null,[Zz]:null})}}}class Qz extends On{constructor(e=new _C,n=new SC({color:Math.random()*16777215})){super(e,n),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,n=e.attributes.instanceStart,r=e.attributes.instanceEnd,i=new Float32Array(2*n.count);for(let s=0,a=0,l=n.count;s<l;s++,a+=2)wO.fromBufferAttribute(n,s),bO.fromBufferAttribute(r,s),i[a]=a===0?0:i[a-1],i[a+1]=i[a]+wO.distanceTo(bO);const o=new Vv(i,2,1);return e.setAttribute("instanceDistanceStart",new Vi(o,1,0)),e.setAttribute("instanceDistanceEnd",new Vi(o,1,1)),this}raycast(e,n){const r=this.material.worldUnits,i=e.camera;i===null&&!r&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const o=e.params.Line2!==void 0&&e.params.Line2.threshold||0;ws=e.ray;const s=this.matrixWorld,a=this.geometry,l=this.material;Ac=l.linewidth+o,a.boundingSphere===null&&a.computeBoundingSphere(),ny.copy(a.boundingSphere).applyMatrix4(s);let c;if(r)c=Ac*.5;else{const d=Math.max(i.near,ny.distanceToPoint(ws.origin));c=MO(i,d,l.resolution)}if(ny.radius+=c,ws.intersectsSphere(ny)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),ty.copy(a.boundingBox).applyMatrix4(s);let u;if(r)u=Ac*.5;else{const d=Math.max(i.near,ty.distanceToPoint(ws.origin));u=MO(i,d,l.resolution)}ty.expandByScalar(u),ws.intersectsBox(ty)!==!1&&(r?Pae(this,n):Rae(this,i,n))}onBeforeRender(e){const n=this.material.uniforms;n&&n.resolution&&(e.getViewport(Ow),this.material.uniforms.resolution.value.set(Ow.z,Ow.w))}}class Iae extends Qz{constructor(e=new Jz,n=new SC({color:Math.random()*16777215})){super(e,n),this.isLine2=!0,this.type="Line2"}}const Oae=R.forwardRef(function({points:e,color:n=16777215,vertexColors:r,linewidth:i,lineWidth:o,segments:s,dashed:a,...l},c){var u,d;const p=gs(y=>y.size),m=R.useMemo(()=>s?new Qz:new Iae,[s]),[g]=R.useState(()=>new SC),v=(r==null||(u=r[0])==null?void 0:u.length)===4?4:3,x=R.useMemo(()=>{const y=s?new _C:new Jz,_=e.map(w=>{const M=Array.isArray(w);return w instanceof z||w instanceof Bt?[w.x,w.y,w.z]:w instanceof Se?[w.x,w.y,0]:M&&w.length===3?[w[0],w[1],w[2]]:M&&w.length===2?[w[0],w[1],0]:w});if(y.setPositions(_.flat()),r){n=16777215;const w=r.map(M=>M instanceof Je?M.toArray():M);y.setColors(w.flat(),v)}return y},[e,s,r,v]);return R.useLayoutEffect(()=>{m.computeLineDistances()},[e,m]),R.useLayoutEffect(()=>{a?g.defines.USE_DASH="":delete g.defines.USE_DASH,g.needsUpdate=!0},[a,g]),R.useEffect(()=>()=>{x.dispose(),g.dispose()},[x]),R.createElement("primitive",xl({object:m,ref:c},l),R.createElement("primitive",{object:x,attach:"geometry"}),R.createElement("primitive",xl({object:g,attach:"material",color:n,vertexColors:!!r,resolution:[p.width,p.height],linewidth:(d=i??o)!==null&&d!==void 0?d:1,dashed:a,transparent:v===4},l)))}),Lae=R.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:r,enableDamping:i=!0,keyEvents:o=!1,onChange:s,onStart:a,onEnd:l,...c},u)=>{const d=gs(C=>C.invalidate),p=gs(C=>C.camera),m=gs(C=>C.gl),g=gs(C=>C.events),v=gs(C=>C.setEvents),x=gs(C=>C.set),y=gs(C=>C.get),_=gs(C=>C.performance),w=e||p,M=r||g.connected||m.domElement,A=R.useMemo(()=>new Aae(w),[w]);return VF(()=>{A.enabled&&A.update()},-1),R.useEffect(()=>(o&&A.connect(o===!0?M:o),A.connect(M),()=>void A.dispose()),[o,M,n,A,d]),R.useEffect(()=>{const C=O=>{d(),n&&_.regress(),s&&s(O)},P=O=>{a&&a(O)},N=O=>{l&&l(O)};return A.addEventListener("change",C),A.addEventListener("start",P),A.addEventListener("end",N),()=>{A.removeEventListener("start",P),A.removeEventListener("end",N),A.removeEventListener("change",C)}},[s,a,l,A,d,v]),R.useEffect(()=>{if(t){const C=y().controls;return x({controls:A}),()=>x({controls:C})}},[t,A]),R.createElement("primitive",xl({ref:u,object:A,enableDamping:i},c))});function eB(t,e){const n=t+"Geometry";return R.forwardRef(({args:r,children:i,...o},s)=>{const a=R.useRef(null);return R.useImperativeHandle(s,()=>a.current),R.useLayoutEffect(()=>void(e==null?void 0:e(a.current))),R.createElement("mesh",xl({ref:a},o),R.createElement(n,{attach:"geometry",args:r}),i)})}const Ry=eB("sphere"),TO=eB("plane");function kae(t,e,n,r){const i=new z().add(t).add(e).add(n).multiplyScalar(.3333333333333333);function o(s,a,l){const c=new z().subVectors(a,s).normalize(),u=new z().subVectors(l,s).normalize();let d=new z().addVectors(c,u).normalize();new z().subVectors(i,s).dot(d)<0&&d.negate();const p=Math.acos(c.dot(u)),m=r/Math.sin(p/2);return s.clone().add(d.multiplyScalar(m))}return[o(t,e,n),o(e,n,t),o(n,t,e)]}const Nae=({faces:t,selectedReps:e,toggleRepSelection:n,setDragSelectData:r,dragSelectData:{isMouseDown:i,dimSelected:o}})=>{const{faceOpacity:s}=vC({faceOpacity:{value:.5,min:0,max:1}});return R.useMemo(()=>k.jsx("group",{renderOrder:0,children:t.map(l=>{const u=Array.from(e).some(x=>l===x)?"red":"blue";let d;try{d=l.vertices}catch(x){throw console.error("Error getting vertices from face",x),x}d=d.filter((x,y)=>d.indexOf(x)===y);const p=d.map(x=>x.point),[m,g,v]=p;return kae(new z(...m),new z(...g),new z(...v),.042),k.jsxs("mesh",{renderOrder:-1e3,onPointerDown:x=>{console.notify("Click",l),n(l.key)},children:[k.jsx("bufferGeometry",{children:k.jsx("bufferAttribute",{attach:"attributes-position",array:new Float32Array([...m,...g,...v].flat()),count:p.flat().length/3,itemSize:3,needsUpdate:!0})}),k.jsx("meshStandardMaterial",{depthTest:!1,color:u,side:xi,opacity:s,transparent:s<1,needsUpdate:!0})]},l.id+l.positionKey)})}),[t,e,n,s])},tB=({position:t,text:e})=>k.jsx(bae,{position:t,zIndexRange:[100,200],style:{pointerEvents:"none"},children:k.jsx("div",{style:{color:"black",fontSize:"12px",background:"#FFF9",border:"1px solid black",padding:"2px",borderRadius:"3px",pointerEvents:"none"},children:e})}),N1=getComputedStyle(document.documentElement);N1.getPropertyValue("--unselected-fg").trim();const Dae=N1.getPropertyValue("--unselected-mid").trim();N1.getPropertyValue("--selected-fg").trim();const Uae=N1.getPropertyValue("--selected-bg").trim(),Fae=({mode:t,edges:e,selectedReps:n,toggleRepSelection:r,showName:i,setDragSelectData:o,dragSelectData:{isMouseDown:s,dimSelected:a,deselecting:l}})=>{const{edgeOpacity:c}=vC({edgeOpacity:{value:.5,min:0,max:1}});return R.useState(null),k.jsx("group",{renderOrder:5,children:e.map(u=>{const p=Array.from(n).some(P=>P===u)?Uae:Dae,[m,g]=u.attachingMap.map(P=>new z(...P.point)),v=new z().addVectors(m,g).multiplyScalar(.5),x=new z().subVectors(g,m).normalize(),y=new z().subVectors(g,m).length(),_=new MF(x.normalize(),m,y,new Je(p),.15,.09),w=new Xc(2,2,1,4,5).translate(0,.5,0).rotateX(Math.PI*.5),M=c,A=new On(w,new Fp({color:p,opacity:M,transparent:!0}));A.scale.set(.025,.021,y),A.rotateZ(Math.PI/2),A.position.copy(m),A.lookAt(g);const C=new On(w,new Fp({color:p,opacity:0,transparent:!0}));return C.scale.set(.005,.005,y),C.rotateZ(Math.PI/2),C.position.copy(m),C.lookAt(g),_.setColor(new Je(p)),_.scale.set(2,.6,2),k.jsxs("group",{renderOrder:-20,children:[k.jsx("primitive",{object:A,onPointerDown:function(P){t==="select"&&(o(N=>({...N,dimSelected:1})),r(u.key),P.stopPropagation())},onPointerEnter:P=>{P.stopPropagation()},onPointerLeave:P=>{P.stopPropagation()}}),k.jsx("primitive",{object:C,visible:!0}),k.jsx("primitive",{object:_}),i&&k.jsx(tB,{position:v.toArray(),text:u.name})]},u.id+"AbstractEdge"+u.name)})})},wC=getComputedStyle(document.documentElement),zae=wC.getPropertyValue("--unselected-fg").trim();wC.getPropertyValue("--selected-fg").trim();const Bae=wC.getPropertyValue("--selected-bg").trim(),Hae=({vertices:t,selectedReps:e,toggleRepSelection:n,showName:r,setDragSelectData:i,dragSelectData:{isMouseDown:o,dimSelected:s,deselecting:a}})=>{const{vertexOpacity:l}=vC({vertexOpacity:{value:.5,min:0,max:1}}),c=e.length>0,[u,d]=R.useState(null);return console.log("someSelected",c),t.length>0&&t[0].point.map(p=>p.toFixed(2)),k.jsx("group",{renderOrder:-10,children:t.map(p=>{const m=Array.from(e).some(v=>p===v),g=m?Bae:zae;return k.jsxs("group",{position:[...p.point],children:[k.jsx(Ry,{args:[.1,32,32],castShadow:!0,children:k.jsx("meshStandardMaterial",{color:g,opacity:l,transparent:l<1})}),k.jsx(Ry,{args:[.04,32,32],castShadow:!0,children:k.jsx("meshStandardMaterial",{color:"black",opacity:l})}),k.jsx(Ry,{args:[.2,32,32],onPointerDown:function(v){i(x=>({...x,dimSelected:p.dimension})),n(p.key),v.stopPropagation()},onPointerOver:v=>{console.notify("pointer enter",p.dimension);const x=v.buttons&1;v.buttons&2,d(p),x&&(s===-1?(i({isMouseDown:!0,dimSelected:p.dimension,deselecting:m}),n(p.key)):p.dimension===s&&m===a&&n(p.key))},onPointerOut:v=>{v.stopPropagation(),d(null)},children:k.jsx("meshStandardMaterial",{color:g,opacity:u==p?l:0,transparent:!0})}),r&&k.jsx(tB,{position:[0,0,0],text:p.name})]},p.id+"AbstractVertex")})})},bC=getComputedStyle(document.documentElement),Vae=bC.getPropertyValue("--unselected-fg").trim();bC.getPropertyValue("--selected-fg").trim();bC.getPropertyValue("--selected-bg").trim();const $ae=({editComplex:t,viewOptions:e,complex:n,editOptions:r,selectedReps:i,setDragSelectData:o,dragSelectData:s,allowEditing:a})=>{console.notify("Scene");const l=R.useRef(null),c=R.useRef(null),u=1,d=10,[p,m]=R.useState(null),g=L=>{if(a)try{if(r.mode==="add"&&L.intersections.length>0&&L.intersections[0].object===l.current){const H=L.intersections[0].point,W=Math.round(H.x/u)*u,Y=Math.round(H.z/u)*u;(!p||p[0]!==W||p[2]!==Y)&&m([W,H.y,Y])}else if(r.mode=="select"){const H=L.target.id==="board"}}catch(H){console.error("Error handling pointer move",H)}},v=()=>{a&&m(null)},x=L=>{if(a)try{r.mode==="add"&&p&&(console.log("add vertex"),t.addVertex(p),m(null))}catch(H){console.error("Error handling pointer down",H)}},y=[...i].filter(L=>L[0]=="0").map(L=>parseInt(L.slice(2))),_=n.cells[0].filter(L=>y.includes(L.id)),w=[...i].filter(L=>L[0]=="1").map(L=>parseInt(L.slice(2))),M=n.cells[1].filter(L=>w.includes(L.id)),A=[...i].filter(L=>L[0]=="2").map(L=>parseInt(L.slice(2))),C=n.cells[2].filter(L=>A.includes(L.id));s.dimSelected;const[P,N,O]=[0,1,2].map(L=>function(H){t.toggleRepSelection(H)}),E=R.useMemo(()=>k.jsxs(k.Fragment,{children:[k.jsx(Nae,{mode:r.mode,showName:e.nameState[2],faces:n.cells[2],selectedReps:C,toggleRepSelection:P,dragSelectData:s,setDragSelectData:o}),k.jsx(Fae,{mode:r.mode,showName:e.nameState[1],edges:n.cells[1],selectedReps:M,toggleRepSelection:N,dragSelectData:s,setDragSelectData:o}),k.jsx(Hae,{mode:r.mode,showName:e.nameState[0],vertices:n.cells[0],selectedReps:_,toggleRepSelection:O,dragSelectData:s,setDragSelectData:o})]}),[n.cells[0].length,n.cells[1].length,n.cells[2].length,i.size,s.dimSelected,n.cells]);return k.jsxs(k.Fragment,{children:[k.jsx(Lae,{mouseButtons:r.mode=="move"?{MIDDLE:1,RIGHT:0,LEFT:2}:{},target:[0,0,4]}),k.jsxs("group",{children:[k.jsx(Wae,{gridHeight:r.gridHeight,gridSize:u,gridExtent:d}),k.jsx(TO,{ref:l,renderOrder:-5,args:[d*2,d*2],position:new z(0,r.gridHeight,0),rotation:[-Math.PI/2,0,0],onPointerMove:g,onPointerOut:v,onPointerDown:x,visible:!1,children:k.jsx("meshStandardMaterial",{color:"#f5f5f5",transparent:!0,opacity:.4,roughness:.4,metalness:.1,depthTest:!0,side:xi})}),k.jsx(TO,{renderOrder:-5,args:[d*2,d*2],position:new z(0,r.gridHeight-.2,0),rotation:[-Math.PI/2,0,0],receiveShadow:!0,children:k.jsx("meshStandardMaterial",{color:"#f5f5f5",transparent:!0,opacity:.4,roughness:.4,metalness:.1,depthTest:!0,side:xi})})]}),k.jsx("ambientLight",{intensity:.5}),k.jsx("directionalLight",{position:[5,5,5],intensity:.5}),k.jsx("spotLight",{position:[0,10,0],angle:3,penumbra:10,intensity:100,castShadow:!0}),p&&k.jsx(Ry,{ref:c,position:p,args:[.1,32,32],visible:r.mode==="add",children:k.jsx("meshStandardMaterial",{color:Vae,opacity:.5,transparent:!0})}),E]})},Wae=({gridSize:t,gridExtent:e,gridHeight:n})=>{const r=[];for(let i=-e;i<=e;i+=t)r.push([[-e,n,i],[e,n,i]]),r.push([[i,n,-e],[i,n,e]]);return k.jsx(k.Fragment,{children:r.map((i,o)=>k.jsx(Oae,{renderOrder:-1,points:i,color:"#555",lineWidth:1},o))})},jae=({viewOptions:t,editOptions:e,complex:n,editComplex:r,selectedReps:i,allowEditing:o})=>{const[s,a]=R.useState({isMouseDown:!1,dimSelected:-1,deselecting:!1});return k.jsxs(qz,{children:[k.jsx(Yz,{collapsed:!0,hidden:!0}),k.jsxs(IJ,{className:"canvas",style:{border:"1px solid grey",width:"100%",height:"100%",margin:"5px 0px",zIndex:0,userSelect:"none",boxShadow:"2px 2px 2px 0px #0004 inset;"},camera:{position:[0,10,0],rotation:new Ai(Math.PI/4,Math.PI/4,2),fov:40},onPointerUp:()=>a(l=>({...l,isMouseDown:!1})),onPointerDown:()=>a(l=>({...l,isMouseDown:!0})),children:[k.jsx("ambientLight",{intensity:2}),k.jsx($ae,{setDragSelectData:a,dragSelectData:s,selectedReps:i,complex:n,editComplex:r,viewOptions:t,editOptions:e,allowEditing:o})]})]})},Gae=(t,e)=>Array.from({length:t},()=>Array.from({length:e},()=>0));function Xae(t,e){return t.every(n=>n[e]===0)}function ry(t){return t.every(e=>e.every(n=>n===0))}function Yae(t){let e=0;for(let n=0;n<t.length;n++)for(let r=0;r<t[n].length;r++)if(t[n][r]!==0){e++;break}return e}function qae(t){const e=t[0].length;let n=0;for(let r=0;r<e;r++)Xae(t,r)&&n++;return n}function Kae(t){const e=Math.min(t.length,t[0].length),n=[];for(let r=0;r<e;r++)t[r][r]>1&&n.push(t[r][r]);return n}var HE,Zae;const HC=class HC{constructor(e,n,r){x2(this,HE);this.cob=[],this.vertices_=[],this.id=e,this.index=n,this.name=r??"c"+this.id,this.attachingMap=[],this.cob=[],this.dimension=-1}get positionKey(){return this.vertices_.map(e=>e.positionKey).join("|")}get vertices(){return this.vertices_.every((n,r,i)=>r===0||n.id>i[r-1].id)||console.warn("Unsorted vertices"),[...this.vertices_]}get vertexSummary(){return[...this.vertices].map(e=>e.id).join(", ")}get boundarySummary(){return this.attachingMap.map(e=>e.id).toSorted().join(", ")}get key(){return this.dimension+" "+this.id}get vertexDescription(){return this.vertices.map(e=>e.index).join(",")}copy(){return new HC(this.id,this.index,this.name)}isVertex(){return this.dimension===0}isEdge(){return this.dimension===1}isFace(){return this.dimension===2}isBall(){return this.dimension===3}shift(e,n,r){if(console.notify("Shifting..."),this.isVertex()){const i=this.vertices_[0].point;i[0]+=e,i[1]+=n,i[2]+=r,this.vertices_[0].point=i}}};HE=new WeakSet,Zae=function(e,n){this.vertices_=n,this.vertices_.sort((r,i)=>r.id-i.id),this.vertices_.forEach(r=>r.cob.push(this)),this.dimension=n.length-1,this.attachingMap=[...n]};let Kf=HC;class EC extends Kf{constructor(e,n,r,i){super(n,r,i),this.point=e,this.attachingMap=[],this.cob=[],this.vertices_=[this],this.dimension=0}get positionKey(){return this.point.map(e=>e.toFixed(2)).join(",")}copy(){return new EC([...this.point],this.id,this.index,this.name)}}class MC extends Kf{constructor(e,n,r,i,o){super(r,i,o??"e"+r),this.attachingMap=[e,n],this.cob=[],this.vertices_=[e,n],this.vertices_.sort((s,a)=>s.id-a.id),this.dimension=1}copy(){const[e,n]=this.attachingMap;return new MC(e,n,this.id,this.index)}}class TC extends Kf{constructor(e,n,r,i){super(n,r,i??"f"+n),this.attachingMap=[...e],this.cob=[],this.vertices_=[...new Set(e.flatMap(o=>o.vertices))],this.vertices_.sort((o,s)=>o.id-s.id),this.dimension=2}copy(){return new TC(this.attachingMap,this.id,this.index)}}class CC extends Kf{constructor(e,n,r,i){super(n,r,i),this.id=n??0,this.index=r??0,this.name="b"+this.id,this.attachingMap=[...e],this.vertices_=[...new Set(e.flatMap(o=>o.vertices))],this.vertices_.sort((o,s)=>o.id-s.id),this.dimension=3}copy(){return new CC(this.attachingMap,this.id,this.index)}}const CO=10,gl=3,Yu=1;class bs{constructor(){const e={cells:{0:[],1:[],2:[],3:[]}};this.cells={...e.cells}}assignFrom(e){this.cells={...e.cells}}getCellByVertices(e){const n=e.length-1;return this.cells[n].find(i=>i.name)}identifyEdges(e){PO(this,e)}identifyEdgesByName(e){const n=e.map(i=>iy(this,i,1)[0]),r=e.join("/");PO(this,new Set(n),r)}identifyVertices(e){Iy(this,e)}addVertex(e,n){const r=[...new Set(this.cells[0].map(o=>o.index))],i=new EC(e,this.cells[0].length,r.length,n);return RO(this,i),i}add(e,n,r){if(console.count("Adding cell"),n<1||n>3)throw new Error("Invalid dimension");return n===1?this.addEdge(e,r):n===2?this.addFace(e,r):this.addBall(e,r)}deleteCell(e){ele(this,e)}addEdge(e,n){if(e.length!==2)throw new Error("Must add edge with exactly two vertices");const r=[...Lo(this,new Set(e))];return IO(this,r,n)}addEdgeByNames(e,n){const r=e.map(i=>iy(this,i,0)[0]);return IO(this,r,n)}addFace(e,n){const r=[...Lo(this,new Set(e))];return OO(this,r,n)}addCellByVertices(e){RO(this,e)}addFaceByNames(e,n){const r=e.map(i=>iy(this,i,1))[0];return OO(this,r,n)}addBall(e,n){const r=[...Lo(this,new Set(e))];return dle(this,r,n)}getRepsByKey(e){const[n,r]=e.split(" "),i=parseInt(r),o=this.cells[parseInt(n)].filter(s=>s.id==i);if(o.length===0)throw new Error(`Couldn't find cell with key ${e}`);return o}getRepsByName(e,n){return iy(this,e,n)}get size(){return"("+[0,1,2,3].map(e=>this.cells[e].length).join(", ")}get numCells(){return this.cells[0].length+this.cells[1].length+this.cells[2].length+this.cells[3].length}copy(){const e=new bs,n=new Map;for(let r=0;r<=gl;r++)this.cells[r].forEach(i=>{const o=i.copy();n.set(`${r} ${i.id}`,o),e.cells[r].push(o)});for(let r=0;r<=gl;r++)e.cells[r].forEach(i=>{const o=i.attachingMap.map(s=>n.get(`${s.dimension} ${s.id}`));i.attachingMap=o});for(let r=0;r<=gl;r++)e.cells[r].forEach(i=>{const o=i.cob.map(s=>n.get(`${s.dimension} ${s.id}`));i.cob=o});return Jae(n),e}reindex(){rB(this),iB(this)}get center(){if(this.cells[0].length===0)return[0,0,0];const e=this.cells[0],n=e.length,[r,i,o]=[0,1,2].map(s=>e.reduce((a,l)=>a+l.point[s],0)/n);return[r,i,o]}}const Jae=function(t){let e=`OldNewMap Debug:
`;t.forEach((n,r)=>{e+=`${r} : ${n.key}
`}),console.notify("OldToNewMap",e)},Qae=t=>{t.attachingMap.forEach(e=>{e.cob=e.cob.filter(n=>n!==t)}),t.cob.forEach(e=>{e.attachingMap=e.attachingMap.filter(n=>n!==t)})},ele=(t,e)=>{Qae(e),t.cells[e.dimension]=t.cells[e.dimension].filter(n=>n!==e),rB(t),iB(t)},Lo=function(t,e){const n=new Set;return e==null||e.forEach(r=>{const[i,o]=r.split(" "),s=parseInt(o),a=t.cells[parseInt(i)].find(l=>l.id===s);if(!a)throw new Error(`Couldn't find cell with key ${r}`);n.add(a)}),n},iy=function(t,e,n){const r=i=>t.cells[i].filter(o=>o.name===e);if(n!==void 0){const i=r(n);if(i.length)return i;throw new Error(`Couldn't find cell with name ${e}`)}else return[0,1,2,3].map(r).flat()},AO=()=>({step:()=>new bs,selectedKeys:new Set,type:"start"}),nB=(t,e,n)=>t.cells[e].find(r=>r.index===n),Zf=t=>t.dimension===0?[t]:[...new Set(t.attachingMap.flatMap(Zf))],tle=t=>{const{id:e,name:n,index:r,dimension:i}=t;return`AbstractCell ${e} (${n}) of dimension ${i} with index ${r}
`},nle=t=>{let e="";for(let n=0;n<=3;n++)for(const r of t.cells[n])e+=tle(r);console.log(e)},rB=t=>{for(let e=0;e<=gl;e++){const n=new Set;t.cells[e].forEach((o,s)=>{n.add(o.index)});const r=Array.from(n);r.sort((o,s)=>o-s);const i=r.reduce((o,s,a)=>(o[s]=a,o),{});t.cells[e].forEach(o=>{o.index=i[o.index]})}},iB=t=>{for(let e=0;e<=gl;e++)t.cells[e].forEach((n,r)=>{n.id=r})},oB=function(t,e){const n=new Map;for(const{index:r,dimension:i,sign:o}of e){const s=nB(t,i,r),a=sB(s);for(const{sign:l,dimension:c,index:u}of a){const d=l*o,p=c+", "+u;if(n.has(p)){const m=n.get(p),{count:g}=m;n.set(p,{...m,count:g+d})}else n.set(p,{count:d,dim:c,index:u})}}return[...n.values()].map(({count:r,dim:i,index:o})=>({sign:r,dimension:i,index:o}))},rle=(t,e)=>{const n=oB(t,e);return aB(t,n)=="0"},ile=(t,e)=>aB(t,ole(e))==="0",ole=t=>{const e=t.flatMap(s=>Zf(s)),n=new Set(e),r=Array.from(n);r.sort((s,a)=>s.id-a.id);const i=t.map(s=>{const a=Zf(s),l=r.find(c=>!a.includes(c));return{face:s,missing:l}});return i.sort((s,a)=>s.missing.id-a.missing.id),i.flatMap(({face:s,missing:a},l)=>{const c=l%2==0?1:-1;return sB(s).map(({dimension:u,index:d},p)=>({sign:c*(p%2==0?1:-1),dimension:u,index:d}))})},sB=t=>{if(t.dimension===0)return[];const e=Zf(t);e.sort((i,o)=>i.id-o.id);const n=t.attachingMap.map(i=>{const o=Zf(i),s=e.find(a=>!o.includes(a));return{face:i,missing:s}});return n.sort((i,o)=>i.missing.id-o.missing.id),n.map(({face:i,missing:o},s)=>({sign:s%2==0?1:-1,index:i.index,dimension:i.dimension}))},Iy=(t,e)=>{const n=[...e];if(n.length===0)return;let r=1/0,i=null;for(let a of n)a.index<r&&(r=a.index,i=a);const o=i.index,s=i.name;for(let a=1;a<n.length;a++){const l=n[a];l.index=o,l.name=s}t.reindex()},sle=t=>{const e=[],n=["v","e","f","b"],r=`() => { throw new Error("Shouldn't compute boundary of vertex"); }`,i=[[],[],[],[]];for(let o=0;o<=gl;o++){for(let s of t.cells[o]){const a=o===0?r:`() => [${s.attachingMap.map(d=>n[o-1]+d.id).join(", ")}]`,l=o===0?`, point: [${s.point.map(d=>~~(d*100)/100).join(", ")}]`:"",c=`${n[o]}${s.id}`,u=`const ${c} = { id: ${s.id}, name: "${s.name}", dimension: ${s.dimension}, index: ${s.index}, attachingMap: ${a}${l}};`;i[o].push(c),e.push(u)}e.push("")}e.push("return {"),e.push("    cells: {");for(let o=0;o<=gl;o++)e.push(`        ${o}: [${i[o].join(", ")}],`);return e.push("    }"),e.push("};"),e.join(`
`)},ale=(t,e)=>t.vertices.every(n=>e.includes(n)),PO=(t,e,n)=>{debugger;const r=Array.from(e).map(y=>y.index),i=t.cells[1].find(y=>r.some(_=>_==y.index));i.attachingMap.map(y=>y.index);const o=r.map(y=>t.cells[1].find(w=>w.index===y).attachingMap.map(w=>w));console.log("IDENTIFY");const s=o.map(([y,_])=>y),a=o.map(([y,_])=>_),l=Math.max(...s.map(y=>y.index)),c=Math.min(...s.map(y=>y.index)),u=Math.max(...a.map(y=>y.index)),d=Math.min(...a.map(y=>y.index));if(c<=u){const y=t.cells[0].filter(_=>_.index<=l&&_.index>=d);Iy(t,new Set(y))}else{const y=t.cells[0].filter(w=>w.index<=l&&w.index>=c),_=t.cells[0].filter(w=>w.index<=u&&w.index>=d);Iy(t,new Set(y)),Iy(t,new Set(_))}const{id:p,name:m,index:g}=i,v=n??m;t.cells[1].forEach(y=>{r.some(_=>_==y.index)&&(y.index=g,y.name=v)}),t.reindex()},lle=t=>[0,1,2,3].map(e=>t.cells[e].filter((r,i,o)=>o.findIndex(s=>s.index===r.index)===i)),cle=(t,e)=>{const n=new Map;for(const{sign:r,dimension:i,index:o}of e){const s=i+", "+o;if(n.has(s)){const a=n.get(s);n.set(s,a+r)}else n.set(s,r)}return[...n.entries()].filter(([r,i])=>i!==0).map(([r,i])=>{const[o,s]=r.split(", ").map(Number);return{sign:i,dimension:o,index:s}})},aB=(t,e)=>{let r=cle(t,e).reduce((i,{sign:o,index:s,dimension:a})=>{if(o===0)return i;const l=Math.abs(o)===1?"":Math.abs(o),c=o>0?"+ ":"- ",u=nB(t,a,s);return i+" "+c+l+((u==null?void 0:u.name)??"")},"");return r.length===0?"0":r.slice(2)},ule=function(t,e){if(e.length===0)return{matrix:[],outs:[],ins:[]};e[0].dimension-1;const n=e[0].dimension-1,r=t.cells[n],i=[...new Set(e.flatMap(c=>c.index))],o=i.length,s=[...new Set(r.flatMap(c=>c.index))],a=s.length;if(i.some(c=>c>=o))throw console.log({ins:i,width:o}),new Error("Ins has indices greater than height");if(s.some(c=>c>=a))throw console.log({outs:s,height:a}),new Error("Outs has indices greater than width");console.log("Width",o,"Height",a);const l=Gae(a,o);for(let c of e){const u=oB(t,[{dimension:c.dimension,index:c.index,sign:1}]);for(let{index:d,sign:p}of u)try{l[d][c.index]=p}catch(m){console.log("Error",m)}}return l.forEach(function(c){if(c.length!==o){console.notify("matrixError","Bad matrix:",l),console.log({complex:t,cells:e,ins:i,outs:s});const u=l.map(d=>d.join(" ")).join(`
`);throw new Error(`Matrix is not well formed: 
 `+u)}}),{matrix:l,outs:s,ins:i}},fle=function(t){const[e,...n]=lle(t);return n.map((i,o)=>ule(t,i))},RO=function(t,e){t.cells[e.dimension].push(e)},IO=(t,e,n)=>{const r=e.sort((a,l)=>l.index-a.index),i=t.cells[1].length;let o;t.cells[1].length>0?o=Math.max(...t.cells[1].map(a=>a.index))+1:o=0;const s=new MC(r[0],r[1],o,i,n);return e[0].cob.push(s),e[1].cob.push(s),console.log("Adding edge",s),t.cells[1].push(s),s},OO=(t,e,n)=>{if(e.some(i=>i.dimension!==1))throw new Error("Must add face with exactly three edges");if(e.length!==3)throw new Error("Must add face with exactly three edges");const r=new TC(e,t.cells[2].length,t.cells[2].length,n);return ile(t,e)&&(t.cells[2].push(r),e.forEach(i=>{i.cob.push(r)})),r},dle=(t,e,n)=>{const r=new CC(e,t.cells[3].length,t.cells[3].length,n);return rle(t,[...e].map(i=>({sign:1,index:i.index,dimension:2})))&&t.cells[3].push(r),r},hle="_panel_1v72q_1",ple="_table_1v72q_23",mle="_simplexPanel_1v72q_43",gle="_verticesPanel_1v72q_53",yle="_edgesPanel_1v72q_61",vle="_facesPanel_1v72q_69",xle="_ballsPanel_1v72q_77",_le="_selected_1v72q_83",Sle="_cellData_1v72q_97",wle="_cellHeader_1v72q_109",ble="_datumOuter_1v72q_125",Ele="_expandButton_1v72q_133",Mle="_dimName_1v72q_161",Tle="_cellRow_1v72q_175",oa={panel:hle,table:ple,simplexPanel:mle,verticesPanel:gle,edgesPanel:yle,facesPanel:vle,ballsPanel:xle,selected:_le,cellData:Sle,cellHeader:wle,datumOuter:ble,expandButton:Ele,dimName:Mle,cellRow:Tle},Cle=({selected:t,cell:e,toggleCellSelection:n})=>{const[r,i]=R.useState(!1),s=`${1*20}px`,a=r?s:"0px";return k.jsxs("div",{className:oa.datumOuter,children:[k.jsxs("div",{className:`${oa.cellHeader} ${oa[t?"selected":"unselected"]}`,onClick:()=>n(e),children:[k.jsx("div",{children:e.name}),k.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[k.jsx("div",{}),k.jsx("button",{className:oa.expandButton,onClick:l=>{l.stopPropagation(),i(c=>!c)},children:r?"-":"+"})]})]}),k.jsxs("div",{className:`${oa.cellData} ${r?oa.expandedData:""}`,style:{maxHeight:a},onClick:()=>n(e),children:[k.jsx("div",{children:e.attachingMap.map(l=>l.name).join(", ")}),k.jsx("div",{children:e.cob.map(l=>l.name).join(", ")})]})]})},Ale=({complex:t,selectedKeys:e,selectRep:n,unselectRep:r,selectionKey:i})=>{[...t.cells[0],...t.cells[1],...t.cells[2],...t.cells[3]];const[o,s,a,l]=[0,1,2,3].map(u=>t.cells[u].filter((p,m,g)=>g.findIndex(v=>v.index===p.index)===m)),c=u=>{e.has(u.key)?(console.notify("Unselecting"),r(u.key)):n(u.key)};return k.jsx("div",{className:oa.panel,children:k.jsx("div",{className:oa.table,children:Object.entries({vertices:o,edges:s,faces:a,balls:l}).flatMap(([u,d],p)=>[k.jsx("div",{children:k.jsx("div",{className:oa.dimName,style:{textAlign:"center",fontWeight:"bold"},children:u})},u),d.map((m,g)=>k.jsx(Cle,{cell:m,selected:e.has(m.key),toggleCellSelection:c},m.id))])})})},lB={Empty:{name:"Empty",history:[AO()]},Test1:{name:"Test1",history:[AO()]}},Ple=lB.Empty;var OE={},yn={},ei={},LO;function AC(){if(LO)return ei;LO=1,Object.defineProperty(ei,"__esModule",{value:!0}),ei.multiplyCol=ei.replaceCol=ei.exchangeCols=ei.multiplyRow=ei.replaceRow=ei.exchangeRows=void 0;const t=D1(),e={offset:0,copy:!1,changeBase:!0},n={offset:0,copy:!1,changeBase:!1};function r(c,u,d,p){const m={...e,...p},g=m.copy?t.copyMat(d):d;let v=g[c];g[c]=g[u],g[u]=v;const x=m.changeBase?r(c,u,t.idMat(g.length),n)[0]:[];return[g,x,x]}ei.exchangeRows=r;function i(c,u,d,p,m){const g={...e,...m},v=g.copy?t.copyMat(p):p;for(let _=g.offset||0;_<v[0].length;_++)v[c][_]+=d*v[u][_];let x=[],y=[];return g.changeBase&&(x=i(c,u,d,t.idMat(v.length),n)[0],y=i(c,u,-d,t.idMat(v.length),n)[0]),[v,x,y]}ei.replaceRow=i;function o(c,u,d,p){const m={...e,...p},g=m.copy?t.copyMat(d):d;g[c]=g[c].map(x=>u*x);const v=m.changeBase?o(c,u,t.idMat(g.length),n)[0]:[];return[g,v,v]}ei.multiplyRow=o;function s(c,u,d,p){const m={...e,...p},g=m.copy?t.copyMat(d):d;for(let x=0;x<g.length;x++){let y=g[x][c];g[x][c]=g[x][u],g[x][u]=y}const v=m.changeBase?s(c,u,t.idMat(g[0].length),n)[0]:[];return[g,v,v]}ei.exchangeCols=s;function a(c,u,d,p,m){const g={...e,...m},v=g.copy?t.copyMat(p):p;for(let _=g.offset||0;_<v.length;_++)v[_][c]+=d*v[_][u];let x=[],y=[];return g.changeBase&&(x=a(c,u,d,t.idMat(v[0].length),n)[0],y=a(c,u,-d,t.idMat(v[0].length),n)[0]),[v,x,y]}ei.replaceCol=a;function l(c,u,d,p){const m={...e,...p},g=m.copy?t.copyMat(d):d;for(let x=0;x<g.length;x++)g[x][c]*=u;const v=m.changeBase?l(c,u,t.idMat(g[0].length),n)[0]:[];return[g,v,v]}return ei.multiplyCol=l,ei}var kO;function D1(){if(kO)return yn;kO=1,Object.defineProperty(yn,"__esModule",{value:!0}),yn.improvePivot=yn.findPivot=yn.findAntiPivot=yn.isZero=yn.equalMatrix=yn.multiplyMat=yn.copyMat=yn.idMat=yn.changeBasis=yn.vec2Tex=yn.mat2Tex=void 0;const t=AC();function e(p){return`\\left(\\begin{matrix}
      ${p.map(x=>x.map(y=>y).join(" & ")).join(" \\\\ ")}
    \\end{matrix}\\right)`.replace("//g","\\")}yn.mat2Tex=e;function n(p){return("\\left("+p.join(", ")+"\\right)").replace("//g","\\")}yn.vec2Tex=n;function r(p,m){const g=[],v=p.length;for(let x=0;x<v;x++){let y="";for(let _=0;_<v;_++){const w=m[_][x];w!==0&&(w===1?y+="+"+p[_]:w===-1?y+="-"+p[_]:w>1?y+="+"+w+p[_]:y+="-"+Math.abs(w)+p[_])}y[0]==="+"&&(y=y.slice(1)),g[x]=y}return g}yn.changeBasis=r;function i(p){let m=new Array(p);for(let g=0;g<p;g++){let v=new Array(p);for(let x=0;x<p;x++)v[x]=0;v[g]=1,m[g]=v}return m}yn.idMat=i;function o(p){return p.map(m=>m.slice())}yn.copyMat=o;function s(p,m){if(p[0].length!==m.length)throw new Error("Matrix dimension mismatch.");let g=new Array(p.length);for(let v=0;v<p.length;v++)g[v]=new Array(m[0].length);for(let v=0;v<p.length;v++)for(let x=0;x<m[0].length;x++){let y=0;for(let _=0;_<p[0].length;_++)if(y+=p[v][_]*m[_][x],!Number.isSafeInteger(y))throw new Error("Integers too big.");g[v][x]=y}return g}yn.multiplyMat=s;function a(p,m){if(p.length!==m.length||p[0].length!==m[0].length)return!1;for(let g=0;g<p.length;g++)for(let v=0;v<p[0].length;v++)if(p[g][v]!==m[g][v])return!1;return!0}yn.equalMatrix=a;function l(p,m=0){for(let g=m;g<p.length;g++)for(let v=m;v<p[0].length;v++){if(!Number.isSafeInteger(p[g][v]))throw new Error("Integers too big.");if(p[g][v]!==0)return!1}return!0}yn.isZero=l;function c([p,m],g,v){let x=Math.abs(g[p][m]);for(let y=v;y<g.length;y++)for(let _=v;_<g[0].length;_++)if(g[y][_]%x!==0)return[y,_];return[]}yn.findAntiPivot=c;function u(p,m){if(p.length===m)throw new Error("Matrix must be non-empty.");let g=Number.MAX_VALUE,v=new Array(2);for(let x=m;x<p.length;x++){if(p[x].length===m)throw new Error("Column must be non-empty.");for(let y=m;y<p[0].length;y++){if(!Number.isInteger(p[x][y]))throw new Error("Matrix can not have non-integer values.");let _=p[x][y];Math.abs(_)>0&&Math.abs(g)>Math.abs(_)&&(g=_,v=[x,y])}}if(g===Number.MAX_VALUE)throw new Error("Matrix can not have all zeros.");return v}yn.findPivot=u;function d(p,m,g,v=0){const[x,y]=p;if(g=o(g),m.length===0)return g;const[_,w]=m;if(y===w){let M=-Math.floor(g[_][y]/g[x][y]);t.replaceRow(_,x,M,g,{offset:v})}else if(x===_){let M=-Math.floor(g[x][w]/g[x][y]);t.replaceCol(w,y,M,g,{offset:v})}else{if(g[_][y]!==0){let A=-Math.floor(g[_][y]/g[x][y]);t.replaceRow(_,x,A,g,{offset:v})}t.replaceRow(x,_,1,g,{offset:v});let M=-Math.floor(g[x][w]/g[x][y]);t.replaceCol(w,y,M,g,{offset:v})}return g}return yn.improvePivot=d,yn}var U1={};Object.defineProperty(U1,"__esModule",{value:!0});U1.NormalForm=void 0;const vn=D1(),ps=AC(),oy=D1(),Rle={copy:!0,changeBases:!0,recordSteps:!1};class Ile{constructor(e,n){To(this,"A");To(this,"n");To(this,"m");To(this,"P");To(this,"Q");To(this,"diag");To(this,"D");To(this,"steps");To(this,"opts");To(this,"Qinv");if(e&&e.length===0)throw new Error("Matrix is empty.");for(let r of e)if(r.length===0||r.length!==e[0].length)throw new Error("Matrix is malformed.");if(oy.isZero(e))throw new Error("Matrix has all zero entries.");this.opts={...Rle,...n},this.steps=[],this.A=vn.copyMat(e),this.n=this.A.length,this.m=this.A[0].length,this.D=this.opts.copy?vn.copyMat(e):e,[this.P,this.Q,this.Qinv]=this.opts.changeBases?[vn.idMat(this.m),vn.idMat(this.n),vn.idMat(this.n)]:[[],[],[]],this.diag=new Array,this.reduce(0,Math.min(this.m,this.n))}isValid(){return vn.equalMatrix(vn.multiplyMat(this.A,this.P),vn.multiplyMat(this.Q,this.D))}reduce(e,n){if(e>=n||oy.isZero(this.D,e))return;let[r,i]=this.improvePivot(e);this.addStep({name:"improvedPivot",pivot:[r,i],antiPivot:[],offset:e}),this.movePivot([r,i],e),this.diagonalizePivot(e),this.addStep({name:"offset",offset:e}),this.diag.push(this.D[e][e]),this.reduce(e+1,n)}improvePivot(e){let n,r;for(;;){[n,r]=oy.findPivot(this.D,e);let i=oy.findAntiPivot([n,r],this.D,e);if(i.length===0)break;let[o,s]=i;if(this.addStep({name:"improvePivot",pivot:[n,r],antiPivot:[o,s],offset:e}),r===s){let a=-Math.floor(this.D[o][r]/this.D[n][r]),[,l,c]=ps.replaceRow(o,n,a,this.D,{offset:e,changeBase:this.opts.changeBases});this.opts.changeBases&&(this.Q=vn.multiplyMat(this.Q,c),this.Qinv=vn.multiplyMat(l,this.Qinv)),this.addStep({name:"replaceRow",args:[o,n,a],offset:e})}else if(n===o){let a=-Math.floor(this.D[n][s]/this.D[n][r]),[,l]=ps.replaceCol(s,r,a,this.D,{offset:e,changeBase:this.opts.changeBases});this.opts.changeBases&&(this.P=vn.multiplyMat(this.P,l)),this.addStep({name:"replaceCol",args:[s,r,a],offset:e})}else{if(this.D[o][r]!==0){let d=-Math.floor(this.D[o][r]/this.D[n][r]),[p,m,g]=ps.replaceRow(o,n,d,this.D,{offset:e,changeBase:this.opts.changeBases});this.opts.changeBases&&(this.Q=vn.multiplyMat(this.Q,g),this.Qinv=vn.multiplyMat(m,this.Qinv)),this.addStep({name:"replaceRow",args:[o,n,d],offset:e})}let[a,l,c]=ps.replaceRow(n,o,1,this.D,{offset:e,changeBase:this.opts.changeBases});this.opts.changeBases&&(this.Q=vn.multiplyMat(this.Q,c),this.Qinv=vn.multiplyMat(l,this.Qinv)),this.addStep({name:"replaceRow",args:[n,o,1],offset:e});let u=-Math.floor(this.D[n][s]/this.D[n][r]);[a,l,c]=ps.replaceCol(s,r,u,this.D,{offset:e,changeBase:this.opts.changeBases}),this.opts.changeBases&&(this.P=vn.multiplyMat(this.P,l)),this.addStep({name:"replaceCol",args:[s,r,u],offset:e})}}return[n,r]}movePivot([e,n],r){if(e!==r){let[i,o,s]=ps.exchangeRows(r,e,this.D,{changeBase:this.opts.changeBases});this.opts.changeBases&&(this.Q=vn.multiplyMat(this.Q,s),this.Qinv=vn.multiplyMat(o,this.Qinv)),this.addStep({name:"exchangeRows",args:[r,e],offset:r})}if(n!==r){let[i,o,s]=ps.exchangeCols(r,n,this.D,{changeBase:this.opts.changeBases});this.opts.changeBases&&(this.P=vn.multiplyMat(this.P,o)),this.addStep({name:"exchangeCols",args:[r,n],offset:r})}if(this.D[r][r]<0){let[i,o,s]=ps.multiplyRow(r,-1,this.D,{changeBase:this.opts.changeBases});this.opts.changeBases&&(this.Q=vn.multiplyMat(this.Q,o),this.Qinv=vn.multiplyMat(o,this.Qinv)),this.addStep({name:"multiplyRow",args:[r,-1],offset:r})}}diagonalizePivot(e){for(let n=e+1;n<this.n;n++){if(this.D[n][e]===0)continue;let r=-Math.floor(this.D[n][e]/this.D[e][e]),[i,o,s]=ps.replaceRow(n,e,r,this.D,{offset:e,changeBase:this.opts.changeBases});this.opts.changeBases&&(this.Q=vn.multiplyMat(this.Q,s),this.Qinv=vn.multiplyMat(o,this.Qinv)),this.addStep({name:"replaceRow",args:[n,e],offset:e})}for(let n=e+1;n<this.m;n++){if(this.D[e][n]===0)continue;let r=-Math.floor(this.D[e][n]/this.D[e][e]),[i,o,s]=ps.replaceCol(n,e,r,this.D,{offset:e,changeBase:this.opts.changeBases});this.opts.changeBases&&(this.P=vn.multiplyMat(this.P,o)),this.addStep({name:"replaceCol",args:[n,e],offset:e})}}addStep(e){this.opts.recordSteps&&(e.mat=vn.copyMat(this.D),this.steps.push(e))}}U1.NormalForm=Ile;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.replaceCol=t.replaceRow=t.multiplyRow=t.multiplyCol=t.exchangeCols=t.exchangeRows=t.NormalForm=t.multiplyMat=t.improvePivot=t.idMat=t.findAntiPivot=t.findPivot=t.isZero=t.vec2Tex=t.mat2Tex=t.changeBasis=void 0;var e=D1();Object.defineProperty(t,"changeBasis",{enumerable:!0,get:function(){return e.changeBasis}}),Object.defineProperty(t,"mat2Tex",{enumerable:!0,get:function(){return e.mat2Tex}}),Object.defineProperty(t,"vec2Tex",{enumerable:!0,get:function(){return e.vec2Tex}}),Object.defineProperty(t,"isZero",{enumerable:!0,get:function(){return e.isZero}}),Object.defineProperty(t,"findPivot",{enumerable:!0,get:function(){return e.findPivot}}),Object.defineProperty(t,"findAntiPivot",{enumerable:!0,get:function(){return e.findAntiPivot}}),Object.defineProperty(t,"idMat",{enumerable:!0,get:function(){return e.idMat}}),Object.defineProperty(t,"improvePivot",{enumerable:!0,get:function(){return e.improvePivot}}),Object.defineProperty(t,"multiplyMat",{enumerable:!0,get:function(){return e.multiplyMat}});var n=U1;Object.defineProperty(t,"NormalForm",{enumerable:!0,get:function(){return n.NormalForm}});var r=AC();Object.defineProperty(t,"exchangeRows",{enumerable:!0,get:function(){return r.exchangeRows}}),Object.defineProperty(t,"exchangeCols",{enumerable:!0,get:function(){return r.exchangeCols}}),Object.defineProperty(t,"multiplyCol",{enumerable:!0,get:function(){return r.multiplyCol}}),Object.defineProperty(t,"multiplyRow",{enumerable:!0,get:function(){return r.multiplyRow}}),Object.defineProperty(t,"replaceRow",{enumerable:!0,get:function(){return r.replaceRow}}),Object.defineProperty(t,"replaceCol",{enumerable:!0,get:function(){return r.replaceCol}})})(OE);const Ole=t=>[0,1,2,3].map(e=>{const n=t.cells[e].map(i=>i.index);return[...new Set(n)].length}),Lle=t=>{const e=Ole(t);console.log("Get chains here:",e);const n=fle(t);console.log(n);const r=[];r.push([null,n[0]]);for(let o=1;o<n.length;o++)r.push([n[o-1],n[o]]);return r.map(([o,s],a)=>{let l=e[a],c=0,u=[],d=[],p=[],m=(o==null?void 0:o.matrix)??[],g=s==null?void 0:s.matrix;o&&!ry(o.matrix)?(console.log("HOM"),m=new OE.NormalForm(o.matrix).D,l=qae(m),d=[]):o&&ry(o.matrix),s&&!ry(s.matrix)?(g=new OE.NormalForm(s.matrix).D,c=Yae(g),u=Kae(g),console.log(`TORSION(${a})`,u),p=[]):s&&ry(s.matrix)&&(c=0);const v=l-c;return v<0&&console.log({order:v}),{C:{order:e[a],torsion:[]},B:{group:{order:c,torsion:[]},basis:p},Z:{group:{order:l,torsion:[]},basis:d},H:{order:v,torsion:u}}})},kle="_dimensionLayer_bl5mx_3",Nle="_homologyLayer_bl5mx_15",Dle="_edge_bl5mx_43",Ule="_parent_bl5mx_101",Fle="_div1_bl5mx_117",zle="_div2_bl5mx_119",Ble="_div3_bl5mx_121",Hle="_div4_bl5mx_123",Vle="_div5_bl5mx_125",$le="_div6_bl5mx_135",Wle="_edgeFront_bl5mx_139",jle="_homologyBackground_bl5mx_219",Gle="_C_bl5mx_255",Xle="_B_bl5mx_255",Yle="_Z_bl5mx_255",cB={dimensionLayer:kle,homologyLayer:Nle,edge:Dle,parent:Ule,div1:Fle,div2:zle,div3:Ble,div4:Hle,div5:Vle,div6:$le,edgeFront:Wle,"top-curve":"_top-curve_bl5mx_205","bottom-curve":"_bottom-curve_bl5mx_205",homologyBackground:jle,C:Gle,B:Xle,Z:Yle},NO=(t,e)=>t.order==e.order&&t.torsion.length==e.torsion.length&&t.torsion.every((n,r)=>n==e.torsion[r]),qle=t=>String(t).split("").map(e=>""[+e]).join(""),Kle=t=>{const e=[];if(t.order==1?e.push("Z"):t.order>1&&e.push(`Z${qle(t.order)}`),e.push(...t.torsion.map(r=>`Z/${r}Z`)),e.length==0)return"0";const n=e.join("");if(n.includes("undefined"))throw new Error("Undefined in group");return n},Zle=function(t){const e={0:"",1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:""},n={0:"",1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"","-":""};return t.replace(/_(\d+)/g,(r,i)=>i.split("").map(o=>e[o]??o).join("")).replace(/\^(\d+)/g,(r,i)=>i.split("").map(o=>n[o]??o).join(""))},sy=({group:t,name:e})=>k.jsx("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",fontStyle:"bold",fontWeight:"bold"},children:Zle(`${e} = ${Kle(t)}`)}),Nw=t=>k.jsx(k.Fragment,{children:k.jsx("rect",{filter:"url(#shadow)",...t})}),Jle=({dimension:t,...e})=>{NO(e.C,e.Z.group),NO(e.Z.group,e.B.group);const n=40,r=120,i=4,o=40,s=5,a=6,l=a*4+r,c=l+n,u=o*4+i*5+s,d=l,p=l-2*a,m=l-4*a,g=o*4+i*4+s,v=o*3+i*2+s,x=o,y=1,_="none",w="transparent",M=1;return k.jsx("div",{className:cB.homologyLayer,style:{zIndex:t},children:k.jsxs("svg",{style:{opacity:1},width:c,height:u,children:[k.jsx("defs",{children:k.jsx("filter",{id:"shadow",x:"-100%",y:"-50%",width:"300%",height:"150%",children:k.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"1",floodColor:"#0008"})})}),k.jsx("line",{x1:l,y1:0,x2:c,y2:g-(i*2+x+s),stroke:_,strokeWidth:y}),k.jsx("line",{x1:l,y1:g,x2:c,y2:g-i*2,stroke:_,strokeWidth:y}),k.jsx("polygon",{points:`   0,0
                        ${l},0 
                        ${c},${g-(i*2+x+s)} 
                        ${c},${g-i*2} 
                        ${l},${g}
                        0,${g}
                    `,fill:w,opacity:M,strokeWidth:2,stroke:_,filter:"url(#shadow)"}),k.jsx(Nw,{x:a,y:i+o,width:p,height:v,fill:w,stroke:_,strokeWidth:y}),k.jsx("foreignObject",{x:0,y:0,width:d,height:o,children:k.jsx(sy,{group:e.C,name:`C_${t}`})}),k.jsx("polygon",{points:`
                        ${a*2},${g-2*o-s-2*i}
                        ${a*2+m},${g-2*o-s-2*i} 
                        ${c},${g-(i*2+x+s)} 
                        ${c},${g-(i*2+x)} 
                        ${a*2+m},${g-i*2}
                        ${a*2},${g-i*2}
                        `,fill:w,opacity:M,strokeWidth:2,stroke:_,filter:"url(#shadow)"}),k.jsx("line",{x1:l-a*2,y1:g-2*o-s-2*i,x2:c,y2:g-(i*2+x+s),stroke:_,strokeWidth:y}),k.jsx("line",{x1:l-a*2,y1:g-2*i,x2:c,y2:g-i*2-o,stroke:_,strokeWidth:y}),k.jsx(Nw,{x:2*a,y:3*i+2*o-s,width:m,height:x,fill:w,stroke:"#eee",strokeWidth:y}),k.jsx("foreignObject",{x:0,y:o+i,width:d,height:o,children:k.jsx(sy,{group:e.Z.group,name:`Z_${t}`})}),k.jsx(Nw,{x:2*a,y:2*i+3*o,width:m,height:s,fill:"black"}),k.jsx("foreignObject",{x:0,y:2*(o+i),width:d,height:o,children:k.jsx(sy,{group:e.H,name:`H_${t}`})}),k.jsx("foreignObject",{x:0,y:3*(o+i),width:d,height:o,children:k.jsx(sy,{group:e.B.group,name:`B_${t}`})})]})})},Qle=({complex:t})=>{R.useEffect(()=>{nle(t),console.log(sle(t))},[t]);const e=Lle(t);return k.jsx("div",{className:cB.homologyBackground,children:e.toReversed().map((n,r,i)=>{const o=i.length-r-1;return k.jsx(Jle,{...n,dimension:o})})})},ece="_button_1n05k_1",tce="_background_1n05k_57",nce="_modalWindow_1n05k_77",rce="_modalHeader_1n05k_97",ice="_closeModal_1n05k_103",oce="_list_1n05k_115",qu={button:ece,background:tce,modalWindow:nce,modalHeader:rce,closeModal:ice,list:oce},sce=function({setPreset:t}){const[e,n]=R.useState(!1),r=k.jsx("div",{className:qu.background,children:k.jsxs("div",{className:qu.modalWindow,children:[k.jsxs("div",{className:qu.modalHeader,children:[k.jsx("h2",{children:"Load Complex"}),k.jsx("button",{className:qu.closeModal,onClick:()=>{n(!1),console.warn("test")},children:"Close"})]}),k.jsx("ul",{className:qu.list,children:Object.values(lB).map(i=>k.jsx("li",{onClick:()=>{t(i)},children:i.name}))})]})});return k.jsxs(k.Fragment,{children:[k.jsx("button",{className:qu.button,onClick:()=>{n(!0)},children:k.jsxs("div",{children:[k.jsx("div",{style:{marginLeft:"3px"},children:k.jsx(bj,{})}),"load"]})}),e&&r]})},LE=typeof yD({})=="function",ace=(t,e)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...e&&!t.vars&&{colorScheme:t.palette.mode}}),lce=t=>({color:(t.vars||t).palette.text.primary,...t.typography.body1,backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}}),uB=(t,e=!1)=>{var o,s;const n={};e&&t.colorSchemes&&typeof t.getColorSchemeSelector=="function"&&Object.entries(t.colorSchemes).forEach(([a,l])=>{var u,d;const c=t.getColorSchemeSelector(a);c.startsWith("@")?n[c]={":root":{colorScheme:(u=l.palette)==null?void 0:u.mode}}:n[c.replace(/\s*&/,"")]={colorScheme:(d=l.palette)==null?void 0:d.mode}});let r={html:ace(t,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:{margin:0,...lce(t),"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}},...n};const i=(s=(o=t.components)==null?void 0:o.MuiCssBaseline)==null?void 0:s.styleOverrides;return i&&(r=[r,i]),r},Oy="mui-ecs",cce=t=>{const e=uB(t,!1),n=Array.isArray(e)?e[0]:e;return!t.vars&&n&&(n.html[`:root:has(${Oy})`]={colorScheme:t.palette.mode}),t.colorSchemes&&Object.entries(t.colorSchemes).forEach(([r,i])=>{var s,a;const o=t.getColorSchemeSelector(r);o.startsWith("@")?n[o]={[`:root:not(:has(.${Oy}))`]:{colorScheme:(s=i.palette)==null?void 0:s.mode}}:n[o.replace(/\s*&/,"")]={[`&:not(:has(.${Oy}))`]:{colorScheme:(a=i.palette)==null?void 0:a.mode}}}),e},uce=yD(LE?({theme:t,enableColorScheme:e})=>uB(t,e):({theme:t})=>cce(t));function fce(t){const e=vD({props:t,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=e;return k.jsxs(R.Fragment,{children:[LE&&k.jsx(uce,{enableColorScheme:r}),!LE&&!r&&k.jsx("span",{className:Oy,style:{display:"none"}}),n]})}const DO=t=>[...new Set(t)],fB=(t,e)=>{if(e===0)return[[]];if(e===1)return t.map(r=>[r]);const n=[];for(let r=0;r<t.length;r++)fB(t.slice(r+1),e-1).forEach(o=>n.push([t[r],...o]));return n},Ku=function(t,e){const n=new Set;return e.forEach(r=>{const[i,o]=r.split(" "),s=+i,a=+o,l=t.cells[s].find(c=>c.id===a);l&&n.add(l)}),n};class dce{constructor(e,n){this.setEditorState=e,this.history=n,this.selected_=new Set,this.selectRep=r=>{this.setEditorState(({history:i,selectedKeys:o,complex:s})=>{const a=new Set(o);return a.add(r),console.notify("Selecting",r),this.selected_=Ku(s,a),{history:i,complex:s,selectedKeys:a}})},this.setComplex=this.setComplex.bind(this),this.performVertexIdentification=this.performVertexIdentification.bind(this),this.performEdgeIdentification=this.performEdgeIdentification.bind(this),this.toggleRepSelection=this.toggleRepSelection.bind(this),this.addVertex=this.addVertex.bind(this),this.collapse=this.collapse.bind(this),this.addCell=this.addCell.bind(this),this.identify=this.identify.bind(this)}get selected(){return new Set(this.selected_)}reset(){this.setEditorState(({history:e,selectedKeys:n,complex:r})=>({history:[{type:"start",step:()=>new bs,selectedKeys:new Set}],complex:new bs,selectedKeys:new Set}))}setComplex(e){this.selected_=new Set,this.setEditorState(({history:n,selectedKeys:r,complex:i})=>{const o={type:"start",step:s=>{s.assignFrom(e)},selectedKeys:new Set};return console.log("NewStep",o),o.step(i,r),{history:[o],complex:i,selectedKeys:r}})}identify(){this.setEditorState(({history:e,selectedKeys:n,complex:r})=>{if(n.size===0)return console.notify("Select some cells to identify"),{history:e,complex:r,selectedKeys:n};const i={type:"identify",selectedKeys:new Set(n),step:(o,s)=>{const a=Lo(o,s),l=[...a][0].dimension;if(l===0)o.identifyVertices(a);else if(l===1)o.identifyEdges(a);else if(l!==2)throw new Error("Cannot identify balls")}};console.log("NewStep",i);try{i.step(r,n)}catch(o){throw console.notify("Invalid selection for identification"),o}return{history:[...e,i],complex:r,selectedKeys:n}})}performVertexIdentification(){this.setEditorState(({history:e,selectedKeys:n,complex:r})=>{const i={type:"identifyVertices",selectedKeys:new Set(n),step:(o,s)=>{const a=Lo(o,s);o==null||o.identifyVertices(a)}};return console.log("NewStep",i),i.step(r,n),{history:[...e,i],complex:r,selectedKeys:n}})}performEdgeIdentification(){this.setEditorState(({history:e,selectedKeys:n,complex:r})=>{const i=Lo(r,n);r.identifyEdges(i);const o={type:"identifyEdges",selectedKeys:new Set(n),step:(s,a)=>{const l=Lo(s,a);s.identifyEdges(l),s.reindex()}};return console.log("NewStep",o),{history:[...e,o],complex:r,selectedKeys:n}})}addVertex(e,n){console.count("addVertex"),this.setEditorState(({history:r,selectedKeys:i,complex:o})=>{const s={type:"addVertex",step:a=>{a.addVertex([...e],n)},selectedKeys:new Set};return s.step(o),console.log("addVertex",o.size),{history:[...r,s],complex:o,selectedKeys:new Set(i)}})}collapse(){}addCell(){this.setEditorState(({history:e,selectedKeys:n,complex:r})=>{[...n];const i=function(l,c){console.count("Performed add cell step");const u=[...Lo(l,c)],d=DO(u.flatMap(Zf));d.sort((v,x)=>v.id-x.id),d.length>CO&&console.notify("Fill",`Select 2-${CO} vertices to fill.`);const p=Math.min(d.length-1,3);let m=d,g=!0;for(let v=0;v<p&&g;v++){const x=DO(m.flatMap(A=>A.cob)),y=A=>ale(A,d),_=x.filter(y),w=new Map;_.forEach(A=>w.set(A.vertexSummary,A)),new Set(w.keys()),m=fB(d,v+2).map((A,C)=>{_.filter(O=>O.vertices.every(E=>A.includes(E)));const P=A.map(O=>O.id).join(", "),N=w.get(P);if(N)return N;{g=!1;const O=A.map((E,L)=>{const W=A.filter((Y,K)=>L!==K).map(Y=>Y.id).join(", ");return m.find(Y=>Y.vertexSummary===W)});return l.add(O.map(E=>E.key),v+1)}})}},o={step:i,type:"saturate",selectedKeys:new Set(n)};if(i===null)return{history:e,complex:r,selectedKeys:n};const s=r.numCells;i(r,n);const a=r.numCells;return s===a?{history:e,complex:r,selectedKeys:n}:{history:[...e,o],complex:r,selectedKeys:new Set(n)}})}deleteCells(){this.setEditorState(({history:e,selectedKeys:n,complex:r})=>{const i=function(s,a){Lo(s,a).forEach(c=>s.deleteCell(c))},o={step:i,type:"delete",selectedKeys:n};return i(r,n),{history:[...e,o],complex:r,selectedKeys:new Set}})}deselectRep(e){this.setEditorState(({history:n,selectedKeys:r,complex:i})=>{const o=new Set(r);return o.delete(e.key),this.selected_=Ku(i,o),{history:n,complex:i,selectedKeys:o}})}toggleRepSelection(e){this.setEditorState(({history:n,selectedKeys:r,complex:i})=>{const o=new Set(r);return o.has(e)?o.delete(e):o.add(e),this.selected_=Ku(i,o),{history:n,complex:i,selectedKeys:o}})}deselectAll(){this.setEditorState(({history:e,selectedKeys:n,complex:r})=>({history:e,complex:r,selectedKeys:new Set}))}selectAll(){this.setEditorState(({history:e,selectedKeys:n,complex:r})=>({history:e,complex:r,selectedKeys:new Set(Array(gl).fill(0).map((i,o)=>r.cells[o].map(s=>s.key)).flat())}))}get center(){return[0,0,0]}jumpToStep(e){this.setEditorState(({history:n,selectedKeys:r,complex:i})=>{const o=n.slice(0,e+1),s=new bs;o.forEach(l=>l.step(s,l.selectedKeys));const a=o[o.length-1];return this.selected_=Ku(s,a.selectedKeys),{history:o,complex:s,selectedKeys:a.selectedKeys}})}undo(){console.warn("UNDO"),this.setEditorState(({history:e,selectedKeys:n,complex:r})=>{if(e.length===1)return{history:e,complex:r,selectedKeys:n};const i=e.slice(0,e.length-1),o=new bs;i.forEach(a=>{a.step(o,a.selectedKeys)});const s=i[i.length-1];return this.selected_=Ku(o,s.selectedKeys),{history:i,complex:o,selectedKeys:s.selectedKeys}})}shiftSelection(e,n,r){this.setEditorState(({history:i,selectedKeys:o,complex:s})=>{const a=new Set(o),l=Lo(s,o);console.notify("Total shifted",[...l].length),l.forEach(d=>a.delete(d.key)),l.forEach(d=>a.add(d.key)),this.selected_=Ku(s,a);const c={type:"shift",step:d=>{Lo(d,o).forEach(m=>m.shift(e,n,r))},selectedKeys:new Set(a)},u=new bs;return u.assignFrom(s),c.step(u),{history:[...i,c],complex:u,selectedKeys:a}})}}function hce(t){const[e,n]=R.useState({history:[{type:"start",step:()=>new bs,selectedKeys:new Set}],complex:new bs,selectedKeys:new Set}),{history:r,complex:i,selectedKeys:o}=e,[s,a]=R.useState(new Set),l=R.useMemo(()=>new dce(n,r),[a,r]);return[{history:r,complex:i,selectedKeys:o},l]}const pce=()=>{const[t,e]=R.useState([]),[n,r]=R.useState(new Set),[i,o]=R.useState(new Set);R.useEffect(()=>{const a=JSON.parse(localStorage.getItem("enabledSections")||"[]");o(new Set(a))},[]),R.useEffect(()=>{localStorage.setItem("enabledSections",JSON.stringify(Array.from(i)))},[i]);const s=(a,l)=>{const c=Date.now()+Math.random();e(u=>[{id:c,section:a,message:l},...u]),r(u=>(u.has(a)||o(d=>new Set([...d,a])),new Set([...u,a]))),setTimeout(()=>{e(u=>u.filter(d=>d.id!==c))},5e3)};return R.useEffect(()=>{console.notify=(a,...l)=>{const c=l.map(u=>String(u)).join(", ");s(a,c)}},[]),k.jsx(k.Fragment,{})},mce="_historyOuter_4qvu3_1",kE={historyOuter:mce},gce=t=>{const e=[];let n={type:"start",steps:[t.history[0]]};for(const r of t.history.slice(1))r.type===n.type?n.steps.push(r):(e.push(n),n={type:r.type,steps:[r]});return e.push(n),e},yce=({group:t})=>t.steps.length===1?k.jsx("div",{className:kE.historyItem,children:t.type}):k.jsxs("div",{className:kE.historyItem,children:[t.type," x",t.steps.length]}),vce=({editorState:t,complexEditor:e})=>{const n=gce(t);return k.jsx("div",{className:kE.historyOuter,children:n.map((r,i)=>k.jsx(yce,{group:r}))})},xce="_board_fm2h1_1",_ce="_panelHolder_fm2h1_9",Sce="_keybinds_fm2h1_25",wce="_upperPanel_fm2h1_45",bce="_lowerPanel_fm2h1_61",Ece="_keybindLabel_fm2h1_75",Mce="_button_fm2h1_107",Tce="_centerHolder_fm2h1_145",Mr={board:xce,panelHolder:_ce,keybinds:Sce,upperPanel:wce,lowerPanel:bce,keybindLabel:Ece,button:Mce,centerHolder:Tce},Cce=function(t){t.reset()},UO=Cce,Ace="_panel_zq0zj_1",Pce={panel:Ace};function dB(t){return e=>typeof e===t}var Rce=dB("function"),Ice=t=>t===null,FO=t=>Object.prototype.toString.call(t).slice(8,-1)==="RegExp",zO=t=>!Oce(t)&&!Ice(t)&&(Rce(t)||typeof t=="object"),Oce=dB("undefined");function Lce(t,e){const{length:n}=t;if(n!==e.length)return!1;for(let r=n;r--!==0;)if(!si(t[r],e[r]))return!1;return!0}function kce(t,e){if(t.byteLength!==e.byteLength)return!1;const n=new DataView(t.buffer),r=new DataView(e.buffer);let i=t.byteLength;for(;i--;)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}function Nce(t,e){if(t.size!==e.size)return!1;for(const n of t.entries())if(!e.has(n[0]))return!1;for(const n of t.entries())if(!si(n[1],e.get(n[0])))return!1;return!0}function Dce(t,e){if(t.size!==e.size)return!1;for(const n of t.entries())if(!e.has(n[0]))return!1;return!0}function si(t,e){if(t===e)return!0;if(t&&zO(t)&&e&&zO(e)){if(t.constructor!==e.constructor)return!1;if(Array.isArray(t)&&Array.isArray(e))return Lce(t,e);if(t instanceof Map&&e instanceof Map)return Nce(t,e);if(t instanceof Set&&e instanceof Set)return Dce(t,e);if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return kce(t,e);if(FO(t)&&FO(e))return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=n.length;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,n[i]))return!1;for(let i=n.length;i--!==0;){const o=n[i];if(!(o==="_owner"&&t.$$typeof)&&!si(t[o],e[o]))return!1}return!0}return Number.isNaN(t)&&Number.isNaN(e)?!0:t===e}var Uce=["Array","ArrayBuffer","AsyncFunction","AsyncGenerator","AsyncGeneratorFunction","Date","Error","Function","Generator","GeneratorFunction","HTMLElement","Map","Object","Promise","RegExp","Set","WeakMap","WeakSet"],Fce=["bigint","boolean","null","number","string","symbol","undefined"];function F1(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(/HTML\w+Element/.test(e))return"HTMLElement";if(zce(e))return e}function es(t){return e=>F1(e)===t}function zce(t){return Uce.includes(t)}function xd(t){return e=>typeof e===t}function Bce(t){return Fce.includes(t)}var Hce=["innerHTML","ownerDocument","style","attributes","nodeValue"];function tt(t){if(t===null)return"null";switch(typeof t){case"bigint":return"bigint";case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"symbol":return"symbol";case"undefined":return"undefined"}if(tt.array(t))return"Array";if(tt.plainFunction(t))return"Function";const e=F1(t);return e||"Object"}tt.array=Array.isArray;tt.arrayOf=(t,e)=>!tt.array(t)&&!tt.function(e)?!1:t.every(n=>e(n));tt.asyncGeneratorFunction=t=>F1(t)==="AsyncGeneratorFunction";tt.asyncFunction=es("AsyncFunction");tt.bigint=xd("bigint");tt.boolean=t=>t===!0||t===!1;tt.date=es("Date");tt.defined=t=>!tt.undefined(t);tt.domElement=t=>tt.object(t)&&!tt.plainObject(t)&&t.nodeType===1&&tt.string(t.nodeName)&&Hce.every(e=>e in t);tt.empty=t=>tt.string(t)&&t.length===0||tt.array(t)&&t.length===0||tt.object(t)&&!tt.map(t)&&!tt.set(t)&&Object.keys(t).length===0||tt.set(t)&&t.size===0||tt.map(t)&&t.size===0;tt.error=es("Error");tt.function=xd("function");tt.generator=t=>tt.iterable(t)&&tt.function(t.next)&&tt.function(t.throw);tt.generatorFunction=es("GeneratorFunction");tt.instanceOf=(t,e)=>!t||!e?!1:Object.getPrototypeOf(t)===e.prototype;tt.iterable=t=>!tt.nullOrUndefined(t)&&tt.function(t[Symbol.iterator]);tt.map=es("Map");tt.nan=t=>Number.isNaN(t);tt.null=t=>t===null;tt.nullOrUndefined=t=>tt.null(t)||tt.undefined(t);tt.number=t=>xd("number")(t)&&!tt.nan(t);tt.numericString=t=>tt.string(t)&&t.length>0&&!Number.isNaN(Number(t));tt.object=t=>!tt.nullOrUndefined(t)&&(tt.function(t)||typeof t=="object");tt.oneOf=(t,e)=>tt.array(t)?t.indexOf(e)>-1:!1;tt.plainFunction=es("Function");tt.plainObject=t=>{if(F1(t)!=="Object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.getPrototypeOf({})};tt.primitive=t=>tt.null(t)||Bce(typeof t);tt.promise=es("Promise");tt.propertyOf=(t,e,n)=>{if(!tt.object(t)||!e)return!1;const r=t[e];return tt.function(n)?n(r):tt.defined(r)};tt.regexp=es("RegExp");tt.set=es("Set");tt.string=xd("string");tt.symbol=xd("symbol");tt.undefined=xd("undefined");tt.weakMap=es("WeakMap");tt.weakSet=es("WeakSet");var st=tt;function Vce(...t){return t.every(e=>st.string(e)||st.array(e)||st.plainObject(e))}function $ce(t,e,n){return hB(t,e)?[t,e].every(st.array)?!t.some(WO(n))&&e.some(WO(n)):[t,e].every(st.plainObject)?!Object.entries(t).some($O(n))&&Object.entries(e).some($O(n)):e===n:!1}function BO(t,e,n){const{actual:r,key:i,previous:o,type:s}=n,a=Cs(t,i),l=Cs(e,i);let c=[a,l].every(st.number)&&(s==="increased"?a<l:a>l);return st.undefined(r)||(c=c&&l===r),st.undefined(o)||(c=c&&a===o),c}function HO(t,e,n){const{key:r,type:i,value:o}=n,s=Cs(t,r),a=Cs(e,r),l=i==="added"?s:a,c=i==="added"?a:s;if(!st.nullOrUndefined(o)){if(st.defined(l)){if(st.array(l)||st.plainObject(l))return $ce(l,c,o)}else return si(c,o);return!1}return[s,a].every(st.array)?!c.every(PC(l)):[s,a].every(st.plainObject)?Wce(Object.keys(l),Object.keys(c)):![s,a].every(u=>st.primitive(u)&&st.defined(u))&&(i==="added"?!st.defined(s)&&st.defined(a):st.defined(s)&&!st.defined(a))}function VO(t,e,{key:n}={}){let r=Cs(t,n),i=Cs(e,n);if(!hB(r,i))throw new TypeError("Inputs have different types");if(!Vce(r,i))throw new TypeError("Inputs don't have length");return[r,i].every(st.plainObject)&&(r=Object.keys(r),i=Object.keys(i)),[r,i]}function $O(t){return([e,n])=>st.array(t)?si(t,n)||t.some(r=>si(r,n)||st.array(n)&&PC(n)(r)):st.plainObject(t)&&t[e]?!!t[e]&&si(t[e],n):si(t,n)}function Wce(t,e){return e.some(n=>!t.includes(n))}function WO(t){return e=>st.array(t)?t.some(n=>si(n,e)||st.array(e)&&PC(e)(n)):si(t,e)}function yh(t,e){return st.array(t)?t.some(n=>si(n,e)):si(t,e)}function PC(t){return e=>t.some(n=>si(n,e))}function hB(...t){return t.every(st.array)||t.every(st.number)||t.every(st.plainObject)||t.every(st.string)}function Cs(t,e){return st.plainObject(t)||st.array(t)?st.string(e)?e.split(".").reduce((r,i)=>r&&r[i],t):st.number(e)?t[e]:t:t}function ox(t,e){if([t,e].some(st.nullOrUndefined))throw new Error("Missing required parameters");if(![t,e].every(u=>st.plainObject(u)||st.array(u)))throw new Error("Expected plain objects or array");return{added:(u,d)=>{try{return HO(t,e,{key:u,type:"added",value:d})}catch{return!1}},changed:(u,d,p)=>{try{const m=Cs(t,u),g=Cs(e,u),v=st.defined(d),x=st.defined(p);if(v||x){const y=x?yh(p,m):!yh(d,m),_=yh(d,g);return y&&_}return[m,g].every(st.array)||[m,g].every(st.plainObject)?!si(m,g):m!==g}catch{return!1}},changedFrom:(u,d,p)=>{if(!st.defined(u))return!1;try{const m=Cs(t,u),g=Cs(e,u),v=st.defined(p);return yh(d,m)&&(v?yh(p,g):!v)}catch{return!1}},decreased:(u,d,p)=>{if(!st.defined(u))return!1;try{return BO(t,e,{key:u,actual:d,previous:p,type:"decreased"})}catch{return!1}},emptied:u=>{try{const[d,p]=VO(t,e,{key:u});return!!d.length&&!p.length}catch{return!1}},filled:u=>{try{const[d,p]=VO(t,e,{key:u});return!d.length&&!!p.length}catch{return!1}},increased:(u,d,p)=>{if(!st.defined(u))return!1;try{return BO(t,e,{key:u,actual:d,previous:p,type:"increased"})}catch{return!1}},removed:(u,d)=>{try{return HO(t,e,{key:u,type:"removed",value:d})}catch{return!1}}}}var jce=new Error("Element already at target scroll position"),Gce=new Error("Scroll cancelled"),Xce=Math.min,jO=Date.now,Yce={left:GO("scrollLeft"),top:GO("scrollTop")};function GO(t){return function(n,r,i,o){i=i||{},typeof i=="function"&&(o=i,i={}),typeof o!="function"&&(o=Kce);var s=jO(),a=n[t],l=i.ease||qce,c=isNaN(i.duration)?350:+i.duration,u=!1;return a===r?o(jce,n[t]):requestAnimationFrame(p),d;function d(){u=!0}function p(m){if(u)return o(Gce,n[t]);var g=jO(),v=Xce(1,(g-s)/c),x=l(v);n[t]=x*(r-a)+a,v<1?requestAnimationFrame(p):requestAnimationFrame(function(){o(null,n[t])})}}}function qce(t){return .5*(1-Math.cos(Math.PI*t))}function Kce(){}const Zce=Us(Yce);var pB={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.Scrollparent=n()})(Y5,function(){function e(r){var i=getComputedStyle(r,null).getPropertyValue("overflow");return i.indexOf("scroll")>-1||i.indexOf("auto")>-1}function n(r){if(r instanceof HTMLElement||r instanceof SVGElement){for(var i=r.parentNode;i.parentNode;){if(e(i))return i;i=i.parentNode}return document.scrollingElement||document.documentElement}}return n})})(pB);var Jce=pB.exports;const mB=Us(Jce);var Qce=function(t){return Object.prototype.hasOwnProperty.call(t,"props")},eue=function(t,e){return t+Xp(e)},Xp=function(t){return t===null||typeof t=="boolean"||typeof t>"u"?"":typeof t=="number"?t.toString():typeof t=="string"?t:Array.isArray(t)?t.reduce(eue,""):Qce(t)&&Object.prototype.hasOwnProperty.call(t.props,"children")?Xp(t.props.children):""};Xp.default=Xp;var tue=Xp;const XO=Us(tue);var nue=function(e){return rue(e)&&!iue(e)};function rue(t){return!!t&&typeof t=="object"}function iue(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||aue(t)}var oue=typeof Symbol=="function"&&Symbol.for,sue=oue?Symbol.for("react.element"):60103;function aue(t){return t.$$typeof===sue}function lue(t){return Array.isArray(t)?[]:{}}function Yp(t,e){return e.clone!==!1&&e.isMergeableObject(t)?Jf(lue(t),t,e):t}function cue(t,e,n){return t.concat(e).map(function(r){return Yp(r,n)})}function uue(t,e){if(!e.customMerge)return Jf;var n=e.customMerge(t);return typeof n=="function"?n:Jf}function fue(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function YO(t){return Object.keys(t).concat(fue(t))}function gB(t,e){try{return e in t}catch{return!1}}function due(t,e){return gB(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function hue(t,e,n){var r={};return n.isMergeableObject(t)&&YO(t).forEach(function(i){r[i]=Yp(t[i],n)}),YO(e).forEach(function(i){due(t,i)||(gB(t,i)&&n.isMergeableObject(e[i])?r[i]=uue(i,n)(t[i],e[i],n):r[i]=Yp(e[i],n))}),r}function Jf(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||cue,n.isMergeableObject=n.isMergeableObject||nue,n.cloneUnlessOtherwiseSpecified=Yp;var r=Array.isArray(e),i=Array.isArray(t),o=r===i;return o?r?n.arrayMerge(t,e,n):hue(t,e,n):Yp(e,n)}Jf.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,i){return Jf(r,i,n)},{})};var pue=Jf,mue=pue;const zo=Us(mue);/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.16.1
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */var Cm=typeof window<"u"&&typeof document<"u"&&typeof navigator<"u",gue=function(){for(var t=["Edge","Trident","Firefox"],e=0;e<t.length;e+=1)if(Cm&&navigator.userAgent.indexOf(t[e])>=0)return 1;return 0}();function yue(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,t()}))}}function vue(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},gue))}}var xue=Cm&&window.Promise,_ue=xue?yue:vue;function yB(t){var e={};return t&&e.toString.call(t)==="[object Function]"}function Jc(t,e){if(t.nodeType!==1)return[];var n=t.ownerDocument.defaultView,r=n.getComputedStyle(t,null);return e?r[e]:r}function RC(t){return t.nodeName==="HTML"?t:t.parentNode||t.host}function Am(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=Jc(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/(auto|scroll|overlay)/.test(n+i+r)?t:Am(RC(t))}function vB(t){return t&&t.referenceNode?t.referenceNode:t}var qO=Cm&&!!(window.MSInputMethodContext&&document.documentMode),KO=Cm&&/MSIE 10/.test(navigator.userAgent);function _d(t){return t===11?qO:t===10?KO:qO||KO}function Qf(t){if(!t)return document.documentElement;for(var e=_d(10)?document.body:null,n=t.offsetParent||null;n===e&&t.nextElementSibling;)n=(t=t.nextElementSibling).offsetParent;var r=n&&n.nodeName;return!r||r==="BODY"||r==="HTML"?t?t.ownerDocument.documentElement:document.documentElement:["TH","TD","TABLE"].indexOf(n.nodeName)!==-1&&Jc(n,"position")==="static"?Qf(n):n}function Sue(t){var e=t.nodeName;return e==="BODY"?!1:e==="HTML"||Qf(t.firstElementChild)===t}function NE(t){return t.parentNode!==null?NE(t.parentNode):t}function sx(t,e){if(!t||!t.nodeType||!e||!e.nodeType)return document.documentElement;var n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?t:e,i=n?e:t,o=document.createRange();o.setStart(r,0),o.setEnd(i,0);var s=o.commonAncestorContainer;if(t!==s&&e!==s||r.contains(i))return Sue(s)?s:Qf(s);var a=NE(t);return a.host?sx(a.host,e):sx(t,NE(e).host)}function ed(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"top",n=e==="top"?"scrollTop":"scrollLeft",r=t.nodeName;if(r==="BODY"||r==="HTML"){var i=t.ownerDocument.documentElement,o=t.ownerDocument.scrollingElement||i;return o[n]}return t[n]}function wue(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=ed(e,"top"),i=ed(e,"left"),o=n?-1:1;return t.top+=r*o,t.bottom+=r*o,t.left+=i*o,t.right+=i*o,t}function ZO(t,e){var n=e==="x"?"Left":"Top",r=n==="Left"?"Right":"Bottom";return parseFloat(t["border"+n+"Width"])+parseFloat(t["border"+r+"Width"])}function JO(t,e,n,r){return Math.max(e["offset"+t],e["scroll"+t],n["client"+t],n["offset"+t],n["scroll"+t],_d(10)?parseInt(n["offset"+t])+parseInt(r["margin"+(t==="Height"?"Top":"Left")])+parseInt(r["margin"+(t==="Height"?"Bottom":"Right")]):0)}function xB(t){var e=t.body,n=t.documentElement,r=_d(10)&&getComputedStyle(n);return{height:JO("Height",e,n,r),width:JO("Width",e,n,r)}}var bue=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Eue=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),td=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},go=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function Cl(t){return go({},t,{right:t.left+t.width,bottom:t.top+t.height})}function DE(t){var e={};try{if(_d(10)){e=t.getBoundingClientRect();var n=ed(t,"top"),r=ed(t,"left");e.top+=n,e.left+=r,e.bottom+=n,e.right+=r}else e=t.getBoundingClientRect()}catch{}var i={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},o=t.nodeName==="HTML"?xB(t.ownerDocument):{},s=o.width||t.clientWidth||i.width,a=o.height||t.clientHeight||i.height,l=t.offsetWidth-s,c=t.offsetHeight-a;if(l||c){var u=Jc(t);l-=ZO(u,"x"),c-=ZO(u,"y"),i.width-=l,i.height-=c}return Cl(i)}function IC(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=_d(10),i=e.nodeName==="HTML",o=DE(t),s=DE(e),a=Am(t),l=Jc(e),c=parseFloat(l.borderTopWidth),u=parseFloat(l.borderLeftWidth);n&&i&&(s.top=Math.max(s.top,0),s.left=Math.max(s.left,0));var d=Cl({top:o.top-s.top-c,left:o.left-s.left-u,width:o.width,height:o.height});if(d.marginTop=0,d.marginLeft=0,!r&&i){var p=parseFloat(l.marginTop),m=parseFloat(l.marginLeft);d.top-=c-p,d.bottom-=c-p,d.left-=u-m,d.right-=u-m,d.marginTop=p,d.marginLeft=m}return(r&&!n?e.contains(a):e===a&&a.nodeName!=="BODY")&&(d=wue(d,e)),d}function Mue(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=t.ownerDocument.documentElement,r=IC(t,n),i=Math.max(n.clientWidth,window.innerWidth||0),o=Math.max(n.clientHeight,window.innerHeight||0),s=e?0:ed(n),a=e?0:ed(n,"left"),l={top:s-r.top+r.marginTop,left:a-r.left+r.marginLeft,width:i,height:o};return Cl(l)}function _B(t){var e=t.nodeName;if(e==="BODY"||e==="HTML")return!1;if(Jc(t,"position")==="fixed")return!0;var n=RC(t);return n?_B(n):!1}function SB(t){if(!t||!t.parentElement||_d())return document.documentElement;for(var e=t.parentElement;e&&Jc(e,"transform")==="none";)e=e.parentElement;return e||document.documentElement}function OC(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,o={top:0,left:0},s=i?SB(t):sx(t,vB(e));if(r==="viewport")o=Mue(s,i);else{var a=void 0;r==="scrollParent"?(a=Am(RC(e)),a.nodeName==="BODY"&&(a=t.ownerDocument.documentElement)):r==="window"?a=t.ownerDocument.documentElement:a=r;var l=IC(a,s,i);if(a.nodeName==="HTML"&&!_B(s)){var c=xB(t.ownerDocument),u=c.height,d=c.width;o.top+=l.top-l.marginTop,o.bottom=u+l.top,o.left+=l.left-l.marginLeft,o.right=d+l.left}else o=l}n=n||0;var p=typeof n=="number";return o.left+=p?n:n.left||0,o.top+=p?n:n.top||0,o.right-=p?n:n.right||0,o.bottom-=p?n:n.bottom||0,o}function Tue(t){var e=t.width,n=t.height;return e*n}function wB(t,e,n,r,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(t.indexOf("auto")===-1)return t;var s=OC(n,r,o,i),a={top:{width:s.width,height:e.top-s.top},right:{width:s.right-e.right,height:s.height},bottom:{width:s.width,height:s.bottom-e.bottom},left:{width:e.left-s.left,height:s.height}},l=Object.keys(a).map(function(p){return go({key:p},a[p],{area:Tue(a[p])})}).sort(function(p,m){return m.area-p.area}),c=l.filter(function(p){var m=p.width,g=p.height;return m>=n.clientWidth&&g>=n.clientHeight}),u=c.length>0?c[0].key:l[0].key,d=t.split("-")[1];return u+(d?"-"+d:"")}function bB(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=r?SB(e):sx(e,vB(n));return IC(n,i,r)}function EB(t){var e=t.ownerDocument.defaultView,n=e.getComputedStyle(t),r=parseFloat(n.marginTop||0)+parseFloat(n.marginBottom||0),i=parseFloat(n.marginLeft||0)+parseFloat(n.marginRight||0),o={width:t.offsetWidth+i,height:t.offsetHeight+r};return o}function ax(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(n){return e[n]})}function MB(t,e,n){n=n.split("-")[0];var r=EB(t),i={width:r.width,height:r.height},o=["right","left"].indexOf(n)!==-1,s=o?"top":"left",a=o?"left":"top",l=o?"height":"width",c=o?"width":"height";return i[s]=e[s]+e[l]/2-r[l]/2,n===a?i[a]=e[a]-r[c]:i[a]=e[ax(a)],i}function Pm(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function Cue(t,e,n){if(Array.prototype.findIndex)return t.findIndex(function(i){return i[e]===n});var r=Pm(t,function(i){return i[e]===n});return t.indexOf(r)}function TB(t,e,n){var r=n===void 0?t:t.slice(0,Cue(t,"name",n));return r.forEach(function(i){i.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var o=i.function||i.fn;i.enabled&&yB(o)&&(e.offsets.popper=Cl(e.offsets.popper),e.offsets.reference=Cl(e.offsets.reference),e=o(e,i))}),e}function Aue(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=bB(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=wB(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=MB(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=TB(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}function CB(t,e){return t.some(function(n){var r=n.name,i=n.enabled;return i&&r===e})}function LC(t){for(var e=[!1,"ms","Webkit","Moz","O"],n=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<e.length;r++){var i=e[r],o=i?""+i+n:t;if(typeof document.body.style[o]<"u")return o}return null}function Pue(){return this.state.isDestroyed=!0,CB(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[LC("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function AB(t){var e=t.ownerDocument;return e?e.defaultView:window}function PB(t,e,n,r){var i=t.nodeName==="BODY",o=i?t.ownerDocument.defaultView:t;o.addEventListener(e,n,{passive:!0}),i||PB(Am(o.parentNode),e,n,r),r.push(o)}function Rue(t,e,n,r){n.updateBound=r,AB(t).addEventListener("resize",n.updateBound,{passive:!0});var i=Am(t);return PB(i,"scroll",n.updateBound,n.scrollParents),n.scrollElement=i,n.eventsEnabled=!0,n}function Iue(){this.state.eventsEnabled||(this.state=Rue(this.reference,this.options,this.state,this.scheduleUpdate))}function Oue(t,e){return AB(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(n){n.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e}function Lue(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=Oue(this.reference,this.state))}function kC(t){return t!==""&&!isNaN(parseFloat(t))&&isFinite(t)}function UE(t,e){Object.keys(e).forEach(function(n){var r="";["width","height","top","right","bottom","left"].indexOf(n)!==-1&&kC(e[n])&&(r="px"),t.style[n]=e[n]+r})}function kue(t,e){Object.keys(e).forEach(function(n){var r=e[n];r!==!1?t.setAttribute(n,e[n]):t.removeAttribute(n)})}function Nue(t){return UE(t.instance.popper,t.styles),kue(t.instance.popper,t.attributes),t.arrowElement&&Object.keys(t.arrowStyles).length&&UE(t.arrowElement,t.arrowStyles),t}function Due(t,e,n,r,i){var o=bB(i,e,t,n.positionFixed),s=wB(n.placement,o,e,t,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return e.setAttribute("x-placement",s),UE(e,{position:n.positionFixed?"fixed":"absolute"}),n}function Uue(t,e){var n=t.offsets,r=n.popper,i=n.reference,o=Math.round,s=Math.floor,a=function(y){return y},l=o(i.width),c=o(r.width),u=["left","right"].indexOf(t.placement)!==-1,d=t.placement.indexOf("-")!==-1,p=l%2===c%2,m=l%2===1&&c%2===1,g=e?u||d||p?o:s:a,v=e?o:a;return{left:g(m&&!d&&e?r.left-1:r.left),top:v(r.top),bottom:v(r.bottom),right:g(r.right)}}var Fue=Cm&&/Firefox/i.test(navigator.userAgent);function zue(t,e){var n=e.x,r=e.y,i=t.offsets.popper,o=Pm(t.instance.modifiers,function(w){return w.name==="applyStyle"}).gpuAcceleration;o!==void 0&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var s=o!==void 0?o:e.gpuAcceleration,a=Qf(t.instance.popper),l=DE(a),c={position:i.position},u=Uue(t,window.devicePixelRatio<2||!Fue),d=n==="bottom"?"top":"bottom",p=r==="right"?"left":"right",m=LC("transform"),g=void 0,v=void 0;if(d==="bottom"?a.nodeName==="HTML"?v=-a.clientHeight+u.bottom:v=-l.height+u.bottom:v=u.top,p==="right"?a.nodeName==="HTML"?g=-a.clientWidth+u.right:g=-l.width+u.right:g=u.left,s&&m)c[m]="translate3d("+g+"px, "+v+"px, 0)",c[d]=0,c[p]=0,c.willChange="transform";else{var x=d==="bottom"?-1:1,y=p==="right"?-1:1;c[d]=v*x,c[p]=g*y,c.willChange=d+", "+p}var _={"x-placement":t.placement};return t.attributes=go({},_,t.attributes),t.styles=go({},c,t.styles),t.arrowStyles=go({},t.offsets.arrow,t.arrowStyles),t}function RB(t,e,n){var r=Pm(t,function(a){var l=a.name;return l===e}),i=!!r&&t.some(function(a){return a.name===n&&a.enabled&&a.order<r.order});if(!i){var o="`"+e+"`",s="`"+n+"`";console.warn(s+" modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return i}function Bue(t,e){var n;if(!RB(t.instance.modifiers,"arrow","keepTogether"))return t;var r=e.element;if(typeof r=="string"){if(r=t.instance.popper.querySelector(r),!r)return t}else if(!t.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var i=t.placement.split("-")[0],o=t.offsets,s=o.popper,a=o.reference,l=["left","right"].indexOf(i)!==-1,c=l?"height":"width",u=l?"Top":"Left",d=u.toLowerCase(),p=l?"left":"top",m=l?"bottom":"right",g=EB(r)[c];a[m]-g<s[d]&&(t.offsets.popper[d]-=s[d]-(a[m]-g)),a[d]+g>s[m]&&(t.offsets.popper[d]+=a[d]+g-s[m]),t.offsets.popper=Cl(t.offsets.popper);var v=a[d]+a[c]/2-g/2,x=Jc(t.instance.popper),y=parseFloat(x["margin"+u]),_=parseFloat(x["border"+u+"Width"]),w=v-t.offsets.popper[d]-y-_;return w=Math.max(Math.min(s[c]-g,w),0),t.arrowElement=r,t.offsets.arrow=(n={},td(n,d,Math.round(w)),td(n,p,""),n),t}function Hue(t){return t==="end"?"start":t==="start"?"end":t}var IB=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Dw=IB.slice(3);function QO(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=Dw.indexOf(t),r=Dw.slice(n+1).concat(Dw.slice(0,n));return e?r.reverse():r}var Uw={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function Vue(t,e){if(CB(t.instance.modifiers,"inner")||t.flipped&&t.placement===t.originalPlacement)return t;var n=OC(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement,t.positionFixed),r=t.placement.split("-")[0],i=ax(r),o=t.placement.split("-")[1]||"",s=[];switch(e.behavior){case Uw.FLIP:s=[r,i];break;case Uw.CLOCKWISE:s=QO(r);break;case Uw.COUNTERCLOCKWISE:s=QO(r,!0);break;default:s=e.behavior}return s.forEach(function(a,l){if(r!==a||s.length===l+1)return t;r=t.placement.split("-")[0],i=ax(r);var c=t.offsets.popper,u=t.offsets.reference,d=Math.floor,p=r==="left"&&d(c.right)>d(u.left)||r==="right"&&d(c.left)<d(u.right)||r==="top"&&d(c.bottom)>d(u.top)||r==="bottom"&&d(c.top)<d(u.bottom),m=d(c.left)<d(n.left),g=d(c.right)>d(n.right),v=d(c.top)<d(n.top),x=d(c.bottom)>d(n.bottom),y=r==="left"&&m||r==="right"&&g||r==="top"&&v||r==="bottom"&&x,_=["top","bottom"].indexOf(r)!==-1,w=!!e.flipVariations&&(_&&o==="start"&&m||_&&o==="end"&&g||!_&&o==="start"&&v||!_&&o==="end"&&x),M=!!e.flipVariationsByContent&&(_&&o==="start"&&g||_&&o==="end"&&m||!_&&o==="start"&&x||!_&&o==="end"&&v),A=w||M;(p||y||A)&&(t.flipped=!0,(p||y)&&(r=s[l+1]),A&&(o=Hue(o)),t.placement=r+(o?"-"+o:""),t.offsets.popper=go({},t.offsets.popper,MB(t.instance.popper,t.offsets.reference,t.placement)),t=TB(t.instance.modifiers,t,"flip"))}),t}function $ue(t){var e=t.offsets,n=e.popper,r=e.reference,i=t.placement.split("-")[0],o=Math.floor,s=["top","bottom"].indexOf(i)!==-1,a=s?"right":"bottom",l=s?"left":"top",c=s?"width":"height";return n[a]<o(r[l])&&(t.offsets.popper[l]=o(r[l])-n[c]),n[l]>o(r[a])&&(t.offsets.popper[l]=o(r[a])),t}function Wue(t,e,n,r){var i=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+i[1],s=i[2];if(!o)return t;if(s.indexOf("%")===0){var a=void 0;switch(s){case"%p":a=n;break;case"%":case"%r":default:a=r}var l=Cl(a);return l[e]/100*o}else if(s==="vh"||s==="vw"){var c=void 0;return s==="vh"?c=Math.max(document.documentElement.clientHeight,window.innerHeight||0):c=Math.max(document.documentElement.clientWidth,window.innerWidth||0),c/100*o}else return o}function jue(t,e,n,r){var i=[0,0],o=["right","left"].indexOf(r)!==-1,s=t.split(/(\+|\-)/).map(function(u){return u.trim()}),a=s.indexOf(Pm(s,function(u){return u.search(/,|\s/)!==-1}));s[a]&&s[a].indexOf(",")===-1&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,c=a!==-1?[s.slice(0,a).concat([s[a].split(l)[0]]),[s[a].split(l)[1]].concat(s.slice(a+1))]:[s];return c=c.map(function(u,d){var p=(d===1?!o:o)?"height":"width",m=!1;return u.reduce(function(g,v){return g[g.length-1]===""&&["+","-"].indexOf(v)!==-1?(g[g.length-1]=v,m=!0,g):m?(g[g.length-1]+=v,m=!1,g):g.concat(v)},[]).map(function(g){return Wue(g,p,e,n)})}),c.forEach(function(u,d){u.forEach(function(p,m){kC(p)&&(i[d]+=p*(u[m-1]==="-"?-1:1))})}),i}function Gue(t,e){var n=e.offset,r=t.placement,i=t.offsets,o=i.popper,s=i.reference,a=r.split("-")[0],l=void 0;return kC(+n)?l=[+n,0]:l=jue(n,o,s,a),a==="left"?(o.top+=l[0],o.left-=l[1]):a==="right"?(o.top+=l[0],o.left+=l[1]):a==="top"?(o.left+=l[0],o.top-=l[1]):a==="bottom"&&(o.left+=l[0],o.top+=l[1]),t.popper=o,t}function Xue(t,e){var n=e.boundariesElement||Qf(t.instance.popper);t.instance.reference===n&&(n=Qf(n));var r=LC("transform"),i=t.instance.popper.style,o=i.top,s=i.left,a=i[r];i.top="",i.left="",i[r]="";var l=OC(t.instance.popper,t.instance.reference,e.padding,n,t.positionFixed);i.top=o,i.left=s,i[r]=a,e.boundaries=l;var c=e.priority,u=t.offsets.popper,d={primary:function(m){var g=u[m];return u[m]<l[m]&&!e.escapeWithReference&&(g=Math.max(u[m],l[m])),td({},m,g)},secondary:function(m){var g=m==="right"?"left":"top",v=u[g];return u[m]>l[m]&&!e.escapeWithReference&&(v=Math.min(u[g],l[m]-(m==="right"?u.width:u.height))),td({},g,v)}};return c.forEach(function(p){var m=["left","top"].indexOf(p)!==-1?"primary":"secondary";u=go({},u,d[m](p))}),t.offsets.popper=u,t}function Yue(t){var e=t.placement,n=e.split("-")[0],r=e.split("-")[1];if(r){var i=t.offsets,o=i.reference,s=i.popper,a=["bottom","top"].indexOf(n)!==-1,l=a?"left":"top",c=a?"width":"height",u={start:td({},l,o[l]),end:td({},l,o[l]+o[c]-s[c])};t.offsets.popper=go({},s,u[r])}return t}function que(t){if(!RB(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,n=Pm(t.instance.modifiers,function(r){return r.name==="preventOverflow"}).boundaries;if(e.bottom<n.top||e.left>n.right||e.top>n.bottom||e.right<n.left){if(t.hide===!0)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(t.hide===!1)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}function Kue(t){var e=t.placement,n=e.split("-")[0],r=t.offsets,i=r.popper,o=r.reference,s=["left","right"].indexOf(n)!==-1,a=["top","left"].indexOf(n)===-1;return i[s?"left":"top"]=o[n]-(a?i[s?"width":"height"]:0),t.placement=ax(e),t.offsets.popper=Cl(i),t}var Zue={shift:{order:100,enabled:!0,fn:Yue},offset:{order:200,enabled:!0,fn:Gue,offset:0},preventOverflow:{order:300,enabled:!0,fn:Xue,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:$ue},arrow:{order:500,enabled:!0,fn:Bue,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:Vue,behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:Kue},hide:{order:800,enabled:!0,fn:que},computeStyle:{order:850,enabled:!0,fn:zue,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:Nue,onLoad:Due,gpuAcceleration:void 0}},Jue={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:Zue},qp=function(){function t(e,n){var r=this,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};bue(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=_ue(this.update.bind(this)),this.options=go({},t.Defaults,i),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(go({},t.Defaults.modifiers,i.modifiers)).forEach(function(s){r.options.modifiers[s]=go({},t.Defaults.modifiers[s]||{},i.modifiers?i.modifiers[s]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(s){return go({name:s},r.options.modifiers[s])}).sort(function(s,a){return s.order-a.order}),this.modifiers.forEach(function(s){s.enabled&&yB(s.onLoad)&&s.onLoad(r.reference,r.popper,r.options,s,r.state)}),this.update();var o=this.options.eventsEnabled;o&&this.enableEventListeners(),this.state.eventsEnabled=o}return Eue(t,[{key:"update",value:function(){return Aue.call(this)}},{key:"destroy",value:function(){return Pue.call(this)}},{key:"enableEventListeners",value:function(){return Iue.call(this)}},{key:"disableEventListeners",value:function(){return Lue.call(this)}}]),t}();qp.Utils=(typeof window<"u"?window:global).PopperUtils;qp.placements=IB;qp.Defaults=Jue;var Que=["innerHTML","ownerDocument","style","attributes","nodeValue"],efe=["Array","ArrayBuffer","AsyncFunction","AsyncGenerator","AsyncGeneratorFunction","Date","Error","Function","Generator","GeneratorFunction","HTMLElement","Map","Object","Promise","RegExp","Set","WeakMap","WeakSet"],tfe=["bigint","boolean","null","number","string","symbol","undefined"];function z1(t){var e=Object.prototype.toString.call(t).slice(8,-1);if(/HTML\w+Element/.test(e))return"HTMLElement";if(nfe(e))return e}function ts(t){return function(e){return z1(e)===t}}function nfe(t){return efe.includes(t)}function Sd(t){return function(e){return typeof e===t}}function rfe(t){return tfe.includes(t)}function xe(t){if(t===null)return"null";switch(typeof t){case"bigint":return"bigint";case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"symbol":return"symbol";case"undefined":return"undefined"}if(xe.array(t))return"Array";if(xe.plainFunction(t))return"Function";var e=z1(t);return e||"Object"}xe.array=Array.isArray;xe.arrayOf=function(t,e){return!xe.array(t)&&!xe.function(e)?!1:t.every(function(n){return e(n)})};xe.asyncGeneratorFunction=function(t){return z1(t)==="AsyncGeneratorFunction"};xe.asyncFunction=ts("AsyncFunction");xe.bigint=Sd("bigint");xe.boolean=function(t){return t===!0||t===!1};xe.date=ts("Date");xe.defined=function(t){return!xe.undefined(t)};xe.domElement=function(t){return xe.object(t)&&!xe.plainObject(t)&&t.nodeType===1&&xe.string(t.nodeName)&&Que.every(function(e){return e in t})};xe.empty=function(t){return xe.string(t)&&t.length===0||xe.array(t)&&t.length===0||xe.object(t)&&!xe.map(t)&&!xe.set(t)&&Object.keys(t).length===0||xe.set(t)&&t.size===0||xe.map(t)&&t.size===0};xe.error=ts("Error");xe.function=Sd("function");xe.generator=function(t){return xe.iterable(t)&&xe.function(t.next)&&xe.function(t.throw)};xe.generatorFunction=ts("GeneratorFunction");xe.instanceOf=function(t,e){return!t||!e?!1:Object.getPrototypeOf(t)===e.prototype};xe.iterable=function(t){return!xe.nullOrUndefined(t)&&xe.function(t[Symbol.iterator])};xe.map=ts("Map");xe.nan=function(t){return Number.isNaN(t)};xe.null=function(t){return t===null};xe.nullOrUndefined=function(t){return xe.null(t)||xe.undefined(t)};xe.number=function(t){return Sd("number")(t)&&!xe.nan(t)};xe.numericString=function(t){return xe.string(t)&&t.length>0&&!Number.isNaN(Number(t))};xe.object=function(t){return!xe.nullOrUndefined(t)&&(xe.function(t)||typeof t=="object")};xe.oneOf=function(t,e){return xe.array(t)?t.indexOf(e)>-1:!1};xe.plainFunction=ts("Function");xe.plainObject=function(t){if(z1(t)!=="Object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.getPrototypeOf({})};xe.primitive=function(t){return xe.null(t)||rfe(typeof t)};xe.promise=ts("Promise");xe.propertyOf=function(t,e,n){if(!xe.object(t)||!e)return!1;var r=t[e];return xe.function(n)?n(r):xe.defined(r)};xe.regexp=ts("RegExp");xe.set=ts("Set");xe.string=Sd("string");xe.symbol=Sd("symbol");xe.undefined=Sd("undefined");xe.weakMap=ts("WeakMap");xe.weakSet=ts("WeakSet");function OB(t){return function(e){return typeof e===t}}var ife=OB("function"),ofe=function(t){return t===null},eL=function(t){return Object.prototype.toString.call(t).slice(8,-1)==="RegExp"},tL=function(t){return!sfe(t)&&!ofe(t)&&(ife(t)||typeof t=="object")},sfe=OB("undefined"),FE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function afe(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=n;r--!==0;)if(!bi(t[r],e[r]))return!1;return!0}function lfe(t,e){if(t.byteLength!==e.byteLength)return!1;for(var n=new DataView(t.buffer),r=new DataView(e.buffer),i=t.byteLength;i--;)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}function cfe(t,e){var n,r,i,o;if(t.size!==e.size)return!1;try{for(var s=FE(t.entries()),a=s.next();!a.done;a=s.next()){var l=a.value;if(!e.has(l[0]))return!1}}catch(d){n={error:d}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}try{for(var c=FE(t.entries()),u=c.next();!u.done;u=c.next()){var l=u.value;if(!bi(l[1],e.get(l[0])))return!1}}catch(d){i={error:d}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return!0}function ufe(t,e){var n,r;if(t.size!==e.size)return!1;try{for(var i=FE(t.entries()),o=i.next();!o.done;o=i.next()){var s=o.value;if(!e.has(s[0]))return!1}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!0}function bi(t,e){if(t===e)return!0;if(t&&tL(t)&&e&&tL(e)){if(t.constructor!==e.constructor)return!1;if(Array.isArray(t)&&Array.isArray(e))return afe(t,e);if(t instanceof Map&&e instanceof Map)return cfe(t,e);if(t instanceof Set&&e instanceof Set)return ufe(t,e);if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return lfe(t,e);if(eL(t)&&eL(e))return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var i=n.length;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,n[i]))return!1;for(var i=n.length;i--!==0;){var o=n[i];if(!(o==="_owner"&&t.$$typeof)&&!bi(t[o],e[o]))return!1}return!0}return Number.isNaN(t)&&Number.isNaN(e)?!0:t===e}function ffe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.every(function(n){return xe.string(n)||xe.array(n)||xe.plainObject(n)})}function dfe(t,e,n){return LB(t,e)?[t,e].every(xe.array)?!t.some(sL(n))&&e.some(sL(n)):[t,e].every(xe.plainObject)?!Object.entries(t).some(oL(n))&&Object.entries(e).some(oL(n)):e===n:!1}function nL(t,e,n){var r=n.actual,i=n.key,o=n.previous,s=n.type,a=As(t,i),l=As(e,i),c=[a,l].every(xe.number)&&(s==="increased"?a<l:a>l);return xe.undefined(r)||(c=c&&l===r),xe.undefined(o)||(c=c&&a===o),c}function rL(t,e,n){var r=n.key,i=n.type,o=n.value,s=As(t,r),a=As(e,r),l=i==="added"?s:a,c=i==="added"?a:s;if(!xe.nullOrUndefined(o)){if(xe.defined(l)){if(xe.array(l)||xe.plainObject(l))return dfe(l,c,o)}else return bi(c,o);return!1}return[s,a].every(xe.array)?!c.every(NC(l)):[s,a].every(xe.plainObject)?hfe(Object.keys(l),Object.keys(c)):![s,a].every(function(u){return xe.primitive(u)&&xe.defined(u)})&&(i==="added"?!xe.defined(s)&&xe.defined(a):xe.defined(s)&&!xe.defined(a))}function iL(t,e,n){var r=n===void 0?{}:n,i=r.key,o=As(t,i),s=As(e,i);if(!LB(o,s))throw new TypeError("Inputs have different types");if(!ffe(o,s))throw new TypeError("Inputs don't have length");return[o,s].every(xe.plainObject)&&(o=Object.keys(o),s=Object.keys(s)),[o,s]}function oL(t){return function(e){var n=e[0],r=e[1];return xe.array(t)?bi(t,r)||t.some(function(i){return bi(i,r)||xe.array(r)&&NC(r)(i)}):xe.plainObject(t)&&t[n]?!!t[n]&&bi(t[n],r):bi(t,r)}}function hfe(t,e){return e.some(function(n){return!t.includes(n)})}function sL(t){return function(e){return xe.array(t)?t.some(function(n){return bi(n,e)||xe.array(e)&&NC(e)(n)}):bi(t,e)}}function vh(t,e){return xe.array(t)?t.some(function(n){return bi(n,e)}):bi(t,e)}function NC(t){return function(e){return t.some(function(n){return bi(n,e)})}}function LB(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.every(xe.array)||t.every(xe.number)||t.every(xe.plainObject)||t.every(xe.string)}function As(t,e){if(xe.plainObject(t)||xe.array(t)){if(xe.string(e)){var n=e.split(".");return n.reduce(function(r,i){return r&&r[i]},t)}return xe.number(e)?t[e]:t}return t}function pfe(t,e){if([t,e].some(xe.nullOrUndefined))throw new Error("Missing required parameters");if(![t,e].every(function(d){return xe.plainObject(d)||xe.array(d)}))throw new Error("Expected plain objects or array");var n=function(d,p){try{return rL(t,e,{key:d,type:"added",value:p})}catch{return!1}},r=function(d,p,m){try{var g=As(t,d),v=As(e,d),x=xe.defined(p),y=xe.defined(m);if(x||y){var _=y?vh(m,g):!vh(p,g),w=vh(p,v);return _&&w}return[g,v].every(xe.array)||[g,v].every(xe.plainObject)?!bi(g,v):g!==v}catch{return!1}},i=function(d,p,m){if(!xe.defined(d))return!1;try{var g=As(t,d),v=As(e,d),x=xe.defined(m);return vh(p,g)&&(x?vh(m,v):!x)}catch{return!1}},o=function(d,p){return xe.defined(d)?r(d,p):!1},s=function(d,p,m){if(!xe.defined(d))return!1;try{return nL(t,e,{key:d,actual:p,previous:m,type:"decreased"})}catch{return!1}},a=function(d){try{var p=iL(t,e,{key:d}),m=p[0],g=p[1];return!!m.length&&!g.length}catch{return!1}},l=function(d){try{var p=iL(t,e,{key:d}),m=p[0],g=p[1];return!m.length&&!!g.length}catch{return!1}},c=function(d,p,m){if(!xe.defined(d))return!1;try{return nL(t,e,{key:d,actual:p,previous:m,type:"increased"})}catch{return!1}},u=function(d,p){try{return rL(t,e,{key:d,type:"removed",value:p})}catch{return!1}};return{added:n,changed:r,changedFrom:i,changedTo:o,decreased:s,emptied:a,filled:l,increased:c,removed:u}}function aL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function En(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aL(Object(n),!0).forEach(function(r){Vr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mfe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,NB(r.key),r)}}function Im(t,e,n){return e&&mfe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vr(t,e,n){return e=NB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Om(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zE(t,e)}function lx(t){return lx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lx(t)}function zE(t,e){return zE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},zE(t,e)}function gfe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function yfe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function kB(t,e){if(t==null)return{};var n=yfe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ea(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vfe(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ea(t)}function Lm(t){var e=gfe();return function(){var r=lx(t),i;if(e){var o=lx(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return vfe(this,i)}}function xfe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NB(t){var e=xfe(t,"string");return typeof e=="symbol"?e:String(e)}var _fe={flip:{padding:20},preventOverflow:{padding:10}},Sfe="The typeValidator argument must be a function with the signature function(props, propName, componentName).",wfe="The error message is optional, but must be a string if provided.";function bfe(t,e,n,r){return typeof t=="boolean"?t:typeof t=="function"?t(e,n,r):t?!!t:!1}function Efe(t,e){return Object.hasOwnProperty.call(t,e)}function Mfe(t,e,n,r){return new Error("Required ".concat(t[e]," `").concat(e,"` was not specified in `").concat(n,"`."))}function Tfe(t,e){if(typeof t!="function")throw new TypeError(Sfe);if(e&&typeof e!="string")throw new TypeError(wfe)}function lL(t,e,n){return Tfe(t,n),function(r,i,o){for(var s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];return bfe(e,r,i,o)?Efe(r,i)?t.apply(void 0,[r,i,o].concat(a)):Mfe(r,i,o):t.apply(void 0,[r,i,o].concat(a))}}var Ht={INIT:"init",IDLE:"idle",OPENING:"opening",OPEN:"open",CLOSING:"closing",ERROR:"error"},xh=Tf.createPortal!==void 0;function xs(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Fw(){return"ontouchstart"in window&&/Mobi/.test(navigator.userAgent)}function ay(t){var e=t.title,n=t.data,r=t.warn,i=r===void 0?!1:r,o=t.debug,s=o===void 0?!1:o,a=i?console.warn||console.error:console.log;s&&e&&n&&(console.groupCollapsed("%creact-floater: ".concat(e),"color: #9b00ff; font-weight: bold; font-size: 12px;"),Array.isArray(n)?n.forEach(function(l){xe.plainObject(l)&&l.key?a.apply(console,[l.key,l.value]):a.apply(console,[l])}):a.apply(console,[n]),console.groupEnd())}function Cfe(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;t.addEventListener(e,n,r)}function Afe(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;t.removeEventListener(e,n,r)}function Pfe(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i;i=function(s){n(s),Afe(t,e,i)},Cfe(t,e,i,r)}function cL(){}var DB=function(t){Om(n,t);var e=Lm(n);function n(){return Rm(this,n),e.apply(this,arguments)}return Im(n,[{key:"componentDidMount",value:function(){xs()&&(this.node||this.appendNode(),xh||this.renderPortal())}},{key:"componentDidUpdate",value:function(){xs()&&(xh||this.renderPortal())}},{key:"componentWillUnmount",value:function(){!xs()||!this.node||(xh||Tf.unmountComponentAtNode(this.node),this.node&&this.node.parentNode===document.body&&(document.body.removeChild(this.node),this.node=void 0))}},{key:"appendNode",value:function(){var i=this.props,o=i.id,s=i.zIndex;this.node||(this.node=document.createElement("div"),o&&(this.node.id=o),s&&(this.node.style.zIndex=s),document.body.appendChild(this.node))}},{key:"renderPortal",value:function(){if(!xs())return null;var i=this.props,o=i.children,s=i.setRef;if(this.node||this.appendNode(),xh)return Tf.createPortal(o,this.node);var a=Tf.unstable_renderSubtreeIntoContainer(this,o.length>1?$.createElement("div",null,o):o[0],this.node);return s(a),null}},{key:"renderReact16",value:function(){var i=this.props,o=i.hasChildren,s=i.placement,a=i.target;return o?this.renderPortal():a||s==="center"?this.renderPortal():null}},{key:"render",value:function(){return xh?this.renderReact16():null}}]),n}($.Component);Vr(DB,"propTypes",{children:Ce.oneOfType([Ce.element,Ce.array]),hasChildren:Ce.bool,id:Ce.oneOfType([Ce.string,Ce.number]),placement:Ce.string,setRef:Ce.func.isRequired,target:Ce.oneOfType([Ce.object,Ce.string]),zIndex:Ce.number});var UB=function(t){Om(n,t);var e=Lm(n);function n(){return Rm(this,n),e.apply(this,arguments)}return Im(n,[{key:"parentStyle",get:function(){var i=this.props,o=i.placement,s=i.styles,a=s.arrow.length,l={pointerEvents:"none",position:"absolute",width:"100%"};return o.startsWith("top")?(l.bottom=0,l.left=0,l.right=0,l.height=a):o.startsWith("bottom")?(l.left=0,l.right=0,l.top=0,l.height=a):o.startsWith("left")?(l.right=0,l.top=0,l.bottom=0):o.startsWith("right")&&(l.left=0,l.top=0),l}},{key:"render",value:function(){var i=this.props,o=i.placement,s=i.setArrowRef,a=i.styles,l=a.arrow,c=l.color,u=l.display,d=l.length,p=l.margin,m=l.position,g=l.spread,v={display:u,position:m},x,y=g,_=d;return o.startsWith("top")?(x="0,0 ".concat(y/2,",").concat(_," ").concat(y,",0"),v.bottom=0,v.marginLeft=p,v.marginRight=p):o.startsWith("bottom")?(x="".concat(y,",").concat(_," ").concat(y/2,",0 0,").concat(_),v.top=0,v.marginLeft=p,v.marginRight=p):o.startsWith("left")?(_=g,y=d,x="0,0 ".concat(y,",").concat(_/2," 0,").concat(_),v.right=0,v.marginTop=p,v.marginBottom=p):o.startsWith("right")&&(_=g,y=d,x="".concat(y,",").concat(_," ").concat(y,",0 0,").concat(_/2),v.left=0,v.marginTop=p,v.marginBottom=p),$.createElement("div",{className:"__floater__arrow",style:this.parentStyle},$.createElement("span",{ref:s,style:v},$.createElement("svg",{width:y,height:_,version:"1.1",xmlns:"http://www.w3.org/2000/svg"},$.createElement("polygon",{points:x,fill:c}))))}}]),n}($.Component);Vr(UB,"propTypes",{placement:Ce.string.isRequired,setArrowRef:Ce.func.isRequired,styles:Ce.object.isRequired});var Rfe=["color","height","width"];function FB(t){var e=t.handleClick,n=t.styles,r=n.color,i=n.height,o=n.width,s=kB(n,Rfe);return $.createElement("button",{"aria-label":"close",onClick:e,style:s,type:"button"},$.createElement("svg",{width:"".concat(o,"px"),height:"".concat(i,"px"),viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},$.createElement("g",null,$.createElement("path",{d:"M8.13911129,9.00268191 L0.171521827,17.0258467 C-0.0498027049,17.248715 -0.0498027049,17.6098394 0.171521827,17.8327545 C0.28204354,17.9443526 0.427188206,17.9998706 0.572051765,17.9998706 C0.71714958,17.9998706 0.862013139,17.9443526 0.972581703,17.8327545 L9.0000937,9.74924618 L17.0276057,17.8327545 C17.1384085,17.9443526 17.2832721,17.9998706 17.4281356,17.9998706 C17.5729992,17.9998706 17.718097,17.9443526 17.8286656,17.8327545 C18.0499901,17.6098862 18.0499901,17.2487618 17.8286656,17.0258467 L9.86135722,9.00268191 L17.8340066,0.973848225 C18.0553311,0.750979934 18.0553311,0.389855532 17.8340066,0.16694039 C17.6126821,-0.0556467968 17.254037,-0.0556467968 17.0329467,0.16694039 L9.00042166,8.25611765 L0.967006424,0.167268345 C0.745681892,-0.0553188426 0.387317931,-0.0553188426 0.165993399,0.167268345 C-0.0553311331,0.390136635 -0.0553311331,0.751261038 0.165993399,0.974176179 L8.13920499,9.00268191 L8.13911129,9.00268191 Z",fill:r}))))}FB.propTypes={handleClick:Ce.func.isRequired,styles:Ce.object.isRequired};function zB(t){var e=t.content,n=t.footer,r=t.handleClick,i=t.open,o=t.positionWrapper,s=t.showCloseButton,a=t.title,l=t.styles,c={content:$.isValidElement(e)?e:$.createElement("div",{className:"__floater__content",style:l.content},e)};return a&&(c.title=$.isValidElement(a)?a:$.createElement("div",{className:"__floater__title",style:l.title},a)),n&&(c.footer=$.isValidElement(n)?n:$.createElement("div",{className:"__floater__footer",style:l.footer},n)),(s||o)&&!xe.boolean(i)&&(c.close=$.createElement(FB,{styles:l.close,handleClick:r})),$.createElement("div",{className:"__floater__container",style:l.container},c.close,c.title,c.content,c.footer)}zB.propTypes={content:Ce.node.isRequired,footer:Ce.node,handleClick:Ce.func.isRequired,open:Ce.bool,positionWrapper:Ce.bool.isRequired,showCloseButton:Ce.bool.isRequired,styles:Ce.object.isRequired,title:Ce.node};var BB=function(t){Om(n,t);var e=Lm(n);function n(){return Rm(this,n),e.apply(this,arguments)}return Im(n,[{key:"style",get:function(){var i=this.props,o=i.disableAnimation,s=i.component,a=i.placement,l=i.hideArrow,c=i.status,u=i.styles,d=u.arrow.length,p=u.floater,m=u.floaterCentered,g=u.floaterClosing,v=u.floaterOpening,x=u.floaterWithAnimation,y=u.floaterWithComponent,_={};return l||(a.startsWith("top")?_.padding="0 0 ".concat(d,"px"):a.startsWith("bottom")?_.padding="".concat(d,"px 0 0"):a.startsWith("left")?_.padding="0 ".concat(d,"px 0 0"):a.startsWith("right")&&(_.padding="0 0 0 ".concat(d,"px"))),[Ht.OPENING,Ht.OPEN].indexOf(c)!==-1&&(_=En(En({},_),v)),c===Ht.CLOSING&&(_=En(En({},_),g)),c===Ht.OPEN&&!o&&(_=En(En({},_),x)),a==="center"&&(_=En(En({},_),m)),s&&(_=En(En({},_),y)),En(En({},p),_)}},{key:"render",value:function(){var i=this.props,o=i.component,s=i.handleClick,a=i.hideArrow,l=i.setFloaterRef,c=i.status,u={},d=["__floater"];return o?$.isValidElement(o)?u.content=$.cloneElement(o,{closeFn:s}):u.content=o({closeFn:s}):u.content=$.createElement(zB,this.props),c===Ht.OPEN&&d.push("__floater__open"),a||(u.arrow=$.createElement(UB,this.props)),$.createElement("div",{ref:l,className:d.join(" "),style:this.style},$.createElement("div",{className:"__floater__body"},u.content,u.arrow))}}]),n}($.Component);Vr(BB,"propTypes",{component:Ce.oneOfType([Ce.func,Ce.element]),content:Ce.node,disableAnimation:Ce.bool.isRequired,footer:Ce.node,handleClick:Ce.func.isRequired,hideArrow:Ce.bool.isRequired,open:Ce.bool,placement:Ce.string.isRequired,positionWrapper:Ce.bool.isRequired,setArrowRef:Ce.func.isRequired,setFloaterRef:Ce.func.isRequired,showCloseButton:Ce.bool,status:Ce.string.isRequired,styles:Ce.object.isRequired,title:Ce.node});var HB=function(t){Om(n,t);var e=Lm(n);function n(){return Rm(this,n),e.apply(this,arguments)}return Im(n,[{key:"render",value:function(){var i=this.props,o=i.children,s=i.handleClick,a=i.handleMouseEnter,l=i.handleMouseLeave,c=i.setChildRef,u=i.setWrapperRef,d=i.style,p=i.styles,m;if(o)if($.Children.count(o)===1)if(!$.isValidElement(o))m=$.createElement("span",null,o);else{var g=xe.function(o.type)?"innerRef":"ref";m=$.cloneElement($.Children.only(o),Vr({},g,c))}else m=o;return m?$.createElement("span",{ref:u,style:En(En({},p),d),onClick:s,onMouseEnter:a,onMouseLeave:l},m):null}}]),n}($.Component);Vr(HB,"propTypes",{children:Ce.node,handleClick:Ce.func.isRequired,handleMouseEnter:Ce.func.isRequired,handleMouseLeave:Ce.func.isRequired,setChildRef:Ce.func.isRequired,setWrapperRef:Ce.func.isRequired,style:Ce.object,styles:Ce.object.isRequired});var Ife={zIndex:100};function Ofe(t){var e=zo(Ife,t.options||{});return{wrapper:{cursor:"help",display:"inline-flex",flexDirection:"column",zIndex:e.zIndex},wrapperPosition:{left:-1e3,position:"absolute",top:-1e3,visibility:"hidden"},floater:{display:"inline-block",filter:"drop-shadow(0 0 3px rgba(0, 0, 0, 0.3))",maxWidth:300,opacity:0,position:"relative",transition:"opacity 0.3s",visibility:"hidden",zIndex:e.zIndex},floaterOpening:{opacity:1,visibility:"visible"},floaterWithAnimation:{opacity:1,transition:"opacity 0.3s, transform 0.2s",visibility:"visible"},floaterWithComponent:{maxWidth:"100%"},floaterClosing:{opacity:0,visibility:"visible"},floaterCentered:{left:"50%",position:"fixed",top:"50%",transform:"translate(-50%, -50%)"},container:{backgroundColor:"#fff",color:"#666",minHeight:60,minWidth:200,padding:20,position:"relative",zIndex:10},title:{borderBottom:"1px solid #555",color:"#555",fontSize:18,marginBottom:5,paddingBottom:6,paddingRight:18},content:{fontSize:15},close:{backgroundColor:"transparent",border:0,borderRadius:0,color:"#555",fontSize:0,height:15,outline:"none",padding:10,position:"absolute",right:0,top:0,width:15,WebkitAppearance:"none"},footer:{borderTop:"1px solid #ccc",fontSize:13,marginTop:10,paddingTop:5},arrow:{color:"#fff",display:"inline-flex",length:16,margin:8,position:"absolute",spread:32},options:e}}var Lfe=["arrow","flip","offset"],kfe=["position","top","right","bottom","left"],DC=function(t){Om(n,t);var e=Lm(n);function n(r){var i;return Rm(this,n),i=e.call(this,r),Vr(ea(i),"setArrowRef",function(o){i.arrowRef=o}),Vr(ea(i),"setChildRef",function(o){i.childRef=o}),Vr(ea(i),"setFloaterRef",function(o){i.floaterRef=o}),Vr(ea(i),"setWrapperRef",function(o){i.wrapperRef=o}),Vr(ea(i),"handleTransitionEnd",function(){var o=i.state.status,s=i.props.callback;i.wrapperPopper&&i.wrapperPopper.instance.update(),i.setState({status:o===Ht.OPENING?Ht.OPEN:Ht.IDLE},function(){var a=i.state.status;s(a===Ht.OPEN?"open":"close",i.props)})}),Vr(ea(i),"handleClick",function(){var o=i.props,s=o.event,a=o.open;if(!xe.boolean(a)){var l=i.state,c=l.positionWrapper,u=l.status;(i.event==="click"||i.event==="hover"&&c)&&(ay({title:"click",data:[{event:s,status:u===Ht.OPEN?"closing":"opening"}],debug:i.debug}),i.toggle())}}),Vr(ea(i),"handleMouseEnter",function(){var o=i.props,s=o.event,a=o.open;if(!(xe.boolean(a)||Fw())){var l=i.state.status;i.event==="hover"&&l===Ht.IDLE&&(ay({title:"mouseEnter",data:[{key:"originalEvent",value:s}],debug:i.debug}),clearTimeout(i.eventDelayTimeout),i.toggle())}}),Vr(ea(i),"handleMouseLeave",function(){var o=i.props,s=o.event,a=o.eventDelay,l=o.open;if(!(xe.boolean(l)||Fw())){var c=i.state,u=c.status,d=c.positionWrapper;i.event==="hover"&&(ay({title:"mouseLeave",data:[{key:"originalEvent",value:s}],debug:i.debug}),a?[Ht.OPENING,Ht.OPEN].indexOf(u)!==-1&&!d&&!i.eventDelayTimeout&&(i.eventDelayTimeout=setTimeout(function(){delete i.eventDelayTimeout,i.toggle()},a*1e3)):i.toggle(Ht.IDLE))}}),i.state={currentPlacement:r.placement,needsUpdate:!1,positionWrapper:r.wrapperOptions.position&&!!r.target,status:Ht.INIT,statusWrapper:Ht.INIT},i._isMounted=!1,i.hasMounted=!1,xs()&&window.addEventListener("load",function(){i.popper&&i.popper.instance.update(),i.wrapperPopper&&i.wrapperPopper.instance.update()}),i}return Im(n,[{key:"componentDidMount",value:function(){if(xs()){var i=this.state.positionWrapper,o=this.props,s=o.children,a=o.open,l=o.target;this._isMounted=!0,ay({title:"init",data:{hasChildren:!!s,hasTarget:!!l,isControlled:xe.boolean(a),positionWrapper:i,target:this.target,floater:this.floaterRef},debug:this.debug}),this.hasMounted||(this.initPopper(),this.hasMounted=!0),!s&&l&&xe.boolean(a)}}},{key:"componentDidUpdate",value:function(i,o){if(xs()){var s=this.props,a=s.autoOpen,l=s.open,c=s.target,u=s.wrapperOptions,d=pfe(o,this.state),p=d.changedFrom,m=d.changed;if(i.open!==l){var g;xe.boolean(l)&&(g=l?Ht.OPENING:Ht.CLOSING),this.toggle(g)}(i.wrapperOptions.position!==u.position||i.target!==c)&&this.changeWrapperPosition(this.props),m("status",Ht.IDLE)&&l?this.toggle(Ht.OPEN):p("status",Ht.INIT,Ht.IDLE)&&a&&this.toggle(Ht.OPEN),this.popper&&m("status",Ht.OPENING)&&this.popper.instance.update(),this.floaterRef&&(m("status",Ht.OPENING)||m("status",Ht.CLOSING))&&Pfe(this.floaterRef,"transitionend",this.handleTransitionEnd),m("needsUpdate",!0)&&this.rebuildPopper()}}},{key:"componentWillUnmount",value:function(){xs()&&(this._isMounted=!1,this.popper&&this.popper.instance.destroy(),this.wrapperPopper&&this.wrapperPopper.instance.destroy())}},{key:"initPopper",value:function(){var i=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.target,s=this.state.positionWrapper,a=this.props,l=a.disableFlip,c=a.getPopper,u=a.hideArrow,d=a.offset,p=a.placement,m=a.wrapperOptions,g=p==="top"||p==="bottom"?"flip":["right","bottom-end","top-end","left","top-start","bottom-start"];if(p==="center")this.setState({status:Ht.IDLE});else if(o&&this.floaterRef){var v=this.options,x=v.arrow,y=v.flip,_=v.offset,w=kB(v,Lfe);new qp(o,this.floaterRef,{placement:p,modifiers:En({arrow:En({enabled:!u,element:this.arrowRef},x),flip:En({enabled:!l,behavior:g},y),offset:En({offset:"0, ".concat(d,"px")},_)},w),onCreate:function(C){var P;if(i.popper=C,!((P=i.floaterRef)!==null&&P!==void 0&&P.isConnected)){i.setState({needsUpdate:!0});return}c(C,"floater"),i._isMounted&&i.setState({currentPlacement:C.placement,status:Ht.IDLE}),p!==C.placement&&setTimeout(function(){C.instance.update()},1)},onUpdate:function(C){i.popper=C;var P=i.state.currentPlacement;i._isMounted&&C.placement!==P&&i.setState({currentPlacement:C.placement})}})}if(s){var M=xe.undefined(m.offset)?0:m.offset;new qp(this.target,this.wrapperRef,{placement:m.placement||p,modifiers:{arrow:{enabled:!1},offset:{offset:"0, ".concat(M,"px")},flip:{enabled:!1}},onCreate:function(C){i.wrapperPopper=C,i._isMounted&&i.setState({statusWrapper:Ht.IDLE}),c(C,"wrapper"),p!==C.placement&&setTimeout(function(){C.instance.update()},1)}})}}},{key:"rebuildPopper",value:function(){var i=this;this.floaterRefInterval=setInterval(function(){var o;(o=i.floaterRef)!==null&&o!==void 0&&o.isConnected&&(clearInterval(i.floaterRefInterval),i.setState({needsUpdate:!1}),i.initPopper())},50)}},{key:"changeWrapperPosition",value:function(i){var o=i.target,s=i.wrapperOptions;this.setState({positionWrapper:s.position&&!!o})}},{key:"toggle",value:function(i){var o=this.state.status,s=o===Ht.OPEN?Ht.CLOSING:Ht.OPENING;xe.undefined(i)||(s=i),this.setState({status:s})}},{key:"debug",get:function(){var i=this.props.debug;return i||xs()&&"ReactFloaterDebug"in window&&!!window.ReactFloaterDebug}},{key:"event",get:function(){var i=this.props,o=i.disableHoverToClick,s=i.event;return s==="hover"&&Fw()&&!o?"click":s}},{key:"options",get:function(){var i=this.props.options;return zo(_fe,i||{})}},{key:"styles",get:function(){var i=this,o=this.state,s=o.status,a=o.positionWrapper,l=o.statusWrapper,c=this.props.styles,u=zo(Ofe(c),c);if(a){var d;[Ht.IDLE].indexOf(s)===-1||[Ht.IDLE].indexOf(l)===-1?d=u.wrapperPosition:d=this.wrapperPopper.styles,u.wrapper=En(En({},u.wrapper),d)}if(this.target){var p=window.getComputedStyle(this.target);this.wrapperStyles?u.wrapper=En(En({},u.wrapper),this.wrapperStyles):["relative","static"].indexOf(p.position)===-1&&(this.wrapperStyles={},a||(kfe.forEach(function(m){i.wrapperStyles[m]=p[m]}),u.wrapper=En(En({},u.wrapper),this.wrapperStyles),this.target.style.position="relative",this.target.style.top="auto",this.target.style.right="auto",this.target.style.bottom="auto",this.target.style.left="auto"))}return u}},{key:"target",get:function(){if(!xs())return null;var i=this.props.target;return i?xe.domElement(i)?i:document.querySelector(i):this.childRef||this.wrapperRef}},{key:"render",value:function(){var i=this.state,o=i.currentPlacement,s=i.positionWrapper,a=i.status,l=this.props,c=l.children,u=l.component,d=l.content,p=l.disableAnimation,m=l.footer,g=l.hideArrow,v=l.id,x=l.open,y=l.showCloseButton,_=l.style,w=l.target,M=l.title,A=$.createElement(HB,{handleClick:this.handleClick,handleMouseEnter:this.handleMouseEnter,handleMouseLeave:this.handleMouseLeave,setChildRef:this.setChildRef,setWrapperRef:this.setWrapperRef,style:_,styles:this.styles.wrapper},c),C={};return s?C.wrapperInPortal=A:C.wrapperAsChildren=A,$.createElement("span",null,$.createElement(DB,{hasChildren:!!c,id:v,placement:o,setRef:this.setFloaterRef,target:w,zIndex:this.styles.options.zIndex},$.createElement(BB,{component:u,content:d,disableAnimation:p,footer:m,handleClick:this.handleClick,hideArrow:g||o==="center",open:x,placement:o,positionWrapper:s,setArrowRef:this.setArrowRef,setFloaterRef:this.setFloaterRef,showCloseButton:y,status:a,styles:this.styles,title:M}),C.wrapperInPortal),C.wrapperAsChildren)}}]),n}($.Component);Vr(DC,"propTypes",{autoOpen:Ce.bool,callback:Ce.func,children:Ce.node,component:lL(Ce.oneOfType([Ce.func,Ce.element]),function(t){return!t.content}),content:lL(Ce.node,function(t){return!t.component}),debug:Ce.bool,disableAnimation:Ce.bool,disableFlip:Ce.bool,disableHoverToClick:Ce.bool,event:Ce.oneOf(["hover","click"]),eventDelay:Ce.number,footer:Ce.node,getPopper:Ce.func,hideArrow:Ce.bool,id:Ce.oneOfType([Ce.string,Ce.number]),offset:Ce.number,open:Ce.bool,options:Ce.object,placement:Ce.oneOf(["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","auto","center"]),showCloseButton:Ce.bool,style:Ce.object,styles:Ce.object,target:Ce.oneOfType([Ce.object,Ce.string]),title:Ce.node,wrapperOptions:Ce.shape({offset:Ce.number,placement:Ce.oneOf(["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","auto"]),position:Ce.bool})});Vr(DC,"defaultProps",{autoOpen:!1,callback:cL,debug:!1,disableAnimation:!1,disableFlip:!1,disableHoverToClick:!1,event:"click",eventDelay:.4,getPopper:cL,hideArrow:!1,offset:15,placement:"bottom",showCloseButton:!1,styles:{},target:null,wrapperOptions:{position:!1}});var Nfe=Object.defineProperty,Dfe=(t,e,n)=>e in t?Nfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lt=(t,e,n)=>Dfe(t,typeof e!="symbol"?e+"":e,n),Qt={INIT:"init",START:"start",STOP:"stop",RESET:"reset",PREV:"prev",NEXT:"next",GO:"go",CLOSE:"close",SKIP:"skip",UPDATE:"update"},Uo={TOUR_START:"tour:start",STEP_BEFORE:"step:before",BEACON:"beacon",TOOLTIP:"tooltip",STEP_AFTER:"step:after",TOUR_END:"tour:end",TOUR_STATUS:"tour:status",TARGET_NOT_FOUND:"error:target_not_found",ERROR:"error"},Rt={INIT:"init",READY:"ready",BEACON:"beacon",TOOLTIP:"tooltip",COMPLETE:"complete",ERROR:"error"},zt={IDLE:"idle",READY:"ready",WAITING:"waiting",RUNNING:"running",PAUSED:"paused",SKIPPED:"skipped",FINISHED:"finished",ERROR:"error"};function ol(){var t;return!!(typeof window<"u"&&((t=window.document)!=null&&t.createElement))}function VB(t){return t?t.getBoundingClientRect():null}function Ufe(t=!1){const{body:e,documentElement:n}=document;if(!e||!n)return 0;if(t){const r=[e.scrollHeight,e.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight].sort((o,s)=>o-s),i=Math.floor(r.length/2);return r.length%2===0?(r[i-1]+r[i])/2:r[i]}return Math.max(e.scrollHeight,e.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight)}function ha(t){if(typeof t=="string")try{return document.querySelector(t)}catch{return null}return t}function Ffe(t){return!t||t.nodeType!==1?null:getComputedStyle(t)}function Kp(t,e,n){if(!t)return vc();const r=mB(t);if(r){if(r.isSameNode(vc()))return n?document:vc();if(!(r.scrollHeight>r.offsetHeight)&&!e)return r.style.overflow="initial",vc()}return r}function B1(t,e){if(!t)return!1;const n=Kp(t,e);return n?!n.isSameNode(vc()):!1}function zfe(t){return t.offsetParent!==document.body}function nd(t,e="fixed"){if(!t||!(t instanceof HTMLElement))return!1;const{nodeName:n}=t,r=Ffe(t);return n==="BODY"||n==="HTML"?!1:r&&r.position===e?!0:t.parentNode?nd(t.parentNode,e):!1}function Bfe(t){var e;if(!t)return!1;let n=t;for(;n&&n!==document.body;){if(n instanceof HTMLElement){const{display:r,visibility:i}=getComputedStyle(n);if(r==="none"||i==="hidden")return!1}n=(e=n.parentElement)!=null?e:null}return!0}function Hfe(t,e,n){var r,i,o;const s=VB(t),a=Kp(t,n),l=B1(t,n),c=nd(t);let u=0,d=(r=s==null?void 0:s.top)!=null?r:0;if(l&&c){const p=(i=t==null?void 0:t.offsetTop)!=null?i:0,m=(o=a==null?void 0:a.scrollTop)!=null?o:0;d=p-m}else a instanceof HTMLElement&&(u=a.scrollTop,!l&&!nd(t)&&(d+=u),a.isSameNode(vc())||(d+=vc().scrollTop));return Math.floor(d-e)}function Vfe(t,e,n){var r;if(!t)return 0;const{offsetTop:i=0,scrollTop:o=0}=(r=mB(t))!=null?r:{};let s=t.getBoundingClientRect().top+o;i&&(B1(t,n)||zfe(t))&&(s-=i);const a=Math.floor(s-e);return a<0?0:a}function vc(){var t;return(t=document.scrollingElement)!=null?t:document.documentElement}function $fe(t,e){const{duration:n,element:r}=e;return new Promise((i,o)=>{const{scrollTop:s}=r,a=t>s?t-s:s-t;Zce.top(r,t,{duration:a<100?50:n},l=>l&&l.message!=="Element already at target scroll position"?o(l):i())})}var _h=ma.createPortal!==void 0;function $B(t=navigator.userAgent){let e=t;return typeof window>"u"?e="node":document.documentMode?e="ie":/Edge/.test(t)?e="edge":window.opera||t.includes(" OPR/")?e="opera":typeof window.InstallTrigger<"u"?e="firefox":window.chrome?e="chrome":/(Version\/([\d._]+).*Safari|CriOS|FxiOS| Mobile\/)/.test(t)&&(e="safari"),e}function Ly(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function _s(t,e={}){const{defaultValue:n,step:r,steps:i}=e;let o=XO(t);if(o)(o.includes("{step}")||o.includes("{steps}"))&&r&&i&&(o=o.replace("{step}",r.toString()).replace("{steps}",i.toString()));else if(R.isValidElement(t)&&!Object.values(t.props).length&&Ly(t.type)==="function"){const s=t.type({});o=_s(s,e)}else o=XO(n);return o}function Wfe(t,e){return!st.plainObject(t)||!st.array(e)?!1:Object.keys(t).every(n=>e.includes(n))}function jfe(t){const e=/^#?([\da-f])([\da-f])([\da-f])$/i,n=t.replace(e,(i,o,s,a)=>o+o+s+s+a+a),r=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(n);return r?[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)]:[]}function uL(t){return t.disableBeacon||t.placement==="center"}function fL(){return!["chrome","safari","firefox","opera"].includes($B())}function Vc({data:t,debug:e=!1,title:n,warn:r=!1}){const i=r?console.warn||console.error:console.log;e&&(n&&t?(console.groupCollapsed(`%creact-joyride: ${n}`,"color: #ff0044; font-weight: bold; font-size: 12px;"),Array.isArray(t)?t.forEach(o=>{st.plainObject(o)&&o.key?i.apply(console,[o.key,o.value]):i.apply(console,[o])}):i.apply(console,[t]),console.groupEnd()):console.error("Missing title or data props"))}function Gfe(t){return Object.keys(t)}function WB(t,...e){if(!st.plainObject(t))throw new TypeError("Expected an object");const n={};for(const r in t)({}).hasOwnProperty.call(t,r)&&(e.includes(r)||(n[r]=t[r]));return n}function Xfe(t,...e){if(!st.plainObject(t))throw new TypeError("Expected an object");if(!e.length)return t;const n={};for(const r in t)({}).hasOwnProperty.call(t,r)&&e.includes(r)&&(n[r]=t[r]);return n}function BE(t,e,n){const r=o=>o.replace("{step}",String(e)).replace("{steps}",String(n));if(Ly(t)==="string")return r(t);if(!R.isValidElement(t))return t;const{children:i}=t.props;if(Ly(i)==="string"&&i.includes("{step}"))return R.cloneElement(t,{children:r(i)});if(Array.isArray(i))return R.cloneElement(t,{children:i.map(o=>typeof o=="string"?r(o):BE(o,e,n))});if(Ly(t.type)==="function"&&!Object.values(t.props).length){const o=t.type({});return BE(o,e,n)}return t}function Yfe(t){const{isFirstStep:e,lifecycle:n,previousLifecycle:r,scrollToFirstStep:i,step:o,target:s}=t;return!o.disableScrolling&&(!e||i||n===Rt.TOOLTIP)&&o.placement!=="center"&&(!o.isFixed||!nd(s))&&r!==n&&[Rt.BEACON,Rt.TOOLTIP].includes(n)}var qfe={options:{preventOverflow:{boundariesElement:"scrollParent"}},wrapperOptions:{offset:-18,position:!0}},jB={back:"Back",close:"Close",last:"Last",next:"Next",nextLabelWithProgress:"Next (Step {step} of {steps})",open:"Open the dialog",skip:"Skip"},Kfe={event:"click",placement:"bottom",offset:10,disableBeacon:!1,disableCloseOnEsc:!1,disableOverlay:!1,disableOverlayClose:!1,disableScrollParentFix:!1,disableScrolling:!1,hideBackButton:!1,hideCloseButton:!1,hideFooter:!1,isFixed:!1,locale:jB,showProgress:!1,showSkipButton:!1,spotlightClicks:!1,spotlightPadding:10},Zfe={continuous:!1,debug:!1,disableCloseOnEsc:!1,disableOverlay:!1,disableOverlayClose:!1,disableScrolling:!1,disableScrollParentFix:!1,getHelpers:void 0,hideBackButton:!1,run:!0,scrollOffset:20,scrollDuration:300,scrollToFirstStep:!1,showSkipButton:!1,showProgress:!1,spotlightClicks:!1,spotlightPadding:10,steps:[]},Jfe={arrowColor:"#fff",backgroundColor:"#fff",beaconSize:36,overlayColor:"rgba(0, 0, 0, 0.5)",primaryColor:"#f04",spotlightShadow:"0 0 15px rgba(0, 0, 0, 0.5)",textColor:"#333",width:380,zIndex:100},Sh={backgroundColor:"transparent",border:0,borderRadius:0,color:"#555",cursor:"pointer",fontSize:16,lineHeight:1,padding:8,WebkitAppearance:"none"},dL={borderRadius:4,position:"absolute"};function Qfe(t,e){var n,r,i,o,s;const{floaterProps:a,styles:l}=t,c=zo((n=e.floaterProps)!=null?n:{},a??{}),u=zo(l??{},(r=e.styles)!=null?r:{}),d=zo(Jfe,u.options||{}),p=e.placement==="center"||e.disableBeacon;let{width:m}=d;window.innerWidth>480&&(m=380),"width"in d&&(m=typeof d.width=="number"&&window.innerWidth<d.width?window.innerWidth-30:d.width);const g={bottom:0,left:0,overflow:"hidden",position:"absolute",right:0,top:0,zIndex:d.zIndex},v={beacon:{...Sh,display:p?"none":"inline-block",height:d.beaconSize,position:"relative",width:d.beaconSize,zIndex:d.zIndex},beaconInner:{animation:"joyride-beacon-inner 1.2s infinite ease-in-out",backgroundColor:d.primaryColor,borderRadius:"50%",display:"block",height:"50%",left:"50%",opacity:.7,position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:"50%"},beaconOuter:{animation:"joyride-beacon-outer 1.2s infinite ease-in-out",backgroundColor:`rgba(${jfe(d.primaryColor).join(",")}, 0.2)`,border:`2px solid ${d.primaryColor}`,borderRadius:"50%",boxSizing:"border-box",display:"block",height:"100%",left:0,opacity:.9,position:"absolute",top:0,transformOrigin:"center",width:"100%"},tooltip:{backgroundColor:d.backgroundColor,borderRadius:5,boxSizing:"border-box",color:d.textColor,fontSize:16,maxWidth:"100%",padding:15,position:"relative",width:m},tooltipContainer:{lineHeight:1.4,textAlign:"center"},tooltipTitle:{fontSize:18,margin:0},tooltipContent:{padding:"20px 10px"},tooltipFooter:{alignItems:"center",display:"flex",justifyContent:"flex-end",marginTop:15},tooltipFooterSpacer:{flex:1},buttonNext:{...Sh,backgroundColor:d.primaryColor,borderRadius:4,color:"#fff"},buttonBack:{...Sh,color:d.primaryColor,marginLeft:"auto",marginRight:5},buttonClose:{...Sh,color:d.textColor,height:14,padding:15,position:"absolute",right:0,top:0,width:14},buttonSkip:{...Sh,color:d.textColor,fontSize:14},overlay:{...g,backgroundColor:d.overlayColor,mixBlendMode:"hard-light"},overlayLegacy:{...g},overlayLegacyCenter:{...g,backgroundColor:d.overlayColor},spotlight:{...dL,backgroundColor:"gray"},spotlightLegacy:{...dL,boxShadow:`0 0 0 9999px ${d.overlayColor}, ${d.spotlightShadow}`},floaterStyles:{arrow:{color:(s=(o=(i=c==null?void 0:c.styles)==null?void 0:i.arrow)==null?void 0:o.color)!=null?s:d.arrowColor},options:{zIndex:d.zIndex+100}},options:d};return zo(v,u)}function ede(t){return Xfe(t,"beaconComponent","disableCloseOnEsc","disableOverlay","disableOverlayClose","disableScrolling","disableScrollParentFix","floaterProps","hideBackButton","hideCloseButton","locale","showProgress","showSkipButton","spotlightClicks","spotlightPadding","styles","tooltipComponent")}function Zu(t,e){var n,r,i,o,s,a;const l=e??{},c=zo.all([Kfe,ede(t),l],{isMergeableObject:st.plainObject}),u=Qfe(t,c),d=B1(ha(c.target),c.disableScrollParentFix),p=zo.all([qfe,(n=t.floaterProps)!=null?n:{},(r=c.floaterProps)!=null?r:{}]);return p.offset=c.offset,p.styles=zo((i=p.styles)!=null?i:{},u.floaterStyles),p.offset+=(s=(o=t.spotlightPadding)!=null?o:c.spotlightPadding)!=null?s:0,c.placementBeacon&&p.wrapperOptions&&(p.wrapperOptions.placement=c.placementBeacon),d&&p.options.preventOverflow&&(p.options.preventOverflow.boundariesElement="window"),{...c,locale:zo.all([jB,(a=t.locale)!=null?a:{},c.locale||{}]),floaterProps:p,styles:WB(u,"floaterStyles")}}function GB(t,e=!1){return st.plainObject(t)?t.target?!0:(Vc({title:"validateStep",data:"target is missing from the step",warn:!0,debug:e}),!1):(Vc({title:"validateStep",data:"step must be an object",warn:!0,debug:e}),!1)}function hL(t,e=!1){return st.array(t)?t.every(n=>GB(n,e)):(Vc({title:"validateSteps",data:"steps must be an array",warn:!0,debug:e}),!1)}var XB={action:"init",controlled:!1,index:0,lifecycle:Rt.INIT,origin:null,size:0,status:zt.IDLE},pL=Gfe(WB(XB,"controlled","size")),tde=class{constructor(t){lt(this,"beaconPopper"),lt(this,"tooltipPopper"),lt(this,"data",new Map),lt(this,"listener"),lt(this,"store",new Map),lt(this,"addListener",i=>{this.listener=i}),lt(this,"setSteps",i=>{const{size:o,status:s}=this.getState(),a={size:i.length,status:s};this.data.set("steps",i),s===zt.WAITING&&!o&&i.length&&(a.status=zt.RUNNING),this.setState(a)}),lt(this,"getPopper",i=>i==="beacon"?this.beaconPopper:this.tooltipPopper),lt(this,"setPopper",(i,o)=>{i==="beacon"?this.beaconPopper=o:this.tooltipPopper=o}),lt(this,"cleanupPoppers",()=>{this.beaconPopper=null,this.tooltipPopper=null}),lt(this,"close",(i=null)=>{const{index:o,status:s}=this.getState();s===zt.RUNNING&&this.setState({...this.getNextState({action:Qt.CLOSE,index:o+1,origin:i})})}),lt(this,"go",i=>{const{controlled:o,status:s}=this.getState();if(o||s!==zt.RUNNING)return;const a=this.getSteps()[i];this.setState({...this.getNextState({action:Qt.GO,index:i}),status:a?s:zt.FINISHED})}),lt(this,"info",()=>this.getState()),lt(this,"next",()=>{const{index:i,status:o}=this.getState();o===zt.RUNNING&&this.setState(this.getNextState({action:Qt.NEXT,index:i+1}))}),lt(this,"open",()=>{const{status:i}=this.getState();i===zt.RUNNING&&this.setState({...this.getNextState({action:Qt.UPDATE,lifecycle:Rt.TOOLTIP})})}),lt(this,"prev",()=>{const{index:i,status:o}=this.getState();o===zt.RUNNING&&this.setState({...this.getNextState({action:Qt.PREV,index:i-1})})}),lt(this,"reset",(i=!1)=>{const{controlled:o}=this.getState();o||this.setState({...this.getNextState({action:Qt.RESET,index:0}),status:i?zt.RUNNING:zt.READY})}),lt(this,"skip",()=>{const{status:i}=this.getState();i===zt.RUNNING&&this.setState({action:Qt.SKIP,lifecycle:Rt.INIT,status:zt.SKIPPED})}),lt(this,"start",i=>{const{index:o,size:s}=this.getState();this.setState({...this.getNextState({action:Qt.START,index:st.number(i)?i:o},!0),status:s?zt.RUNNING:zt.WAITING})}),lt(this,"stop",(i=!1)=>{const{index:o,status:s}=this.getState();[zt.FINISHED,zt.SKIPPED].includes(s)||this.setState({...this.getNextState({action:Qt.STOP,index:o+(i?1:0)}),status:zt.PAUSED})}),lt(this,"update",i=>{var o,s;if(!Wfe(i,pL))throw new Error(`State is not valid. Valid keys: ${pL.join(", ")}`);this.setState({...this.getNextState({...this.getState(),...i,action:(o=i.action)!=null?o:Qt.UPDATE,origin:(s=i.origin)!=null?s:null},!0)})});const{continuous:e=!1,stepIndex:n,steps:r=[]}=t??{};this.setState({action:Qt.INIT,controlled:st.number(n),continuous:e,index:st.number(n)?n:0,lifecycle:Rt.INIT,origin:null,status:r.length?zt.READY:zt.IDLE},!0),this.beaconPopper=null,this.tooltipPopper=null,this.listener=null,this.setSteps(r)}getState(){return this.store.size?{action:this.store.get("action")||"",controlled:this.store.get("controlled")||!1,index:parseInt(this.store.get("index"),10),lifecycle:this.store.get("lifecycle")||"",origin:this.store.get("origin")||null,size:this.store.get("size")||0,status:this.store.get("status")||""}:{...XB}}getNextState(t,e=!1){var n,r,i,o,s;const{action:a,controlled:l,index:c,size:u,status:d}=this.getState(),p=st.number(t.index)?t.index:c,m=l&&!e?c:Math.min(Math.max(p,0),u);return{action:(n=t.action)!=null?n:a,controlled:l,index:m,lifecycle:(r=t.lifecycle)!=null?r:Rt.INIT,origin:(i=t.origin)!=null?i:null,size:(o=t.size)!=null?o:u,status:m===u?zt.FINISHED:(s=t.status)!=null?s:d}}getSteps(){const t=this.data.get("steps");return Array.isArray(t)?t:[]}hasUpdatedState(t){const e=JSON.stringify(t),n=JSON.stringify(this.getState());return e!==n}setState(t,e=!1){const n=this.getState(),{action:r,index:i,lifecycle:o,origin:s=null,size:a,status:l}={...n,...t};this.store.set("action",r),this.store.set("index",i),this.store.set("lifecycle",o),this.store.set("origin",s),this.store.set("size",a),this.store.set("status",l),e&&(this.store.set("controlled",t.controlled),this.store.set("continuous",t.continuous)),this.listener&&this.hasUpdatedState(n)&&this.listener(this.getState())}getHelpers(){return{close:this.close,go:this.go,info:this.info,next:this.next,open:this.open,prev:this.prev,reset:this.reset,skip:this.skip}}};function nde(t){return new tde(t)}function rde({styles:t}){return R.createElement("div",{key:"JoyrideSpotlight",className:"react-joyride__spotlight","data-test-id":"spotlight",style:t})}var ide=rde,ode=class extends R.Component{constructor(){super(...arguments),lt(this,"isActive",!1),lt(this,"resizeTimeout"),lt(this,"scrollTimeout"),lt(this,"scrollParent"),lt(this,"state",{isScrolling:!1,mouseOverSpotlight:!1,showSpotlight:!0}),lt(this,"hideSpotlight",()=>{const{continuous:t,disableOverlay:e,lifecycle:n}=this.props,r=[Rt.INIT,Rt.BEACON,Rt.COMPLETE,Rt.ERROR];return e||(t?r.includes(n):n!==Rt.TOOLTIP)}),lt(this,"handleMouseMove",t=>{const{mouseOverSpotlight:e}=this.state,{height:n,left:r,position:i,top:o,width:s}=this.spotlightStyles,a=i==="fixed"?t.clientY:t.pageY,l=i==="fixed"?t.clientX:t.pageX,c=a>=o&&a<=o+n,d=l>=r&&l<=r+s&&c;d!==e&&this.updateState({mouseOverSpotlight:d})}),lt(this,"handleScroll",()=>{const{target:t}=this.props,e=ha(t);if(this.scrollParent!==document){const{isScrolling:n}=this.state;n||this.updateState({isScrolling:!0,showSpotlight:!1}),clearTimeout(this.scrollTimeout),this.scrollTimeout=window.setTimeout(()=>{this.updateState({isScrolling:!1,showSpotlight:!0})},50)}else nd(e,"sticky")&&this.updateState({})}),lt(this,"handleResize",()=>{clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(()=>{this.isActive&&this.forceUpdate()},100)})}componentDidMount(){const{debug:t,disableScrolling:e,disableScrollParentFix:n=!1,target:r}=this.props,i=ha(r);this.scrollParent=Kp(i??document.body,n,!0),this.isActive=!0,window.addEventListener("resize",this.handleResize)}componentDidUpdate(t){var e;const{disableScrollParentFix:n,lifecycle:r,spotlightClicks:i,target:o}=this.props,{changed:s}=ox(t,this.props);if(s("target")||s("disableScrollParentFix")){const a=ha(o);this.scrollParent=Kp(a??document.body,n,!0)}s("lifecycle",Rt.TOOLTIP)&&((e=this.scrollParent)==null||e.addEventListener("scroll",this.handleScroll,{passive:!0}),setTimeout(()=>{const{isScrolling:a}=this.state;a||this.updateState({showSpotlight:!0})},100)),(s("spotlightClicks")||s("disableOverlay")||s("lifecycle"))&&(i&&r===Rt.TOOLTIP?window.addEventListener("mousemove",this.handleMouseMove,!1):r!==Rt.TOOLTIP&&window.removeEventListener("mousemove",this.handleMouseMove))}componentWillUnmount(){var t;this.isActive=!1,window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("resize",this.handleResize),clearTimeout(this.resizeTimeout),clearTimeout(this.scrollTimeout),(t=this.scrollParent)==null||t.removeEventListener("scroll",this.handleScroll)}get overlayStyles(){const{mouseOverSpotlight:t}=this.state,{disableOverlayClose:e,placement:n,styles:r}=this.props;let i=r.overlay;return fL()&&(i=n==="center"?r.overlayLegacyCenter:r.overlayLegacy),{cursor:e?"default":"pointer",height:Ufe(),pointerEvents:t?"none":"auto",...i}}get spotlightStyles(){var t,e,n;const{showSpotlight:r}=this.state,{disableScrollParentFix:i=!1,spotlightClicks:o,spotlightPadding:s=0,styles:a,target:l}=this.props,c=ha(l),u=VB(c),d=nd(c),p=Hfe(c,s,i);return{...fL()?a.spotlightLegacy:a.spotlight,height:Math.round(((t=u==null?void 0:u.height)!=null?t:0)+s*2),left:Math.round(((e=u==null?void 0:u.left)!=null?e:0)-s),opacity:r?1:0,pointerEvents:o?"none":"auto",position:d?"fixed":"absolute",top:p,transition:"opacity 0.2s",width:Math.round(((n=u==null?void 0:u.width)!=null?n:0)+s*2)}}updateState(t){this.isActive&&this.setState(e=>({...e,...t}))}render(){const{showSpotlight:t}=this.state,{onClickOverlay:e,placement:n}=this.props,{hideSpotlight:r,overlayStyles:i,spotlightStyles:o}=this;if(r())return null;let s=n!=="center"&&t&&R.createElement(ide,{styles:o});if($B()==="safari"){const{mixBlendMode:a,zIndex:l,...c}=i;s=R.createElement("div",{style:{...c}},s),delete i.backgroundColor}return R.createElement("div",{className:"react-joyride__overlay","data-test-id":"overlay",onClick:e,role:"presentation",style:i},s)}},sde=class extends R.Component{constructor(){super(...arguments),lt(this,"node",null)}componentDidMount(){const{id:t}=this.props;ol()&&(this.node=document.createElement("div"),this.node.id=t,document.body.appendChild(this.node),_h||this.renderReact15())}componentDidUpdate(){ol()&&(_h||this.renderReact15())}componentWillUnmount(){!ol()||!this.node||(_h||ma.unmountComponentAtNode(this.node),this.node.parentNode===document.body&&(document.body.removeChild(this.node),this.node=null))}renderReact15(){if(!ol())return;const{children:t}=this.props;this.node&&ma.unstable_renderSubtreeIntoContainer(this,t,this.node)}renderReact16(){if(!ol()||!_h)return null;const{children:t}=this.props;return this.node?ma.createPortal(t,this.node):null}render(){return _h?this.renderReact16():null}},ade=class{constructor(t,e){if(lt(this,"element"),lt(this,"options"),lt(this,"canBeTabbed",n=>{const{tabIndex:r}=n;return r===null||r<0?!1:this.canHaveFocus(n)}),lt(this,"canHaveFocus",n=>{const r=/input|select|textarea|button|object/,i=n.nodeName.toLowerCase();return(r.test(i)&&!n.getAttribute("disabled")||i==="a"&&!!n.getAttribute("href"))&&this.isVisible(n)}),lt(this,"findValidTabElements",()=>[].slice.call(this.element.querySelectorAll("*"),0).filter(this.canBeTabbed)),lt(this,"handleKeyDown",n=>{const{code:r="Tab"}=this.options;n.code===r&&this.interceptTab(n)}),lt(this,"interceptTab",n=>{n.preventDefault();const r=this.findValidTabElements(),{shiftKey:i}=n;if(!r.length)return;let o=document.activeElement?r.indexOf(document.activeElement):0;o===-1||!i&&o+1===r.length?o=0:i&&o===0?o=r.length-1:o+=i?-1:1,r[o].focus()}),lt(this,"isHidden",n=>{const r=n.offsetWidth<=0&&n.offsetHeight<=0,i=window.getComputedStyle(n);return r&&!n.innerHTML?!0:r&&i.getPropertyValue("overflow")!=="visible"||i.getPropertyValue("display")==="none"}),lt(this,"isVisible",n=>{let r=n;for(;r;)if(r instanceof HTMLElement){if(r===document.body)break;if(this.isHidden(r))return!1;r=r.parentNode}return!0}),lt(this,"removeScope",()=>{window.removeEventListener("keydown",this.handleKeyDown)}),lt(this,"checkFocus",n=>{document.activeElement!==n&&(n.focus(),window.requestAnimationFrame(()=>this.checkFocus(n)))}),lt(this,"setFocus",()=>{const{selector:n}=this.options;if(!n)return;const r=this.element.querySelector(n);r&&window.requestAnimationFrame(()=>this.checkFocus(r))}),!(t instanceof HTMLElement))throw new TypeError("Invalid parameter: element must be an HTMLElement");this.element=t,this.options=e,window.addEventListener("keydown",this.handleKeyDown,!1),this.setFocus()}},lde=class extends R.Component{constructor(t){if(super(t),lt(this,"beacon",null),lt(this,"setBeaconRef",i=>{this.beacon=i}),t.beaconComponent)return;const e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.id="joyride-beacon-animation",t.nonce&&n.setAttribute("nonce",t.nonce),n.appendChild(document.createTextNode(`
        @keyframes joyride-beacon-inner {
          20% {
            opacity: 0.9;
          }
        
          90% {
            opacity: 0.7;
          }
        }
        
        @keyframes joyride-beacon-outer {
          0% {
            transform: scale(1);
          }
        
          45% {
            opacity: 0.7;
            transform: scale(0.75);
          }
        
          100% {
            opacity: 0.9;
            transform: scale(1);
          }
        }
      `)),e.appendChild(n)}componentDidMount(){const{shouldFocus:t}=this.props;setTimeout(()=>{st.domElement(this.beacon)&&t&&this.beacon.focus()},0)}componentWillUnmount(){const t=document.getElementById("joyride-beacon-animation");t!=null&&t.parentNode&&t.parentNode.removeChild(t)}render(){const{beaconComponent:t,continuous:e,index:n,isLastStep:r,locale:i,onClickOrHover:o,size:s,step:a,styles:l}=this.props,c=_s(i.open),u={"aria-label":c,onClick:o,onMouseEnter:o,ref:this.setBeaconRef,title:c};let d;if(t){const p=t;d=R.createElement(p,{continuous:e,index:n,isLastStep:r,size:s,step:a,...u})}else d=R.createElement("button",{key:"JoyrideBeacon",className:"react-joyride__beacon","data-test-id":"button-beacon",style:l.beacon,type:"button",...u},R.createElement("span",{style:l.beaconInner}),R.createElement("span",{style:l.beaconOuter}));return d}};function cde({styles:t,...e}){const{color:n,height:r,width:i,...o}=t;return $.createElement("button",{style:o,type:"button",...e},$.createElement("svg",{height:typeof r=="number"?`${r}px`:r,preserveAspectRatio:"xMidYMid",version:"1.1",viewBox:"0 0 18 18",width:typeof i=="number"?`${i}px`:i,xmlns:"http://www.w3.org/2000/svg"},$.createElement("g",null,$.createElement("path",{d:"M8.13911129,9.00268191 L0.171521827,17.0258467 C-0.0498027049,17.248715 -0.0498027049,17.6098394 0.171521827,17.8327545 C0.28204354,17.9443526 0.427188206,17.9998706 0.572051765,17.9998706 C0.71714958,17.9998706 0.862013139,17.9443526 0.972581703,17.8327545 L9.0000937,9.74924618 L17.0276057,17.8327545 C17.1384085,17.9443526 17.2832721,17.9998706 17.4281356,17.9998706 C17.5729992,17.9998706 17.718097,17.9443526 17.8286656,17.8327545 C18.0499901,17.6098862 18.0499901,17.2487618 17.8286656,17.0258467 L9.86135722,9.00268191 L17.8340066,0.973848225 C18.0553311,0.750979934 18.0553311,0.389855532 17.8340066,0.16694039 C17.6126821,-0.0556467968 17.254037,-0.0556467968 17.0329467,0.16694039 L9.00042166,8.25611765 L0.967006424,0.167268345 C0.745681892,-0.0553188426 0.387317931,-0.0553188426 0.165993399,0.167268345 C-0.0553311331,0.390136635 -0.0553311331,0.751261038 0.165993399,0.974176179 L8.13920499,9.00268191 L8.13911129,9.00268191 Z",fill:n}))))}var ude=cde;function fde(t){const{backProps:e,closeProps:n,index:r,isLastStep:i,primaryProps:o,skipProps:s,step:a,tooltipProps:l}=t,{content:c,hideBackButton:u,hideCloseButton:d,hideFooter:p,showSkipButton:m,styles:g,title:v}=a,x={};return x.primary=R.createElement("button",{"data-test-id":"button-primary",style:g.buttonNext,type:"button",...o}),m&&!i&&(x.skip=R.createElement("button",{"aria-live":"off","data-test-id":"button-skip",style:g.buttonSkip,type:"button",...s})),!u&&r>0&&(x.back=R.createElement("button",{"data-test-id":"button-back",style:g.buttonBack,type:"button",...e})),x.close=!d&&R.createElement(ude,{"data-test-id":"button-close",styles:g.buttonClose,...n}),R.createElement("div",{key:"JoyrideTooltip","aria-label":_s(v??c),className:"react-joyride__tooltip",style:g.tooltip,...l},R.createElement("div",{style:g.tooltipContainer},v&&R.createElement("h1",{"aria-label":_s(v),style:g.tooltipTitle},v),R.createElement("div",{style:g.tooltipContent},c)),!p&&R.createElement("div",{style:g.tooltipFooter},R.createElement("div",{style:g.tooltipFooterSpacer},x.skip),x.back,x.primary),x.close)}var dde=fde,hde=class extends R.Component{constructor(){super(...arguments),lt(this,"handleClickBack",t=>{t.preventDefault();const{helpers:e}=this.props;e.prev()}),lt(this,"handleClickClose",t=>{t.preventDefault();const{helpers:e}=this.props;e.close("button_close")}),lt(this,"handleClickPrimary",t=>{t.preventDefault();const{continuous:e,helpers:n}=this.props;if(!e){n.close("button_primary");return}n.next()}),lt(this,"handleClickSkip",t=>{t.preventDefault();const{helpers:e}=this.props;e.skip()}),lt(this,"getElementsProps",()=>{const{continuous:t,index:e,isLastStep:n,setTooltipRef:r,size:i,step:o}=this.props,{back:s,close:a,last:l,next:c,nextLabelWithProgress:u,skip:d}=o.locale,p=_s(s),m=_s(a),g=_s(l),v=_s(c),x=_s(d);let y=a,_=m;if(t){if(y=c,_=v,o.showProgress&&!n){const w=_s(u,{step:e+1,steps:i});y=BE(u,e+1,i),_=w}n&&(y=l,_=g)}return{backProps:{"aria-label":p,children:s,"data-action":"back",onClick:this.handleClickBack,role:"button",title:p},closeProps:{"aria-label":m,children:a,"data-action":"close",onClick:this.handleClickClose,role:"button",title:m},primaryProps:{"aria-label":_,children:y,"data-action":"primary",onClick:this.handleClickPrimary,role:"button",title:_},skipProps:{"aria-label":x,children:d,"data-action":"skip",onClick:this.handleClickSkip,role:"button",title:x},tooltipProps:{"aria-modal":!0,ref:r,role:"alertdialog"}}})}render(){const{continuous:t,index:e,isLastStep:n,setTooltipRef:r,size:i,step:o}=this.props,{beaconComponent:s,tooltipComponent:a,...l}=o;let c;if(a){const u={...this.getElementsProps(),continuous:t,index:e,isLastStep:n,size:i,step:l,setTooltipRef:r},d=a;c=R.createElement(d,{...u})}else c=R.createElement(dde,{...this.getElementsProps(),continuous:t,index:e,isLastStep:n,size:i,step:o});return c}},pde=class extends R.Component{constructor(){super(...arguments),lt(this,"scope",null),lt(this,"tooltip",null),lt(this,"handleClickHoverBeacon",t=>{const{step:e,store:n}=this.props;t.type==="mouseenter"&&e.event!=="hover"||n.update({lifecycle:Rt.TOOLTIP})}),lt(this,"setTooltipRef",t=>{this.tooltip=t}),lt(this,"setPopper",(t,e)=>{var n;const{action:r,lifecycle:i,step:o,store:s}=this.props;e==="wrapper"?s.setPopper("beacon",t):s.setPopper("tooltip",t),s.getPopper("beacon")&&(s.getPopper("tooltip")||o.placement==="center")&&i===Rt.INIT&&s.update({action:r,lifecycle:Rt.READY}),(n=o.floaterProps)!=null&&n.getPopper&&o.floaterProps.getPopper(t,e)}),lt(this,"renderTooltip",t=>{const{continuous:e,helpers:n,index:r,size:i,step:o}=this.props;return R.createElement(hde,{continuous:e,helpers:n,index:r,isLastStep:r+1===i,setTooltipRef:this.setTooltipRef,size:i,step:o,...t})})}componentDidMount(){const{debug:t,index:e}=this.props;Vc({title:`step:${e}`,data:[{key:"props",value:this.props}],debug:t})}componentDidUpdate(t){var e;const{action:n,callback:r,continuous:i,controlled:o,debug:s,helpers:a,index:l,lifecycle:c,shouldScroll:u,status:d,step:p,store:m}=this.props,{changed:g,changedFrom:v}=ox(t,this.props),x=a.info(),y=i&&n!==Qt.CLOSE&&(l>0||n===Qt.PREV),_=g("action")||g("index")||g("lifecycle")||g("status"),w=v("lifecycle",[Rt.TOOLTIP,Rt.INIT],Rt.INIT),M=g("action",[Qt.NEXT,Qt.PREV,Qt.SKIP,Qt.CLOSE]),A=o&&l===t.index;if(M&&(w||A)&&r({...x,index:t.index,lifecycle:Rt.COMPLETE,step:t.step,type:Uo.STEP_AFTER}),p.placement==="center"&&d===zt.RUNNING&&g("index")&&n!==Qt.START&&c===Rt.INIT&&m.update({lifecycle:Rt.READY}),_){const C=ha(p.target),P=!!C;P&&Bfe(C)?(v("status",zt.READY,zt.RUNNING)||v("lifecycle",Rt.INIT,Rt.READY))&&r({...x,step:p,type:Uo.STEP_BEFORE}):(console.warn(P?"Target not visible":"Target not mounted",p),r({...x,type:Uo.TARGET_NOT_FOUND,step:p}),o||m.update({index:l+(n===Qt.PREV?-1:1)}))}v("lifecycle",Rt.INIT,Rt.READY)&&m.update({lifecycle:uL(p)||y?Rt.TOOLTIP:Rt.BEACON}),g("index")&&Vc({title:`step:${c}`,data:[{key:"props",value:this.props}],debug:s}),g("lifecycle",Rt.BEACON)&&r({...x,step:p,type:Uo.BEACON}),g("lifecycle",Rt.TOOLTIP)&&(r({...x,step:p,type:Uo.TOOLTIP}),u&&this.tooltip&&(this.scope=new ade(this.tooltip,{selector:"[data-action=primary]"}),this.scope.setFocus())),v("lifecycle",[Rt.TOOLTIP,Rt.INIT],Rt.INIT)&&((e=this.scope)==null||e.removeScope(),m.cleanupPoppers())}componentWillUnmount(){var t;(t=this.scope)==null||t.removeScope()}get open(){const{lifecycle:t,step:e}=this.props;return uL(e)||t===Rt.TOOLTIP}render(){const{continuous:t,debug:e,index:n,nonce:r,shouldScroll:i,size:o,step:s}=this.props,a=ha(s.target);return!GB(s)||!st.domElement(a)?null:R.createElement("div",{key:`JoyrideStep-${n}`,className:"react-joyride__step"},R.createElement(DC,{...s.floaterProps,component:this.renderTooltip,debug:e,getPopper:this.setPopper,id:`react-joyride-step-${n}`,open:this.open,placement:s.placement,target:s.target},R.createElement(lde,{beaconComponent:s.beaconComponent,continuous:t,index:n,isLastStep:n+1===o,locale:s.locale,nonce:r,onClickOrHover:this.handleClickHoverBeacon,shouldFocus:i,size:o,step:s,styles:s.styles})))}},YB=class extends R.Component{constructor(t){super(t),lt(this,"helpers"),lt(this,"store"),lt(this,"callback",s=>{const{callback:a}=this.props;st.function(a)&&a(s)}),lt(this,"handleKeyboard",s=>{const{index:a,lifecycle:l}=this.state,{steps:c}=this.props,u=c[a];l===Rt.TOOLTIP&&s.code==="Escape"&&u&&!u.disableCloseOnEsc&&this.store.close("keyboard")}),lt(this,"handleClickOverlay",()=>{const{index:s}=this.state,{steps:a}=this.props;Zu(this.props,a[s]).disableOverlayClose||this.helpers.close("overlay")}),lt(this,"syncState",s=>{this.setState(s)});const{debug:e,getHelpers:n,run:r=!0,stepIndex:i}=t;this.store=nde({...t,controlled:r&&st.number(i)}),this.helpers=this.store.getHelpers();const{addListener:o}=this.store;Vc({title:"init",data:[{key:"props",value:this.props},{key:"state",value:this.state}],debug:e}),o(this.syncState),n&&n(this.helpers),this.state=this.store.getState()}componentDidMount(){if(!ol())return;const{debug:t,disableCloseOnEsc:e,run:n,steps:r}=this.props,{start:i}=this.store;hL(r,t)&&n&&i(),e||document.body.addEventListener("keydown",this.handleKeyboard,{passive:!0})}componentDidUpdate(t,e){if(!ol())return;const{action:n,controlled:r,index:i,status:o}=this.state,{debug:s,run:a,stepIndex:l,steps:c}=this.props,{stepIndex:u,steps:d}=t,{reset:p,setSteps:m,start:g,stop:v,update:x}=this.store,{changed:y}=ox(t,this.props),{changed:_,changedFrom:w}=ox(e,this.state),M=Zu(this.props,c[i]),A=!si(d,c),C=st.number(l)&&y("stepIndex"),P=ha(M.target);if(A&&(hL(c,s)?m(c):console.warn("Steps are not valid",c)),y("run")&&(a?g(l):v()),C){let E=st.number(u)&&u<l?Qt.NEXT:Qt.PREV;n===Qt.STOP&&(E=Qt.START),[zt.FINISHED,zt.SKIPPED].includes(o)||x({action:n===Qt.CLOSE?Qt.CLOSE:E,index:l,lifecycle:Rt.INIT})}!r&&o===zt.RUNNING&&i===0&&!P&&(this.store.update({index:i+1}),this.callback({...this.state,type:Uo.TARGET_NOT_FOUND,step:M}));const N={...this.state,index:i,step:M};if(_("action",[Qt.NEXT,Qt.PREV,Qt.SKIP,Qt.CLOSE])&&_("status",zt.PAUSED)){const E=Zu(this.props,c[e.index]);this.callback({...N,index:e.index,lifecycle:Rt.COMPLETE,step:E,type:Uo.STEP_AFTER})}if(_("status",[zt.FINISHED,zt.SKIPPED])){const E=Zu(this.props,c[e.index]);r||this.callback({...N,index:e.index,lifecycle:Rt.COMPLETE,step:E,type:Uo.STEP_AFTER}),this.callback({...N,type:Uo.TOUR_END,step:E,index:e.index}),p()}else w("status",[zt.IDLE,zt.READY],zt.RUNNING)?this.callback({...N,type:Uo.TOUR_START}):(_("status")||_("action",Qt.RESET))&&this.callback({...N,type:Uo.TOUR_STATUS});this.scrollToStep(e)}componentWillUnmount(){const{disableCloseOnEsc:t}=this.props;t||document.body.removeEventListener("keydown",this.handleKeyboard)}scrollToStep(t){const{index:e,lifecycle:n,status:r}=this.state,{debug:i,disableScrollParentFix:o=!1,scrollDuration:s,scrollOffset:a=20,scrollToFirstStep:l=!1,steps:c}=this.props,u=Zu(this.props,c[e]),d=ha(u.target),p=Yfe({isFirstStep:e===0,lifecycle:n,previousLifecycle:t.lifecycle,scrollToFirstStep:l,step:u,target:d});if(r===zt.RUNNING&&p){const m=B1(d,o),g=Kp(d,o);let v=Math.floor(Vfe(d,a,o))||0;Vc({title:"scrollToStep",data:[{key:"index",value:e},{key:"lifecycle",value:n},{key:"status",value:r}],debug:i});const x=this.store.getPopper("beacon"),y=this.store.getPopper("tooltip");if(n===Rt.BEACON&&x){const{offsets:_,placement:w}=x;!["bottom"].includes(w)&&!m&&(v=Math.floor(_.popper.top-a))}else if(n===Rt.TOOLTIP&&y){const{flipped:_,offsets:w,placement:M}=y;["top","right","left"].includes(M)&&!_&&!m?v=Math.floor(w.popper.top-a):v-=u.spotlightPadding}v=v>=0?v:0,r===zt.RUNNING&&$fe(v,{element:g,duration:s}).then(()=>{setTimeout(()=>{var _;(_=this.store.getPopper("tooltip"))==null||_.instance.update()},10)})}}render(){if(!ol())return null;const{index:t,lifecycle:e,status:n}=this.state,{continuous:r=!1,debug:i=!1,nonce:o,scrollToFirstStep:s=!1,steps:a}=this.props,l=n===zt.RUNNING,c={};if(l&&a[t]){const u=Zu(this.props,a[t]);c.step=R.createElement(pde,{...this.state,callback:this.callback,continuous:r,debug:i,helpers:this.helpers,nonce:o,shouldScroll:!u.disableScrolling&&(t!==0||s),step:u,store:this.store}),c.overlay=R.createElement(sde,{id:"react-joyride-portal"},R.createElement(ode,{...u,continuous:r,debug:i,lifecycle:e,onClickOverlay:this.handleClickOverlay}))}return R.createElement("div",{className:"react-joyride"},c.step,c.overlay)}};lt(YB,"defaultProps",Zfe);var mde=YB;const qB=R.createContext(void 0);function gde({children:t}){const[e,n]=R.useState(!1),[r,i]=R.useState([0]),o=c=>{const{status:u}=c;(u==="finished"||u==="skipped")&&(n(!1),i([0])),u==="running"&&n(!0)},s=()=>{i(c=>c.length<=1?c:c.slice(0,-1))},a=c=>{if(c<0){console.warn(`Invalid step index: ${c}`);return}i(u=>{const d=[...u];return d.push(c),d})},l=r[r.length-1];return k.jsx(qB.Provider,{value:{isTutorialActive:e,setTutorialActive:n,stepIndex:l,back:s,goToStep:a,handleJoyrideCallback:o},children:t})}const KB=()=>{const t=R.useContext(qB);if(!t)throw new Error("Should be within a tutorialprovider component, check");return t},yde=({step:t,primaryProps:e,tooltipProps:n,backProps:r,closeProps:i,skipProps:o,isLastStep:s,index:a})=>{const{stepIndex:l,goToStep:c,back:u}=KB();if(!("next"in t))return k.jsx("div",{children:"Invalid step configuration"});const d=t;let p={},m={};return d.modal&&(p={fontSize:"large",textAlign:"center",transitionProperty:"none!important"},m={display:"flex",flexDirection:"column",height:"100%",border:"1px solid #red"},n.style={width:"600px",height:"700px",position:"absolute",fontSize:"x-large!important!important",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",flexDirection:"column"}),k.jsxs("div",{className:"react-joyride__tooltip",...n,children:[k.jsxs("div",{className:"react-joyride__tooltip__container",children:[k.jsxs("div",{className:"react-joyride__tooltip__edge",children:[a>0&&k.jsx("button",{className:"react-joyride__tooltip__header button",onClick:u,children:"Back"}),d.title&&k.jsx("div",{className:"react-joyride__tooltip__title",children:d.title}),k.jsx("button",{className:"react-joyride__tooltip__edge button",...i,children:""})]}),k.jsx("div",{className:"react-joyride__tooltip__body",style:p,children:d.content})]}),k.jsx("div",{className:"react-joyride__tooltip__edge",style:m,children:d.next.map(g=>k.jsx("button",{className:"react-joyride__tooltip__edge button",onClick:()=>{c(g.index)},children:g.title||"Next"},g.index))})]})},vde="_desc_e49k5_1",xde="_beacon_e49k5_19",Zp={desc:vde,beacon:xde},_de=R.forwardRef((t,e)=>k.jsx("button",{className:Zp.beacon,ref:e,...t})),UC=t=>{let e=[],n=[];for(let r of t)if("branches"in r){const i={...r,branches:r.branches.map(UC)};n.push(i),e.push(n),n=[]}else n.push(r);return n.length&&e.push(n),e},FC=(t,e)=>{for(let n=t.length-1;n>=0;n--){const r=t[n];for(let i=r.length-1;i>=0;i--){const o=r[i],s="branches"in o?o.branches.map(l=>FC(l,e)):e?[e]:[],a=o;a.next=s,"branches"in a&&delete a.branches,e=a}}return e},zC=(t,e=new Set)=>{for(let n of t)for(let r of n)e.has(r)||(e.add(r),"branches"in r&&r.branches.forEach(i=>zC(i,e)));return e},Sde=[{target:"body",content:"Start"},{target:"body",content:"Pivot",modal:!0,branches:[[{target:"body",content:"A"},{target:"body",content:"B"}],[{target:"body",content:"C"},{target:"body",content:"D"}]]},{target:"body",content:"ShouldBeNewChunkStart"},{target:"body",content:"X"},{target:"body",content:"Pivot2",branches:[[{target:"body",content:"InnerPivot",branches:[[{target:"body",content:"X",branches:[[{target:"body",content:"Alpha"}],[{target:"body",content:"Beta"}]]},{target:"body",content:"Y"}],[{target:"body",content:"Z"}]]}],[{target:"body",content:"456"}]]},{target:"body",content:"ShouldBeNewChunkStartAgain"},{target:"body",content:"Z"}],ZB=UC(Sde),mL=[...zC(ZB)];for(let t=0;t<mL.length;t++){const e=mL[t];e.index=t}console.log("Set from Chunked Step:");const wde=FC(ZB);console.log("(test) Linked Steps:",wde);const bde=t=>{const e=UC(t),n=[...zC(e)];FC(e);for(let r=0;r<n.length;r++){const i=n[r];i.index=r}return n},Ede=t=>{console.log("Linked Steps Debug:"),t.forEach(e=>{let n=typeof e.content=="string"?e.content:JSON.stringify(e.content);console.log(`Step ${e.index}: ${e.title??n}`),e.next.length>0?console.log(`  Next steps: ${e.next.map(r=>r.title??r.index).join(", ")}`):console.log("  No next steps")})};function BC(t,e,n,r,i){const o=r;function s(d,p,m){const g=[];for(let x=0;x<=o;x++){const y=x/o*e,_=d*Math.pow(y-p,2)+m,w=n-_;g.push({x:y,y:w})}let v=`M ${g[0].x.toFixed(2)} ${g[0].y.toFixed(2)}`;for(let x=1;x<g.length;x++)v+=` L ${g[x].x.toFixed(2)} ${g[x].y.toFixed(2)}`;return v}const a=t.map(d=>{const[p,m,g]=d;return s(p,m,g)}),l=a.join(";"),c=t.map((d,p)=>(p/(t.length-1)).toFixed(2)).join(";");return k.jsx("path",{fill:"none",stroke:"black","stroke-width":"2",d:a[0],children:k.jsx("animate",{attributeName:"d",values:l,keyTimes:c,dur:i+"s",repeatCount:"indefinite",calcMode:"spline",keySplines:Mde(t.length)})})}function Mde(t){const e=t-1;return Array(e).fill("0.4 0 0.6 1").join(";")}const Tde=BC([[-.01,120,90],[.01,80,110],[-.01,120,90]],200,200,50,2);console.log(Tde);const Cde=BC([[.01,80,110],[-.018,100,130],[-.018,100,130]],200,200,50,4),Ade=BC([[.01,80,60],[-.01,130,130],[.01,80,80],[-.01,130,130],[.01,80,60]],200,200,50,8),Pde=k.jsxs("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",margin:"20px 50px"},children:[k.jsxs("div",{children:[k.jsxs("svg",{width:"168",height:"160",viewBox:"-10 0 200 200",children:[k.jsx("line",{x1:"10",y1:"180",x2:"180",y2:"180",stroke:"black",strokeWidth:"1"}),k.jsx("line",{x1:"20",y1:"20",x2:"20",y2:"190",stroke:"black",strokeWidth:"1"}),Cde,k.jsx("circle",{cx:"32",cy:"168",r:"3",fill:"blue"}),k.jsx("circle",{cx:"43",cy:"150",r:"3",fill:"blue"}),k.jsx("circle",{cx:"48",cy:"120",r:"3",fill:"blue"}),k.jsx("circle",{cx:"62",cy:"105",r:"3",fill:"blue"}),k.jsx("circle",{cx:"71",cy:"90",r:"3",fill:"blue"}),k.jsx("circle",{cx:"78",cy:"70",r:"3",fill:"blue"}),k.jsx("circle",{cx:"88",cy:"73",r:"3",fill:"blue"}),k.jsx("circle",{cx:"100",cy:"70",r:"3",fill:"blue"}),k.jsx("circle",{cx:"112",cy:"72",r:"3",fill:"blue"}),k.jsx("circle",{cx:"123",cy:"80",r:"3",fill:"blue"}),k.jsx("circle",{cx:"127",cy:"93",r:"3",fill:"blue"}),k.jsx("circle",{cx:"143",cy:"100",r:"3",fill:"blue"}),k.jsx("circle",{cx:"152",cy:"120",r:"3",fill:"blue"}),k.jsx("circle",{cx:"158",cy:"140",r:"3",fill:"blue"}),k.jsx("circle",{cx:"173",cy:"168",r:"3",fill:"blue"})]}),k.jsx("div",{className:Zp.desc,style:{textAlign:"center"},children:" This data can be represented well by parabola."})]}),k.jsxs("div",{children:[k.jsxs("svg",{width:"168",height:"160",viewBox:"-10 0 200 200",children:[k.jsx("line",{x1:"10",y1:"180",x2:"180",y2:"180",stroke:"black",strokeWidth:"1"}),k.jsx("line",{x1:"20",y1:"20",x2:"20",y2:"190",stroke:"black",strokeWidth:"1"}),Ade,k.jsx("circle",{cx:"98",cy:"72",r:"3",fill:"red"}),k.jsx("circle",{cx:"134",cy:"77",r:"3",fill:"red"}),k.jsx("circle",{cx:"147",cy:"81",r:"3",fill:"red"}),k.jsx("circle",{cx:"163",cy:"104",r:"3",fill:"red"}),k.jsx("circle",{cx:"146",cy:"112",r:"3",fill:"red"}),k.jsx("circle",{cx:"127",cy:"129",r:"3",fill:"red"}),k.jsx("circle",{cx:"96",cy:"133",r:"3",fill:"red"}),k.jsx("circle",{cx:"67",cy:"122",r:"3",fill:"red"}),k.jsx("circle",{cx:"52",cy:"118",r:"3",fill:"red"}),k.jsx("circle",{cx:"37",cy:"97",r:"3",fill:"red"}),k.jsx("circle",{cx:"54",cy:"82",r:"3",fill:"red"}),k.jsx("circle",{cx:"73",cy:"71",r:"3",fill:"red"}),k.jsx("circle",{cx:"88",cy:"75",r:"3",fill:"red"}),k.jsx("circle",{cx:"119",cy:"68",r:"3",fill:"red"}),k.jsx("circle",{cx:"159",cy:"103",r:"3",fill:"red"})]}),k.jsx("div",{className:Zp.desc,style:{textAlign:"center"},children:" But this data can't be represented well by a parabola, or any function."})]})]}),Rde=k.jsxs("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",margin:"20px 50px"},children:[k.jsx("svg",{width:"100",height:"100",viewBox:"0 0 100 100",children:k.jsx("polygon",{points:"50,10 90,90 10,90",fill:"none",stroke:"#000",strokeWidth:"2"})}),k.jsx("svg",{width:"100",height:"100",viewBox:"0 0 100 100",children:k.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#000",strokeWidth:"2"})}),k.jsx("svg",{width:"100",height:"100",viewBox:"0 0 100 100",children:k.jsx("rect",{x:"10",y:"10",width:"80",height:"80",fill:"none",stroke:"#000",strokeWidth:"2"})})]}),Ide=[{title:"What is topology?",target:".modalHolder",modal:!0,content:k.jsxs(k.Fragment,{children:[k.jsx("a",{href:"https://commons.wikimedia.org/wiki/File:Mug_and_Torus_morph.gif#/media/File:Mug_and_Torus_morph.gif",children:k.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/2/26/Mug_and_Torus_morph.gif",alt:"Mug and Torus morph.gif",height:"240",width:"240"})}),"Topology is the study of ",k.jsx("i",{children:"space in general"}),", where the properties we care about concern how a space is connected internally."]})},{title:"Next",target:".modalHolder",modal:!0,content:k.jsxs(k.Fragment,{children:[k.jsx("p",{children:"Let's begin by a comparison to a more familiar subject: geometry."}),Rde,k.jsx("div",{className:Zp.desc,style:{textAlign:"center",width:"100%",marginTop:"-20px"},children:k.jsx("i",{children:" considered by geometry, these shapes are all distinct objects."})}),k.jsx("p",{children:"In geometry, we study shapes like these and care about properties such as angles, lengths, and areas."}),k.jsxs("p",{children:["The construction of anything physical relies so intuitively on geometry that examples hardly need stating. We take for granted that building any modern structure requires observance of the angles and positions of beams, or that wheels are required to be smooth and round, or that road lengths must be measured to supply enough pavement."," "]})]})},{title:"Next",modal:!0,target:".modalHolder",content:k.jsxs(k.Fragment,{children:[k.jsx("p",{children:"However, many things that aren't physical objects also have useful geometric properties. Consider some datapoints in 2D (where each point is described by two numbers):"}),k.jsxs("p",{children:[Pde,k.jsx("p",{children:"To make predictions about data, we always want to find correlations between the variables. In particular, it is useful for one variable to be a smooth function of another. The shape of the data can tell us whether or not we can find such a function."})]})]})},{modal:!0,content:k.jsxs("div",{children:["Consider one of the earliest motivations for topology: ",k.jsx("a",{href:"https://en.wikipedia.org/wiki/Seven_Bridges_of_K%C3%B6nigsberg",children:"the Knigsberg bridges problem"}),".",k.jsx("br",{}),"The mathematician Leonhard Euler wondered whether or not it is possible to walk through the city of Knigsberg and cross each of its seven bridges exactly once.",k.jsxs("p",{children:[k.jsx("a",{href:"https://commons.wikimedia.org/wiki/File:Konigsberg_bridges.png",children:k.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/5/5d/Konigsberg_bridges.png",alt:"Konigsberg bridges",height:"238",width:"302"})}),k.jsx("br",{}),k.jsxs("div",{className:Zp.desc,children:["By Bogdan Giuc - Public domain (PD),",k.jsx("a",{href:"http://creativecommons.org/licenses/by-sa/3.0/",children:"CC BY-SA 3.0"}),",",k.jsx("a",{href:"https://commons.wikimedia.org/w/index.php?curid=112920",children:"Link"})]})]})]})}],Ode=[{title:"What is homology?",target:".modalHolder",modal:!0,content:k.jsxs(k.Fragment,{children:["Mathematicians like to be able to tell shapes apart.",k.jsx("img",{src:"tutorial/media/triangle.PNG",alt:"triangle",height:"240",width:"520"}),k.jsx("br",{}),` The trials of learning how to prove obvious things like "this figure is a triangle" were not totally for nothing, but were practice for proving things that aren't obvious. `,k.jsx("br",{}),"It may seem natural that we can tell two shapes apart by just looking at them. But this isn't always the case."]})}],Lde=[{title:"Jump in",content:k.jsxs(k.Fragment,{children:["This editor allows for the construction of ",k.jsx("a",{href:"https://en.wikipedia.org/wiki/Delta_set",children:"-complexes"})]})},{target:"body",content:"You can also skip this tutorial at any time."},{target:"body",content:"Click next to continue."}],JB=[{target:".modalHolder",modal:!0,content:`Welcome!! 
 This is an app for building  and manipulating topological spaces using -complexes, while also computing their homology groups.
            This app was built to be useful for students, educations or researchers learning about or researching algebraic topology. A guided tour is available to help you get started. Follow branches based on your interest and expertise level.`,title:"Welcome to the -complex editor!",branches:[Ide,Ode,Lde]},{target:".canvas",content:"This is the main area where you can visualize and interact with your space."},{target:".tour_mode_buttons",content:k.jsx("div",{children:"'Select from four modes to manipulate the space: Add, Select, Move, and Remove.'"})},{target:"body",content:"Choose from the following paths",branches:[[{title:"Path 1",target:"body",content:"Path 1: Basic Operations"},{target:"body",content:"Path 1.1: Advanced Features"}],[{title:"Path 2",target:"body",content:"Path 2: Customization Options"},{target:"body",content:"Path 2.1: Help and Support"}]]},{target:"body",content:k.jsx("div",{children:"'Thank you!'"})}];console.log("TutorialArray steps!");function QB(t){return t.map(e=>(e.target||(e.target=".modalHolder",e.modal=!0),"branches"in e&&(e.branches=e.branches.map(n=>Array.isArray(n)?QB(n):n)),e))}QB(JB);const ky=bde(JB);console.log("End ");Ede(ky);const kde=()=>{const{stepIndex:t,handleJoyrideCallback:e}=KB(),r=t>=0&&t<ky.length&&ky[t].modal?{transitionProperty:"none!important"}:{};return k.jsxs("div",{className:Pce.panel,children:[k.jsx("h2",{style:{textAlign:"center",marginBottom:"5em",marginTop:"0.2em",fontWeight:"bold",color:"#444"},children:"justin's -complex editor"}),k.jsx(mde,{tooltipComponent:yde,beaconComponent:_de,steps:ky,run:!0,floaterProps:{disableAnimation:!0,style:r},continuous:!0,stepIndex:t,callback:e,styles:{options:{zIndex:1e4}}})]})},gL={f:!1,a:!1,s:!1,d:!1,c:!1,"[":!1,"]":!1,i:!1},zw={f:(t,e,n)=>{console.notify("Fill","Adding a cell"),t.addCell()},a:(t,e,n)=>{e(r=>({...r,mode:"add"}))},s:(t,e,n)=>{e(r=>({...r,mode:"select"}))},w:(t,e,n)=>{t.selectAll()},d:(t,e,n)=>{t.deleteCells()},Ctrld:(t,e,n)=>{t.reset()},c:(t,e,n)=>{t.deselectAll()},"[":(t,e,n)=>{e(r=>({...r,gridHeight:r.gridHeight-1}))},"]":(t,e,n)=>{e(r=>({...r,gridHeight:r.gridHeight+.5}))},i:(t,e,n)=>{t.identify()},m:(t,e,n)=>{if(gL.m)debugger;e(r=>({...r,mode:"move"}))},t:(t,e,n)=>{if(gL.t)debugger;t.reset()},k:(t,e,n)=>{n(r=>({...r,nameState:[!0,!0,!0,!0]}))},Ctrlz:(t,e,n)=>{t.undo()},Ctrla:(t,e,n)=>{t.selectAll()},ArrowUp:(t,e,n)=>{t.shiftSelection(0,Yu,0)},ArrowDown:(t,e,n)=>{t.shiftSelection(0,-Yu,0)},ArrowLeft:(t,e,n)=>{t.shiftSelection(-Yu,0,0)},ArrowRight:(t,e,n)=>{t.shiftSelection(Yu,0,0)},",":(t,e,n)=>{console.notify("Moving back"),t.shiftSelection(0,0,-Yu)},".":(t,e,n)=>{t.shiftSelection(0,0,Yu)}},Nde=(t,e,n)=>r=>{if(r.repeat){r.preventDefault(),r.stopPropagation();return}if(console.log("Successfuly using the new keybinding system (keydown)"),r.key==="Shift"){console.warn("Shift pressed"),t(s=>({...s,mode:"move"}));return}else if(r.key==="Control"){console.warn("Control pressed");return}else(r.ctrlKey||r.shiftKey)&&r.preventDefault();console.log("Called function for ",r.key);const i=`${r.ctrlKey?"Ctrl":""}${r.shiftKey?"Shift":""}${r.key}`,o=zw==null?void 0:zw[i];o&&o(n,t,e)},Dde=(t,e,n)=>r=>{if(console.log("Successfuly using the new keybinding system (keyup)"),r.repeat){r.preventDefault(),r.stopPropagation();return}r.key==="Shift"&&t(i=>({...i,mode:"select"})),r.key},Ude=(t,e,n,r)=>{R.useEffect(()=>{const i=s=>{r&&Nde(t,e,n)(s)},o=s=>{r&&Dde(t)(s)};return window.addEventListener("keydown",i),window.addEventListener("keyup",o),()=>{window.removeEventListener("keydown",i),window.removeEventListener("keyup",o)}},[t,e,n,r])};function Fde(){const[t,e]=R.useState(!0),[n,r]=R.useState({mode:"select",selectionKey:"index",gridHeight:0,isMouseDown:!1,dimSelected:-1}),[i,o]=R.useState({nameState:[!0,!0,!0,!0]}),[s,a]=R.useState(Ple),[l,c]=hce();R.useEffect(()=>{c.reset(),UO(c)},[UO]);const{mode:u,selectionKey:d}=n,{nameState:p}=i,{selectedKeys:m,complex:g}=l;return Ude(r,o,c,t),k.jsx(ij,{theme:sm,children:k.jsxs(gde,{children:[k.jsx(fce,{}),k.jsx(pce,{}),k.jsx(qz,{children:k.jsxs("div",{className:"board",children:[k.jsx("div",{className:"modalHolder"}),k.jsxs("div",{className:Mr.panelHolder,children:[k.jsx(kde,{}),k.jsx("button",{className:Mr.button,style:{height:"40px",color:"#555"},onClick:()=>e(!t),children:t?"toggle demo mode":"View"}),k.jsxs("div",{className:Mr.upperPanel,style:{display:"flex",flexDirection:"row"},children:[k.jsx(sce,{setPreset:a}),k.jsx(Fj,{complexEditor:c,setEditOptions:r,editOptions:n,setViewOptions:o,viewOptions:{nameState:p},editorState:l}),k.jsx(Ale,{selectionKey:d,complex:g,selectedKeys:m,selectRep:c.selectRep,unselectRep:c.toggleRepSelection})]}),k.jsx("div",{className:Mr.lowerPanel,children:k.jsx(Qle,{complex:g})},"COMPLEX")]}),k.jsxs("div",{className:"centerHolder",children:[k.jsx(vce,{complexEditor:c,editorState:l}),k.jsx(jae,{allowEditing:t,viewOptions:i,editOptions:n,editComplex:c,complex:g,selectedReps:m}),k.jsxs("div",{className:Mr.keybinds,children:[k.jsx("div",{className:Mr.keybindLabel,children:" a: add cell "}),k.jsx("div",{className:Mr.keybindLabel,children:" s: select "}),k.jsx("div",{className:Mr.keybindLabel,children:" m: move "}),k.jsx("div",{className:Mr.keybindLabel,children:" t: trash "}),k.jsx("div",{className:Mr.keybindLabel,children:" d: delete "}),k.jsx("div",{className:Mr.keybindLabel,children:" f: fill "})]}),k.jsxs("div",{className:Mr.keybinds,children:[k.jsx("div",{className:Mr.keybindLabel,children:" i: identify "}),k.jsx("div",{className:Mr.keybindLabel,children:" ctrl-z: undo "}),k.jsx("div",{className:Mr.keybindLabel,children:" ctrl-a: select all "}),k.jsx("div",{className:Mr.keybindLabel,children:" ctrl-d: deselect all "}),k.jsx("div",{className:Mr.keybindLabel,children:" c: select none"})]})]})]})})]})})}DM(document.getElementById("root")).render(k.jsx(R.Fragment,{children:k.jsx(Fde,{})}));
